/*
 GeneXus 15.0.3.111946*/
(function(f,c){if("object"===typeof exports&&exports)c(exports);else{var j={};c(j);"function"===typeof define&&define.amd?define(j):f.Mustache=j}})(this,function(f){function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function j(a){this.tail=this.string=a;this.pos=0}function b(a,d){this.view=a||{};this.parent=d;this._cache={}}function a(){this.clearCache()}function d(a,b,k,g){for(var c="",j,o,l=0,p=a.length;l<p;++l)switch(j=a[l],o=j[1],j[0]){case "#":o=k.lookup(o);if("object"===typeof o)if(s(o))for(var m=
0,r=o.length;m<r;++m)c+=d(j[4],b,k.push(o[m]),g);else o&&(c+=d(j[4],b,k.push(o),g));else"function"===typeof o?(j=null==g?null:g.slice(j[3],j[5]),o=o.call(k.view,j,function(a){return b.render(a,k)}),null!=o&&(c+=o)):o&&(c+=d(j[4],b,k,g));break;case "^":o=k.lookup(o);if(!o||s(o)&&0===o.length)c+=d(j[4],b,k,g);break;case ">":o=b.getPartial(o);"function"===typeof o&&(c+=o(k));break;case "&":o=k.lookup(o);null!=o&&(c+=o);break;case "name":o=k.lookup(o);null!=o&&(c+=f.escape(o));break;case "text":c+=o}return c}
function k(a){return[RegExp(c(a[0])+"\\s*"),RegExp("\\s*"+c(a[1]))]}var g=/\s*/,o=/\s+/,l=/\S/,m=/\s*=/,n=/\s*\}/,p=/#|\^|\/|>|\{|&|=|!/,q=RegExp.prototype.test,u=Object.prototype.toString,s=Array.isArray||function(a){return"[object Array]"===u.call(a)},r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};j.prototype.eos=function(){return""===this.tail};j.prototype.scan=function(a){return(a=this.tail.match(a))&&0===a.index?(this.tail=this.tail.substring(a[0].length),this.pos+=
a[0].length,a[0]):""};j.prototype.scanUntil=function(a){var d=this.tail.search(a);switch(d){case -1:a=this.tail;this.pos+=this.tail.length;this.tail="";break;case 0:a="";break;default:a=this.tail.substring(0,d),this.tail=this.tail.substring(d),this.pos+=d}return a};b.make=function(a){return a instanceof b?a:new b(a)};b.prototype.push=function(a){return new b(a,this)};b.prototype.lookup=function(a){var d=this._cache[a];if(!d){if("."==a)d=this.view;else for(var b=this;b;){if(0<a.indexOf("."))for(var d=
b.view,k=a.split("."),g=0;d&&g<k.length;)d=d[k[g++]];else d=b.view[a];if(null!=d)break;b=b.parent}this._cache[a]=d}"function"===typeof d&&(d=d.call(this.view));return d};a.prototype.clearCache=function(){this._cache={};this._partialCache={}};a.prototype.compile=function(a,d){var b=this._cache[a];b||(b=f.parse(a,d),b=this._cache[a]=this.compileTokens(b,a));return b};a.prototype.compilePartial=function(a,d,b){d=this.compile(d,b);return this._partialCache[a]=d};a.prototype.getPartial=function(a){!(a in
this._partialCache)&&this._loadPartial&&this.compilePartial(a,this._loadPartial(a));return this._partialCache[a]};a.prototype.compileTokens=function(a,k){var g=this;return function(c,f){if(f)if("function"===typeof f)g._loadPartial=f;else for(var j in f)g.compilePartial(j,f[j]);return d(a,g,b.make(c),k)}};a.prototype.render=function(a,d,b){return this.compile(a)(d,b)};f.name="mustache.js";f.version="0.7.2";f.tags=["{{","}}"];f.Scanner=j;f.Context=b;f.Writer=a;f.parse=function(a,d){a=a||"";d=d||f.tags;
"string"===typeof d&&(d=d.split(o));if(2!==d.length)throw Error("Invalid tags: "+d.join(", "));for(var b=k(d),s=new j(a),r=[],x=[],u=[],w=!1,t=!1,E,B,F,J;!s.eos();){E=s.pos;if(F=s.scanUntil(b[0])){J=0;for(var M=F.length;J<M;++J)if(B=F.charAt(J),q.call(l,B)?t=!0:u.push(x.length),x.push(["text",B,E,E+1]),E+=1,"\n"==B){if(w&&!t)for(;u.length;)delete x[u.pop()];else u=[];t=w=!1}}if(!s.scan(b[0]))break;w=!0;B=s.scan(p)||"name";s.scan(g);"="===B?(F=s.scanUntil(m),s.scan(m),s.scanUntil(b[1])):"{"===B?(F=
s.scanUntil(RegExp("\\s*"+c("}"+d[1]))),s.scan(n),s.scanUntil(b[1]),B="&"):F=s.scanUntil(b[1]);if(!s.scan(b[1]))throw Error("Unclosed tag at "+s.pos);J=[B,F,E,s.pos];x.push(J);if("#"===B||"^"===B)r.push(J);else if("/"===B){if(0===r.length)throw Error('Unopened section "'+F+'" at '+E);B=r.pop();if(B[1]!==F)throw Error('Unclosed section "'+B[1]+'" at '+E);}else if("name"===B||"{"===B||"&"===B)t=!0;else if("="===B){d=F.split(o);if(2!==d.length)throw Error("Invalid tags at "+E+": "+d.join(", "));b=k(d)}}if(B=
r.pop())throw Error('Unclosed section "'+B[1]+'" at '+s.pos);for(var b=x,s=[],L,x=0,u=b.length;x<u;++x)if(r=b[x])"text"===r[0]&&L&&"text"===L[0]?(L[1]+=r[1],L[3]=r[3]):(L=r,s.push(r));L=s;s=b=[];r=[];u=0;for(w=L.length;u<w;++u)switch(x=L[u],x[0]){case "#":case "^":r.push(x);s.push(x);s=x[4]=[];break;case "/":r.pop()[5]=x[2];s=0<r.length?r[r.length-1][4]:b;break;default:s.push(x)}return b};f.escape=function(a){return(""+a).replace(/[&<>"'\/]/g,function(a){return r[a]})};var t=new a;f.clearCache=function(){return t.clearCache()};
f.compile=function(a,d){return t.compile(a,d)};f.compilePartial=function(a,d,b){return t.compilePartial(a,d,b)};f.compileTokens=function(a,d){return t.compileTokens(a,d)};f.render=function(a,d,b){return t.render(a,d,b)};f.to_html=function(a,d,b,k){a=f.render(a,d,b);if("function"===typeof k)k(a);else return a}});
var gx=function(f){var c=/^(?:gx\.O\.)(.+)$/,j=/^(?:.+)?\((?:gx\.O\.)([a-zA-Z0-9_]+)(?:,)?(?:.*)\)$/,b=function(){return!1};return{$:f.noConflict(),O:null,pO:null,languageCode:"eng",dateFormat:"MDY",timeFormat:12,blankWhenEmpty:!1,centuryFirstYear:40,decimalPoint:".",thousandSeparator:",",staticDirectory:"/",basePath:"",datepickerImage:null,clientImages:{},blankImage:null,ascImage:null,descImage:null,expandImage:null,collapseImage:null,downloadImage:null,indicatorImage:null,resizeImage:null,msg:{},
NULL_TIMEZONEOFFSET:0,emptyFn:function(){},falseFn:b,trueFn:function(){return!0},define:function(a,d,b){for(var g=0,c=window||this,a=a.split("."),f=a.length,g=0;g<f-1;g++)"undefined"==typeof c[a[g]]&&(c[a[g]]={}),c=c[a[g]];c[a[f-1]]=b;d||(c[a[f-1]].prototype=new gx.GxObject)},setParentObj:function(a){gx.pO=a;gx.O=gx.pO;gx.AjaxSecurity=gx.pO.AjaxSecurity;gx.OnSessionTimeout=gx.pO.OnSessionTimeout},createParentObj:function(a){var d;gx.spa.started||(a instanceof gx.GxObject||(d=new a),d&&this.setParentObj(d));
return d},setExecutableComponent:function(a){gx.fx.obs.addObserver("gx.onready",this,function(){null==gx.pO&&(gx.setParentObj(gx.createComponent(a,"")),gx.fn.objectOnload(void 0,!0))},{single:!0})},setMasterPage:function(a){null!=gx.pO&&(gx.pO.MasterPage=a)},createMasterPage:function(a){var d;gx.spa.started||(a instanceof gx.GxObject||(d=new a),d&&this.setMasterPage(d));return d},addComponent:function(a,d){null!=gx.pO&&gx.pO.setWebComponent(a,d)},createComponent:function(a,d,b){var g=null,c,a=gx.lang.getType(a);
null!=a&&(a.prototype=new gx.GxObject,c=gx.csv.cmpCtx,gx.csv.cmpCtx=d,g=new a(d),b&&g.setContainer(b),gx.csv.cmpCtx=c,g.serviceUrl=gx.fn.getControlValue(g.CmpContext+"_CMPPGM"));return g},getObj:function(a,d){return""==a?!0==d?gx.pO.MasterPage:gx.pO:gx.pO.getWebComponent(a)},setGxObyCtx:function(a,d){var b;void 0!=a&&(b=gx.getObj(a,d))&&gx.setGxO(a,d);return gx.O},setGxO:function(){var a,d;1==arguments.length&&"object"==typeof arguments[0]?(a=arguments[0].CmpContext,gx.O=arguments[0]):(a=arguments[0],
d=arguments[1],gx.O=this.getObj(a,d)||gx.pO);gx.csv.cmpCtx=a;return gx.O},setVar:function(a,d){gx.O.setVariable(a,d)},getVar:function(a){return gx.O.getVariable(a)},prefixVar:function(a){return"gx.O."+a},unprefixVar:function(a){var d=c,d=d.exec(a);null!=d&&d[1]?a=d[1]:(d=j,d=d.exec(a),null!=d&&d[1]&&(a=d[1]));return a},getMessage:function(a){return void 0==gx.msg[a]?a:gx.msg[a]},setLanguageCode:function(a){gx.languageCode=a},setDateFormat:function(a){gx.dateFormat=a},setTimeFormat:function(a){gx.timeFormat=
a},setCenturyFirstYear:function(a){gx.centuryFirstYear=a},setBlankWhenEmptyDate:function(a){gx.blankWhenEmpty=a},setDecimalPoint:function(a){gx.decimalPoint=a},setThousandSeparator:function(a){gx.thousandSeparator=a},setStaticDirectory:function(a){gx.staticDirectory=a;if(""==gx.staticDirectory)gx.staticDirectory="/";else{var d=gx.staticDirectory.length,a="/"!=gx.staticDirectory.charAt(0),d="/"!=gx.staticDirectory.charAt(d-1);gx.staticDirectory=(a?"/":"")+gx.staticDirectory+(d?"/":"")}},getThemeElement:function(){return gx.dom.byId("gxtheme_css_reference")},
updateTheme:function(){var a=gx.fn.getHidden("GX_THEME");if(a&&a!=this.theme&&(this.theme=a,(a=gx.getThemeElement())&&0>a.href.search(this.theme+".css")))a.href=a.href.replace(/[^/]*.css/,this.theme+".css")},setTheme:function(a){var d=gx.util.browser,b=d.isIE(),d=d.ieVersion(),g=gx.dom.fixes;this.theme=gx.fn.getHidden("GX_THEME");this.theme||(this.theme="");try{gx.HTML5&&g.html5(a);if(void 0===a){b&&(f(document.documentElement).addClass("ie"),f(document.documentElement).addClass("ie"+d),gx.runtimeTemplates&&
!Modernizr.flexbox&&f(document.documentElement).addClass("gx-align-fallback"));if(b&&10==d){var c=document.createElement("style");c.innerHTML="input::-ms-clear {display: none;}";document.body.appendChild(c)}g.setPopupMinWidth()}g.fixTableResets(a)}catch(j){gx.dbg.logEx(j,"gxapi.js","setTheme")}},SetOld:function(a,d,b){var g=d,a=gx.fn.controlGridId(a);0<a&&(g=d+"_"+gx.fn.currentGridRow(a));gx.fn.setHidden(g,gx.getVar(b))},Old:function(a,d){try{var b=d,g=gx.fn.controlGridId(a);0<g&&(b=d+"_"+gx.fn.currentGridRow(g));
var c=gx.fn.getHidden(b);"undefined"==typeof c&&""!=gx.O.CmpContext&&(c=gx.fn.getHidden(gx.O.CmpContext+b));return c}catch(f){gx.dbg.logEx(f,"gxapi.js","Old")}return""},OldInteger:function(a,d){var b=parseInt(gx.Old(a,d),10);return isNaN(b)?0:b},OldDecimal:function(a,d){var b=gx.num.parseFloat(gx.Old(a,d),gx.thousandSeparator,gx.decimalPoint);return isNaN(b)?0:b},OldDate:function(a,d){return(new gx.date.gxdate(gx.Old(a,d),"Y4MD")).getStringWithFmt(gx.dateFormat)},OldDateTime:function(a,d){var b=new gx.date.gxdate(gx.Old(a,
d),"Y4MD");return b.getStringWithFmt(gx.dateFormat)+" "+b.getTimeString(!0,!0)},typedOld:function(a,d,b){switch(b){case "int":return this.OldInteger(a,d);case "decimal":return this.OldDecimal(a,d,!0);case "date":return this.OldDate(a,d);case "dtime":return this.OldDateTime(a,d);default:return this.Old(a,d)}},isInputEnabled:function(a){return a&&gx.evt.lastEvt==a?!0:!(gx.evt.processing&&!gx.csv.validating||gx.spa.isNavigating())},types:{numeric:0,character:1,date:2,dateTime:3,blob:4,varChar:5,longVarChar:6,
bool:7,geolocation:8},domains:{url:"Url",email:"Email",phone:"Phone",address:"Address",geolocation:"Geolocation",component:"Component",feed:"Feed"},gen:{net:!1,isDotNet:function(){return this.net},isRuby:b,isJava:function(){return!this.net}},dom:{_form:null,_avoidLeaksDiv:null,id:function(a){return void 0==a.id||""==a.id?a.name:a.id},byId:function(a,d){d=d||document;return d.getElementById(a)},byName:function(a){return a?document.getElementsByName(a):[]},byTag:function(a,d){d=d||document;return d.getElementsByTagName(a)},
byClass:function(a,d,b){return f((d||"")+"."+a,b).toArray()},bySelector:function(a){return f(a).toArray()},el:function(a){if(a){if("object"==typeof a&&a.tagName)return a;var d=this.byId(a);if(null!=d)return d;d=this.byId("span_"+a);if(null!=d)return d;d=this.byName(a);return null!=d&&0<d.length?d[0]:null}return null},hasAttribute:function(a,d){return a.hasAttribute?a.hasAttribute(d):void 0!==a[d]},hasClass:function(a,d){var b=gx.dom.el(a);if(b)return d&&-1!=(" "+b.className+" ").indexOf(" "+d+" ")},
addPrefixClass:function(a,d){if(a){var b=f(a);a.className&&!b.attr("data-gx-unprefixed-class")&&(b.attr("data-gx-unprefixed-class",a.className),b=a.className.split(" "),b.splice(0,0,""),a.className+=b.join(" "+d))}},removePrefixClass:function(a,d){if(a){var b=f(a);if(0<=a.className.search(RegExp("(^|\\s)"+d))){var g=b.attr("data-gx-unprefixed-class");b.removeAttr("data-gx-unprefixed-class");a.className=g||a.className.substring(d.length)}}},addClass:function(a,d){var b=gx.dom.el(a);b&&(d&&!this.hasClass(a,
d))&&(b.className=b.className+(b.className?" ":"")+d)},classReCache:{},removeClass:function(a,d){var b=gx.dom.el(a);if(b&&this.hasClass(a,d)){var g=this.classReCache[d];g||(g=RegExp("(?:^|\\s+)"+d+"(?:\\s+|$)","g"),this.classReCache[d]=g);b.className=b.className.replace(g," ")}},hasTransition:function(a){if(a&&Modernizr.csstransitions){var d=gx.util.browser,b="transitionDuration";d.isIE()&&(b="msTransitionDuration");d.isWebkit()?b="webkitTransitionDuration":d.isFirefox()?b="MozTransitionDuration":
d.isOpera()&&(b="OTransitionDuration");a=parseFloat(gx.dom.getComputedStyle(a)[b],10);return 0!==a&&!isNaN(a)}return!1},hasAnimation:function(a){if(a&&Modernizr.csstransitions){var d=gx.util.browser,b="animationName";d.isIE()&&(b="msAnimationName");d.isWebkit()?b="webkitAnimationName":d.isFirefox()?b="MozAnimationName":d.isOpera()&&(b="OAnimationName");return(a=gx.dom.getComputedStyle(a)[b])&&"none"!=a}return!1},isMultimediaElement:function(a){return"SPAN"==a.tagName&&(gx.dom.hasClass(a,"gx-video-placeholder")||
gx.dom.hasClass(a,"gx-audio-placeholder"))},purgeElement:function(a,d){var b=d||a.attributes,g,c,f;if(b){c=b.length;for(g=0;g<c;g+=1)f=b[g].name||b[g],"function"===typeof a[f]&&(a[f]=null)}},purge:function(a,d){d||this.purgeElement(a);var b=a.childNodes;if(b)for(var g=0,c=b.length;g<c;g++)gx.dom.purge(b[g],!1)},shouldPurge:function(){return gx.purgeElements&&gx.util.browser.isIE()&&8>=gx.util.browser.ieVersion()},form:function(){null==this._form&&(this._form=document.forms.MAINFORM,this._form||(this._form=
document.forms[0]));return this._form},indexElements:function(){if(!document.all)for(var a=this.form().elements,d=a.length,b=0;b<d;b++)a[b].gxIndex=b},setAttribute:function(a,d,b){var g=function(){try{var g=gx.dom.byName(a);if(null!=g&&0<g.length)for(var c=g.length,f=0;f<c;f++)g[f].setAttribute(d,b);else f=gx.dom.byId(a),null!=f&&f.setAttribute(d,b)}catch(j){gx.dbg.logEx(j,"gxapi.js","setAttribute")}};"loading"==document.gxReadyState?gx.fx.obs.addObserver("gx.onload",this,g,{single:!0}):g.apply(this)},
createInput:function(a,d){var b=document.createElement("input");b.type=d;b.id=a;b.name=a;gx.dom.form().appendChild(b);return b},hasSelectedFile:function(){var a=f('input[type="file"]'),d=a.length;if(!d)return!1;for(var b=0;b<d;b++)if(!gx.lang.emptyObject(a[b].value))return!0;return!1},hasSubmitControl:function(){var a=this.byTag("input"),d=a.length;if(!d)return!1;for(var b=0;b<d;b++){var g=a[b].getAttribute("type");if("submit"==g||"image"==g)return!0}return!1},scripts:function(){var a=document.scripts;
a||(a=document.getElementsByTagName("script"));if("undefined"!=typeof a){for(var d=[],b=a.length,g=0;g<b;g++){var c=a[g].attributes.src;c&&c.value&&(c=c.value,"//:"!=c&&d.push(c))}return d}return[]},styles:function(){var a=document.styleSheets;if("undefined"!=typeof a){for(var d=[],b=a.length,g=0;g<b;g++){var c=a[g].href;gx.lang.emptyObject(c)||d.push(c)}return d}return[]},getComputedStyle:function(a){try{return"#document"==a.nodeName?null:"function"==typeof window.getComputedStyle?window.getComputedStyle(a):
"undefined"!=typeof a.currentStyle?a.currentStyle:a.style}catch(d){return gx.dbg.logEx(d,"gxapi.js","getComputedStyle"),null}},getStyle:function(a,d){var b="";try{var b="function"==typeof window.getComputedStyle?window.getComputedStyle(a,null)[d]:"undefined"!=typeof a.currentStyle?a.currentStyle[d]:a.style[d],g=parseInt(b);isNaN(g)||(b=g)}catch(c){gx.dbg.logEx(c,"gxapi.js","getStyle")}return b},CSS_URL_REGEXP:/url\(["\']?(?!(?:https?:|\/))([^"\)]+)["\']?\)/ig,CSS_BASE_URL_REGEXP:/(.+\/)[^\/]+$/ig,
cssRules:null,cacheStyleSheet:function(a,d){var b,g=a.href?a.href.replace(this.CSS_BASE_URL_REGEXP,"$1"):document.location.href,c;this.cssRules||(this.cssRules=[]);try{if(c=a.cssRules||a.rules)for(var f=0,j=c.length;f<j;f++)b=c[f].cssText,d&&(b=b.replace(this.CSS_URL_REGEXP,'url("'+g+'$1")')),this.cssRules.push(b)}catch(n){}},getCssRules:function(a,d){var b=document.styleSheets;if(null===this.cssRules||a){this.cssRules=[];for(var g=0,c=b.length;g<c;g++)try{b[g].disabled||this.cacheStyleSheet(b[g],
d)}catch(f){}}return this.cssRules},setStyleElement:function(a,d,b){try{a.innerHTML=(b?a.innerHTML:"")+d}catch(g){a.styleSheet.cssText=(b?a.styleSheet.cssText:"")+d}},isButton:function(a){return void 0!=a&&null!=a?"submit"==a.type||"button"==a.type:!1},isRadio:function(a){return a&&"INPUT"==a.tagName&&"radio"==a.type},editControls:{text:!0,password:!0,color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,number:!0,search:!0,url:!0,tel:!0},isEditControl:function(a){return a&&"INPUT"==a.tagName?
this.editControls[a.type]||!1:!1},isDateControl:function(a){return"date"==a.type||"datetime"==a.type||"datetime-local"==a.type},isButtonLike:function(a){return this.isButton(a)?!0:void 0!=a&&null!=a?"INPUT"==a.nodeName&&("image"==a.type||"checkbox"==a.type)&&"function"==typeof a.onclick:!1},iFrameDoc:function(a){try{if(a.contentDocument)return a.contentDocument;if(a.contentWindow)return a.contentWindow.document}catch(d){}return null},forEachChild:function(a,d,b){if(a&&a.childNodes&&"function"==typeof b)for(var g=
a.childNodes.length,c=0;c<g&&!1!==b.call(d,a.childNodes[c]);c++);},isTextWithLink:function(a){return null!=a&&"A"==a.tagName&&(a.childNodes&&0<a.childNodes.length)&&this.innerChildIsText(a.firstChild)?!0:!1},isChildNode:function(a,d){a.frameElement&&(a=a.frameElement);if(a==d)return!0;for(;a.parentNode;){if(a==d||a.parentNode==d)return!0;a=a.parentNode}return!1},NodeLevel:function(a){for(var d=0;a.parentNode;)(a.id||a.name)&&d++,a=a.parentNode;return d},findParentByTagName:function(a,d,b){a=a.parentNode;
d=d.toUpperCase();for(i=0;a&&!(b&&i==b);){i++;if(a.tagName==d)return a;a=a.parentNode}},innerChildIsText:function(a){for(;null!=a;){if(a.nodeName&&"#text"==a.nodeName)return!0;a=a.firstChild}return!1},allChildrenAreText:function(a){for(a=a.firstChild;a;){if("#text"!=a.nodeName)return!1;a=a.nextSibling}return!0},position:function(a){a=f(a).offset();return{x:Math.floor(a.left),y:Math.floor(a.top)}},dimensions:function(a){a=f(a);return{w:a.outerWidth(),h:a.outerHeight()}},windowDimensions:function(a){var d=
a.documentElement,b=a.body;if(d&&d.scrollHeight){var a=Math.max(d.scrollHeight,b.scrollHeight),g=Math.max(d.scrollWidth,b.scrollWidth),c=Math.max(d.clientHeight,b.clientHeight),d=Math.max(d.clientWidth,b.clientWidth);return{scrollWidth:g,scrollHeight:a,clientHeight:c,clientWidth:d}}return{scrollWidth:b.scrollWidth,scrollHeight:b.scrollHeight,clientHeight:b.clientHeight,clientWidth:b.clientWidth}},documentScroll:function(a){a=a||document;return{scrollTop:a.documentElement.scrollTop||a.body.scrollTop,
scrollLeft:a.documentElement.scrollLeft||a.body.scrollLeft}},documentScrollable:function(a){var a=a||document,d={x:!1,y:!1},a=gx.dom.windowDimensions(a);a.scrollHeight>a.clientHeight&&(d.x=!0);a.scrollWidth>a.clientWidth&&(d.x=!0);return d},autofitIFrame:function(a){var a=gx.evt.source(window.event||a),d=window.frames[a.name].document;if(d&&!(""!=a.width||""!=a.height)){var b=gx.dom.windowDimensions(d),d=b.scrollWidth?b.scrollWidth+10:null,b=b.scrollHeight?b.scrollHeight+10:null;d&&b&&(a.style.width=
d+"px",a.style.height=b+"px")}},fitToParent:function(a){if(!gx.util.browser.isIE()&&a&&a.childNodes){for(var d=null,b=a.childNodes.length,g=0;g<b;g++){var c=a.childNodes[g];if("TABLE"==c.nodeName){d=c;break}}if(null!=d&&(-1!=d.style.width.indexOf("%")&&(a.style.width=gx.dom.addUnits(d.style.width)),-1!=d.style.height.indexOf("%")))a.style.height=gx.dom.addUnits(d.style.height)}},redrawControl:function(a){!gx.util.browser.isIE()||6<=gx.util.browser.ieVersion()?gx.html.setOuterHtml(a,a.outerHTML):setTimeout(function(){gx.html.setOuterHtml(a,
a.outerHTML)},100)},setCaretPosition:function(a,d){if(null!=a)if(a.createTextRange){var b=a.createTextRange();b.move("character",d);b.select()}else a.selectionStart?(a.focus(),a.setSelectionRange(d,d)):a.focus()},replaceAtCaretPosition:function(a,d){var b=a.selectionStart,g=a.selectionEnd;document.selection?(b=document.selection.createRange().getBookmark(),a.selection=a.createTextRange(),a.selection.moveToBookmark(b),a.selectLeft=a.createTextRange(),a.selectLeft.collapse(!0),a.selectLeft.setEndPoint("EndToStart",
a.selection),b=a.selectLeft.text.length+1,g=a.selectLeft.text.length+(0==a.selection.text.length?1:a.selection.text.length)):(b=a.selectionStart,g=a.selectionEnd);a.setRangeText?a.setRangeText(d,b,g,"end"):(a.value=a.value.substr(0,b)+d+a.value.substr(b,a.value.length),gx.dom.setCaretPosition(a,b+d.length))},spanValue:function(a){var d=a.nodeValue;gx.lang.emptyObject(d)&&(d=a.innerText||a.textContent);gx.lang.emptyObject(d)&&(d="");return d},removeControlSafe:function(a){this._avoidLeaksDiv||(this._avoidLeaksDiv=
document.createElement("DIV"),this._avoidLeaksDiv.style.display="none",document.body.appendChild(this._avoidLeaksDiv));this._avoidLeaksDiv.appendChild(a);gx.dom.shouldPurge()&&gx.dom.purge(this._avoidLeaksDiv);this._avoidLeaksDiv.innerHTML=""},removeControl:function(a){if(null==document.createRange)a.removeNode(!0);else{var d=document.createRange();a&&(d.selectNode(a),d.deleteContents())}},comboBoxToObj:function(a,d){try{var b={s:"",v:[]};if(!a)return b;if("SELECT"==a.tagName){b.s=a.value;for(var g=
a.options.length,c=0;c<g;c++){var j=f(a.options[c]);b.v.push([j.val(),j.text()])}}else"SPAN"==a.tagName&&(b.v.push([d,d]),b.s=d);return b}catch(m){gx.dbg.logEx(m,"gxapi.js","comboBoxToObj")}return null},unitPattern:/\d+(px|em|%|en|ex|pt|in|cm|mm|pc|s|ch|rem|vh|vw|vmin|vmax|q)$/i,addUnits:function(a,d){return""===a||"auto"==a?a:void 0===a?"":"number"==typeof a||!this.unitPattern.test(a)?a+(d||"px"):a},getActiveElement:function(){var a=null;try{a=document.activeElement}catch(d){}return a},getCaretOffset:function(a){return a&&
"INPUT"==a.tagName&&"text"==a.type&&a.selectionStart?{s:a.selectionStart,e:a.selectionEnd}:{s:0,e:0}},setCaretOffset:function(a,d){a&&("INPUT"==a.tagName&&"text"==a.type&&a.setSelectionRange)&&a.setSelectionRange(d.s,d.e)},write:function(a,d){d=d||document;d.write(a)},writeError:function(a,d,b,g){g=g||document;g.head.innerHTML="";g.body.innerHTML="";var c=g.createElement("h1");c.appendChild(document.createTextNode(d));g.body.appendChild(c);b&&(c=g.createElement("h2"),c.appendChild(document.createTextNode("( "+
b.toString()+" )")),g.body.appendChild(c));gx.dbg.write(a)},MASK_CLASS:"gx-mask",UNMASK_CLASS:"gx-unmask",MASK_RELATIVE_CLASS:"gx-masked-relative",MASKED_CLASS:"gx-masked",mask:function(a){a=this.el(a);if(!this.hasClass(a,this.MASK_RELATIVE_CLASS)){var d,b=gx.util.browser,g=b.ieVersion(),c=6==g||b.isIE&&b.isCompatMode(),j=!!a.style.setExpression;(!f(a).is("body")||"static"!=this.getComputedStyle(a).position)&&this.addClass(a,this.MASK_RELATIVE_CLASS);d=document.createElement("div");d.className=this.MASK_CLASS;
a.appendChild(d);this.addClass(a,this.MASKED_CLASS);if(c&&j)try{d.style.setExpression("height","this.parentNode."+(a==document.body?"scrollHeight":"offsetHeight")+' + "px"')}catch(m){}else if(a=this.getComputedStyle(a).height,b.isIE&&(7!=b.ieVersion||b.isCompatMode())&&"auto"==a)d.style.height=a;if(b.isIE()&&(7>=g||b.isCompatMode()))f(d),(b=this.getComputedStyle(d).opacity)&&f(d).css("opacity",b);return d}},unmask:function(a){for(var a=this.el(a),d,b=0,g=a.childNodes.length;b<g;b++)if("DIV"==a.childNodes[b].tagName&&
this.hasClass(a.childNodes[b],this.MASK_CLASS)){d=a.childNodes[b];break}d&&!d.removed?(d.removed=!0,d.style.clearExpression&&(d.style.clearExpression("width"),d.style.clearExpression("height")),this.removeClass(a,this.MASKED_CLASS),b=gx.dom.hasTransition(d)?gx.dom.TRANSITION_END_EVENT:gx.dom.hasAnimation(d)?gx.dom.ANIMATION_END_EVENT:!1,g=function(){d.parentNode==a&&a.removeChild(d);gx.dom.removeClass(a,this.MASK_RELATIVE_CLASS)}.closure(this),b?gx.evt.attach(d,b,g,!1,{single:!0,useCapture:!0,timeout:300}):
g(),this.addClass(d,this.UNMASK_CLASS)):(this.removeClass(a,this.MASKED_CLASS),this.removeClass(a,this.MASK_RELATIVE_CLASS))},replaceWithFx:function(a,d,b){var b=b||{},g=b.enteringClass||"entering",c=b.leavingClass||"leaving",f=b.enterDurationClass||"enter-fx-duration",j=b.leaveDurationClass||"leave-fx-duration",n=b.transitioningClass||"transitioning",p=b.transitionTimeout||1500,q=function(a){return 0<a.childNodes.length&&(gx.dom.hasAnimation(a)||gx.dom.hasTransition(a))&&!gx.dom.hasClass(a.parentNode,
n)},u=function(a){return gx.dom.hasAnimation(a)?gx.dom.ANIMATION_END_EVENT:gx.dom.hasTransition(a)?gx.dom.TRANSITION_END_EVENT:!1};"BODY"==a.tagName&&(gx.dom.addClass(a,a.className+"-fx"),a.style.position="static");"BODY"==d.tagName&&gx.dom.addClass(d,d.className+"-fx");var s=a.parentNode,r=q(a),t=q(d);useParallelFx="BODY"!=a.tagName;if(r||t){var q=document.createElement("iframe"),v=document.createElement("div"),y,z,C=this.getComputedStyle(a),D=C.width,C=C.height,x,H,w=u(a),A=u(d),E,B,F,J,M,L=0,u=
0;gx.dom.addClass(s,n);if("BODY"!=a.tagName&&"BODY"!=d.tagName)if(r){q.setAttribute("scrolling","no");q.setAttribute("frameborder","0");q.style.width=gx.dom.addUnits(window.innerWidth);q.style.height=gx.dom.addUnits(window.innerHeight);q.style.display="none";v.appendChild(q);v.style.width=D;v.style.height=C;v.style.overflow="hidden";gx.spa.dettachContent(a);a.insertBefore(v,a.firstChild);v=q.contentDocument;try{v.open(),v.write(this.getDocTypeDeclaration(document)),v.write("<html>"),v.write("<head></head>"),
v.write("<body><div></div></body>"),v.write("</html>"),v.close()}catch(W){gx.dbg.logEx(W,"gxapi.js","replaceWithFx"),y=v.createElement("div"),v.body.appendChild(y)}v.documentElement&&(v.documentElement.className="gx-fx-iframe");v.body.style.margin="0";v.body.className=gx.dom.form().className;v.head.appendChild(document.createElement("style"));y=v.styleSheets[0];z=gx.dom.getCssRules(!0,!0);x=0;for(H=z.length;x<H;x++)try{y.insertRule(z[x],u),u++}catch(V){gx.dbg.write("Warning: CSS Stylesheet rule not loaded:"+
z[x])}v.body.firstChild.style.width=D;for(v.body.firstChild.style.height=C;a.childNodes[1];)v.body.firstChild.appendChild(a.childNodes[1]);q.style.display="block"}else t&&(a.style.display="none");gx.dom.addClass(d,g);gx.dom.addClass(d,f);gx.dom.addClass(a,j);!1!==b.domAdd&&s.appendChild(d);j=function(){F=function(){if(L===2){gx.dom.removeClass(s,n);if(useParallelFx){b.transitionEndCallback&&(d=b.transitionEndCallback(a,d));b.domRemove!==false&&a.parentNode==s&&s.removeChild(a)}gx.dom.removeClass(d,
f)}else if(!useParallelFx){b.transitionEndCallback&&(d=b.transitionEndCallback(a,d));gx.dom.removeClass(d,g);t&&(M=setTimeout(B,p))}};if(r){E=function(){clearTimeout(J);L++;b.leavingTransCallback&&b.leavingTransCallback(a,d);F()};gx.evt.attach(a,w,E,false,{single:true,useCapture:true})}else{L++;F()}if(t){B=function(){if(L>=2)gx.evt.detach(d,A,B);else{clearTimeout(M);L++;b.enteringTransCallback&&b.enteringTransCallback(a,d);F()}};gx.evt.attach(d,A,B,false,{single:true,useCapture:true})}else{L++;F()}setTimeout(function(){gx.dom.addClass(a,
c);if(useParallelFx){gx.dom.removeClass(d,g);t&&(M=setTimeout(B,p))}r&&(J=setTimeout(E,p))},100)};b.beforeTransitionStart?!0!==b.beforeTransitionStart(j)&&j():j()}else!1!==b.domRemove&&s.removeChild(a),!1!==b.domAdd&&(a.parentNode==s?s.replaceChild(d,a):s.appendChild(d)),b.beforeTransitionStart&&b.beforeTransitionStart(),b.leavingTransCallback&&b.leavingTransCallback(a,d),b.enteringTransCallback&&b.enteringTransCallback(a,d),b.transitionEndCallback&&(d=b.transitionEndCallback(a,d))},getDocTypeDeclaration:function(a){a=
a||document;a=a.doctype;parts=["!DOCTYPE"];if(!a)return"";parts.push(a.name||"html");a.publicId&&(parts.push("PUBLIC"),parts.push('"'+a.publicId+'"'));a.systemId&&parts.push('"'+a.systemId+'"');return"<"+parts.join(" ")+">"},createShadowRoot:function(a){a=this.el(a);return a.createShadowRoot?a.createShadowRoot():a.webkitCreateShadowRoot?a.webkitCreateShadowRoot():!1},fixes:function(){var a=RegExp("gx-tab-padding-fix-\\d+","ig"),d=RegExp("gx-tab-spacing-fix-\\d+","ig"),b={},g={},c,j,m,n={center:{marginLeft:"auto",
marginRight:"auto",className:"gx-center-align",alignment:"center"},right:{marginLeft:"auto",marginRight:0,className:"gx-right-align",alignment:"right"},left:{marginLeft:0,marginRight:"auto",className:"gx-left-align",alignment:"left"}};return{getFixesStyleElement:function(){var a=f("#gx-dom-fixes")[0];a||(a=document.createElement("style"),a.id="gx-dom-fixes",f("head")[0].insertBefore(a,gx.getThemeElement()));return a},html5:function(a){var d=gx.util.browser,b=d.isIE(),k=[],g;f("TABLE",a||document.body).each(function(){var a=
f(this);a.attr({align:a.data("align")})});if(!a){if(!m){for(g in n)gx.lang.apply(n[g],{wcClassName:gx.GxObject.WEBCOMPONENT_CLASS_NAME,wcBodyClassName:gx.GxObject.WEBCOMPONENT_BODY_CLASS_NAME,contHolderClassName:"gx-content-placeholder",contHolderBodyClassName:"gx-ct-body",elements:[{el:"p"},{el:"table"},{el:"div"},{el:"fieldset",last:!0}]});m=Mustache.compile(".{{className}} {text-align:{{alignment}};}{{#elements}}.{{className}} > {{el}},.{{className}} > div.{{contHolderClassName}} > div.{{contHolderBodyClassName}} > {{el}}, .{{className}} > div.{{wcClassName}} > div.{{wcBodyClassName}} > {{el}}{{^last}},{{/last}}{{/elements}}{margin-left:{{marginLeft}};margin-right:{{marginRight}};}")}for(g in n)k.push(m(n[g]));
g=this.getFixesStyleElement();gx.dom.setStyleElement(g,k.join(""),!0)}if(b||d.isOpera())f("td[data-align]",a||document.body).each(function(){var a=f(this),d=a.attr("data-align"),b=n[d.toLowerCase()].className,k=a.attr("class")||"";k&&(k=" "+k);a.attr("align",d);a.hasClass(b)||a.attr("class",b+k);a.children("div."+n[d].contHolderClassName).children("div."+n[d].contHolderBodyClassName).addClass(b);a.children("div."+n[d].wcClassName).children("div."+n[d].wcBodyClassName).addClass(b)})},setPopupMinWidth:function(){var a=
gx.popup.getPopup();if(a){if(gx.runtimeTemplates){var d=this.getPopupMinWidth();f(document.documentElement).css("min-width",gx.dom.addUnits(d));f(document.documentElement).addClass("gx-popup-document")}(a.autoresize||void 0===a.autoresize)&&f(document.documentElement).css("height","auto")}},getPopupMinWidth:function(){var a=gx.popup.getPopup(),d=b;if(a&&(d=a.width,a.autoresize||void 0===a.autoresize)){var b=600,a=f(a.window).width(),d=800;1200<=a&&(d=900);768<=a&&992>a&&(d=b);768>a&&(d=a-20)}return d},
fixTableResets:function(p){var m=this.getFixesStyleElement();c||(c=Mustache.compile("{{#.}}.gx-tab-padding-fix-{{.}}{padding:{{.}}px}{{/.}}"));j||(j=Mustache.compile("{{#.}}.gx-tab-spacing-fix-{{.}}{border-collapse:separate; border-spacing:{{.}}px}{{/.}}"));f("table[data-cellpadding], table[data-cellspacing]",p||document.body).each(function(){var c=this.getAttribute("data-cellpadding");void 0!==c&&(b[c]=c,f("tbody > tr > td, tbody > tr > th, tr > td, tr > th",this).each(function(){this.className=
"gx-tab-padding-fix-"+c+" "+this.className.replace(a,"")}));var j=this.getAttribute("data-cellspacing");void 0!==j&&(g[j]=j,this.className="gx-tab-spacing-fix-"+j+" "+this.className.replace(d,""))});var p=gx.lang.objToArray(b),n=gx.lang.objToArray(g);gx.dom.setStyleElement(m,c(p)+j(n),!0)},fixChromeFocus:function(){gx.fx.obs.addObserver("gx.onbeforefocus",this,function(a){a=gx.dom.el(a);gx.util.browser.isChrome()&&a.scrollIntoViewIfNeeded&&a.scrollIntoViewIfNeeded()})},createLegacyNotification:function(){f("div#gx_ajax_notification").length||
f('<div id="gx_ajax_notification" style="display:none;"></div>').appendTo(document.body)}}}(),_init:function(){Function.prototype.closure=function(a,d,b){var g=gx.util.browser;if(g.isIE()&&8>g.ieVersion()){window.__objs||(window.__objs=[],window.__funs=[],window.__args=[]);var c=this,f=a.__objId;f||(__objs[f=a.__objId=__objs.length]=a);var j=c.__funId;j||(__funs[j=c.__funId=__funs.length]=c);d||(d=[]);var n=d.__argsId;n||(__args[n=d.__argsId=__args.length]=d);d=c=a=null;return function(){if(__funs){var a=
__args[n];if(b===true){a=Array.prototype.slice.call(arguments,0);a=a.concat(__args[n])}a.length==0&&arguments.length>0&&(a=arguments);a=__funs[j].apply(__objs[f],a);if(__objs)try{delete __objs[f].__objId}catch(d){__objs[f].__objId=null}__funs&&delete __funs[j].__funId;__args&&delete __args[n].__argsId;return a}}}c=this;return function(){var g=d||arguments;!0===b&&(g=Array.prototype.slice.call(arguments,0),g=g.concat(d));return c.apply(a||window,g)}};gx.evt.on_ready(this,function(){var a,d,b=gx.util.browser;
if(b.isWebkit()){var g=[];if(document.querySelectorAll)g=document.querySelectorAll("input[type='hidden']");else{var c=gx.dom.byTag("input");a=0;for(d=c.length;a<d;a++)"hidden"==c[a].getAttribute("type")&&g.push(c[a])}a=0;for(d=g.length;a<d;a++)g[a].setAttribute("autocomplete","off")}if(b.isChrome()){b=document.querySelectorAll("select");a=0;for(d=b.length;a<d;a++)if(!b[a].value&&(g=b[a].querySelectorAll("option[selected]"))&&g.length)b[a].value=g[0].value}});this.TRANSITION_END_EVENT=gx.util.browser.isWebkit()?
"webkitTransitionEnd":gx.util.browser.isOpera()?"oTransitionEnd":"transitionend";this.ANIMATION_END_EVENT=gx.util.browser.isWebkit()?"webkitAnimationEnd":gx.util.browser.isOpera()?"oAnimationEnd":"animationend"},_deinit:function(){this._form=null;null!=this._avoidLeaksDiv&&(gx.dom.shouldPurge()&&gx.dom.purge(this._avoidLeaksDiv),this._avoidLeaksDiv.parentNode.removeChild(this._avoidLeaksDiv),this._avoidLeaksDiv=null);window&&(window.__objs=null,window.__funs=null,window.__args=null)},element_in_scroll:function(a,
d){var b=f(d)[0].offsetTop-f(a)[0].offsetTop-f(a).scrollTop();return a&&f(d)[0]?b<f(a).height():!1}},util:{contentTypes:{txt:"text/plain",rtx:"text/richtext",htm:"text/html",html:"text/html",xml:"text/xml",aif:"audio/x-aiff",au:"audio/basic",wav:"audio/wav",bmp:"image/bmp",gif:"image/gif",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",jfif:"image/pjpeg",tif:"image/tiff",tiff:"image/tiff",png:"image/x-png",mpg:"video/mpeg",mpeg:"video/mpeg",mov:"video/quicktime",qt:"video/quicktime",avi:"video/x-msvideo",
exe:"application/octet-stream",dll:"application/x-msdownload",ps:"application/postscript",pdf:"application/pdf",tgz:"application/x-compressed",zip:"application/x-zip-compressed",gz:"application/x-gzip"},isKnownContentType:function(a){for(var d in this.contentTypes)if(this.contentTypes[d]==a)return!0;return!1},getContentTypeFromExt:function(a){var d=a.lastIndexOf(".");-1!=d&&(a=a.substring(d+1));return a?this.getContentType(a):""},getContentType:function(a){if(gx.lang.emptyObject(a))return"text/html";
a=a.toLowerCase();a=gx.text.trim(a);if(this.isKnownContentType(a))return a;var d=a.lastIndexOf(".");-1!=d&&(a=a.substring(d+1));a=this.contentTypes[a];return gx.lang.emptyObject(a)?"text/html":a},getFileName:function(a){var d=a.lastIndexOf("/"),b=a.lastIndexOf("\\"),d=d>b?d:b,b=a.lastIndexOf(".");if(!a)return a;if(0>b||d>b)b=a.length;return a.substring(d+1,b)},getFileType:function(a){var d=a.lastIndexOf("/"),b=a.lastIndexOf("\\"),g=a.lastIndexOf(".");return 0>g||g<d||g<b?"":a.substring(g+1)},getWindowInfo:function(){var a=
"",d=!0,b=!1;try{if(b=window.location!=window.parent.location?!0:!1)try{d=window.frameElement.id||window.top.document.body,a=window.name}catch(g){d=!1}}catch(c){}return{insideIframe:b,canAccessFrame:d,frameId:a}},browser:function(){var a=navigator.userAgent;return{w3c:!0,ns4:!1,ie5:!0,ns6:!1,ie:-1!=a.indexOf("MSIE")||-1!=a.indexOf("Trident"),edge:-1!=a.indexOf("Edge"),ff:-1!=a.indexOf("Firefox"),winCE:-1!=a.indexOf("Windows CE"),iphone:-1!=a.indexOf("iPhone"),ipad:-1!=a.indexOf("iPad"),ipod:-1!=a.indexOf("iPod"),
blackBerry:-1!=a.indexOf("BlackBerry"),operaMini:-1!=a.indexOf("Opera Mini"),opera:-1!=a.indexOf("Opera"),chrome:-1!=a.indexOf("Chrome"),android:-1!=a.indexOf("Android"),webkit:-1!=a.search(/webkit/ig),isIE:function(){return this.ie||this.edge},isEdge:function(){return this.edge},isFirefox:function(){return this.ff},isChrome:function(){return this.chrome},isWinCE:function(){return this.winCE},isIPhone:function(){return this.iphone},isIPad:function(){return this.ipad},isAndroid:function(){return this.android},
isBlackBerry:function(){return this.blackBerry},isOperaMini:function(){return this.operaMini},isOpera:function(){return this.opera},isWebkit:function(){return this.webkit},isSmartDevice:function(){return this.isWinCE()||this.isIPhone()||this.isBlackBerry()||this.isOperaMini()||this.isAndroid()},isCompatMode:function(){return"BackCompat"==document.compatMode},ieVersion:function(){var d;if(this.ie)try{var b=a.indexOf("MSIE");if(0<=b){var g=a.indexOf(";",b),c=a.substring(b+5,g);return parseFloat(c,10)}d=
a.match(/; rv.([0-9]+)/);if(1<d.length)return parseFloat(d[1],10)}catch(f){gx.dbg.logEx(f,"gxapi.js","ieVersion")}else if(this.edge&&(d=a.match(/ Edge\/([0-9]+)\./),1<d.length))return parseFloat(d[1],10);return-1},chromeVersion:function(){if(this.isChrome()){var d=a.match(/Chrome\/([0-9]+)/);if(1<d.length)return parseFloat(d[1],10)}},setupIE:function(){9<=this.ieVersion()&&!this.isCompatMode()&&("undefined"!==typeof Range&&!Range.prototype.createContextualFragment)&&(Range.prototype.createContextualFragment=
function(a){var b=document.createDocumentFragment(),g=document.createElement("div");b.appendChild(g);g.outerHTML=a;return b})},_init:function(){this.isWinCE()||(this.w3c=document.getElementById?!0:!1,this.ns4=document.layers?!0:!1,this.ie5=this.ie&&document.getElementById&&document.all?!0:!1,this.ns6=document.getElementById&&!document.all?!0:!1);this.setupIE()}}}(),addOnce:function(a,d,b){void 0==a[b]&&(a[b]=d)},inArray:function(a,d){if(null==a||!(d instanceof Array))return!1;if("function"==typeof d.indexOf)return-1!=
d.indexOf(a);for(var b=d.length,g=0;g<b;g++)if(d[g]==a)return!0;return!1},pushOnce:function(a,d){gx.util.inArray(a,d)||d.push(a)},lastArray:function(a){return 0<a.length?a[a.length-1]:null},noParmsUrl:function(a){var d=a.indexOf("?");-1!=d&&(a=a.substring(0,d));return a},resolveUrl:function(a){return!a?a:gx.ajax.isabsoluteurl(a)?a:gx.ajax.isRelativeToHost(a)?0!=a.toLowerCase().indexOf("/"+gx.basePath.toLowerCase())?gx.util.resourceUrl(gx.basePath+a,!1):a:gx.util.resourceUrl(gx.basePath+gx.staticDirectory+
a,!1)},resourceUrl:function(){var a;return function(d,b){a||(a=RegExp(gx.basePath+"(/|$)","i"));if("undefined"==typeof d)return"";if(-1!=d.indexOf("://")||"."==d.charAt(0))return d;var g="/"!=gx.basePath.charAt(gx.basePath.length-1),c=""==gx.basePath?0:d.search(a);if(0==c&&!b)return("/"==d.charAt(0)?"":"/")+d;if(-1!=c||b){var f="",f=-1!=c&&0<gx.basePath.length?gx.text.replaceAll(d.substring(c+gx.basePath.length),"\\","/"):d;if("/"==d.charAt(0))return location.protocol+"//"+location.host+d;c=0<gx.basePath.length&&
"/"!=gx.basePath.charAt(0);g=g&&"/"!=f.charAt(0);return location.protocol+"//"+location.host+(c?"/":"")+gx.basePath+(g?"/":"")+f}return d}}(),sameAppUrl:function(a){a=new this.Url(a);return a.isRelative()?!0:a.isSameApp(location.href)},removeBaseUrl:function(a){var d,b="/"!=gx.staticDirectory.charAt(gx.staticDirectory.length-1);d="/"==gx.staticDirectory.charAt(0)?0==gx.basePath.length?gx.staticDirectory.substring(1):gx.staticDirectory:"/"+gx.staticDirectory;d=RegExp("(?:/)?(?:"+gx.basePath+d+(b?"/":
"")+")?((?:[\\S]*))").exec(a);null!=d&&d[1]&&(a=d[1]);return a},getIFrameEmptySrc:function(){return"https:"==location.protocol&&gx.util.browser.isIE()&&6>=gx.util.browser.ieVersion()?"gx_blank.html":"about:blank"},Url:function(){var a=/^(([^\:\/\?#]+)\:)?(\/\/([^\/\?#]*))?([^\?#]*)(\?([^#]*))?(#(.*))?$/,d=/^(([^@]+)@)?([^\:]+)(:(.+))?$/;return function(b){this.url=b;this.user=this.hash=this.query=this.path=this.port=this.host=this.protocol="";this.isRelative=function(){return gx.lang.emptyObject(this.host)};
this.isSameApp=function(a){a=new gx.util.Url(a);return this.protocol==a.protocol&&this.host==a.host};(function(b,k){var c=a,c=c.exec(k),f=!gx.lang.emptyObject(c);if(f&&(b.protocol=c[2]?c[2]:"",f=c[4]?c[4]:"",b.path=c[5]?c[5]:"",b.query=c[7]?c[7]:"",b.hash=c[9]?c[9]:"",c=d,c=c.exec(f),f=!gx.lang.emptyObject(c)))b.user=c[2]?c[2]:"",b.host=c[3]?c[3]:"",b.port=c[5]?c[5]:""})(this,b)}}(),regExp:{isMatch:function(a,d){return null!==RegExp(d).exec(a)},replace:function(a,d,b){return a.replace(d,b)},split:function(a,
d){return a.split(d)},matches:function(a,d){var b=RegExp(d).exec(a);return null!==b?b:[]}},autoRefresh:{arTimer:null,getProps:function(){var a=gx.fn.getHidden("_GxRefreshTimeout");null!=a&&(a=gx.json.evalJSON(a),a.Time=parseInt(a.Time));return a},install:function(){var a=this.getProps();null!=a&&(this.create(),"focus"==a.Type&&gx.evt.attach(window,"blur",this.destroy))},create:function(){if(null==this.arTimer){var a=this.getProps();null!=a&&(this.arTimer=setTimeout(function(){gx.http.reload()},1E3*
a.Time))}},destroy:function(){null!=gx.util.autoRefresh.arTimer&&(window.clearTimeout(gx.util.autoRefresh.arTimer),gx.util.autoRefresh.arTimer=null)}},accessKey:function(a){var d="";if(-1!=a.indexOf("&"))for(var b=a.length,g=0;g<b-1;g++)if("&"==a[g]&&"&"!=a[g+1]){d+=a[g+1];break}return d},accessKeyCaption:function(a){var d="";if(-1==a.indexOf("&"))return a;for(var b=a.length,g=0;g<b-1;g++)if("&"==a[g]&&"&"!=a[g+1]){d+=a.substring(g+1);break}else d+=a[g];return d},invalidFunc:function(a){throw"gxInvalidFunc: "+
a;},urlValue:function(a){var d=a;"string"!=typeof d&&(d=gx.fn.getControlValueInt(a));return encodeURIComponent(d)},help:function(a){open(a,"gxHelpWindow","toolbar=no,location=no,directories=no,status=yes,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no")},_init:function(){this.browser._init()}},guid:{generate:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var d=16*Math.random()|0;return("x"==a?d:d&3|8).toString(16)})}},lang:{inherits:function(a,d,b){var g=
a.prototype;a.prototype=new d;for(var c in g)"undefined"==typeof a.prototype[c]&&(a.prototype[c]=g[c]);"undefined"==typeof a.prototype.base&&(a.prototype.base=d);!0===b&&(a.prototype.constructor=function(){d.prototype.constructor.apply(this,arguments);g.constructor.apply(this,arguments)})},apply:function(a,d){if(a&&d&&"object"===typeof d)for(var b in d)a[b]=d[b];return a},instanceOf:function(a,d){if(null==a||null==d)return!1;if(a instanceof d||d==String&&"string"==typeof a||d==Number&&("number"==
typeof a||"undefined"!=typeof gx.num.dec&&a instanceof gx.num.dec.bigDecimal)||d==Array&&"array"==typeof a||d==Function&&"function"==typeof a)return!0;if("string"==typeof a||"number"==typeof a||"array"==typeof a)return!1;for(var b=a.base;"undefined"!=typeof b;){if(b==d)return!0;b=b.base}return!1},clone:function(a){var d={},b;for(b in a)d[b]=a[b];return d},isDateType:function(a){return"date"==a||"dtime"==a},isNumericType:function(a){return"int"==a||"decimal"==a},isBooleanType:function(a){return"boolean"==
a||"bool"==a},isCharacterType:function(a){return"char"==a||"svchar"==a||"bits"==a},isArray:function(a){return a&&"number"==typeof a.length&&"function"==typeof a.splice},booleanValue:function(a){return!0==a||!1==a?a:"string"==typeof a&&"true"==a.toLowerCase()?!0:!1},gxBoolean:function(a){if("undefined"==typeof a)return!1;if("boolean"==typeof a)return a;if("number"==typeof a){if(0==a)return!1}else if("string"==typeof a&&(""==a||"false"==a.toLowerCase()||"0"==a.replace(/^ */,"").replace(/ *$/,"")))return!1;
return!0},arrayToSource:function(a){if(null!=a.toSource)return a.toSource();for(var d="[",b=a.length,g=b-1,c=0;c<b;c++)d+=this.objectToSource(a[c]),c<g&&(d+=",");return d+"]"},objectToSource:function(a){if(this.isArray(a))return this.arrayToSource(a);if("object"==typeof a){var d="{",b="",g;for(g in a){var c=g;""==c?c="''":"string"==typeof c&&(c="'"+c+"'");d+=b;d="object"==typeof a[g]?d+(c+":"+this.objectToSource(a[g])):"string"==typeof a[g]?d+(c+":'"+this.encodeValue(a[g])+"'"):d+(c+":"+a[g]);b=","}return d+
"}"}return"'"+this.encodeValue(a.toString())+"'"},emptyNum:function(a){return a&&0===a||!a},emptyObj:function(a){if(a)for(var d in a)if(a.hasOwnProperty(d))return!1;return!0},emptyObject:function(a){return void 0===a||null==a||""==a||"number"==typeof a&&isNaN(a)?!0:!1},supEval:function(a,d){var b=null,b=d instanceof String||"string"==typeof d?a[d]:d;return function(){return b.apply(a,arguments)}},getType:function(a){var d=null;try{for(var b=0,g=window,c=a.split("."),f=c.length,b=0;b<f;b++)g[c[b]]&&
(g=g[c[b]]);g&&g!=window&&(d=g)}catch(j){gx.dbg.logEx(j,"gxapi.js","getType")}return d},doEval:function(a,d){d=d||window;return d.execScript?d.execScript(a):eval.call?eval.call(d,a):eval(a)},doCall:function(){try{for(var a=arguments[0],d=[],b=arguments.length,g=1;g<b;g++)d.push(arguments[g]);return a.apply(this,d)}catch(c){gx.dbg.logEx(c,"gxapi.js","doCall")}},doExecTimeout:function(a){clearTimeout(a.t);a.f.call()},doCallTimeout:function(a,d,b,g){a=a.closure(d,b);g=setTimeout(a,g);return{f:a,t:g}},
encodeValue:function(a){return gx.text.charReplace(a,['"',"'","\r","\n"],["\\042","\\047","\\015","\\012"])},decodeValue:function(a){a=gx.text.replaceAll(a,"\\042",'"');return gx.text.replaceAll(a,"\\015\\012","\r\n")},htmlDecode:function(){var a=document.createElement("div");return function(d){d&&"string"===typeof d&&(d=escape(d).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),a.innerHTML=d,d=f(a).text(),f(a).text(""));return unescape(d)}}(),arrayUnique:function(a){for(var a=a.concat(),
d=0;d<a.length;++d)for(var b=d+1;b<a.length;++b)a[d]===a[b]&&a.splice(b--,1);return a},objToArray:function(){var a=function(a){return[a]};return function(d){return f.map(d,a)}}()},cache:function(){var a=!1;return{exceptionsRegEx:!1,remoteFiles:{},inlineCode:{},isCacheable:function(a){return!this.exceptionsRegEx?!0:!!a&&-1==a.search(this.exceptionsRegEx)},addRemoteFile:function(a){this.isCacheable(a)&&(a=gx.util.noParmsUrl(a),this.remoteFiles[gx.util.resourceUrl(a,!0)]=!0)},addLoadedFile:function(a){this.isCacheable(a)&&
(a=gx.util.noParmsUrl(a),this.remoteFiles[gx.util.resourceUrl(a,!0)]=!0)},removeAllRemoteFiles:function(){this.remoteFiles={}},removeRemoteFiles:function(a){var b;if(a)for(b in this.remoteFiles)a.exec(b)&&(this.remoteFiles[b]=!1)},removeRemoteFile:function(a){a=gx.util.noParmsUrl(a);this.remoteFiles[gx.util.resourceUrl(a,!0)]=!1},fileLoaded:function(a){a=gx.util.noParmsUrl(a);return this.remoteFiles[gx.util.resourceUrl(a,!0)]?!0:!1},updateStyles:function(a,b){for(var g=[],c=a.length,f=0;f<c;f++){var j=
a[f];if(!gx.lang.emptyObject(j)){for(var n=!1,p=b.length,q=0;q<p;q++)if(j==b[q]){n=!0;break}n||g.push(j)}}n=gx.staticDirectory;"/"==n.charAt(0)&&(n=n.substring(1));c=g.length;for(f=0;f<c;f++)j=g[f],"/"!=j.charAt(0)&&(j=n+j),this.removeRemoteFile(j)},addInlineCode:function(a){this.inlineCode[a]=!0},deleteInlineCode:function(a){delete this.inlineCode[a]},codeLoaded:function(a){return this.inlineCode[a]?!0:!1},_init:function(){if(!a){a=!0;var d=gx.staticDirectory;"/"==d.charAt(0)&&(d=d.substring(1));
for(var b=gx.dom.scripts(),g=b.length,c=0;c<g;c++){var f=b[c];gx.lang.emptyObject(f)||("/"!=f.charAt(0)&&!gx.ajax.isabsoluteurl(f)&&(f=d+f),this.addRemoteFile(f))}b=gx.dom.styles();g=b.length;for(c=0;c<g;c++)f=b[c],gx.lang.emptyObject(f)||("/"!=f.charAt(0)&&!gx.ajax.isabsoluteurl(f)&&(f=d+f),this.addRemoteFile(f))}}}}(),evt:{enter:!1,lastKey:-1,lastControl:null,lastEvent:null,dummyCtrl:{},keyListeners:{},shiftPressed:!1,execLoad:!0,autoSkip:!1,hooks:[],controlKeys:[3,6,8,9,12,13,14,16,17,18,19,20,
27,32,33,34,35,36,37,38,39,40,44,45,46],triggerKeys:[13,32],processing:!0,userReady:!1,skipPromptCtrl:!0,touchTimer:null,eachKeyAutorefreshType:function(a){return!gx.lang.isNumericType(a)&&!gx.lang.isDateType(a)},addHook:function(a,d,b){this.hooks.push({c:a,e:d,f:b})},waitGridRefresh:function(a){gx.evt.refreshGridCallback instanceof Array?gx.evt.refreshGridCallback.push(a):a.call()},notifyRefreshGrid:function(){if(gx.evt.refreshGridCallback&&gx.evt.refreshGridCallback instanceof Array){for(;0<gx.evt.refreshGridCallback.length;){var a=
gx.evt.refreshGridCallback.pop();"function"==typeof a&&a.call()}gx.evt.refreshGridCallback=void 0}},clearHooks:function(){for(var a=this.hooks.length,d=0;d<a;d++){var b=this.hooks[d];try{this.detach(b.c,b.e,b.f),b.c=null,b.f=null}catch(g){gx.dbg.logEx(g,"gxapi.js","clearHooks")}this.hooks[d]=null}this.hooks=[]},source:function(a){return a.target||a.currentTarget||a.srcElement},attach:function(a,d,b,g,c){c=c||{};if("string"==typeof d){var f=b;g&&(f=b.closure(g));if(c.single){var j=f,n=!1,p,f=function(){n||
(p&&clearTimeout(p),gx.evt.detach(a,d,j,c),j.apply(this,arguments),n=!0)};c.timeout&&(p=setTimeout(f,c.timeout))}a.addEventListener?a.addEventListener(d,f,c.useCapture||!1):a.attachEvent?a.attachEvent("on"+d,f):a["on"+d]=f;this.addHook(a,d,f)}else if(gx.lang.isArray(d))for(var f=0,q=d.length;f<q;f++)this.attach(a,d[f],b,g,c)},detach:function(a,d,b,g){try{if(g=g||{},"string"==typeof d)a.removeEventListener?a.removeEventListener(d,b,g.useCapture||!1):a.detachEvent?a.detachEvent("on"+d,b):a["on"+d]=
null;else if(gx.lang.isArray(d))for(var c=0,f=d.length;c<f;c++)this.detach(a,d[c],b,g)}catch(j){gx.dbg.logEx(j,"gxapi.js","detach")}},stopPropagation:function(a){a&&(a.stopPropagation?a.stopPropagation():a.cancelBubble=!0)},cancel:function(a,d){if(d&&gx.util.browser.isIE()&&typeof("undefined"!=a.keyCode))try{a.keyCode=0}catch(b){}"undefined"==typeof a.preventDefault?(a.cancelBubble=d,a.returnValue=!d):d&&(a.preventDefault(),a.stopPropagation())},checkCtrlFocus:function(a){try{if(gx.evt.fixWebKitOnFocus()&&
"button"==a.type&&gx.fn.isAccepted(a)&&void 0!=a.onfocus)a.onfocus()}catch(d){gx.dbg.logEx(d,"gxapi.js","checkCtrlFocus")}},doClick:function(a,d){if(gx.isInputEnabled()){var b=gx.evt.source(d);if("button"!=b.type&&"submit"!=b.type&&(b=gx.dom.el(a),gx.fn.isAccepted(b))){if(void 0!=b.onfocus)b.onfocus();if(void 0!=b.onclick)b.onclick();"INPUT"==b.nodeName&&"submit"==b.type&&gx.dom.form().submit()}}},executeOnblur:function(a){var d=gx.csv.lastId,b=gx.O.focusControl;gx.O.focusControl=a;this.onblur(a,
gx.O.focusControl);gx.O.focusControl=b;gx.csv.lastId=d},onblur:function(a,d){if(gx.O&&!0!==gx.csv.IgnoreBlur){var b=gx.fn.controlRowId(a);gx.csv.lastId=d;try{var g=gx.fn.validStruct(d);g&&null!=g.gxgrid&&g.gxgrid.updateControlValue(g,!1,b);var c=gx.csv.lastControl,f=c.getAttribute("maxlength");0<f&&c.value.length>f&&(c.value=c.value.substring(0,f));if(g&&"bits"==g.type&&0==g.ro){var j=gx.fn.getControlGridRef(g.fld,g.gxgrid?g.gxgrid.gridId:"");gx.util.browser.isWebkit()&&0>c.id.indexOf(g.fld)&&(c=
j);var n=gx.html.multimediaUpload.getContainer(j);gx.html.multimediaUpload.refreshPreviewImg(n,c)}}catch(p){gx.dbg.logEx(p,"gxapi.js","onblur")}}},onfocus:function(){var a=function(){gx.fx.obs.notify("gx.onbeforefocus",arguments);gx.evt.onfocus_impl.apply(gx.evt,arguments);gx.fx.obs.notify("gx.onafterfocus")};!0===gx.evt.is_button_mouse_event||gx.fx.suggestProcessing?gx.fx.obs.addObserver("gx.validation",this,a.closure(this,arguments),{single:!0}):a.apply(gx.evt,arguments)},onfocus_impl:function(a,
d,b,g,c,f,j){try{if(gx.spa.isNavigating())return!1;gx.evt.setReady(!1);if(!gx.fn.checkPopupFocus(a))return gx.evt.setReady(!0),!1;var n=!1;gx.csv.cmpCtx!=b&&(n=!0,gx.O.fromValid=0);gx.setGxO(b,g);n&&gx.fn.changeCmpContext();gx.fn.initOld(a);try{null!=gx.grid.lastFocusCtrl&&(gx.csv.lastId=gx.grid.lastFocusCtrl,gx.grid.lastFocusCtrl=null)}catch(p){gx.dbg.logEx(p,"gxapi.js","onfocus")}gx.csv.rowChanged=!1;gx.csv.lastControl=a;(0==f||""!=c)&&gx.fn.setCurrentGridRow(f,c);gx.fx.installSuggest(a);var q=
!1;if(gx.csv.lastGrid!=f){gx.csv.lastRow[f]=null;if(!j){if(gx.csv.lastGrid<f){var u=gx.fn.firstGridControl(f);gx.O.fromValid>u&&(gx.O.fromValid=u)}gx.csv.lastGrid=f}q=!0}gx.O.focusControl=d;if(!gx.csv.onloadFocus)try{gx.fx.ctx.notify(a)}catch(s){gx.dbg.logEx(s,"gxapi.js","onfocus")}if(gx.csv.disableFocus)return gx.csv.disableFocus=!1,gx.evt.setReady(!0),!0;try{var r=gx.fn.getControlValue("Mode");if("DLT"==r||"DSP"==r||gx.O.isTransaction()&&gx.dom.isButton(a)&&!gx.evt.isEnterEvtCtrl(a)&&!gx.evt.isCheckEvtCtrl(a)&&
!j)return gx.evt.setReady(!0),!0}catch(t){gx.dbg.logEx(t,"gxapi.js","onfocus")}if(gx.O.isTransaction()&&a.gxdisabled&&null!=gx.csv.lastControl){cn=gx.fn.getControlIndex(a)+1;if(-1!=cn&&(NextFocus=gx.fn.searchFocusFwd(cn),null!=NextFocus))return gx.fn.setFocus(NextFocus),gx.evt.setReady(!0),!0;gx.fn.setFocus(gx.csv.lastControl);gx.evt.setReady(!0);return!0}if(gx.csv.invalidForcedCtrl)return gx.fn.setFocusOnError(gx.csv.invalidForcedCtrl.id),gx.csv.invalidForcedCtrl=null,gx.evt.setReady(!0),!0;if(null!=
gx.csv.invalidControl&&(gx.csv.invalidControl!=a&&gx.O.focusControl>=gx.csv.invalidId)&&gx.csv.invalidControl==a)return gx.csv.validate(gx.csv.invalidControl,gx.csv.invalidId,!1).done(function(a){if(a){gx.csv.invalidControl=null;gx.evt.setReady(true)}}),!0;j?(gx.O.fromValid=gx.fn.firstGridControl(gx.csv.lastGrid),gx.O.toValid=gx.fn.firstCtrlAfterGrid(gx.O.fromValid,gx.csv.lastGrid),gx.O.focusControl=gx.O.toValid):(gx.O.toValid=gx.O.focusControl,gx.O.focusControl<gx.O.fromValid&&(gx.O.fromValid=gx.O.focusControl));
void 0!=gx.csv.lastRow[f]&&(gx.csv.lastRow[f]!=c&&!q)&&gx.O.fromValid==gx.O.toValid&&(gx.csv.lastId=gx.O.fromValid);var v=gx.fn.controlIds();0<v.length&&gx.O.fromValid<v[0]&&(gx.O.fromValid=v[0]);gx.lang.emptyObject(gx.csv.lastRow[f])&&0!=f&&(gx.csv.rowChanged=!0,gx.csv.lastRow[f]=c);var y=gx.O,z=gx.csv.lastId,C=gx.fn.validStruct(z,y);if(C)var D=gx.csv.lastRow[C.grid];gx.csv.checkRowChange(z,q,y,D).done(function(d){var b=false,k=false,g=function(){gx.csv.invalidControl==null&&(a.nodeName=="SELECT"?
(!gx.util.browser.isIE()||gx.util.browser.ieVersion()>=7)&&gx.fn.setSelection(a):gx.fn.setSelection(a));gx.csv.disableFocusCondition();gx.evt.setReady(true)};if(!gx.lang.emptyObject(D)&&!gx.lang.emptyObject(c)&&D.length>c.length){b=D.substring(D.length-c.length);b=parseInt(b)<parseInt(c)}if(gx.csv.backwardGridValidation){!gx.lang.emptyObject(D)&&(!gx.lang.emptyObject(c)&&D.length==c.length&&parseInt(D)>parseInt(c))&&(k=y.focusControl>gx.fn.firstGridControl(f));!gx.lang.emptyObject(D)&&(!gx.lang.emptyObject(c)&&
D.length==c.length&&parseInt(D)<parseInt(c))&&(k=y.focusControl<z&&y.focusControl>gx.fn.firstGridControl(f))}if(d&&gx.csv.invalidControl==null&&k){y.fromValid=gx.fn.firstGridControl(f);gx.csv.validControls(y.fromValid,y.focusControl,true,gx.O)}else if((!d||q)&&(y.focusControl>=z||b)){if(gx.fn.lastMainLevelCtrlId(z,f))if((d=gx.fn.getControlRefById(z))&&d.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)===1)y.fromValid=z+1;gx.csv.validateAll(y).done(g)}else{y.toValid=y.focusControl;g()}})}catch(x){gx.dbg.logEx(x,
"gxapi.js","onfocus")}return!1},userOnload:function(){try{"function"==typeof window.GXOnloadUsr&&GXOnloadUsr()}catch(a){gx.dbg.logEx(a,"gxapi.js","userOnload")}},onload:function(){gx.objectLoad().done(function(){gx.spa.start({listeners:{onnavigatestart:function(){gx.dom.addClass(document.body,"gx-spa-navigating")},onnavigate:function(){gx.dom.removeClass(document.body,"gx-spa-navigating")},onbeforesend:function(a,d,b){gx.pO.MasterPage&&a.req.setRequestHeader(b,gx.pO.MasterPage.ServerClass)},onbeforeprocessresponse:function(a,
d,b,g,c,f){gx.reinit(!f)},oncontentreplace:function(a,d,b,g,c,f,j,n){var a=gx.lang.getType(g),f=(f=f==j?f:j)?gx.lang.getType(f.toLowerCase()):!1,p=gx.ajax.getJsonResponse();p&&gx.fn.setJsonHiddens(p.gxHiddens,!1);a.prototype=new gx.GxObject;gx.setParentObj(new a);n?gx.setMasterPage(c):f&&gx.setMasterPage(new f);gx.ajax.clearJsonResponse();p?gx.ajax.setJsonResponse({response:p,isPostBack:!1,afterCmpLoaded:function(){n&&(c.restoreTargetComponents(),c.restoreExoEventHandlers());gx.objectLoad(p.gxGrids,
p.gxHiddens).done(function(){gx.pO.SetStandaloneVars()})},gxObject:gx.O}):gx.objectLoad()}}});gx.livePrevWS._init()})},onready:function(a){if(gx.lang.emptyObject(a))if("complete"==document.readyState)gx.evt.onload();else setTimeout(function(){gx.evt.onready(null)},250);else if(gx.util.browser.isIE()&&"complete"==document.readyState)gx.evt.onload()},on_ready:function(a,d){gx.fx.obs.addObserver("gx.onload",a,d)},onunload:function(a){gx.objectUnload(a);gx.spa.stop()},onclick:function(a){var d={event:a};
gx.fx.obs.notify("gx.onclick",[d]);d.cancel||(gx.evt.setReady(!1),gx.isInputEnabled(a)||gx.evt.cancel(a,!0),gx.evt.mouse.update(a),setTimeout(function(){gx.fx.ctx.notify()},10),gx.evt.setReady(!0))},ontouchstart:function(a){a=gx.evt.onmousedown.closure(this,[a]);gx.dom.documentScrollable().x||gx.dom.documentScrollable().y?gx.evt.touchTimer=window.setTimeout(a,150):a()},onmousedown:function(a){var d=window.event||a,b=gx.evt.source(d);if(b&&8>=gx.util.browser.ieVersion()&&f(b).is("shape"))return!1;
gx.evt.is_button_mouse_event=gx.dom.isButtonLike(b);gx.evt.mouse.update(a);a=gx.fx.dnd;a.deleteClonControl();b=a.getSource(d);null!=b&&(gx.evt.cancel(d,!0),gx.setGxO(b.obj),a.drag(b.obj,b.types,b.hdl))},onmousemove:function(a){gx.evt.mouse.update(a);var d=gx.fx.dnd;gx.util.browser.isIE();if(gx.popup.ispopup()){var b=gx.popup.ext;b.movepopup();if(null!=b.currIDb||null!=b.currRS)return!1}null!=d.obj&&(a=window.event||a,gx.evt.cancel(a,!0),null!=gx.fx.dnd.getTarget(a,d.obj.gxDragTypes)&&d.over(),d.moveControl(d.dragCtrl))},
onmouseup:function(a){window.clearTimeout(gx.evt.touchTimer);gx.evt.is_button_mouse_event=!1;gx.evt.mouse.update(a);var d=gx.fx.dnd;if(null!=d.dragCtrl){var b=window.event||a,b=d.getTarget(b,d.obj.gxDragTypes);null!=b?(d.deleteClonControl(),gx.setGxO(b.obj),d.drop(d.dropCtrl,b.obj,b.hdl)):d.restoreControl();b=window.event||a;gx.evt.cancel(b,!0)}d.out();d.dragCtrl=null;d.obj=null;gx.popup.ispopup()&&(gx.popup.ext.currRS=null)},ondblclick:function(a){gx.evt.mouse.update(a);gx.fx.dom.raiseEvent("dblclick",
window.event||a)},onwindowblur:function(){gx.fx.dnd.deleteClonControl()},checkMaxLength:function(a,d,b){var b=window.event||b,g=gx.util.browser.isIE(),c=b.keyCode;if(g){if("keydown"==b.type&&229==c)return a.value.length<=d?a.ImeKey=!0:!1;if("keyup"==b.type&&8==c&&a.ImeKey&&a.value.length+1>=d)return a.value=a.value.substring(0,a.value.length-1),a.ImeKey=!1,!0}if("keyup"==b.type||g)return a.value.length+1<=d||8==c||9==c||46==c||35<=c&&40>=c},onkeypress:function(a,d,b){if((null!=a||window.event)&&!(null!=
a&&window.event)){var a=null==a?window.event:a,g=gx.fn,c=gx.util.browser,d={event:a,hasEnter:d,skipOnEnter:b,cancel:!1};if(27==a.keyCode&&gx.popup.ispopup())g.closeWindow();else if(gx.fx.obs.notify("gx.keypress",[d]),!d.cancel){13==a.keyCode&&!gx.isInputEnabled()&&this.cancel(a,!0);if(!gx.O||gx.O.isTransaction()&&"DSP"==gx.O.Gx_mode&&this.invalidDSPKey(a))return this.cancel(a,!0),!1;this.lastKey=a.keyCode;this.shiftPressed=a.shiftKey;var j=a.ctrlKey,d=gx.evt.source(a)||gx.dom.getActiveElement()||
gx.csv.lastControl;gx.csv.invalidateCtrl(d,a);if(!this.isEnterEvtCtrl(d)||!this.isTriggerKey(a)||!this.cancelAndRefresh(a))if(this.checkFuncKey(a,d),(32==a.charCode||32==a.keyCode||13==a.keyCode&&!b)&&gx.dom.hasClass(d,"gx_newrow")&&f(d).find("span").click(),13==a.keyCode){var m=this.triggersEvt(d);if(b){if(!g.enterHasFocus()&&(!this.shiftPressed||!("TEXTAREA"==d.nodeName&&c.isIE())))j&&"TEXTAREA"==d.nodeName?gx.dom.replaceAtCaretPosition(d,"\n"):(c.isIE()&&"file"!=d.type?(gx.evt.isEnterEvtCtrl(d)&&
gx.O.executeEnterEvent(a,d),a.keyCode=9,this.lastKey=a.keyCode,11<=c.ieVersion()&&(a.preventDefault(),g.setFocus(g.searchFocus(g.getControlIndex(d)+1,!0)))):(d.value&&(c.isIE()&&"SELECT"!=d.tagName)&&(c=d.value,d.value="",d.value=c),g.skipFocus(b),this.cancel(a,!0)),this.enter=!1)}else m||gx.O.executeEnterEvent(a,d)}}}},onkeyup:function(a){var a=gx.evt.source(window.event?window.event:a),d=a.getAttribute("maxlength"),b="undefined"==typeof a.value?"":a.value;if((""==a.type&&9==this.lastKey||this.autoSkip&&
""!=a.type&&!this.isControlKey(this.lastKey)&&b.length>=d)&&this.skipPromptCtrl)if(gx.dom.isTextWithLink(a)){if(d=a.id||("A"==a.tagName&&a.parentNode?a.parentNode.id:""))d=gx.O.getValidStructId(d),gx.evt.onfocus(a,d,"",!1,"",0)}else if(a=a.getAttribute("gxfocusable"),!(null!=a&&"1"==a)){a=gx.fn.getControlIndex(gx.csv.invalidControl?gx.csv.invalidControl:gx.csv.lastControl);if(-1==a)return!0;a=gx.fn.searchFocus(this.shiftPressed?a-1:a+1,!this.shiftPressed);gx.fn.setFocus(a)}},setEventRow:function(a,
d){var b=gx.fn.rowGridId(d),g=gx.fn.controlRowId(d)||gx.fn.currentGridRowImpl(b)||"0001";null!=b&&null!=g&&(void 0!=d.gxGridName&&gx.fn.setHidden(a.CmpContext+d.gxGridName.toUpperCase()+"_ROW",g),gx.csv.lastEvtRow=g,gx.evt.setCurrentGridRows(b,g))},ctrlOnchange:function(a,d,b,g){gx.csv.pkDirty=b;"UPD"==a.value?"1"==d.value?(b?null!=g&&(g.value=gx.getMessage("GXM_captionadd")):null!=g&&(g.value=gx.getMessage("GXM_captionupdate")),d.value="0"):b&&null!=g&&(g.value=gx.getMessage("GXM_captionadd")):"INS"==
a.value&&"1"==d.value&&(null!=g&&(g.value=gx.getMessage("GXM_captionadd")),d.value="0")},onchange:function(){var a=function(){gx.evt.onchange_impl.apply(gx.evt,arguments)};gx.fx.suggestProcessing?gx.fx.obs.addObserver("gx.validation",this,a.closure(this,arguments),{single:!0}):a.apply(gx.evt,arguments)},onchange_impl:function(a){gx.evt.setReady(!1);gx.evt.lastControl=a;var d=gx.fn.getControlValue("radio"==a.type?a.name:gx.dom.id(a));if(gx.evt.fixWebKitOnFocus()&&"radio"==a.type)a.onfocus();var b,
g=!1;if(a.getAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE)!=d){g=!0;gx.fn.setControlValue("IsModified","1");gx.fn.setControlValue("IsConfirmed","0");gx.csv.invalidateGXCtrl(a);var c=!0;if(b=gx.O.getValidStructFld(a))"function"==typeof b.c2v&&b.c2v(),"function"==typeof b.v2bc&&b.v2bc.call(gx.O);if("select-one"==a.type||"checkbox"==a.type||"radio"==a.type)c=!1,gx.evt.setReady(!1),gx.csv.validate(a,gx.O.focusControl,!0,gx.O).done(function(d){d&&gx.csv.invalidControl==a&&(gx.csv.invalidControl=null);gx.evt.execOnchange(a,
d);gx.evt.setReady(!0)}).fail(function(){gx.evt.setReady(!0)});gx.fn.setControlOldValue(a,d);c&&gx.evt.execOnchange(a,!1)}gx.evt.execUsrOnchange(a);gx.evt.setReady(!0);d=gx.util.browser.isWebkit()&&("radio"==a.type||"checkbox"==a.type||"file"==a.type);c=!1;if(g&&b&&(gx.fn.lastMainLevelCtrlId(gx.O.focusControl,b.grid)||b.gxsgprm))c=d=!0;if(d&&a.onblur)a.onblur();c&&("undefined"==typeof a.GXFormatError||!1==a.GXFormatError)&&gx.csv.validControls(gx.O.focusControl,gx.O.focusControl+1,!0,gx.O)},execOnchange:function(a,
d,b){var g="";if(a.attributes.gxoch1)try{g+=a.attributes.gxoch1.value+";"}catch(c){gx.dbg.logEx(c,"gxapi.js","execOnchange")}if(gx.fn.isAccepted(a)&&a.attributes.gxoch2)try{g+=a.attributes.gxoch2.value+";"}catch(f){gx.dbg.logEx(f,"gxapi.js","execOnchange")}try{""!=g&&eval(g)}catch(j){gx.dbg.logEx(j,"gxapi.js","execOnchange")}d||gx.fn.setControlGxValid(a,"0");a.setAttribute("gxctrlchanged","1");b||gx.fn.setControlValue("IsModified","1");gx.fn.setControlValue("IsConfirmed","0")},execUsrOnchange:function(a){var d=
"";try{d=a.attributes.gxoch0.value}catch(b){return!0}return(new Function(d)).call(a)},jsEvent:function(a){if(!gx.isInputEnabled())return!1;a=a.getAttribute?a.getAttribute("jsevent"):a.jsevent;return!gx.lang.emptyObject(a)?eval(a):!0},isEnterEvtCtrl:function(a){if(gx.O.EnterCtrl){var d=gx.dom.id(a);!d&&"A"==a.tagName&&(d=a.parentNode.id);d&&0==d.indexOf("span_")&&(d=d.substring(5));if(!d)return!1;for(var b=gx.O.EnterCtrl,a=gx.fn.rowGridId(a),g=0,c=b.length;g<c;g++){var f=gx.csv.ctxControlId(b[g]);
if(a&&-1!=d.search(RegExp(".*"+f+"_[0-9]{4}$"))||f==d)return!0}}return!1},isCheckEvtCtrl:function(a){if(!gx.lang.emptyObject(gx.O.CheckCtrl)){var a=gx.dom.id(a),d;for(d in gx.O.CheckCtrl)if(gx.O.CheckCtrl[d]==a||gx.O.CmpContext+gx.O.CheckCtrl[d]==a)return!0}return!1},isTriggerKey:function(a){for(var d=this.triggerKeys.length,b=0;b<d;b++)if(a.keyCode==this.triggerKeys[b]||a.charCode==this.triggerKeys[b])return!0;return!1},isControlKey:function(a){for(var d=this.controlKeys.length,b=0;b<d;b++)if(a==
this.controlKeys[b])return!0;return!1},invalidDSPKey:function(a){var d=a.keyCode-111;a.shiftKey&&(d+=12);return this.keyListeners[d]&&"ENTER"==this.keyListeners[d][gx.O.CmpContext]||13==a.keyCode?!0:!1},addKeyListener:function(a,d,b){1==d&&(document.body.onhelp=gx.falseFn);void 0==this.keyListeners[d]&&(this.keyListeners[d]=[]);this.keyListeners[d][a]=b},setEvtName:function(a){gx.fn.setHidden("_EventName",a)},cancelAndRefresh:function(a){return gx.O.conditionsChanged?(this.cancel(a,!0),gx.O.executeServerEvent("RFR",
!1),!0):!1},setGridEvt:function(a,d){if(gx.isInputEnabled()&&!gx.lang.emptyObject(a)){if(gx.lang.emptyObject(d)){var b=gx.fn.getGridObj(a);b&&(d=gx.fn.getHidden(gx.O.CmpContext+b.gridName.toUpperCase()+"_ROW"))}gx.fn.setHidden("_EventGridId",a);gx.fn.setHidden("_EventRowId",d);void 0!==d&&gx.fn.setCurrentGridRow(a,d)}},checkFuncKey:function(a,d){var b=this.lastKey-111;a.shiftKey&&(b+=12);if(0<b&&24>=b&&void 0!=this.keyListeners[b]){var g=this.keyListeners[b][gx.O.CmpContext];if("undefined"!=typeof g)this.execFnKeyEvt(a,
gx.O,g,d);else for(var c in this.keyListeners[b])if(g=this.keyListeners[b][c],"undefined"!=typeof g){var f=gx.getObj(c,!1);if(null!=f){this.execFnKeyEvt(a,f,g,d);break}}}},execFnKeyEvt:function(a,d,b,g){if(!gx.evt.processing&&!gx.spa.isNavigating())if(this.cancel(a,!0),"PROMPT"==b){if((a=d.getValidStructFld(g))&&a.attachedCtrls)for(var b=a.attachedCtrls,c=0,f=b.length;c<f;c++)if((g=b[c])&&g.info&&g.info.isPrompt){var j=b[c].id;"function"==typeof d.promptKeyHandlers[j]&&(g=0<a.grid?"_"+gx.fn.currentGridRowImpl(a.grid):
"",g=gx.dom.el(d.CmpContext+j+g),d.promptKeyHandlers[j].call(d,g))}}else d.isTransaction()&&"SELECT"==b?(d=gx.dom.el(d.CmpContext+"BTN_SELECT"))&&"function"==typeof d.click&&d.click():d.executeEvent(b,!1)},keyModifiesValue:function(a){a=window.event?a.keyCode:a.which;return 32<=a&&127>=a||229==a?!0:!1},triggersEvt:function(a){return!gx.lang.emptyObject(a)&&(a==gx.evt.dummyCtrl||("A"==a.nodeName||"TEXTAREA"==a.nodeName)||"INPUT"==a.nodeName&&("button"==a.type||"image"==a.type))?!0:!1},setProcessing:function(a,
d){if(("undefined"==typeof d||d)&&!gx.evt.redirecting)gx.evt.processing=a,gx.evt.setReady(!gx.evt.processing)},endValidation:function(){gx.csv.validatingGrid=null;gx.csv.validating=!1;gx.fx.obs.notify("gx.onaftervalidate")},setReady:function(a){gx.evt.userReadyCnt+=a?-1:1;gx.evt.userReadyCnt=0>gx.evt.userReadyCnt?0:gx.evt.userReadyCnt;gx.evt.userReady=0==gx.evt.userReadyCnt;isNaN(gx.evt.userReadyCnt)&&(gx.evt.userReadyCnt=0)},EVT_ROW_ID_REGEXP:/\.(([0-9]{4})+)$/,setCurrentGridRows:function(a,d){for(;0<
a&&d&&d.length&&4<=d.length;){var b=d.substr(0,4),g=d.substr(4);gx.fn.setCurrentGridRow(a,b);if(b=gx.O.getGridById(a,g))b=b.parentGrid;a=b?b.gridId:0;d=d.substr(4,d.length)}},execEvt:function(a,d,b,g,c,f,j,n,p,q){gx.dbg.logPerf("execEvt");gx.ajax.saveFormForAutoComplete();if(q||!gx.lang.emptyObject(b)&&gx.isInputEnabled()&&gx.ajax.isFormEnabled()){var u=gx.setGxObyCtx(a,d),s=c,r=this.EVT_ROW_ID_REGEXP.exec(b),t=r&&1<r.length?r[1]:null;r&&2<r.length&&gx.evt.setCurrentGridRows(s,t);t||(t=gx.fn.currentGridRowImpl(s));
if(q||!u||!u.inputHasFormatErrors(b,c,t)){if(gx.evt.fixWebKitOnFocus()&&gx.dom.isButtonLike(g)&&g!=gx.csv.lastControl&&void 0!=g.onfocus)g.onfocus();gx.fx.obs.notify("gx.validation");gx.setGxObyCtx(a,d);j&&(gx.evt.srvCommand=!0,g&&(s=gx.fn.rowGridId(g),t=gx.fn.controlRowId(g),!gx.lang.emptyObject(s)&&!gx.lang.emptyObject(t)&&(gx.csv.lastGrid=s,gx.fn.setCurrentGridRow(s,t))));if(0<gx.csv.lastId&&!gx.csv.validatingAll&&(a=gx.O.getValidStruct(gx.csv.lastId),(gx.evt.isEnterEvtCtrl(g)&&0<g.id?gx.O.getValidStructId(g.id):
gx.O.focusControl)<gx.csv.lastId&&(gx.evt.isEnterEvtCtrl(g)||a&&a.isuc)||gx.evt.enter))gx.csv.validatingAll=!0,gx.O.fromValid=gx.csv.lastId,gx.O.toValid=gx.csv.lastId+1,gx.csv.validateAll(),gx.csv.validatingAll=!1;this.setEvtName(b,g);this.lastEvent=b;!j&&(gx.grid.drawAtServer||g&&"INPUT"==g.nodeName&&"submit"==g.type)?this.execEvtSubmit(b,g):(gx.evt.setProcessing(!0),g=function(){gx.ajax.doPost(gx.ajax.encryptParms(gx.pO,"gxajaxEvt"),f,n,p)},gx.pO.supportAjaxEvents?gx.evt.dispatcher.dispatch(b,gx.O,
s,t,!0,void 0,n).done(p).fail(g):g())}}},execEvtSubmit:function(a,d){if(gx.isInputEnabled()){gx.evt.setProcessing(!0);gx.O.startFeedback();gx.fx.obs.notify("gx.onbeforeevent",[a,d]);gx.fn.objectOnpost();gx.http.saveState();gx.fn.forceEnableControls(!1);var b=gx.dom.form(),g=gx.popup.getPopup();if(null!=g){var c=b.action,g=g.window.gx.popup.lvl;if(-1!=g){var f=-1!=c.indexOf("?")?",":"?",f=f+encodeURIComponent("gxPopupLevel="+g+";");b.action=c+f}}b.submit()}},execCliEvt:function(a,d,b,g,c,f){if(gx.isInputEnabled()&&
gx.ajax.isFormEnabled()){gx.fx.obs.notify("gx.validation");var f=void 0!=f?f:[],j=gx.getObj(a,d),n;if(null!=j&&(gx.setGxO(a,d),"string"==typeof g&&(""!=g&&4<arguments.length)&&(n=j.getGrid(g),n.instanciateRow(c),n=n.gridId),!j.inputHasFormatErrors(j.getServerEventName(b),n,c))){var p=j.isServerEvent(b);gx.evt.setProcessing(!0,!p);j.execC2VFunctions();var q=function(){gx.popup.waitCallback(function(){gx.evt.setProcessing(false,!gx.csv.validating&&!p)});j.conditionsChanged&&j.executeServerEvent("RFR",
true)},u=function(){j[b](f);q()};gx.pO.supportAjaxEvents?gx.evt.dispatcher.dispatch(j.getServerEventName(b),j,n,c,!1,f).done(q).fail(u):u()}}},fixWebKitOnFocus:function(){var a=gx.util.browser;return a.isWebkit()&&!a.isChrome()||a.isChrome()&&30>a.chromeVersion()?!0:!1},dispatcher:function(){return{dispatchedEvents:{},getContextKey:function(a,d,b){return(a.CmpContext||"PARENT_OBJECT")+(d||"")+(b||"")},getEventParmsMetadata:function(a,d,b){return d.EvtParms[a]["input"==b?0:1]},eventDepends:function(a,
d,b){for(var d=this.getEventParmsMetadata(d,b,"output"),a=this.getEventParmsMetadata(a,b,"input"),g,c=0,f=d.length;c<f;c++)for(var b=gx.ajax.resolveParmKey(d[c]),j=0,n=a.length;j<n;j++)if(g=gx.ajax.resolveParmKey(a[j]),b==g)return!0;return!1},beforeDispatch:function(a){var d=gx.ajax.getSecurityToken(a);d&&(a.InternalParms[d.id]=d.value)},dispatch:function(a,d,b,g,c,j,m){var c=void 0===c||c,n=f.Deferred(),p=d.cleanEventName(a),q=d.getClientEventName(a);this.beforeDispatch(d);if(!d.EvtParms[p])return n.reject(),
n.promise();var u=this.getContextKey(d,b,g),s=this.dispatchedEvents[u],a={eventName:p,dirtyEventName:a,clientSideEventName:q,serverSide:c,deferred:n,arguments:j,disableForm:m};s?s.events.push(a):(s={gxO:d,grid:b,row:g,events:[a]},this.dispatchedEvents[u]=s,setTimeout(this.dispatchTimeoutCallback.closure(this,[u]),50));return n.promise()},dispatchTimeoutCallback:function(a){var d=this.dispatchedEvents[a],b=d.gxO,g=d.grid,c=d.row,f=[],j=[],n,p,q=[],u,s={};delete this.dispatchedEvents[a];for(var a=0,
r=d.events.length;a<r;a++)if(n=d.events[a],n.serverSide)j.push(n);else{p=!0;for(var t=0;t<a;t++)if(this.eventDepends(n.eventName,d.events[t].eventName,b)){p=!1;break}p?f.push(n):j.push(n)}d=f.concat(j);f=!1;a=0;for(r=d.length;a<r;a++)s[d[a].eventName]=d[a].deferred,f&&d[a].serverSide?u.addMethod(d[a].eventName):(u=new gx.ajax.message(d[a].eventName,b,g,c,d[a].serverSide,d[a].disableForm),d[a].serverSide||(u.callback=b[d[a].clientSideEventName].closure(b,d[a].evtArguments||[])),q.push(u)),f=d[a].serverSide;
var v=function(a,b,d){for(var k=0,g=a.methods.length;k<g;k++){var c=s[a.methods[k]];c&&(b?c.resolve(d):c.reject(d))}};runCount=0;var y=function(){if(runCount<q.length){var a=q[runCount++],b=runCount==q.length;a.call().done(function(){v(a,!0,b);y()}).fail(function(){v(a,!1,b)})}};y()}}}(),mouse:{x:-1,y:-1,update:function(a){try{gx.lang.emptyObject(a.touches)?gx.util.browser.isIE()?(this.x=event.clientX+gx.dom.documentScroll().scrollLeft,this.y=event.clientY+gx.dom.documentScroll().scrollTop):(this.x=
a.pageX,this.y=a.pageY):0<a.touches.length&&(this.x=a.touches[0].pageX,this.y=a.touches[0].pageY)}catch(b){gx.dbg.logEx(b,"gxapi.js","mouse update")}}},_init:function(){document.gxReadyState="loading";if(gx.util.browser.isIE()&&(gx.util.browser.isCompatMode()||8>=document.documentMode||8>=gx.util.browser.ieVersion()&&!gx.util.browser.isWinCE()))this.attach(document,"readystatechange",this.onready);else if(9<=gx.util.browser.ieVersion()&&!gx.util.browser.isWinCE()||gx.util.browser.isFirefox()||gx.util.browser.isWebkit()||
gx.util.browser.isOperaMini())this.attach(document,"DOMContentLoaded",this.onload);else if(gx.util.browser.isBlackBerry())this.attach(window,"load",this.onload);else this.onready(null);this.attach(document,["touchstart"],this.ontouchstart);this.attach(document,"mousedown",this.onmousedown);this.attach(document,["mousemove","touchmove"],this.onmousemove);this.attach(document,["mouseup","touchend"],this.onmouseup);this.attach(document,"click",this.onclick);this.attach(document,"dblclick",this.ondblclick);
this.attach(window,"blur",this.onwindowblur);gx.dbg.performance&&!gx.util.browser.isBlackBerry()&&this.attach(window,"load",function(){gx.dbg.logPerf("onload","Page Loaded");gx.dbg.printPerformanceLog()})},_deinit:function(){this.lastEvent=this.lastControl=null;this.dummyCtrl={};this.keyListeners={};this.hooks=[]}},csv:{GX_OLD_VALUE_ATTRIBUTE:"data-gxOldValue",GX_VALID_ATTRIBUTE:"data-gxvalid",pkDirty:!1,validating:!1,lastRow:[],rowChanged:!1,currentId:0,lastId:0,lastControl:null,lastActiveControl:null,
lastGrid:0,cmpCtx:"",anyError:!1,userFocus:null,focusControl:null,invalidControl:null,invalidForcedCtrl:null,validActivatedControl:null,disableFocus:!1,validatingUC:null,validatingGrid:null,instanciatedRowGrid:null,lastEvtResponse:null,lastEvtRow:null,invalidId:0,stopOnError:!1,dismissSeconds:0,messagePosition:"right",oneAtAtime:!0,gxFormatErrors:[],validateAll:function(a){var b=f.Deferred(),a=a||gx.O;this.validControls(a.fromValid,a.toValid,!1,a).done(function(){try{if((null==this.invalidControl||
!gx.csv.stopOnError)&&(!this.rowChanged||this.targetRowIsMod(this.toValid)))a.fromValid=a.toValid}catch(k){gx.dbg.logEx(k,"gxapi.js","validateAll")}b.resolve()}.closure(this));return b.promise()},validControls:function(a,b,k,g,c){var j=f.Deferred(),m=[],n=0,p=0,q=0,u=gx.csv.fullGridValidation&&1<=b-a&&gx.O.isTransaction(),s=function(a,b){if(gx.csv.stopOnError)if(-1!=b){var d=gx.fn.validStruct(b,g),d=gx.fn.getControlGridRef(d.fld,d.grid);gx.csv.disableFocus=!0;gx.fn.isAccepted(d,g)?gx.fn.setFocus(d):
gx.fn.setFocus(gx.evt.lastControl)}else!gx.dom.isButton(gx.csv.lastControl)&&null!=gx.csv.validActivatedControl&&gx.fn.setFocus(gx.csv.validActivatedControl)};try{gx.csv.validActivatedControl=null;gx.csv.invalidControl=null;gx.csv.invalidId=0;if(b>a){if(u&&(validStruct=gx.fn.validStruct(a),void 0!=validStruct&&void 0!=validStruct.lvl&&(n=validStruct.lvl),validStruct=gx.fn.validStruct(b),void 0!=validStruct&&void 0!=validStruct.lvl))p=validStruct.lvl;for(var r=a;r<b;r++)if(m.push(this.validControl(r,
k,g,null,c)),u&&(r>a&&r<b)&&(validStruct=gx.fn.validStruct(r),void 0!=validStruct&&void 0!=validStruct.lvl&&(q=validStruct.lvl,q!=n&&q!=p&&validStruct&&validStruct.grid))){var t=gx.fn.getGridObj(validStruct.grid),v=t.grid.rows.length,y=gx.fn.currentGridRowImpl(validStruct.grid),z=gx.fn.lastGridControl(validStruct.grid);if(r==z)for(var C=gx.fn.firstGridControl(validStruct.grid),D=0;D<v;D++){var x=t.grid.rows[D],H=x.gxDeleted(),w=x.gxExists(),A=x.gxIsMod();if(!H&&(w||A)&&x.gxId!=y)for(var E=C;E<=z;E++)m.push(this.validControl(E,
k,g,x.gxId))}}if(0<m.length)return gx.evt.setProcessing(!0),f.when.apply(f,m).done(function(){for(var a=!0,b=-1,d=0,k=arguments.length;d<k;d++){var g=arguments[d].ret;if(a&&!g){b=arguments[d].ctrl;a=!1;break}}s(a,b);gx.evt.setProcessing(!1);j.resolve(a)}),j.promise()}s(!0,-1);j.resolve(!0)}catch(B){gx.dbg.logEx(B,"gxapi.js","validControls")}return j.promise()},validControl:function(a,b,k,g,c){var j=f.Deferred(),k=k||gx.O,m=gx.fn.validStruct(a,k);if(void 0!=m){0!=m.grid&&(g=g?g:gx.fn.currentGridRowImpl(m.grid),
gx.lang.emptyObject(g)||gx.fn.setCurrentGridRow(m.grid,g));!0==m.isuc?m.uc.execC2VFunctions():"function"==typeof m.c2v&&m.c2v();"function"==typeof m.v2bc&&m.v2bc.call(k);try{if(0==m.lvl||0!=m.grid&&gx.fn.gridRowIsMod(m.lvl,gx.fn.currentGridRow(m.grid))||!k.isTransaction()){var n=null;if(n=!0==m.isuc?m.uc.getRealControl():gx.fn.getControlGridRef(m.fld,m.grid))return this.validate(n,a,b,k,c).done(function(b){try{var d=false,k=true,g=-1;m.grid!=0&&(d=gx.fn.rowIsRemoved(m.grid,gx.fn.currentGridRow(m.grid)));
if(!b&&!d){gx.csv.invalidControl=n;gx.csv.invalidId=a;k=false;g=a}gx.csv.lastId=a;if(gx.fn.isAccepted(n)==false){gx.evt.executeOnblur(a);if(n.getAttribute("gxhiddenonchange")!=n.value){n.setAttribute("gxhiddenonchange",n.value);gx.evt.execOnchange(n,false,true)}}}catch(c){gx.dbg.logEx(c,"gxapi.js","validControl - callback")}j.resolve({ret:k,ctrl:g});return j.promise()}),j.promise()}}catch(p){gx.dbg.logEx(p,"gxapi.js","validControl")}}j.resolve({ret:!0,ctrl:-1});return j.promise()},validate:function(a,
b,k,g,c){var j=f.Deferred(),g=g||gx.O;gx.csv.anyError=!1;var m=gx.fn.validStruct(b,g);if(void 0==m)return j.resolve(!0),j.promise();gx.csv.refreshVars(m,g);if(null==m.fnc&&null==m.isvalid){if("SELECT"!=a.tagName&&"checkbox"!=a.type&&!gx.evt.eachKeyAutorefreshType(m.type)&&!gx.lang.emptyObject(m.rgrid))for(var n=m.rgrid.length,b=0;b<n;b++)m.rgrid[b].filterVarChanged();j.resolve(!0);return j.promise()}try{if(-1!=b&&(k||"1"!=a.getAttribute(gx.csv.GX_VALID_ATTRIBUTE))){gx.csv.currentId=b;gx.csv.validatingGrid=
m.gxgrid;gx.csv.validating=!0;gx.csv.refreshVars(m);k=!1;k=!0==m.isuc?m.fnc.call(m.uc):null!=m.fnc?m.fnc.call(g):!0;1==g.AnyError&&(gx.lang.emptyObject(gx.csv.invalidControl)&&(gx.csv.invalidControl=a),gx.csv.anyError=!0,g.AnyError=0);!0==gx.csv.anyError&&(k=!gx.csv.anyError);if(!1==k)return gx.evt.endValidation(),j.resolve(!1),j.promise();gx.csv.refreshControls(m,g);gx.csv.invalidateDeps(b,g);if(!gx.lang.emptyObject(m.rgrid)&&!gx.lang.emptyObject(m.hc)){n=m.rgrid.length;for(b=0;b<n;b++)m.rgrid[b].filterVarChanged()}var p=
gx.fn.isAccepted(a,g),b=function(){j.resolve(true);try{if(!c){var b=gx.dom.byId(a.id);p&&!c?gx.fn.setControlGxValid(b,"1"):gx.fn.setControlGxValid(b,"0")}gx.evt.endValidation()}catch(d){gx.dbg.logEx(d,"gxapi.js","validate")}};if(null!=m.isvalid&&p&&"1"!=a.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)&&!c){var q=m.gxgrid?m.gxgrid:null;if(gx.pO.supportAjaxEvents){var u=m.isvalid,s=m.gxgrid?m.gxgrid.gridId:!1,r=s?gx.fn.currentGridRowImpl(s):"",t=g.isServerEvent(u);u?gx.evt.dispatcher.dispatch(g.getServerEventName(u),
g,s,r,t).done(b).fail(b):(g[m.isvalid](),b())}else{var v=gx.csv.instanciatedRowGrid;gx.csv.instanciatedRowGrid=q;g[m.isvalid]();gx.csv.instanciatedRowGrid=v;b()}}else b()}}catch(y){gx.dbg.logEx(y,"gxapi.js","validate")}j.resolve(!0);return j.promise()},invalidateForm:function(){if(1!=gx.O.AnyError)for(var a=gx.fn.controlIds(),b=a.length,k=0;k<b;k++){var g=gx.fn.validStruct(a[k]);this.invalidateGXCtrl(gx.fn.getControlGridRef(g.fld,g.grid))}},invalidateGXCtrl:function(a){if(a){var b=a.getAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE);
1==a.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)&&b!=a.value&&gx.fn.setControlGxValid(a,"0")}},invalidateCtrl:function(a,b){try{this.invalidateGXCtrl(a);var k=gx.fn.validStruct(gx.O.focusControl);if(k&&0!=k.grid&&gx.evt.keyModifiesValue(b)){var g=gx.fn.controlRowId(a)||gx.fn.currentGridRowImpl(k.grid)||"0001";k.gxgrid.setRowModified(g)}}catch(c){gx.dbg.logEx(c,"gxapi.js","invalidateCtrl")}},invalidateDeps:function(a,b){for(var k=gx.fn.controlIds(),g=k.length,c=0;c<g;c++){var f=k[c];if(f>a)for(var f=gx.fn.validStruct(f,
b),j=f.ip?f.ip.length:0,n=0;n<j;n++)if(f.ip[n]==a)if(0==f.grid){var p=gx.fn.getControlGridRef(f.fld,f.grid);p&&gx.fn.setControlGxValid(p,"0")}else{var q=gx.fn.getGridObj(f.grid);if(q)for(var u=q.grid.rows.length,s=0;s<u;s++){var p=q.grid.rows[s],r=p.gxDeleted(),t=p.gxExists();!r&&t&&(q.setRowModified(p.gxId),(p=gx.fn.getControlRef(f.fld+"_"+p.gxId))&&gx.fn.setControlGxValid(p,"0"))}}}},setFormatError:function(a,b){a.id&&(b||"undefined"==typeof b?(this.gxFormatErrors[a.id]=!0,a.GXFormatError=!0):(delete this.gxFormatErrors[a.id],
a.GXFormatError=!1))},anyFormatError:function(){return!1===gx.lang.emptyObj(this.gxFormatErrors)},disableFocusCondition:function(){if("undefined"==typeof gx.fn.validStruct(gx.O.focusControl))return!1;try{var a=gx.getVar("Gx_mode");0<gx.csv.lastGrid&&gx.setVar("Gx_mode",gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid));var b=gx.fn.validStruct(gx.O.focusControl);if(b&&b.nac&&!0==b.nac.call(gx.O)){cn=gx.fn.getControlIndex(gx.csv.lastControl)+1;var k=gx.fn.searchFocusFwd(cn);null!=
k&&gx.fn.setFocus(k);gx.setVar("Gx_mode",a);return!0}gx.setVar("Gx_mode",a)}catch(g){}return!1},loadScreen:function(){try{gx.csv.pkDirty&&(gx.csv.pkDirty=!1,gx.fn.clearOldKeys(),gx.evt.execEvt(gx.csv.cmpCtx,!1,gx.csv.cmpCtx+"ELSCR.",gx.evt.dummyCtrl,null,!0))}catch(a){gx.dbg.logEx(a,"gxapi.js","loadScreen")}},CTRL_ROW_INDEX_REGEXP:/(.*)_([0-9]{4})+$/,ctxControlId:function(a,b){var k;if(gx.O&&gx.O.IsMasterPage&&0!=a.indexOf("MP")){var g=this.CTRL_ROW_INDEX_REGEXP.exec(a);if(g&&1<g.length)return k=
g[1],g=2<g.length?"_"+g[2]:"",k+(-1===k.indexOf("_MPAGE")?"_MPAGE":"")+g}return(k=(b?b.CmpContext:this.cmpCtx)||"")&&0==a.indexOf(k)||0<=a.search(gx.GxObject.CONTROL_CMP_REGEX)?a:k+a},isProperty:function(a){return a instanceof Array&&2==a.length||"object"==typeof a&&"undefined"!=typeof a[0]&&"undefined"!=typeof a[1]?!0:!1},checkRowChange:function(a,b,k,g){var c=f.Deferred();try{var j=gx.fn.validStruct(a,k);if("undefined"!=typeof j){var m=j.grid;if(0!=m){var n=gx.fn.currentGridRowImpl(m);if(n&&(n!=
g||b)&&1<n.length&&g&&1<g.length){gx.csv.rowChanged=!0;var p=k.Gx_BScreen;k.Gx_BScreen=1;gx.csv.validGridRowChange(m,n,k,g).done(function(a){a&&(a=k.getGridById(m,g))&&a.instanciateRow(n);k.Gx_BScreen=p;c.resolve(!0)})}else c.resolve(!1);void 0!=n&&gx.fn.setCurrentGridRow(m,n)}else c.resolve(!1)}else c.resolve(!1)}catch(q){gx.dbg.logEx(q,"gxfrmutl.js","checkRowChange")}return c.promise()},validGridRow:function(a,b){void 0!=b&&gx.fn.setCurrentGridRow(a,b);var k=gx.fn.firstGridControl(a),g=gx.fn.lastGridControl(a);
gx.csv.validControls(k,g+1,!0,gx.O)},validGridRowChange:function(a,b,k,g){var c=f.Deferred();void 0!=g&&gx.fn.setCurrentGridRow(a,g);var j=gx.fn.firstGridControl(a,k),m=gx.fn.lastGridControl(a,k),g=!gx.lang.emptyObject(g)&&!gx.lang.emptyObject(b)&&g.length==b.length&&parseInt(g)>parseInt(b);gx.csv.validControls(j,m+1,!0,k,g).done(function(k){(k||!gx.csv.stopOnError)&&gx.csv.changeGridRow(a,j,b);c.resolve(k)});return c.promise()},changeGridRow:function(a,b,k){gx.csv.lastId=b;gx.O.fromValid>b&&(gx.O.fromValid=
b);gx.csv.lastRow[a]=k;Gx_BScreen=1},targetRowIsMod:function(a){return(a=gx.fn.validStruct(a))?gx.fn.gridRowIsMod(a.lvl,gx.fn.currentGridRow(a.grid)):!1},refreshVars:function(a,b){for(var k=a.ip?a.ip.length:0,g=0;g<k;g++)try{"function"==typeof gx.fn.validStruct(a.ip[g],b).c2v&&gx.fn.validStruct(a.ip[g],b).c2v()}catch(c){gx.dbg.logEx(c,"gxapi.js","refreshVars")}},refreshControls:function(a,b){for(var k=a.op?a.op.length:0,g=0;g<k;g++)try{var c=gx.fn.validStruct(a.op[g],b);gx.fn.v2c(c);var f=null;(f=
0==c.grid?gx.dom.el(gx.csv.ctxControlId(c.fld)):gx.fn.getControlGridRef(c.fld,c.grid))&&gx.fn.setControlGxValid(f,"0")}catch(j){gx.dbg.logEx(j,"gxapi.js","refreshControls")}k=a.ucs?a.ucs.length:0;for(g=0;g<k;g++)try{gx.fn.validStruct(a.ucs[g],b).uc.execV2CFunctions(!0)}catch(n){gx.dbg.logEx(n,"gxapi.js","refreshControls")}},setValidValues:function(a,b,k){var g=[];if(1<k.length-b.length){var c=gx.json.evalJSON(k[k.length-1]);for(h in c)gx.fn.setHidden(h,c[h]);g=gx.json.evalJSON(k[k.length-2])}c={};
a={fields:a,msgs:g};gx.O.cmpCtx?c[gx.O.cmpCtx]=a:c.MAIN=a;gx.fn.setErrorViewer(c);if(!gx.O.AnyError)for(var f=!1,a=b.length,c=0;c<a;c++){var j=b[c],g=k[c];if(this.isProperty(j)){var n=gx.fn.vStructForVar(j[0])||gx.O.getValidStructFld(j[0]);null!=n&&gx.fn.setCtrlProperty(n.fld,j[1],g)}else if(n=gx.fn.validStruct(this.currentId),!gx.lang.emptyObject(n)&&!gx.lang.emptyObject(n.hc)&&(n.hc==j?(gx.O[n.hc]=g,gx.fn.setHidden(this.cmpCtx+"GXH_"+n.fld,g)):n.hd==j&&(gx.O[n.hd]=g)),n=gx.fn.vStructForVarWId(j,
this.currentId),gx.lang.emptyObject(n)){n=gx.fn.vStructForHC(j);if(null!=n){var p="";0!=n.grid&&(p="_"+gx.fn.currentGridRow(n.grid));gx.fn.setHidden(this.cmpCtx+"GXHC"+n.fld+p,g)}n=gx.fn.gridObjFromGxO(j);void 0!=n?(f=!0,n.loadGrid({rowProps:g})):gx.fn.saveLvlOldParm(j,g)&&(gx.setVar(j,g),gx.fn.setGridHidden(j,g))}else if(j=gx.fn.screen_CtrlRef(n.fld),!gx.lang.emptyObject(j)&&g instanceof Object&&("SELECT"==j.tagName?(-1!=j.selectedIndex&&gx.fn.invalidEmptyValue(g)&&(g.s=j.options[j.selectedIndex].value),
p=gx.dom.id(j),gx.fn.loadComboBox(p,g.v),gx.fn.setComboBoxValue(p,g.s)):gx.lang.emptyObject(g.s)||(g.s=gx.fn.trimSelectValue(g.s,n.type)),p=gx.fn.selectedDescription(g,n.type),g=gx.lang.emptyObject(g.s)&&!gx.lang.emptyObject(j.value)?j.value:"SPAN"==j.tagName&&!gx.lang.emptyObject(g.s)&&!gx.lang.emptyObject(p)?p:g.s,gx.fn.setControlValue_span_safe(this.cmpCtx+n.fld,g,0)),n.v2v)n.v2v(g),gx.fn.v2c(n,g)}gx.O.refreshOlds();gx.fn.enableDisableDelete();f&&gx.dom.indexElements()},_deinit:function(){this.lastRow=
[];this.lastEvtRow=this.lastEvtResponse=this.validatingGrid=this.validatingUC=this.validActivatedControl=this.invalidForcedCtrl=this.invalidControl=this.focusControl=this.userFocus=this.lastActiveControl=this.lastControl=null}},json:{_nonSerializables:[],setNonSerializable:function(a){this.isNonSerializable(a)||this._nonSerializables.push(a)},isNonSerializable:function(a){for(var b=this._nonSerializables.length,k=0;k<b;k++)if(this._nonSerializables[k]==a)return!0;return!1},evalJSON:function(a){try{return eval("("+
a+")")}catch(b){gx.dbg.logEx(b,"gxapi.js","evalJSON")}return a},evalValidJSON:function(a){return eval("("+a+")")},serializeJson:function(a,b){var k=this.objToJson(a);if(null===k)k=this.arrayToJson(a);else return k;if(null===k){if("function"==typeof a)return null;var k=[],g;for(g in a)if(b||!this.isNonSerializable(g)){var c=this.objToJson(g,!0);if(null!==c){var f=this.serializeJson(a[g]);"string"==typeof f&&k.push(c+":"+f)}}return"{"+k.join(",")+"}"}return k},objToJson:function(a,b){var k=typeof a;
if(b){if(!gx.lang.emptyObject(a)){if("string"==k)return gx.text.escapeString(a);if("number"==k)return'"'+a+'"';if("undefined"!=typeof gx.num.dec&&a instanceof gx.num.dec.bigDecimal)return a.toString()}}else{if("undefined"==k)return k;if("string"==k)return gx.text.escapeString(a);if("number"==k||"boolean"==k||"undefined"!=typeof gx.num.dec&&a instanceof gx.num.dec.bigDecimal)return a.toString();if(null===a)return"null";if("function"==typeof a.json&&(k=a.json(),a!==k))return this.serializeJson(k)}return null},
arrayToJson:function(a){if("function"!=typeof a&&"number"==typeof a.length){for(var b=[],k=a.length,g=0;g<k;g++){var c=this.serializeJson(a[g]);"string"!=typeof c&&(c="undefined");b.push(c)}return"["+b.join(",")+"]"}return null},objFromJson:function(a,b,k){try{var g=this.evalValidJSON(b);if(a instanceof Array&&g instanceof Array)for(;a.length>g.length;)a.shift();else for(var c in a)"function"!=typeof a[c]&&delete a[c];for(c in g)a[c]=g[c];return!0}catch(f){return gx.dbg.logEx(f,"gxapi.js","objFromJson"),
k&&k.push({Id:"FromJson Error",Description:gx.dbg.exTxt(f),Type:0}),!1}}},dbg:{lastTime:0,enabled:!1,performance:!1,dbgWin:null,outputFunc:null,hshTimes:null,performanceLog:[],_init:function(){this.hshTimes=[];this.hshTimes.onload=(new Date).getTime()},logDebug:function(a){this.enabled&&this.write(a)},logMsg:function(a){(this.enabled||window.console)&&this.write(a)},logEx:function(a,b,k){if(this.enabled||window.console){var g="";if(a&&a instanceof Error)g="["+a.name+": "+this.exTxt(a),g=g+(b?", file: "+
b:"")+((k?", func: "+k:"")+"]"),a.fileName&&(g+=" FileName:"+a.fileName),a.lineNumber&&(g+=" ln:"+a.lineNumber);else try{g=""+a}catch(c){g="[Unknown Error]"}this.write(g,!0)}},exTxt:function(a){return!a?"Unknown Error":a.message?a.message:a.description?a.description:a.toString()},write:function(a,b){if(this.enabled)try{null==this.dbgWin&&(this.dbgWin=window.open("","debug","scrollbars=1,height=900,width=900")),gx.dom.write(a+"<BR>",this.dbgWin.document)}catch(k){}window.console&&(b?console.error(a):
console.log(a));b&&window.ga&&ga("send","exception",{exDescription:a,exFatal:b})},writeT:function(a){var b=new Date,k=b.getTime(),g=this.lastTime;0<this.lastTime&&(g=(k-this.lastTime)/1E3);this.lastTime=k;a=b.toString()+" (+"+g+"seg): "+a;this.write(a)},logPerf:function(a,b){if(this.performance)if(void 0===this.hshTimes[a])this.hshTimes[a]=(new Date).getTime();else{var k=((new Date).getTime()-this.hshTimes[a])/1E3;delete this.hshTimes[a];0<k&&this.performanceLog.push((void 0==b?a:b)+":("+k+"seg)")}},
printPerformanceLog:function(){if(this.performance){for(msg in this.performanceLog)"string"==typeof this.performanceLog[msg]&&(this.outputFunc&&this.outputFunc(this.performanceLog[msg]),this.write(this.performanceLog[msg]));this.performanceLog=[]}}},http:function(){return{STATE_UNSENT:0,STATE_DONE:4,STATUS_OK:200,STATUS_UNAUTHORIZED:401,STATUS_FORBIDDEN:403,STATUS_SESSION_TO:440,iframeName:"gxPostIFrame",viewState:null,viewStateLoaded:!1,oldState:null,useBase64State:!1,useStateSignature:!1,lastStatus:0,
lastResponse:"",modes:{none:0,full:1,call:2,retval:3},validJsonResponse:function(a,b){return"{"!=b[0]&&200==a.status&&0!=a.getResponseHeader("Content-Type").toLowerCase().indexOf("application/json")?(gx.dbg.logEx('Unexpected AJAX respose format "'+a.getResponseHeader("Content-Type")+'"; Reloading page'),gx.http.reload(!0),!1):!0},saveHidden:function(a,b,k){null!=gx.dom.el(a)?gx.fn.setControlValue_impl(a,b):k&&(gx.dom.createInput(a,"hidden"),gx.fn.setControlValue_impl(a,b))},clearMultipartHidden:function(){this.saveHidden("GXAjaxMultipart",
"",!1)},clearState:function(){this.viewState=null;this.viewStateLoaded=!1;f(gx.dom.el("GXState")).val("{}")},loadState:function(){gx.dbg.logPerf("loadState");this.viewState={};this.viewStateLoaded=!1;var a=gx.dom.el("GXState");if(a){var b=a=a.value;this.useBase64State&&(b=gx.base64.decode(a));this.viewState=gx.json.evalJSON(b);this.viewStateLoaded=!0}gx.dbg.logPerf("loadState","GXState Loaded")},saveState:function(a){if(this.viewState){var b=gx.json.serializeJson(this.viewState,a),a=b;this.useBase64State&&
(a=gx.base64.encode(b));b=gx.dom.el("GXState");null==b?gx.dom.createInput("GXState","hidden"):this.oldState=b.value;gx.fn.setControlValue_impl("GXState",a);this.useStateSignature&&(gx.http.setStateHsh(a),gx.http.setHsh())}},setStateHsh:function(a){null==gx.dom.el("GXHSH12")&&gx.dom.createInput("GXHSH12","hidden");a=gx.MD5.getHsh(a);gx.fn.setControlValue_impl("GXHSH12",a)},setHsh:function(){for(var a=gx.pO.WebComponents.length,b=0;b<a;b++)gx.http.setObjectHsh(gx.pO.WebComponents[b]);gx.http.setObjectHsh(gx.pO)},
setObjectHsh:function(a){var b=a.getControlIdsh();if(null!=b){var k="";a.IsComponent&&null!=a.CmpContext&&(k=a.CmpContext);for(var g="",c=0;c<b.length;c++)if((validStruct=a.getValidStruct(b[c]))&&"function"==typeof validStruct.val)var f=gx.fn.getControlValue_impl(k+validStruct.fld),g="checkbox"==validStruct.ctrltype&&""==gx.text.trim(f)?g+validStruct.val():g+f;gx.http.createHsh(k+"GXHSH11",g)}},createHsh:function(a,b){null==gx.dom.el(a)&&gx.dom.createInput(a,"hidden");var k=gx.MD5.getHsh(b);gx.fn.setControlValue_impl(a,
k)},refreshState:function(){null!=this.oldState&&(gx.dom.el("GXState").value=this.oldState,this.oldState=null)},getCookie:function(a){for(var a=a+"=",b=document.cookie.split(";"),k=b.length,g=0;g<k;g++){for(var c=b[g];" "==c.charAt(0);)c=c.substring(1,c.length);if(0==c.indexOf(a))return c.substring(a.length,c.length)}return null},setCookie:function(a,b,k){k=k||1;k=new Date((new Date).getTime()+864E5*k);document.cookie=a+"="+escape(b)+"; expires="+k.toGMTString();return this.getCookie(a)==b},checkResponseStatus:function(a){return a.status==
this.STATUS_FORBIDDEN?!1:a.status==this.STATUS_SESSION_TO?(gx.http.reloadOnTimeout(),!0):this.isBadResponse(a)?(gx.ajax.enableForm(),gx.util.alert.showError(gx.getMessage("GXM_NetworkError").replace("%1",a.status)),!0):a.status==this.STATUS_UNAUTHORIZED?(gx.pO.OnSessionTimeout==gx.ajax.timeoutActions.ignore?gx.http.reload():gx.pO.OnSessionTimeout==gx.ajax.timeoutActions.warn&&gx.http.reloadOnTimeout(),!0):!1},isSessionTimeoutError:function(a,b){return!gx.gen.isDotNet()&&(b&&a&&gx.pO.AjaxSecurity)&&
a.readyState==this.STATE_DONE&&("NS_ERROR_FAILURE"==b.name&&2147500037==b.result||"Error"==b.name&&-2146697209==b.number||"NETWORK_ERR"==b.name&&101==b.code)?!0:!1},reloadOnTimeout:function(){if((gx.pO.fullAjax||gx.pO.AjaxSecurity)&&confirm(gx.getMessage("GXM_sessionexpired")))return gx.http.reload(),!0;gx.ajax.enableForm();return!1},reload:function(a){""==document.location.hash?this.redirect(location.href,!1,a):document.location.reload()},redirect:function(a,b,k,g){g=g||gx.O;gx.evt.setProcessing(!0);
var c=gx.popup.getPopup();if(null!=c&&(c=c.window.gx.popup.lvl,-1!=c))var f=-1!=a.indexOf("?")?",":"?",f=f+encodeURIComponent("gxPopupLevel="+c+";"),a=a+f;gx.ajax.isabsoluteurl(a)||(a=gx.ajax.absoluteurl(a));b?gx.evt.redirecting=!0:setTimeout(function(){gx.pO!=g?g.endFeedback():gx.ajax.enableForm()},200);gx.spa.started&&!k?(gx.spa.redirect(a),gx.pO!=g?g.endFeedback():gx.ajax.enableForm()):location.href=a},getRequest:function(){var a=null;window.XMLHttpRequest&&(a=new XMLHttpRequest);if(!a)try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(b){try{a=
new ActiveXObject("Microsoft.XMLHTTP")}catch(k){}}return a},postDataFormat:{HTTP:0,JSON:1},getPostData:function(a,b){var b=b||gx.http.postDataFormat.HTTP,k=b==gx.http.postDataFormat.HTTP?[]:{};if(a.reqData)k=a.reqData;else for(var g=a.formNode,g="Form"==g.tagName?g.elements:f("input[type!=file],textarea,select"),c=g.length,j=0;j<c;j++){var m=gx.http.elementPostData(g[j],b);null!=m&&(b==gx.http.postDataFormat.HTTP?k.push(m):k[m[0]]=m[1])}gx.lang.isArray(k)&&b==gx.http.postDataFormat.HTTP&&(k=k.join("&")+
"&");return k},elementPostData:function(a,b){if(gx.json.isNonSerializable(a.name)||"FIELDSET"==a.tagName)return null;var k="";if("select-multiple"==a.type)for(var g=a.options.length,c=0;c<g;c++)a.options[c].selected&&(k=a.options[c].value);else if("radio"==a.type||"checkbox"==a.type)if(a.checked)k=a.value;else{if("radio"==a.type)return null}else k="image"===a.type?a.src:this.element_gxvalue(a);return b==gx.http.postDataFormat.HTTP?encodeURIComponent(a.name)+"="+encodeURIComponent(k):[a.name,k]},element_gxvalue:function(a){return a.gxtype&&
"dtime"==a.gxtype.type?(dt=new gx.date.gxdate(a.value,gx.dateFormat),dt.HasTimePart=0<a.gxtype.dec,dt.HasDatePart=0<a.gxtype.len,gx.date.dttoc(dt,a.gxtype.len,a.gxtype.dec)):a.value},doHandleRequest:function(a,b){a.readyState==this.STATE_DONE&&(gx.evt.setReady(!1),gx.evt.setProcessing(!1,!gx.csv.validating),a.status==this.STATUS_OK||b.handleAllStatusCodes?this.doCallHandler(a,b):gx.http.checkResponseStatus(a)||gx.lang.doCallTimeout(gx.dom.writeError,document,[a.responseText,gx.getMessage("GXM_runtimeappsrv"),
a.status],50),b.always&&b.always.call(b.obj||window,a,b),window.gx&&(gx.evt.setReady(!0),gx.dbg.logPerf("execEvt","Event Executed"),gx.dbg.printPerformanceLog()))},onRequestError:function(a,b){b.error&&b.error.call(b.obj||window,a,b);b.always&&b.always.call(b.obj||window,a,b);gx.evt.setProcessing(!1,!gx.csv.validating);a.readyState==this.STATE_DONE?gx.http.checkResponseStatus(a):this.isBadResponse(a)&&gx.http.reloadOnTimeout()},isBadResponse:function(a){return a.status==this.STATE_UNSENT&&gx.lang.emptyObject(a.responseText)?
!0:!1},doCall:function(a){gx.util.alert.hide();!a.handler&&"function"==typeof a.load&&(a.handler=a.load);"boolean"!=typeof a.sync&&(a.sync=!1);a.method||(a.method="POST");if(a.multipart&&"POST"==a.method)this.doMultipartPost(a);else{var b=this.getRequest();if(null!=b){if("function"==typeof a.handler&&!a.sync){var k=gx.http.doHandleRequest.closure(this,[b,a]),g=gx.http.onRequestError.closure(this,[b,a]);gx.util.browser.isIE()&&9>=gx.util.browser.ieVersion()?b.onreadystatechange=k:(b.onload=k,b.onerror=
g)}k=null;"POST"==a.method&&(k=gx.http.getPostData(a));g=!1!==a.avoidCache?this.uncache(a.url):a.url;b.open(a.method,g,!a.sync);!1!==a.ajaxHeader&&b.setRequestHeader(gx.ajax.reqHeader,"1");"POST"==a.method&&b.setRequestHeader("Content-Type",a.contentType?a.contentType:"application/x-www-form-urlencoded");gx.sec.secToken&&(gx.AjaxSecurity&&gx.OnSessionTimeout==gx.ajax.timeoutActions.ignore)&&b.setRequestHeader(gx.sec.secTokenName,gx.sec.secToken);this.setSecurityToken(b,a.gxO);a.beforeSend&&a.beforeSend.call(a.obj||
window,b);try{b.send(k)}catch(c){gx.dbg.logEx(c,"gxapi.js","doCall")}"function"==typeof a.handler&&a.sync&&gx.http.doHandleRequest(b,a);return b}}return null},doCallHandler:function(a,b){b.obj?b.handler.call(b.obj,null,a.responseText,a):b.handler(null,a.responseText,a);if(window.gx&&"function"===typeof b.onReady)b.onReady()},doMultipartPost:function(a){gx.http.saveState(!0);this.getPostIFrame().gxPostInfo=a;var b=a.formNode;a.oldAction=b.getAttribute("action");b.setAttribute("action",a.url);a.oldTarget=
b.getAttribute("target");b.setAttribute("target",this.iframeName);a.reqData&&(gx.http.saveHidden("GXAjaxMultipart",a.reqData,!0),this.setSecurityToken(null,a.gxO));b.submit()},setSecurityToken:function(a,b){var k=gx.ajax.getSecurityToken(b);k&&(gx.dom.hasSelectedFile()?gx.http.saveHidden("X-GXAUTH-TOKEN",k.value,!0):a.setRequestHeader("X-GXAUTH-TOKEN",k.value))},useReadyStateEvent:function(){return gx.util.browser.isIE()&&11>gx.util.browser.ieVersion()},iFrameloadEventName:function(){return this.useReadyStateEvent()?
"readystatechange":"load"},getPostIFrame:function(){var a=this.iframeName,b=gx.dom.el(a);b&&b.frameElement&&(b=b.frameElement);b||(b=document.createElement("div"),b.innerHTML='<iframe name="'+a+'" src="about:blank">',document.body.appendChild(b),b=b.firstChild,document.body.appendChild(b),window[a]=b,b.name=a,b.setAttribute("name",a),b.id=a,b.style.position="absolute",b.style.left="0px",b.style.top="0px",b.style.height="1px",b.style.width="1px",b.style.visibility="hidden");gx.evt.attach(b,this.iFrameloadEventName(),
gx.http.iframeOnload);return b},iframeOnload:function(){var a=gx.dom.el(gx.http.iframeName);if(!(gx.http.useReadyStateEvent()&&"complete"!=a.readyState)&&(gx.evt.setProcessing(!1,!gx.csv.validating),a||(a=window.frames[gx.http.iframeName]),a&&a.frameElement&&(a=a.frameElement),a)){gx.http.useReadyStateEvent()&&(a.src="about:blank",gx.evt.detach(a,gx.http.iFrameloadEventName(),gx.http.iframeOnload));var b=a.gxPostInfo,k=b.formNode;k.setAttribute("action",b.oldAction);k.setAttribute("target",b.oldTarget);
if(a=a.contentDocument?a.contentDocument:a.contentWindow.document)k=a.body,gx.dom.allChildrenAreText(k)?(a=gx.base64.decode(gx.http.multipartResponse(k)),gx.http.clearMultipartHidden(),b.handler(null,a,b)):document.write(a.documentElement.innerHTML)}},multipartResponse:function(a){try{for(var b=a.childNodes[0];"#text"!=b.nodeName;)b=b.childNodes[0];var k=b.nodeValue;if(!gx.util.browser.isIE())for(b=b.nextSibling;b;)k+=b.nodeValue,b=b.nextSibling;return k}catch(g){return gx.dbg.logEx(g,"gxapi.js",
"multipartResponse"),""}},uncache:function(a){var b=(new Date).getTime(),k=a.indexOf("?");return a+(0<k?k<a.length-1?",":"":"?")+"gx-no-cache="+b},callBackend_simple:function(a,b,k,g,c,f,j,n){gx.http.callBackend_impl(void 0,a,b,gx.http.modes.none,k,g,c,f,j,n)},callBackend:function(a,b,k,g,c,f,j,n,p,q,u){gx.http.callBackend_impl(a,b,g,c,f,j,n,p,q,u)},callBackend_impl:function(a,b,k,g,c,f,j,n,p,q){var u=this.getRequest(),q=q||{};if(u){try{var s=gx.O;c||s.startFeedback();f="undefined"!=typeof f?f:"GET";
j="undefined"!=typeof j?j:null;p="undefined"!=typeof p?p:!1;n||(b=this.uncache(b));u.open(f,b,p);u.setRequestHeader(gx.ajax.reqHeader,"2");for(var r in q)u.setRequestHeader(r,q[r]);"POST"==f?u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):gx.sec.secToken&&(gx.O.AjaxSecurity&&gx.pO.OnSessionTimeout==gx.ajax.timeoutActions.ignore)&&u.setRequestHeader(gx.sec.secTokenName,gx.sec.secToken);u.send(j);c||s.endFeedback();this.lastStatus=u.status;this.lastResponse=u.responseText}catch(t){window.status=
"GXAjax HTTP error: "+t.message}window.status="";if(u.readyState!=this.STATE_DONE||u.status!=this.STATUS_OK)gx.http.checkResponseStatus(u)||(window.status="GXAjax HTTP error: ("+u.status+") - "+u.statusText,gx.dbg.logEx(u.responseText));else if(g!=this.modes.none)if(this.lastResponse&&0<this.lastResponse.length&&"<"!=this.lastResponse.charAt(0)){this.lastStatus=0;try{if(g==this.modes.full)this.handleFull(this.lastResponse);else if(g==this.modes.call)return this.handleCall(this.lastResponse,a);return this.handleRetVal(this.lastResponse,
a,k)}catch(v){gx.dbg.logEx(v,"gxapi.js","callBackend")}}else window.status="GXAjax HTTP error: (bad response format)"}},handleFull:function(a){gx.http.postHandler(null,a,{status:200,responseText:""})},handleCall:function(a,b){if(b){var k=f.parseJSON(a);if(gx.lang.isArray(k))return b(k);gx.dbg.logEx(e,"gxapi.js","handleCall: Unexpected server response format (Expected array): "+a)}},handleRetVal:function(a,b,k){this.lastStatus=gx.json.evalJSON(a)[1];void 0==this.lastStatus&&(this.lastStatus=0);if(b&&
(k||null==this.lastStatus||0==this.lastStatus)){k=f.parseJSON(a);if(gx.lang.isArray(k))return b(k);gx.dbg.logEx(e,"gxapi.js","handleCall: Unexpected server response format (Expected array): "+a)}},postHandler:function(a,b,k,g){try{if(gx.evt.enter=!1,gx.csv.lastEvtResponse=null,200>k.status||299<k.status)gx.dom.writeError(k.responseText,gx.getMessage("GXM_runtimeappsrv"),k.status);else if(gx.http.validJsonResponse(k,b)){var c=gx.json.evalJSON(b);null==c?gx.dom.writeError(b.toString(),gx.getMessage("GXM_runtimeappsrv"),
k.status):(gx.http.refreshState(),gx.csv.lastEvtResponse=c,gx.fn.forceEnableControls(!0),gx.ajax.setPostResponse(c,gx.O,g)||gx.fx.obs.notify("gx.onafterevent",[c]))}}catch(f){gx.dbg.logEx(f,"gxapi.js","postHandler")}},formatLink:function(a,b){a=gx.ajax.objectUrl(a);if(b&&0<b.length)for(var a=a+"?",k=b.length,g=0;g<k;g++)0<g&&(a+=","),a+=encodeURIComponent("function"==typeof b[g].getUrlVal?b[g].getUrlVal():b[g]);return a},loadScripts:function(a,b,k,g){"undefined"==typeof k&&(k=0);k>=a.length?b():gx.http.loadScript(a[k],
function(a,b,d){gx.http.loadScripts(a,b,d+1,g)}.closure(this,[a,b,k]),g)},loadScript:function(a,b,k){var g=b,c;"string"!==typeof a&&(c=a.callback,a=a.url,g=function(){c&&c();b()});var j=gx.dom.byTag("head")[0],m,n=f("script[src='"+a+"']"),p=!0;0<n.length&&!k&&(m=n.get(0),p=!1);m||(m=document.createElement("script"),m.type="text/javascript",m.src=a);"function"==typeof g&&(m.addEventListener?m.addEventListener("load",g,!1):m.onreadystatechange=function(){(m.readyState=="loaded"||m.readyState=="complete")&&
g()});p&&j.appendChild(m)},loadStyle:function(a,b,k,g){if(g=g?gx.dom.el(g):null)g.href=a;else{var c=gx.dom.byTag("head")[0],g=document.createElement("link");g.rel="stylesheet";g.type="text/css";g.href=a;"function"==typeof b&&(g.onload=b);k?(a=gx.getThemeElement(),f(g).insertBefore(a),gx.util.browser.isIE()&&f(a).insertAfter(g)):c.appendChild(g)}},loadStyles:function(){var a=gx.fn.getHidden("GX_STYLE_FILES");if(!gx.lang.emptyObject(a))for(var b=0;b<a.length;b++){var k=a[b];(new gx.util.Url(k)).isRelative()&&
(k=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+k,!1));gx.cache.fileLoaded(k)||(gx.cache.addRemoteFile(k),this.loadStyle(k))}},doCommands:function(){var a=gx.fn.getHidden("GX_SRV_COMMANDS");gx.lang.emptyObject(a)||gx.ajax.dispatchCommands(a)}}}(),stackId:function(a){return"stack_"+gx.util.getWindowInfo().frameId+a},stackSupported:function(){return(gx.evt.clinav||"true"==gx.fn.getHidden("GX_CLI_NAV"))&&gx.call_stack_storage.supported},storage:function(a){this._store=window.sessionStorage;this._prefix=
a;this.supported=!1;this.set_string=function(a,b){this.supported&&(this._store[this._prefix+a]=b)};this.get_string=function(a){return this.supported?this._store[this._prefix+a]:null};this.set=function(a,b){this.set_string(a,gx.json.serializeJson(b))};this.get=function(a){return(a=this.get_string(a))?gx.json.evalJSON(a):null};this.remove=function(a){this.supported&&this._store.removeItem(this._prefix+a)};if("undefined"!=typeof window.sessionStorage)try{window.sessionStorage.setItem("storage.test",
!0),window.sessionStorage.removeItem("storage.test"),this.supported=!0}catch(b){gx.http.setCookie("GXLocalStorageSupport","false",1)}},_setBasePath:function(){for(var a=gx.dom.scripts(),b=null,k=0,g=a.length;k<g;k++)if(0<=a[k].indexOf("gxgral.js")||0<=a[k].indexOf("gxapiSD.js")){b=a[k];break}a="";if(!gx.ajax.isRelativeToHost(b)||gx.ajax.isabsoluteurl(b))k=location.pathname.lastIndexOf("/"),a=1<k?location.pathname.substring(1,k):"";else{var b=b.split("/"),c=location.pathname.split("/");b.splice(b.length-
1,1);c.splice(c.length-1,1);k=0;for(g=c.length;k<g;k++)if(c[k]==b[k]||void 0===b[k])a=a+(""==a?"":"/")+c[k];else break}gx.basePath=a},objectLoad:function(a,b){var k=f.Deferred(),g=gx.dom.fixes;if(!gx.evt.execLoad)return k.resolve(),k.promise();void 0===gx.runtimeTemplates&&(gx.runtimeTemplates=0<f("div[data-abstract-form]").length);var c=!0;gx.sec.loadKey();gx.setTheme();gx.fx.obs.addObserver("webcom.render",this,function(a){if(a=a.getContainer()){gx.setTheme(a);c||gx.plugdesign.applyTemplateObject({selector:"#"+
a.id})}});gx.fx.obs.addObserver("grid.onafterrender",this,function(a){a.ownerGrid.parentGrid||g.fixTableResets(a.container)});g.fixChromeFocus();delete gx.evt.redirecting;gx.ajax._init();gx.grid._init();gx.evt.attach(window,"unload",gx.evt.onunload);gx.fn.setFocusInit();g.createLegacyNotification();gx.cache._init();gx.fn.installComponents(!0,b);gx.http.loadStyles();a&&gx.fn.loadJsonGrids(a,!1);gx.plugdesign.init().done(function(){if(typeof gx.StorageTimeZone!="undefined"&&gx.StorageTimeZone!=gx.NULL_TIMEZONEOFFSET){var a=
jstz.determine().name();!gx.lang.emptyObject(a)&&(gx.http.getCookie("GxTZOffset")!=a&&gx.http.setCookie("GxTZOffset",a,30))&&gx.http.reload()}gx.fn.objectOnload();gx.fx.obs.notify("gx.onready");document.gxReadyState="complete";gx.util.autoRefresh.install();gx.fn.setOpacity("reset","body");gx.evt.setProcessing(false);gx.fx.obs.notify("gx.onload");gx.evt.userOnload();gx.fn.setFocusOnload();gx.fx.delayedSuggest();gx.http.doCommands();gx.evt.setReady(true);gx.evt.userReadyCnt=0;c=false;k.resolve()});
return k.promise()},objectUnload:function(a){gx.fx.obs.notify("gx.onunload");gx.http.saveState(!0);gx.evt.clearHooks();gx.fx.obs.removeAll();gx.util.autoRefresh.destroy();gx.fn.objectOnUnload(a);gx.plugdesign.deinit();gx._deinit();f(document).off("keydown keypress keyup")},_init:function(){gx.lang.apply(this,{oldValues:[],oldKeyValues:[],newRows:[],suggestControls:{},disabledControls:[],usrPtys:[],usrFocusControl:"",currentRows:[],attachedControls:[],theme:""});gx.dbg._init();gx.dom._init();gx.base64._init();
gx.sec._init();gx.util._init();gx.evt._init();gx._setBasePath();gx.date._init();gx.html.controls._init();gx.popup._init();gx.geolocation._init();gx.call_stack_storage=new gx.storage("gx_call_stack")},_deinit:function(){if(gx.popup.ispopup()&&gx.evt.execLoad||gx.dom.shouldPurge()){gx.dom.purgeElement(document.body);gx.dom.purgeElement(gx.dom.form());for(var a=["onblur","onclick","onfocus","onchange"],b=gx.dom.form().elements,k=0,g=b.length;k<g;k++)gx.dom.purgeElement(b[k],a);b=gx.dom.byTag("span");
k=0;for(g=b.length;k<g;k++)gx.dom.purgeElement(b[k],a);b=gx.dom.byTag("img");k=0;for(g=b.length;k<g;k++)gx.dom.purgeElement(b[k],a)}gx.dom._deinit();gx.csv._deinit();gx.evt._deinit();gx.grid._deinit();gx.printing._deinit();gx.O=null;gx.pO=null},reinit:function(a){gx.pO.clean(a);gx.objectUnload(a);gx._init()}}}(jQuery);gx.config={popup:{ignoreCmdsOnCancel:!1},websocket:{}};
var GlobalEvents=function(){return{executeMethod:function(f,c){gx.fx.obs.notify(f,c);try{window.top&&(window.top!==window&&window.top.gx)&&window.top.gx.fx.obs.notify(f,c)}catch(j){}}}}(jQuery);
gx.plugdesign=function(f){var c={},j=!1,b,a,d=1;return{init:function(){gx.plugdesign.initialized=!0;gx.fx.obs.addObserver("gx.plugdesign.onafterapplytemplate",this,gx.plugdesign.fixBootstrapGridLayout.closure(this));return gx.plugdesign.applyTemplateObject()},deinit:function(){gx.plugdesign.initialized=!1;delete gx.runtimeTemplates},registerTemplate:function(a){c[a.name]=a},getDOMContext:function(a,b,d,c,j){var n,p,q,b={};b.text=f(a).text();n=0;for(q=a.attributes.length;n<q;n++)p=a.attributes[n],
b[p.name]=p.value;b.el=a;d&&(b.outerHTML=a.outerHTML);c&&(b.innerHTML=a.innerHTML);j&&(b=j.call(this,b,a)||b);return b},assingUserAPI:function(a,b){b.fnc_isRO=a.fnc_isRO},getElements:function(a,b,d){var c=b instanceof f;"function"==typeof a.selector?a=a.selector(c||!b?"":b):(a=b&&!c&&!a.global?b+" "+a.selector.split(",").join(", "+b):a.selector,a=f(a));c&&(a=b.find(a));return d?a.not(d):a},applyTemplateOnElement:function(a,b,d){if("string"==typeof a&&(a=c[a],!a))return;if(!0!==d||gx.util.inArray(b,
this.getElements(a))){var j=gx.plugdesign.getDOMContext(b,j,a.outerHTML,a.innerHTML,a.setContext);a.apply(b,j);a.initialize&&a.initialize(j);if(a.listeners){var m,n,p=a.listeners,q="function"==typeof p.control?p.control(j):p.control,b=gx.fn.controlGridId(f(b).attr("data-gx-enabled-id")||q);p.before&&(n=function(b){if((b.control.id==q||"INPUT"==b.control.tagName&&"radio"==b.control.type&&b.control.name==q)&&"function"==typeof p.before[b.property]){var d=!0===p.before[b.property].call(a,b.control,b.value);
b.cancel=d}},gx.fx.obs.addObserver("gx.control.onbeforepropertychange",this,n,{unique:!1}));p.after&&(m=function(b){var d=typeof p.control=="function"?p.control(j):p.control;(b.control.id==d||b.control.tagName=="INPUT"&&b.control.type=="radio"&&b.control.name==d)&&typeof p.after[b.property]=="function"&&p.after[b.property].call(a,b.control,b.value)},gx.fx.obs.addObserver("gx.control.onafterpropertychange",this,m,{unique:!1}));if(b&&(m||n))(b=gx.fn.getGridObj(b))&&b.grid.beforeRenderCallbacks.push(function(){m&&
gx.fx.obs.deleteObserver("gx.control.onafterpropertychange",this,m);n&&gx.fx.obs.deleteObserver("gx.control.onbeforepropertychange",this,n)}.closure(this))}}},applyTemplateSelection:function(a,b,d){var c="data-gx-tpl-applied-"+a.name,j=this.getElements(a,b,d);!0!==a.onDemandInvoke&&!a.reDraw&&(j=j.not("["+c+"]"));j.each(function(b,d){if(d)if("function"==typeof a.reDraw)if(void 0!==f(d).attr(c)){var g;g=gx.plugdesign.getDOMContext(d,g,!1,!1,a.setContext);a.reDraw(g)}else gx.plugdesign.applyTemplateOnElement(a,
d);else gx.plugdesign.applyTemplateOnElement(a,d)});j=this.getElements(a,b,d);j.attr(c,"")},applyClassMapOnElement:function(a,b){var d;d=gx.plugdesign.getDOMContext(b,d,!1,!1,a.setContext);if(a.first){var c=f(b).attr("class")||"";f(b).attr("class",a.cssClass+" "+c.replace(a.cssClass,""))}else gx.dom.addClass(b,a.cssClass);a.initialize&&a.initialize(d)},applyClassSelection:function(a,b,d){this.getElements(a,b,d).each(function(b,d){d&&(gx.plugdesign.applyClassMapOnElement(a,d),gx.plugdesign.assingUserAPI(a,
d),gx.fx.obs.addObserver("gx.control.onafterpropertychange",this,function(b){"Class"==b.property&&f(b.control).is(a.selector)&&gx.plugdesign.applyClassMapOnElement(a,b.control)},{unique:!1}))})},controlValueChanged:function(a,b){a&&gx.fx.obs.notify("gx.control.onafterpropertychange",[{control:a,property:"Value",value:b}])},applyControlValue:function(a,b){gx.fn.setControlValue(a.id,b);gx.html.onchange(a,b)},applyTemplates:function(a,b,j,l){f.each(a,function(a,k){"string"==typeof k?k=c[k]:(k.name=k.name||
"auto-generated-"+d++,k=new gx.plugdesign.Template(k));(!l||"function"==typeof l&&l(k))&&gx.plugdesign.applyTemplateSelection(k,b,j)})},applyClassMaps:function(a,b,d){f.each(a,function(a,k){gx.plugdesign.applyClassSelection(k,b,d)})},applyTemplateObject:function(d){var d=d||{},g=d.selector,c=d.excluded,l=d.templateSelector,m=f.Deferred(),l=l||function(a){return!0!==a.onDemandInvoke};if(!gx.runtimeTemplates||!gx.plugdesign.initialized)return m.resolve().promise();j?(this.applyTemplates(b,g,c,l),this.applyClassMaps(a,
g,c),gx.fx.obs.notify("gx.plugdesign.onafterapplytemplate"),m.resolve()):gx.http.doCall({avoidCache:!1,sync:!1,method:"GET",url:gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"gxtemplate.json?"+gx.gxBuild,!1),handler:function(d,k){var q=gx.json.evalJSON(k);q.css&&f.each(q.css,function(a,b){gx.http.loadStyle(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+b+"?"+gx.gxBuild,!1),!1,!0)});var u=[];q.js&&f.each(q.js,function(a,b){u.push(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+b+"?"+gx.gxBuild,
!1))});var s=jQuery;jQuery=gx.$;gx.http.loadScripts(u,function(){j=!0;b=q.templates||[];a=q.class_maps||[];this.applyTemplates(b,g,c,l);this.applyClassMaps(a,g,c);jQuery=s;gx.fx.obs.notify("gx.plugdesign.onafterapplytemplate");m.resolve()}.closure(this))},obj:this});return m.promise()},fixBootstrapGridLayout:function(){0===f(".container-fluid, .container").length&&f(".row").first().parent().toggleClass("container-fluid",!0)},Template:function(){var a=function(a){var b,d=[],a=a||{};if(a.name){if(a.selector){if(a.listeners){var k=
a.listeners;if(!k.control&&(k.before||k.after)){gx.dbg.write("If a visible or enabled handler is specified, a control must be specified too",!0);return}}this.preProcessTemplate=function(a){var b=this.template,k=/\{\{\$(\w+)\$\}\}/g,g,c=0;for(d=[];null!==(g=k.exec(b));)d[c]=g[1],a[d[c]]&&(b=b.replace(g[0],'<span id="hook_'+c+'"></span>')),c++;return b};this.getTemplate=function(a){return this.preProcessTemplate(a)};this.postProcessTemplate=function(a){var b,k,g,c;if(d){b=0;for(k=d.length;b<k;b++)g=
a[d[b]],c=f("#hook_"+b),g?c.replaceWith(g):c.remove()}};this.apply=function(a,d){var k;!b&&this.template&&(b=Mustache.compile(this.preProcessTemplate(d)));b&&(k=b(d),"inner"==this.applyTo?a.innerHTML=k:f(a).replaceWith(k),this.postProcessTemplate(d))};gx.lang.apply(this,a);return this}gx.dbg.write("A selector must be specified",!0)}else gx.dbg.write("A name must be specified",!0)};a.prototype={name:"",selector:"",template:"",applyTo:"outer",outerHTML:!1,innerHTML:!1,global:!1,onDemandInvoke:!1,setContext:gx.emptyFn,
initialize:gx.emptyFn,listeners:{}};return a}()}}(gx.$);
gx.html=function(f){var c=/<style[^>]*>([\s\S]*?)<\/style>/i,j=RegExp("<style[^>]*>([\\s\\S]*?)</style>","ig"),b=/<link ([^>]*rel=['"]?stylesheet['"]?[^>]*)>/i,a=RegExp("<link ([^>]*rel=['\"]?stylesheet['\"]?[^>]*)>","ig"),d=/<script[^>]*>[\s\S]*?(<script[^>]*>[\s\S]*?<\?\/script>)/i,k=/<script([^>]*)>([\s\S]*?)<\/script>/i,g=RegExp("<script([^>]*)>([\\s\\S]*?)<\/script>","ig"),o=/href=(['"]?)([^'">]*)\1/i,l=/id=(['"]?)([^'">]*)\1/i,m=/src=(['"]?)([\s\S]*)\?([^"']*)\1/i,n=/src=(['"]?)([^"']*)\1/i;
return{encodeCaseFormat:function(a,b,d){b==gx.html.controls.formats.TEXT?a=gx.html.encode(a,!1,d):b==gx.html.controls.formats.TEXT_W_SPACES&&(a=gx.html.encode(a,!0,d));return a},encode:function(a,b,d){var k=["<",">","&"],g=["&lt;","&gt;","&amp;"];b&&(k.push(" "),g.push("&nbsp;"));d&&(k.push("\n"),g.push("<br/>"));return gx.text.charReplace(a,k,g)},getHidden:function(a,b){return'<input type="hidden" id="'+a+'" name="'+a+'" value="'+b+'">'},viewportWidth:function(){var a=document.documentElement;return a&&
a.clientHeight?Math.max(a.clientWidth,document.body.clientWidth):document.body.clientWidth},viewportHeight:function(){var a=document.documentElement;return a&&a.clientHeight?Math.max(a.clientHeight,document.body.clientHeight)-5:document.body.clientHeight-5},cleanHtmlRefs:function(b,d){(void 0===d||d)&&(b=b.replace(j,""));b=b.replace(a,"");return b=b.replace(g,"")},setOuterHtml:function(a,b){a.outerHTML=b},setInnerHtml:function(a,b,d,k,g){var c=gx.dom.styles(),j=gx.GxObject.WEBCOMPONENT_BODY_CLASS_NAME;
gx.dom.shouldPurge()&&gx.dom.purge(a,!0);var o=f(a).children("."+j).get(0);!o&&k&&(o=document.createElement("div"),gx.dom.addClass(o,j),gx.dom.addClass(o,"Form-fx"),a.appendChild(o));k&&gx.pO.fullAjax&&o&&gx.dom.hasClass(o,j)&&!gx.dom.hasClass(a,"transitioning")?(a=document.createElement("div"),a.innerHTML=this.cleanHtmlRefs(b,g),gx.dom.replaceWithFx(o,a.children[0])):f(a).html(this.cleanHtmlRefs(b,g));gx.util.browser.isIE()&&gx.cache.updateStyles(c,gx.dom.styles());!0==d&&this.processCode(b,!1)},
setInnerText:function(a,b,d,k){var g=f(a);null!=a.nodeValue?a.nodeValue=b:!gx.util.browser.isChrome()&&null!=a.innerText?a.innerText=b:gx.util.browser.isFirefox()||gx.util.browser.isChrome()?g.html(gx.html.encodeCaseFormat(b,d,k)):"TEXT"==a.tagName&&null!=a.innerHTML?g.html(b):g.html("<text>"+b+"</text>")},nodesFromText:function(a){var b=document.createElement("div");b.style.visibility="hidden";b.style.display="none";document.body.appendChild(b);gx.dom.shouldPurge()&&gx.dom.purge(b,!0);b.innerHTML=
a;for(var a=[],d=b.childNodes.length,k=0;k<d;k++)a.push(b.childNodes[k].cloneNode(!0));gx.dom.removeControlSafe(b);return a},onTypeAvailable:function(a,b,d){try{eval(a),d instanceof Array?b.apply(this,d):b()}catch(k){setTimeout(function(){gx.html.onTypeAvailable(a,b,d)},250)}},processCSS:function(a){if(""!=a){var b=document.createElement("style");b.setAttribute("type","text/css");document.getElementsByTagName("head")[0].appendChild(b);b.styleSheet?b.styleSheet.cssText=a:(a=document.createTextNode(a),
b.appendChild(a))}},nestedScripts:function(a,b){for(var g=a[0].match(d),c=b,f=0;g;)c=c.replace(g[1],""),f++,g=(a=c.match(k))?a[0].match(d):null;return f},processCode:function(a,d,g,f,j,t,v){var y=a,z=[],C=!1,D=[],x=[],H=[];if(""!=a){var w=[];if(void 0===t||t)for(;w;){if(w=a.match(c))(t=w.lastIndex)||(t=w.index+w[0].length),a=a.substring(t);else break;H.push(w[1])}a=y;for(w=[];w;){if(w=a.match(b))(t=w.lastIndex)||(t=w.index+w[0].length),a=a.substring(t);else break;t=w[1].match(o);idAttr=w[1].match(l);
t&&!gx.cache.fileLoaded(t[2])&&(x.push({href:t[2],id:idAttr&&2<idAttr.length?idAttr[2]:null}),gx.cache.addRemoteFile(t[2]))}a=y;for(w=[];w;){if(w=a.match(k))y=this.nestedScripts(w,a),0<y&&(w=RegExp("<script([^>]*)>(([\\s\\S]*?<script[^>]*>[\\s\\S]*?<\\?/script>[\\s\\S]*?){X})<\/script>".replace("{X}","{"+y+"}"),"i"),w=a.match(w)),(t=w.lastIndex)||(t=w.index+w[0].length),a=a.substring(t);else break;void 0!=w[1]&&""!=w[1]?(t=w[1].match(m),null==t&&(t=w[1].match(n)),t&&!gx.cache.fileLoaded(t[2])?(y=
t[2],gx.lang.emptyObject(t[3])||(y+="?"+t[3]),z.push({url:y,callback:function(a){return function(){gx.cache.addRemoteFile(a)}}(t[2])})):t&&gx.cache.fileLoaded(t[2])?C=!0:!t&&w[2]&&D.push(w[2])):w[2]&&D.push(w[2])}if(!0!=d){w="";d=D.length;for(a=0;a<d;a++)w+=D[a];""!=w&&gx.lang.doEval(w);var A=[];if("function"==typeof g)gx.http.loadScripts(z,function(a,b){b instanceof Array?a.apply(this,b):a()}.closure(this,[g,f]),void 0,v);else{v={method:"GET",useCash:!0};v.load=function(a,b){gx.lang.supEval(this,
A.push(b))}.closure(this);v.mimetype="text/plain";v.sync=!0;for(var E=z.length,a=0;a<E;a++)v.url=z[a],gx.http.doCall(v)}w="";d=A.length;for(a=0;a<d;a++)w+=A[a];""!=w&&gx.lang.doEval(w);z=document.getElementsByTagName("style");d=x.length;for(a=0;a<d;a++){v=!1;D=z.length;for(w=0;w<D;w++)if(z[a]&&x[a].href==(z[w].styleSheet&&z[w].styleSheet.cssText?z[w].styleSheet.cssText:z[w].innerHTML))v=!0;v||((v=gx.dom.el(x[a].id))?v.href=x[a].href:gx.http.loadStyle(x[a].href,gx.emptyFn,!1,x[a].id))}w="";d=H.length;
for(a=0;a<d;a++)w+=H[a];gx.html.processCSS(w);if(0==E&&"function"==typeof g)if(C&&j)gx.html.onTypeAvailable(j,g,f);else f instanceof Array?g.apply(this,f):g()}}},getFieldLabel:function(a,b){var d,k=a.id;"INPUT"==a.tagName||"SELECT"==a.tagName||"TEXTAREA"==a.tagName?d=a.id:"SPAN"==a.tagName?(d=f(a).attr("data-gx-enabled-id"),!d&&0===k.indexOf("span_")&&(d=k.substring(5))):gx.dom.hasClass(a,gx.uc.gxCssClass)&&(d=gx.uc.CtrlId(a.id));gx.dom.hasClass(a,gx.html.multimediaUpload.gxCssClass)&&(d=gx.html.multimediaUpload.CtrlId(a.id));
if(d)return f("label[for='"+d+"']",b).get(0)},multimediaUpload:{gxCssClass:"gx-multimedia-upload",getInputFileEl:function(a){return f("#"+a+"[type='file']")[0]},CtrlId:function(a){return a.replace(/_ct$/,"")},resolveFileName:function(a,b){return a||b||""},onOptionChange:function(a){var a=this.getElements(a),b=a.fileField,d=a.uriField;a.uriOption.checked?(gx.dom.removeClass(b,"field-selected"),gx.dom.addClass(d,"field-selected")):(gx.dom.removeClass(d,"field-selected"),gx.dom.addClass(b,"field-selected"))},
imageLoadHandler:function(a,b){var d=function(a){var b="IMG"==a.tagName?"src":"href";return!a[b]||a[b]==document.location.href||"/"==a[b].charAt(a[b].length-1)};!a||d(a)?gx.dom.addClass(b,"gx-multimedia-empty"):gx.dom.removeClass(b,"gx-multimedia-empty");b&&!d(b)&&gx.dom.removeClass(b,"gx-multimedia-empty");if(gx.util.browser.isIE()&&a&&"IMG"==a.tagName){var d=f(a),k=parseInt(d.css("maxWidth")),g=parseInt(d.css("maxHeight"));k<a.width&&(d.css("height",gx.dom.addUnits(k*a.height/a.width)),d.css("width",
gx.dom.addUnits(k)));g<a.height&&(d.css("width",gx.dom.addUnits(g*a.width/a.height)),d.css("height",gx.dom.addUnits(g)))}},dialogCloseHandler:function(a,b){var d=this.getElements(a);b.style.display="none";a.appendChild(b);d.uriOption.checked?this.refreshPreviewImg(a,d.uriField):this.refreshPreviewImg(a,d.fileField);d.action.focus()},prevImgClickHandler:function(a,b){var a=a||event,d=gx.evt.source(a);0<f(d).closest(".gx-multimedia-empty").length&&this.actionClickHandler(a,b)},actionClickHandler:function(a,
b){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;var d=this.getElements(b),k=d.button;d.fieldsCt.style.display="block";var g=130,c=500,j=!0;gx.util.browser.isIE()&&gx.util.browser.isCompatMode()&&(b.style.position="static",d.fileField.style.marginTop="0",d.uriField.style.marginTop="0",g=230);gx.runtimeTemplates&&(j=!1,f(window).width()<c&&(c=f(window).width()-20,g=170));g=gx.popup.openDialog({parentElement:b,w:c,h:g,contentHtml:d.fieldsCt,title:"",showParentPopups:!1,showCloseButton:!0,
resizable:j,callbacks:{beforeClose:this.dialogCloseHandler.closure(this,[b,d.fieldsCt,k])}});d.fileOption.focus();gx.evt.attach(k,"click",g.close,g,{single:!0});gx.fx.obs.addObserver("gx.keypress",this,this.keypressHandler)},clearActionHandler:function(a,b){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;var d=this.getElements(b);d.uriField.value="";d.fileField.value="";d.uriOption.checked=!1;d.fileOption.checked=!0;gx.fx.obs.notify("gx.multimedia.clear",[b]);this.refreshPreviewImg(b,
d.fileField)},keypressHandler:function(a){13==a.event.keyCode&&(a.cancel=!0,gx.popup.currentPopup.close(),gx.fx.obs.deleteObserver("gx.keypress",this,this.keypressHandler))},tapHandler:function(a){this.getElements(a).action.focus()},getElements:function(a){var a=gx.dom.el(a),b=f(a),a=b.find(".change-action")[0],d=b.find(".clear-action")[0],k=null,g=f(d).next()[0],b=b.find(".fields-ct");"A"==g.tagName?(k=g,g=g.firstChild):"IMG"!=g.tagName&&(g=null);return{previewLink:k,action:a,clearAction:d,previewImg:g,
fieldsCt:b[0],uriField:b.find("input[type='text']")[0],fileField:b.find("input[type='file']")[0],uriOption:b.find("input[type='radio'][value='uri']")[0],fileOption:b.find("input[type='radio'][value='file']")[0],button:b.find("input[type='button']")[0]}},getContainer:function(a){for(a=gx.dom.el(a);a;){if(gx.dom.hasClass(a,gx.html.multimediaUpload.gxCssClass))return a;a=a.parentNode}return null},setPreviewImage:function(a,b){var a=gx.dom.el(a),d=this.getElements(a);d.previewImg&&("IMG"==d.previewImg.tagName&&
(d.previewImg.src=b),this.imageLoadHandler(d.previewImg,d.previewLink))},setPreviewLink:function(a,b){var a=gx.dom.el(a),d=this.getElements(a);d.previewLink&&(b&&(!d.previewImg||"IMG"!=d.previewImg.tagName)?d.previewLink.href=b:d.previewLink.removeAttribute("href"));this.imageLoadHandler(d.previewImg,d.previewLink)},refreshPreviewImg:function(a,b){var a=gx.dom.el(a),d=this.getElements(a);if(d.previewImg&&"INPUT"==b.tagName){if(b==d.fileField){var k;if(b.files&&(k=b.files[0]))if(k.type.match(/image.*/)){var g=
new FileReader;g.onload=function(a,b,d){b.src=a.target.result;d.href=a.target.result}.closure(this,[d.previewImg,d.previewLink],!0);g.readAsDataURL(k)}else d.previewLink.href="#";if(!k&&"1"==b.getAttribute("gxctrlchanged")||b.gxctrldeleted)d.previewImg.src="",d.previewLink.href=""}else b==d.uriField&&(d.previewImg.src=b.value,d.previewLink.href=b.value);this.imageLoadHandler(d.previewImg,d.previewLink)}},setType:function(a,b){var a=gx.dom.el(a),d=this.getElements(a);d.fileOption.checked=b;d.uriOption.checked=
!b;b&&(d.uriField.value="");this.onOptionChange(a)},getOptionValue:function(a){a=gx.dom.el(a);return this.getElements(a).fileOption.checked?"file":"uri"},createControl:function(a){a=gx.dom.el(a);if(!a._created){a._created=!0;var b=this.getElements(a);gx.dom.addClass(b.fileField,"field-selected");b.action.setAttribute("gxfocusable","1");var d=document.createElement("input");d.type="button";d.className="BtnEnter";d.value=gx.getMessage("GXM_uploadconfirmoption");b.fieldsCt.appendChild(d);var d=this.imageLoadHandler.closure(this,
[b.previewImg,b.previewLink]),k=this.onOptionChange.closure(this,[a]);d();b.previewImg&&gx.evt.attach(b.previewImg,"load",d);k();gx.evt.attach(b.uriOption,"click",k);gx.evt.attach(b.fileOption,"click",k);gx.evt.attach(b.action,"click",this.actionClickHandler.closure(this,[a],!0));gx.evt.attach(b.previewImg.parentNode,"click",this.prevImgClickHandler.closure(this,[a],!0));gx.evt.attach(b.clearAction,"click",this.clearActionHandler.closure(this,[a],!0));gx.evt.attach(a,"touchstart",this.tapHandler.closure(this,
[a]))}}},controls:function(){var a={},b={label:'<label class="gx-label {{className}}" {{additionalAtts}} for="{{relatedElement}}">{{caption}}</label>',radio:['<span class="{{className}}" style="{{style}}">',"{{#values}}",'<label for="{{itemId}}"><input type="radio" id="{{itemId}}" name="{{id}}" value="{{itemValue}}" title="{{title}}"gxoch0="{{gxoch0}}"{{#isSelected}} checked{{/isSelected}}{{#isDisabled}} disabled{{/isDisabled}}{{{extraAttributes}}}>{{itemDesc}}</label>',"{{/values}}","</span>"]},
d=function(d,k){var g;a[d]||(g=gx.lang.isArray(b[d])?b[d].join(""):b[d],a[d]=Mustache.compile(g));return a[d](k)};return{applyTemplate:d,types:{singleLineEdit:1,multipleLineEdit:2,blob:3,radio:4,comboBox:5,listBox:6,checkBox:7,image:8,textBlock:9,button:10,grid:11,userControl:12,userControlContainer:13,webComponent:14,embeddedPage:15,table:16,row:17,cell:18,group:19,multimedia:20,video:21,audio:22,div:23,responsiveRow:24,responsiveCell:25,label:26,divEnd:27},formats:{TEXT:0,HTML:1,RAW_HTML:2,TEXT_W_SPACES:3},
isMultiSelection:function(a){return"combo"==a||"dyncombo"==a||"listbx"==a||"dynlistbx"==a?!0:!1},eventJSCode:function(a,b,d,k,g){var c="";if(4==a&&d)c=d;else if(1==a)c="gx.fn.closeWindow();";else if(7==a)a="",k&&g&&(a=",'"+k.gridName+"','"+g.gxId+"'"),c="gx.evt.execCliEvt("+b+a+",this);";else if(6==a||5==a)c="gx.evt.execEvt("+b+",this,"+k.gridId+");";return c},startAnchor:function(a,b,d,k,g,c,f){var f=f?' class="'+f+'"':"",j=gx.GxObject,o=" "+j.GX_EVENT_DATA_ATTR+'="'+b+'"';scriptAttribute="";4===
b&&(scriptAttribute=" "+j.GX_EVENT_CODE_DATA_ATTR+'="'+b+'"');k?d?a.append('<a href="#"'+o+" "+j.GX_EVENT_CONDITION_DATA_ATTR+'="'+k+'"'+scriptAttribute+f+">"):a.append('<a href="#"'+o+scriptAttribute+f+">"):d?a.append('<a href="#"'+o+scriptAttribute+f+">"):g&&(a.append('<a href="'+g+'"'),""!=c&&a.append(' target="'+c+'"'),a.append(f+">"))},endAnchor:function(a,b,d,k){(b||d||k)&&a.append("</a>")},onJSEvent_impl:function(a,b,d){var k=[];""!=d&&k.push('jsevent="'+d+'" ');k.push(a+'="if( ');""!=b?k.push("gx.evt.jsEvent(this)) {"+
b+'} else return false;"'):k.push('!gx.evt.jsEvent(this)) return false;"');return k.join("")},onJSEvent:function(a,b,d,k){a.append(" ");a.append(this.onJSEvent_impl(b,d,k))},htmlControl:function(a,b,d,k,g){this.id=a||"";this.width=b||0;this.widthUnit="px";this.height=d||0;this.heightUnit="px";this.cssClass=k||"";this.style=this.ownCssClass=this.roClass="";this.title=g||"";this.value="";this.type=-1;this.dataType="";this.enabled=this.visible=!0;this.rtEnabled=!1;this.jsEvent=this.linkTarget=this.link=
"";this.hasJsLink=!1;this.extraAttributes="";this.column=this.row=this.grid=null;this.gridRow=this.gridId="";this.buffer=new gx.text.stringBuffer;this.getHtml=function(){this.buffer.clear();this._getHtml();return this.buffer.toString()};this.append=function(a){return this.buffer.append(a)};this.tagAtt=function(a,b){return this.buffer.append(" "+a+'="'+b.toString().replace(/\"/g,"&quot;")+'"')};this.persistValue=function(){var a=this.getVStruct();!gx.lang.emptyNum(this.column.gxId)&&a&&(this._persistValue?
this._persistValue():a.v2v&&a.v2v(this.value))};this.setIndividualProp=function(a,b){this[a]="enabled"==a||"visible"==a||"isPassword"==a||"autoComplete"==a||"hasJsLink"==a?gx.lang.gxBoolean(b):b};this.setGridData=function(a){this.grid=a.grid;this.row=a.row;this.gridId=a.gridId;this.gridRow=a.gridRow};this.getGridData=function(){return{grid:this.grid,row:this.row,gridId:this.gridId,gridRow:this.gridRow}};this.getVStruct=function(){return this.grid.parentObject.GXValidFnc[this.column.gxId]};this.getEventContext=
function(){var a=this.grid.parentObject;return JSON.stringify([a.CmpContext,a.IsMasterPage])}},singleLineEdit:function(a,b,d,k,g){this.base(a,b,d,k,g);this.type=gx.html.controls.types.singleLineEdit;this.maxLength="";this.isPassword=!1;this.setProperties=function(a,b,d,k,g,c,f,j,o,l,m,s,r,n,p,t,u,q,v,y,N,O,P,Q,R,S,X,Y,Z,aa,ba,ca,da,ea){this.id=a;this.inputType=q;this.step=v;this.title=f;this.placeholder=j;this.width=y;this.widthUnit=N;this.height=17==O?0:O;this.heightUnit=P;this.maxLength=Q;this.visible=
0!=p;this.enabled=0!=t;this.rtEnabled=0!=u;this.isPassword=0!=R;this.format=S;this.link=g;this.linkTarget=c;this.style=s;this.cssClass=m;this.roClass=r;this.columnClass=n;this.vStruct=gx.O.getValidStructFld(this.column.htmlName);this.formattedValue=!gx.lang.emptyObject(b)?gx.html.encodeCaseFormat(b,S):this.applyPicture(gx.html.encodeCaseFormat(ea||"",S));this.extraAttributes=d;this.jsScrCode=l;this.usrOnclick=o;this.eventName=k;this.parentId=X;this.hasTheme=Y;this.autoComplete=0!=Z;this.autoCorrection=
0!=aa;this.value=ea||"";this.domainName=ca};this.applyPicture=function(a){var b=this.vStruct;if(!gx.lang.emptyObject(b)&&!gx.lang.emptyObject(b.pic)&&!gx.lang.emptyObject(b.type))switch(b.type){case "int":return gx.num.formatNumber(a,b.dec,b.pic,b.len,b.sign,!0);case "decimal":return gx.num.formatNumber(a,b.dec,b.pic,b.len,b.sign,!0);case "char":return a;default:return a}else return a};this._getHtml=function(){var a="",b="",d=this.getVStruct();0==this.width&&(this.width=this.colSize?this.colSize:
this.maxLength,this.widthUnit="chr");0<this.width&&("chr"==this.widthUnit?a=' size="'+this.width+'"':this.style=this.style+";width: "+this.width+this.widthUnit+";");0<this.height&&"row"!=this.heightUnit&&(this.style=this.style+";height: "+this.height+this.heightUnit+";");b=this.style;this.style+=!this.visible?";display:none;":"";if(this.rtEnabled||this.enabled){if(this.dataType==gx.types.date||this.dataType==gx.types.dateTime)this.append("<div"),this.tagAtt("id",this.id+"_dp_container"),""!=this.column.align&&
this.tagAtt("data-align",this.column.align),this.tagAtt("class","dp_container"),""!=this.style&&this.tagAtt("style","white-space:nowrap;display:inline;width:auto;"),this.append(">");!this.row.ownerGrid.isFreestyle&&(void 0===this.column.titleformat||this.column.titleformat==gx.html.controls.formats.TEXT)&&this.append('<label for="'+this.id+'" style="display:none">'+this.column.title+"</label>");this.append("<input");if(!0==this.isPassword)this.tagAtt("type","password");else if(this.tagAtt("type",
this.inputType),this.step&&("number"==this.inputType||"range"==this.inputType))this.tagAtt("step",this.step),"search"==this.inputType&&(this.extraAttributes+=' onsearch="this.onchange();"');this.tagAtt("id",this.id);this.tagAtt("name",this.id);this.tagAtt("value",this.dataType==gx.types.numeric?gx.text.ltrim(this.formattedValue):this.formattedValue);this.append(a);""!=this.title&&this.tagAtt("title",this.title);""!=this.placeholder&&this.tagAtt("placeholder",this.placeholder);this.autoComplete||this.tagAtt("autocomplete",
"off");this.tagAtt("spellcheck",this.autoCorrection.toString());"date"!=this.inputType&&("datetime"!=this.inputType&&"datetime-local"!=this.inputType)&&this.tagAtt("maxlength",this.maxLength);""!=this.cssClass&&this.tagAtt("class",this.cssClass);a=this.style;""!=this.column.align&&(a+=";text-align:"+this.column.align);var k=!this.enabled&&this.rtEnabled?";display:none;":"",a=a+k;""!=a&&this.tagAtt("style",a);this.append(this.extraAttributes);this.append(">");this.dataType==gx.types.date||this.dataType==
gx.types.dateTime?(a=this.grid.parentObject.getValidStructFld(this.id),void 0!=a.dp&&(0==a.dp.f&&(this.append("<img"),this.tagAtt("src",gx.ajax.getImageUrl(gx,"datepickerImage")),this.tagAtt("id",this.id+"_dp_trigger"),k=!this.enabled&&this.rtEnabled||!this.visible?";display:none;":"",this.tagAtt("style","cursor: pointer"+k),this.append(">")),this.append("</div>"),this.grid.addDatepickerToSetup({CtrlId:this.id,Grid:this.gridId,Row:this.gridRow}))):gx.html.controls.specificDomainCtrls(this)}if(!this.enabled){k=
"";this.rtEnabled||this.grid.addHiddenControl(this.id,this.value);k=this.hasTheme?0==this.parentId?""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly")?"Readonly"+this.cssClass:this.cssClass:""!=this.roClass&&0!=this.roClass.indexOf("Readonly")?"Readonly"+this.roClass:this.roClass:this.cssClass;a="";this.format!=gx.html.controls.formats.RAW_HTML&&(b+=!this.visible?";display:none;":"",this.append("<span"),this.append(this.extraAttributes),""!=k&&this.tagAtt("class",k),""!=b&&this.tagAtt("style",
b),""!=this.title&&this.tagAtt("title",this.title),this.tagAtt("id","span_"+this.id),this.tagAtt("data-gx-enabled-id",this.id),d.evt&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,d.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext())),this.append(">"),a=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row),gx.html.controls.startAnchor(this,this.jsScrCode,a,this.usrOnclick,this.link,this.linkTarget));if(this.isPassword){b=gx.lang.emptyObject(this.maxLength)?
3:parseInt(this.maxLength);for(d=0;d<b;d++)this.append("*")}else this.append(this.formattedValue);this.format!=gx.html.controls.formats.RAW_HTML&&(gx.html.controls.endAnchor(this,a,this.usrOnclick,this.link),this.append("</span>"));this.format==gx.html.controls.formats.RAW_HTML&&gx.html.processCode(this.buffer.toString(),!1);gx.html.controls.specificDomainCtrls(this)}}},multipleLineEdit:function(a,b,d,k,g){this.base(a,b,d,k,g);this.type=gx.html.controls.types.multipleLineEdit;this.setProperties=function(a,
b,d,k,g,c,f,j,o,l,m,s,r,n,p,t,u,q,v,y,N,O,P,Q,R){this.id=a;this.visible=0!=g;this.enabled=0!=c;this.rtEnabled=0!=f;this.width=j;this.widthUnit=o;this.height=l;this.heightUnit=m;this.style=s;this.cssClass=r;this.columnClass=n;this.maxLength=p;this.extraAttributes=d;this.autoresize=0!=t;this.format=k;this.link=b;this.linkTarget=q;this.placeholder=v;this.value=R;this.autoCorrection=0!=y;this.domainName=O;this.maxTextLines=u;this.jsScrCode=Q};this._getHtml=function(){var a=this.getVStruct();this.style+=
!this.visible||!this.enabled&&this.rtEnabled?";display:none;":"";if(this.rtEnabled||this.enabled)!this.row.ownerGrid.isFreestyle&&(void 0===this.column.titleformat||this.column.titleformat==gx.html.controls.formats.TEXT)&&this.append('<label for="'+this.id+'" style="display:none">'+this.column.title+"</label>"),this.append("<textarea"),""!=this.placeholder&&this.tagAtt("placeholder",this.placeholder),this.tagAtt("spellcheck",this.autoCorrection.toString()),"chr"==this.widthUnit?this.tagAtt("cols",
this.width):this.style=this.style+";width: "+this.width+this.widthUnit,1<this.maxTextLines&&this.tagAtt("data-gx-text-maxlines",this.maxTextLines),"row"==this.heightUnit?this.tagAtt("rows",this.height):this.style=this.style+";height: "+this.height+this.heightUnit,this.tagAtt("id",this.id),this.tagAtt("name",this.id),this.tagAtt("maxlength",this.maxLength),this.append('onkeyup = "return gx.evt.checkMaxLength(this,'+this.maxLength+',event);"'),this.append('onkeydown = "return gx.evt.checkMaxLength(this,'+
this.maxLength+',event);"'),""!=this.cssClass&&this.tagAtt("class",this.cssClass),""!=this.style&&this.tagAtt("style",this.style),""!=this.title&&this.tagAtt("title",this.title),this.append(this.extraAttributes),this.append(">"),this.append(this.value),this.append("</textarea>");if(!this.enabled){var b=!this.visible?"display:none;":"";this.autoresize||(b+='overflow="hidden";');this.rtEnabled||this.grid.addHiddenControl(this.id,this.value);""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly")&&(this.cssClass=
"Readonly"+this.cssClass);this.append("<span ");this.append(this.extraAttributes);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=b&&this.tagAtt("style",b);""!=this.title&&this.tagAtt("title",this.title);this.tagAtt("id","span_"+this.id);a.evt&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,a.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()));this.append(">");gx.html.controls.startAnchor(this,this.jsScrCode,!!a.evt,"",this.link,this.linkTarget);this.append(gx.html.encodeCaseFormat(this.value,
this.format,!0));gx.html.controls.endAnchor(this,!!a.evt,"",this.link);gx.html.controls.specificDomainCtrls(this);this.append("</span>")}}},blob:function(a,b,d,k,g,c,f){this.base(a,b,d,k,g);this.type=gx.html.controls.types.blob;this.display=c||0;this.contentType=f||"text/html";this.parameters=this.url="";this.setProperties=function(a,b,d,k,g,c,f,j,o,l,m,s,n,r,p,t,u,q,v,O,P,Q,R,S,z,C,y,aa,ba){this.id=a;this.value=b;this.contentType=d||"text/html";this.linkTarget=g;this.parameters=c;this.display=f;
this.visible=0!=o;this.enabled=0!=j;this.alt=l;this.title=m;this.borderWidth=s;this.autoresize=0!=n;this.width=r;this.widthUnit=p;this.height=t;this.heightUnit=u;this.vSpace=q;this.hSpace=v;this.jsScrCode=O;this.usrOnclick=P;this.eventName=Q;this.style=R;this.cssClass=S;this.columnClass=z;this.extraAttributes=C;this.extraDisplayAttributes=y;this.jsDynCode=aa;this.url=gx.util.resolveUrl(ba)};this._getHtml=function(){var a="";this.style+=this.visible?"":";display:none;";this.append('<div class="gx-tbldsp-container"');
this.tagAtt("border",0);this.tagAtt("data-cellpadding",0);this.tagAtt("data-cellspacing",0);this.tagAtt("style","margin:"+this.vSpace+"px "+this.hSpace+"px;");this.tagAtt("title",gx.lang.emptyObject(this.title)?this.id:this.title);this.append("><div>");var b=-1!=this.contentType.toLowerCase().indexOf("image/");if(0==this.display){if(b){this.append("<img");this.tagAtt("alt",this.alt);if(""==this.url||this.url==gx.util.resourceUrl(gx.basePath+gx.staticDirectory))this.url=gx.ajax.getImageUrl(gx,"blankImage");
this.tagAtt("src",this.url)}else this.append("<object"),this.tagAtt("type",this.contentType),""==this.url&&(this.url="about:blank"),this.tagAtt("data",this.url);this.tagAtt("id","Object_"+this.id);this.style+="display:block;";0!=this.width&&!this.autoresize&&(this.style=this.style+"width:"+this.width+this.widthUnit+";");0!=this.height&&!this.autoresize&&(this.style=this.style+"height:"+this.height+this.heightUnit+";");this.tagAtt("style",this.style);a=""!=this.cssClass?"BlobContent"+this.cssClass:
this.cssClass;!this.enabled&&(""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly"))&&(a="Readonly"+a);this.tagAtt("class",a);this.append(this.extraDisplayAttributes);this.append(">");b?this.append("</img>"):(this.append(this.parameters),this.append("</object>"))}else 1==this.display&&(this.append("<a"),this.tagAtt("id","Link_"+this.id),this.style=""!=this.url?this.style+"display:block;":this.style+"display:none;",this.tagAtt("style",this.style),this.tagAtt("href",this.url),this.tagAtt("type",this.contentType),
""!=this.linkTarget&&this.tagAtt("target",this.linkTarget),this.append("><img"),this.tagAtt("border","0"),this.tagAtt("src",gx.ajax.getImageUrl(gx,"downloadImage")),this.append("></a>"));this.append("</div><div>");if(this.enabled){var d="";gx.lang.emptyObject(this.value)||(gx.dom.form().encoding="multipart/form-data");a=gx.dom.el(this.id);this.grid&&this.grid.parentObject.isTransaction()&&a&&this.value===a.value?(b=this.id+"_hook",this.append("<div"),this.tagAtt("id",b),this.append(">"),this.append("</div>"),
this.grid.addControlToReuse({el:a,hookId:b})):(this.append("<input"),this.tagAtt("type","file"),this.tagAtt("id",this.id),this.tagAtt("name",this.id),this.visible||(d+="display:none;"),0!=this.width&&(d=d+"width:"+this.width+";"),this.tagAtt("style",d),this.tagAtt("value",this.value),a=""!=this.cssClass?"BlobInput"+this.cssClass:this.cssClass,!this.enabled&&(""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly"))&&(a="Readonly"+a),this.tagAtt("class",a),b&&this.tagAtt("accept",this.contentType),
this.append(this.extraAttributes),this.append(">"))}this.append("</div></div>")}},radio:function(a,b,k,g,c){this.base(a,b,k,g,c);this.type=gx.html.controls.types.radio;this.vertical=!0;this.possibleValues=[];this.setProperties=function(a,b,d,k,g,c,f,j,o,l,m,s,n,r,p){this.possibleValues=a.v||[];this.id=b;this.title=d;this.visible=0!=k;this.enabled=0!=g;this.columns=c;this.orientation=f;this.style=j;this.cssClass=o;this.columnClass=l;this.jsScrCode=m;this.usrOnclick=s;this.eventName=n;this.extraAttributes=
r;this.value=p};this._getHtml=function(){this.dataType==gx.types.numeric&&(this.value=gx.text.trim(this.value.toString()));var a="gx-radio-button ";1==this.orientation&&(a+="gx-radio-button-vertical ");var a=!this.enabled&&""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly")?a+("Readonly"+this.cssClass):a+this.cssClass,b=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row);this.style+=this.visible?"":";display:none;";this.append(d("radio",{id:this.id,className:a,
style:this.style,title:this.title,isDisabled:!this.enabled,extraAttributes:this.extraAttributes,gxoch0:gx.html.controls.onJSEvent_impl("gxoch0",b,this.usrOnclick),values:f.map(this.possibleValues,function(a,b){return{itemId:this.id+"_"+b,itemValue:a[0],itemDesc:a[1],isSelected:gx.text.trim(this.value.toString())==gx.text.trim(a[0].toString())}}.closure(this))}))}},comboBox:function(a,b,d,k,g){this.base(a,b,d,k,g);this.type=gx.html.controls.types.comboBox;this.rows=1;this.possibleValues=[];this.setProperties=
function(a,b,d,k,g,c,f,j,o,l,m,s,n,r,p,t,u,q,v,y,N,O,P){this.possibleValues=a.v||[];this.id=b;this.title=j;this.visible=0!=o;this.enabled=0!=l;this.rtEnabled=0!=m;this.rows=d;this.format=s;this.width=n;this.widthUnit=r;this.height=p;this.heightUnit=t;this.style=u;this.cssClass=q;this.columnClass=v;this.formattedValue=N;this.jsScrCode=g;this.usrOnclick=k;this.eventName=c;this.extraAttributes=y;this.value=P};this._getHtml=function(){this.dataType==gx.types.numeric&&(this.value=gx.text.trim(this.value.toString()));
0<this.width&&(this.style=this.style+";width: "+this.width+this.widthUnit);0<this.height&&(this.style=this.style+";height: "+this.height+this.heightUnit);var a=this.style+" ;overflow:hidden;";this.style+=!this.visible||!this.enabled&&this.rtEnabled?";display:none;":"";if(this.enabled||this.rtEnabled){var b=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row);this.append("<select");1<this.rows&&this.tagAtt("size",this.rows);this.tagAtt("id",this.id);this.tagAtt("name",
this.id);""!=this.title&&this.tagAtt("title",this.title);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);this.enabled||(this.append(" disabled"),gx.util.addOnce(gx.disabledControls,this.id,this.id));this.append(this.extraAttributes);gx.html.controls.onJSEvent(this,"gxoch0",b,this.usrOnclick);this.append(">");for(var b=this.possibleValues.length,d=0;d<b;d++){var k=this.possibleValues[d];this.append("<option");this.tagAtt("value",k[0]);gx.text.trim(k[0].toString())==
gx.text.trim(gx.lang.htmlDecode(this.value.toString()))&&this.append(" selected");this.append(">");this.append(k[1]);this.append("</option>")}this.append("</select>")}if(!this.enabled){this.rtEnabled||this.grid.addHiddenControl(this.id,this.value);b="";b=""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly")?"Readonly"+this.cssClass:this.cssClass;a+=!this.visible?";display:none;":"";this.append("<span ");this.tagAtt("id","span_"+this.id);""!=this.title&&this.tagAtt("title",this.title);""!=b&&this.tagAtt("class",
b);""!=a&&this.tagAtt("style",a);this.append(this.extraAttributes);this.append(">");b=this.possibleValues.length;for(d=0;d<b;d++)if(k=this.possibleValues[d],gx.text.trim(k[0].toString())==gx.text.trim(gx.lang.htmlDecode(this.value.toString()))){this.append(k[1]);break}this.append("</span>")}}},listBox:function(a,b,d,k,g,c){this.base(a,b,d,k,g);this.type=gx.html.controls.types.listBox;this.rows=c},checkBox:function(a,b,d,k,g,c,f,j){this.base(a,b,d,k,g);this.type=gx.html.controls.types.checkBox;this.caption=
c||"";this.checkedValue=f;this.uncheckedValue=j;this.setProperties=function(a,b,d,k,g,c,f,j,o,l,m,s){this.id=a;this.title=b;this.visible=0!=k;this.enabled=0!=g;this.checkedValue=c;this.caption=f;this.style=j;this.cssClass=o;this.columnClass=l;this.extraAttributes=m;this.value=s;this.labelCaption=d};this._getHtml=function(){var a=this.getVStruct();this.dataType==gx.types.numeric&&(this.value=gx.text.trim(this.value.toString()),this.checkedValue=gx.text.trim(this.checkedValue.toString()));var b=this.cssClass;
!this.enabled&&(""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly"))&&(b="Readonly"+this.cssClass);this.style+=this.visible?"":";display:none;";this.append("<label");this.tagAtt("for",this.id);""!=b&&this.tagAtt("class",b);""!=this.style&&this.tagAtt("style",this.style);this.append("><input");this.tagAtt("id",this.id);this.tagAtt("type","checkbox");this.tagAtt("name",this.id);this.value.toString()==this.checkedValue.toString()?(this.append(" checked"),this.tagAtt("value",this.checkedValue)):this.tagAtt("value",
this.uncheckedValue);""!=this.title&&this.tagAtt("title",this.title);this.enabled||this.append(" disabled");this.append(this.extraAttributes);a.evt&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,a.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()));this.append(">");this.append(this.caption);this.append("</label>")}},imageReadOnly:function(a,b,d,k,g){this.base(a,b,d,k,g);this.type=gx.html.controls.types.image;this.alt="";this.setProperties=function(a,b,d,k,g,c,f,
j,o,l,m,s,n,r,p,t,u,q,v,y,N,O,P,Q,R,S,X,Y,Z){this.id=a;this.accessKey=k;this.visible=0!=c;this.enabled=0!=f;this.alt=j;this.title=o;this.borderWidth=l;this.autoresize=0!=m;this.width=s;this.widthUnit=n;this.height=r;this.heightUnit=p;this.vSpace=t;this.hSpace=u;this.link=b;this.linkTarget=d;this.jsScrCode=q;this.usrOnclick=v;this.eventName=y;this.style=N;this.cssClass=O;this.columnClass=P;this.align=Q;this.extraAttributes=R;this.useMap=S;this.jsDynCode=X;this.imgSrcSet=Y;this.value=this.imageUrl=
Z};this._getHtml=function(){var a=this.getVStruct();this.grid.addHiddenControl(this.id,this.imageUrl);""!=this.eventName&&gx.text.endsWith(this.eventName,".'")&&(this.eventName=this.eventName.replace(".'","."+this.gridRow+"'"));var b=gx.util.accessKey(this.title);this.title=gx.util.accessKeyCaption(this.title);""!=b&&(this.accessKey=b);this.style+=this.visible?"":";display:none;";b=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,this.jsDynCode,this.grid,this.row);this.enabled&&""!=this.link&&
gx.html.controls.startAnchor(this,this.jsScrCode,b,this.usrOnclick,this.link,this.linkTarget,"gx-image-link");this.append("<img");this.tagAtt("src",this.value);this.imgSrcSet&&this.tagAtt("srcset",this.imgSrcSet);this.enabled||(this.cssClass=(this.cssClass||"")+" gx-disabled");""!=this.accessKey&&this.tagAtt("accesskey",this.accessKey);this.tagAtt("id",this.id);0!=this.vSpace&&this.tagAtt("vspace",this.vSpace);0!=this.hSpace&&this.tagAtt("hspace",this.hSpace);""!=this.align&&this.tagAtt("align",this.align);
if(""==this.cssClass||0<this.borderWidth)this.tagAtt("border",this.borderWidth),""!=this.cssClass&&(this.style=this.style+";border-width: "+this.borderWidth);this.tagAtt("alt",this.alt||this.title);""!=this.title&&this.tagAtt("title",this.title);0<this.width&&(this.style=this.style+";width: "+this.width+this.widthUnit);0<this.height&&(this.style=this.style+";height: "+this.height+this.heightUnit);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);
""!=this.useMap&&this.tagAtt("usemap",this.useMap);this.extraAttributes&&this.append(this.extraAttributes);a.evt&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,a.fld),this.tagAtt(gx.GxObject.GX_EVENT_DATA_ATTR,""),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),this.usrOnclick&&this.tagAtt(gx.GxObject.GX_EVENT_CONDITION_DATA_ATTR,this.usrOnclick));this.append(">");this.enabled&&(""!=this.link&&""==b)&&gx.html.controls.endAnchor(this,b,this.usrOnclick,this.link)};this._persistValue=
function(){var a=this.getVStruct();a.v2v&&a.v2v(this.imageUrl)}},multimedia:function(a,b,d,k,g){this.base(a,b,d,k,g);this.type=gx.html.controls.types.multimedia;this.setProperties=function(a,b,d,k,g,c,f,j,o,l,m,s,n,r,p,t,u,q,v,y,N){this.id=a;this.display=0!=b;this.visible=0!=d;this.enabled=0!=k;this.autoresize=0!=g;this.width=c;this.widthUnit=f;this.height=j;this.heightUnit=o;this.jsScrCode=l;this.usrOnclick=m;this.eventName=s;this.style=n;this.cssClass=r;this.columnClass=p;this.extraInputAttributes=
t;this.jsDynCode=q;this.readOnly=0!=v;this.isBlob=gx.lang.gxBoolean(y);this.multimediaUrl=N;this.value=gx.util.resolveUrl(N)};this.startMultimediaUploadControl=function(a,b,d,k){return['<div id="',a,'_ct" class="',gx.html.multimediaUpload.gxCssClass,'" style="',(k||"")+(b?"":"display:none;"),'">'].join("")};this.endMultimediaUploadControl=function(a,b,d,k,g,c,f,j,o,l,m,s,n,r,p,t){d=[];k=gx.html.multimediaUpload.getInputFileEl(this.id);g="checked";c="";f=a.match(/([\w]+)(_\d{4})$/);f=f[1]+"_GXI"+f[2];
if(p||void 0===p)g="",c="checked",b="";p=['<div id="',a,'_ct_fields" class="fields-ct">','<label class="option">','<input name="',a,'Option" type="radio" value="file" ',c,"/>",gx.getMessage("GXM_uploadfileoption"),"</label>",'<label class="option">','<input name="',a,'Option" type="radio" value="uri" ',g,"/>",gx.getMessage("GXM_uploadurioption"),"</label>",'<input type="text" class="field ',m,'" id="',f,'" name="',f,'" value="',b,'" ',n," />"];d.push(p.join(""));p=k?['<div id="',a,'_hook"></div>']:
['<input type="file" class="field ',m,'" id="',a,'" name="',a,'" accept="',t,'" ',n,"/>"];d.push(p.join(""));p=["</div>","</div>"];d.push(p.join(""));return d.join("")};this.getPreviewHtml=function(){return['<a target="_blank"',this.value?' href="'+this.value+'"':"",'><span id="',this.readOnly||!this.enabled?this.id:"",'" class="',this.cssClass?"Readonly"+this.cssClass:""," ",this.placeHolderClass,'" title="',gx.getMessage("GXM_multimediaalttext"),'"></span></a>'].join("")};this._getHtml=function(){!this.readOnly&&
this.enabled?(this.append(this.startMultimediaUploadControl(this.id,this.visible,this.width,this.style)),this.append('<a class="action change-action" gxfocusable="1" href=""'+this.extraInputAttributes+">"+gx.getMessage("GXM_multimediachange")+"</a>"),this.append('<a gxfocusable="1" href="" class="action clear-action"></a>')):this.grid.addHiddenControl(this.id,this.multimediaUrl);this.append(this.getPreviewHtml());if(!this.readOnly&&this.enabled){this.append(this.endMultimediaUploadControl(this.id,
this.value,"",this.width,this.widthUnit,this.height,this.heightUnit,this.usrOnclick,this.eventName,this.style,this.cssClass,"",this.extraInputAttributes,this.readOnly,this.isBlob,this.accept));var a=gx.html.multimediaUpload.getInputFileEl(this.id);this.grid&&(this.grid.parentObject.isTransaction()&&a)&&this.grid.addControlToReuse({el:a,hookId:this.id+"_hook"})}};this._persistValue=function(){var a=this.getVStruct();a.v2v&&a.v2v(this.multimediaUrl)}},image:function(a,b,d,k,g){this.base(a,b,d,k,g);
this.type=gx.html.controls.types.image;this.alt="";this.innerImage=new gx.html.controls.imageReadOnly;this.placeHolderClass="gx-image-placeholder";this.setProperties=function(a,b,d,k,g,c,f,j,o,l,m,s,n,r,p,t,u,q,v,y,N,O,P,Q,R,S,X,Y,Z,aa,ba,ca,da){this.id=a;this.accessKey=k;this.visible=0!=c;this.enabled=0!=f;this.alt=j;this.title=o;this.borderWidth=l;this.autoresize=0!=m;this.width=s;this.widthUnit=n;this.height=r;this.heightUnit=p;this.vSpace=t;this.hSpace=u;this.link=b;this.linkTarget=d;this.jsScrCode=
q;this.usrOnclick=v;this.eventName=y;this.style=N;this.cssClass=O;this.columnClass=P;this.align=Q;this.extraInputAttributes=R;this.extraImageAttributes=S;this.useMap=X;this.jsDynCode=Y;this.readOnly=0!=Z;this.isBlob=gx.lang.gxBoolean(aa);this.isAttribute=gx.lang.gxBoolean(ba);this.imgSrcSet=ca;this.multimediaUrl=da;this.value=gx.util.resolveUrl(da);this.themeName=g;this.className=ba&&O?"Readonly"+O:O;a=this.getGridData();this.updateinnerImageProperties();this.innerImage.setGridData(a);this.innerImage.column=
this.column};this.updateinnerImageProperties=function(){this.innerImage.setProperties(this.id,this.link,this.linkTarget,this.accessKey,this.themeName,this.visible,this.enabled,this.alt,this.title,this.borderWidth,this.autoresize,this.width,this.heightUnit,this.height,this.heightUnit,this.vSpace,this.hSpace,this.jsScrCode,this.usrOnclick,this.eventName,this.style,this.className,this.columnClass,this.align,this.extraImageAttributes,this.useMap,this.jsDynCode,this.imgSrcSet,this.value)};this.getPreviewHtml=
function(){return['<a target="_blank"><img id="Object_',this.id,'" class="',this.cssClass?"Readonly"+this.cssClass:"",'" alt="',this.alt,'" src="',this.value,'" /><span class="',this.placeHolderClass,'"></span></a>'].join("")};this._getHtml=function(){if(this.readOnly||!this.enabled)this.buffer=this.innerImage.buffer,this.updateinnerImageProperties(),this.innerImage._getHtml();else{this.append(this.startMultimediaUploadControl(this.id,this.visible,this.width,this.style));this.append('<a class="action change-action" gxfocusable="1" href=""'+
this.extraInputAttributes+">"+gx.getMessage("GXM_multimediachange")+"</a>");this.append('<a gxfocusable="1" href="" class="action clear-action"></a>');this.append(this.getPreviewHtml());this.append(this.endMultimediaUploadControl(this.id,this.value,this.title,this.width,this.widthUnit,this.height,this.heightUnit,this.usrOnclick,this.eventName,this.style,this.cssClass,this.align,this.extraInputAttributes,this.readOnly,this.isBlob,"image/*"));var a=gx.html.multimediaUpload.getInputFileEl(this.id);this.grid&&
(this.grid.parentObject.isTransaction()&&a)&&this.grid.addControlToReuse({el:a,hookId:this.id+"_hook"})}}},video:function(a,b,d,k,g){this.base(a,b,d,k,g);this.type=gx.html.controls.types.video;this.accept="video/*";this.placeHolderClass="gx-video-placeholder"},audio:function(a,b,d,k,g){this.base(a,b,d,k,g);this.type=gx.html.controls.types.audio;this.accept="audio/*";this.placeHolderClass="gx-audio-placeholder"},textBlock:function(a,b,d,k,g){this.base(a,b,d,k,g);this.type=gx.html.controls.types.textBlock;
this.setProperties=function(a,b,d,k,g,c,f,j,o,l,m,s,n){this.id=a;this.visible=0!=l;this.enabled=0!=m;this.format=s;this.title=o;this.link=b;this.linkTarget=d;this.jsScrCode=j;this.usrOnclick=k;this.eventName=g;this.extraAttributes=c;this.cssClass=f;this.value=gx.text.replaceAll(n,"","'")};this._getHtml=function(){var a,b=this.getVStruct();this.format!=gx.html.controls.formats.RAW_HTML&&(this.format==gx.html.controls.formats.HTML?(a=(this.visible?";display:inline;":";display:none;")+this.extraAttributes,
this.append("<div ")):(a=(this.visible?"":";display:none;")+this.extraAttributes,this.append("<span ")),this.tagAtt("id",this.id),""!=this.cssClass&&this.tagAtt("class",this.cssClass),this.tagAtt("data-gxformat",this.format),""!=a&&this.tagAtt("style",a),""!=this.title&&this.tagAtt("title",this.title),b.evt&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,b.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext())),this.append(">"));a="";this.enabled?(a=gx.html.controls.eventJSCode(this.jsScrCode,
this.eventName,null,this.grid,this.row),gx.html.controls.startAnchor(this,this.jsScrCode,a,this.usrOnclick,this.link,this.linkTarget)):a="";this.append(gx.html.encodeCaseFormat(this.value,this.format));this.enabled&&gx.html.controls.endAnchor(this,a,this.usrOnclick,this.link);this.format==gx.html.controls.formats.HTML?this.append("</div>"):this.format!=gx.html.controls.formats.RAW_HTML&&this.append("</span>");this.format==gx.html.controls.formats.RAW_HTML&&gx.html.processCode(this.buffer.toString(),
!1)}},label:function(a,b,k,g,c){this.base(a,b,k,g,c);this.type=gx.html.controls.types.label;this.setProperties=function(a,b,d,k){this.referencedEl=a;this.labelCaption=b;this.labelClass=d;this.addAttributes=0===k?"data-gx-sr-only":""};this._getHtml=function(){this.append(d("label",{caption:this.labelCaption,className:this.labelClass,additionalAtts:this.addAttributes,relatedElement:this.referencedEl}))}},button:function(a,b,d,k,g,c){this.base(a,b,d,k,g);this.type=gx.html.controls.types.button;this.caption=
"";this.buttonStyle=c||"rounded";this.setProperties=function(a,b,d,k,g,c,f,j,o,l,m,s,n,r,p,t){this.reset=p;this.id=a;this.title=g;this.accessKey=c;this.style=f;this.cssClass=j;this.visible=0!=o;this.enabled=0!=l;this.buttonStyle=m;this.jsScrCode=k;this.usrOnclick=d;this.eventName=s+(5==this.jsScrCode?"+'"+this.gridRow+"'":"");this.extraAttributes=n;this.jsCode=b;this.jsDynCode=r;this.caption=t};this._getHtml=function(){this.style+=this.visible?"":";display:none;";var a="BaseRBtn R"+this.cssClass;
"rounded"==this.buttonStyle&&(this.cssClass="BtnText",this.append("<span "),this.tagAtt("onclick","gx.evt.doClick('"+this.id+"', event);"),""!=this.style&&this.tagAtt("style",this.style),this.tagAtt("class",a),this.append('><span class="BtnLeft"><span class="BtnRight"><span class="BtnBackground">'));this.append("<input");a="button";1==this.reset?a="submit":0==this.reset&&(a="reset");this.tagAtt("type",a);a=gx.util.accessKey(this.caption);this.caption=gx.util.accessKeyCaption(this.caption);""==a&&
(a=gx.util.accessKey(this.title),this.title=gx.util.accessKeyCaption(this.title));""!=a&&(this.accessKey=a);this.tagAtt("name",this.id);this.tagAtt("value",this.caption);""!=this.title&&this.tagAtt("title",this.title);""!=this.accessKey&&this.tagAtt("accesskey",this.accessKey);this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);this.tagAtt("gxevent",this.eventName);this.enabled||this.append(" disabled");a=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,this.jsDynCode,
this.grid,this.row);a=this.jsCode+a;gx.html.controls.onJSEvent(this,"onclick",a+"return false;",this.usrOnclick);this.append(this.extraAttributes);this.append(">");"rounded"==this.buttonStyle&&this.append("</span></span></span></span>")}},grid:function(a,b,d,k,g){this.base(a,b,d,k,g);this.type=gx.html.controls.types.grid;this.containerName="";this.setProperties=function(a){this.containerName=a;this.id=this.grid.gxComponentContext+this.containerName+"Div_"+this.gridRow};this._getHtml=function(){this.append("<div");
this.tagAtt("id",this.id);this.append("></div>")}},userControl:function(a,b,d,k,g){this.base(a,b,d,k,g);this.type=gx.html.controls.types.userControl;this.containerName="";this.setProperties=function(a,b){this.id=this.containerName=a;this.visible=0!=b};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.tagAtt("class",gx.uc.gxCssClass);this.append("></div>");this.grid.addUsercontrolToDraw({r:this.gridRow,c:this.column})}},userControlContainer:function(a,b,d,k,g){this.base(a,
b,d,k,g);this.type=gx.html.controls.types.userControlContainer;this.containerName=this.parentName="";this.setProperties=function(a,b){this.parentName=a;this.containerName=b;this.id=this.parentName+this.containerName+"_"+this.gridRow};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.tagAtt("style","display:none;");this.tagAtt("class","gx_usercontrol_child");this.append(">")}},webComponent:function(a,b,d,k,g){this.base(a,b,d,k,g);this.type=gx.html.controls.types.webComponent;
this.content=this.controlName="";this.setProperties=function(a){this.controlName=a;var b=this.grid.parentObject.getComponentData(this.controlName),d=b.Prefix,a=this.grid.gxComponentContext+"gxHTMLWrp"+d+this.gridRow,k=gx.dom.el(a),g="";this.grid.addOldComponent(this.gridRow,this.grid.gxComponentContext+d+this.gridRow);if(null!=k)b=a+"_hook",this.grid.addComponentToDraw({create:!1,existingEl:b,el:a}),a=b;else if(!gx.lang.emptyObject(gx.csv.lastEvtResponse)&&!gx.lang.emptyObject(gx.csv.lastEvtResponse.gxComponents))if(k=
gx.csv.lastEvtResponse.gxComponents[a],gx.lang.emptyObject(k))g="";else{var g=gx.html.cleanHtmlRefs(k),c=gx.fn.getHidden(this.grid.gxComponentContext+d+this.gridRow);c||(c=b.GXClass);gx.lang.emptyObject(c)||this.grid.addComponentToDraw({load:!0,n:c.toLowerCase(),p:this.grid.gxComponentContext+d+this.gridRow,c:k})}this.id=a;this.content=g};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.tagAtt("class",gx.GxObject.WEBCOMPONENT_CLASS_NAME);this.append(">");this.append(this.content);
this.append("</div>")}},embeddedPage:function(a,b,d,k,g){this.base(a,b,d,k,g);this.type=gx.html.controls.types.embeddedPage;this.align="center";this.scrollbars="auto";this.borderStyle="1";this.setProperties=function(a,b,d,k,g,c,f,j,o,l,m){this.id=a;this.value=b;this.visible=0!=d;this.width=k;this.widthUnit=g;this.height=c;this.heightUnit=f;this.borderStyle=j;this.align=o;this.title=l;this.scrollbars=m};this._getHtml=function(){this.style+=this.visible?"":";display:none;";this.append("<iframe");this.tagAtt("frameborder",
this.borderStyle);this.tagAtt("align",this.align);this.tagAtt("scrolling",this.scrollbars);0<this.height&&this.tagAtt("height",this.height+this.heightUnit);0<this.width&&this.tagAtt("width",this.width+this.widthUnit);""!=this.title&&this.tagAtt("title",this.title);""!=this.id&&(this.tagAtt("id",this.id),this.tagAtt("name",this.id));""!=this.value&&this.tagAtt("src",this.value);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);this.append(">");this.append("</iframe>")}},
table:function(a,b,d,k,g){this.base(a,b,d,k,g);this.type=gx.html.controls.types.table;this.backColor=this.cellPadding=this.cellSpacing="";this.setProperties=function(a,b,d,k,g,c,f,j,o,l,m,n,s,r,p,t){this.id=a;this.visible=0!=b;this.cssClass=d;this.background=k;this.backColor=g;this.borderColor=c;this.align=f;this.title=j;this.borderWidth=o;this.cellPadding=l;this.cellSpacing=m;this.height=n;this.width=s;this.rules=r;this.heightUnit=p;this.widthUnit=t;this.style=""};this._getHtml=function(){var a=
this.getVStruct();this.style+=this.visible?"":";display:none;";""!=this.background&&(this.background=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+this.background,!0),this.style=this.style+"background-image: url("+this.background+");");if(""!=this.backColor){var b=parseInt(this.backColor),b=isNaN(b)?this.backColor:gx.color.html(b).Html;this.style=this.style+"background-color: "+b+";"}""!=this.borderColor&&(b=parseInt(this.borderColor),b=isNaN(b)?this.borderColor:gx.color.html(b).Html,this.style=
this.style+"border-color: "+b+";");""!=this.borderWidth&&(this.style=this.style+"border-width: "+this.borderWidth+";");""!=this.height&&(this.style=this.style+"height: "+this.height+this.heightUnit+";");""!=this.width&&(this.style=this.style+"width: "+this.width+this.widthUnit+";");this.append("<table");this.tagAtt("id",this.id);this.tagAtt("align",this.align);""!=this.borderWidth&&this.tagAtt("border",this.borderWidth);""!==this.cellSpacing&&this.tagAtt("data-cellspacing",this.cellSpacing);""!==
this.cellPadding&&this.tagAtt("data-cellpadding",this.cellPadding);""!=this.rules&&"none"!=this.rules&&this.tagAtt("rules",this.rules);""!=this.title&&this.tagAtt("title",this.title);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);a.evt&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,a.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()));this.append(">")}},row:function(a,b,d,k,g){this.base(a,b,d,k,g);this.type=
gx.html.controls.types.row;this.verticalAlign=this.align=this.borderColor=this.backColor="";this.isFreestyleRow=!1;this.oncontextmenu="";this.setProperties=function(a,b,d){b&&(this.cssClass=this.ownCssClass?b+(this.ownCssClass?" "+this.ownCssClass:""):b);this.style=d};this._getHtml=function(){this.append("<tr");""!=this.id&&this.tagAtt("id",this.id);this.isFreestyleRow&&this.tagAtt("data-gxrow",this.gridRow);""!=this.backColor&&(this.style=this.style+"background-color:"+this.backColor+";");""!=this.borderColor&&
this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);""!=this.style&&this.tagAtt("style",this.style);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.oncontextmenu&&this.tagAtt("oncontextmenu",this.oncontextmenu);this.append(">")}},cell:function(a,b,d,k,g){this.base(a,b,d,k,g);this.type=gx.html.controls.types.cell;this.rowSpan=this.colSpan=this.verticalAlign=this.align=this.borderColor=
this.backColor=this.background=this.style="";this.setProperties=function(a,b){this.background=a;b&&""!=b&&0<b.indexOf("style=")&&(this.style=b.substring(8),this.style=this.style.substring(0,this.style.length-1)+";")};this._getHtml=function(){this.append("<td");"undefined"!=typeof this.width&&0!=this.width&&this.tagAtt("width",this.width);"undefined"!=typeof this.height&&0!=this.height&&this.tagAtt("height",this.height);""!=this.background&&this.tagAtt("background",this.background);""!=this.backColor&&
(this.style+="background-color:"+this.backColor+";");""!=this.style&&this.tagAtt("style",this.style);""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);""!=this.colSpan&&this.tagAtt("colspan",this.colSpan);""!=this.rowSpan&&this.tagAtt("rowspan",this.rowSpan);""!=this.cssClass&&this.tagAtt("class",this.cssClass);this.append(">")}},responsiveRow:function(a,b,d,k,
g){this.base(a,b,d,k,g);this._getHtml=function(){this.append("<div");""!=this.id&&this.tagAtt("id",this.id);this.isFreestyleRow&&this.tagAtt("data-gxrow",this.gridRow);""!=this.backColor&&(this.style=this.style+"background-color:"+this.backColor+";");""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);""!=this.style&&this.tagAtt("style",this.style);this.tagAtt("class",
"row "+(this.cssClass||""));""!=this.oncontextmenu&&this.tagAtt("oncontextmenu",this.oncontextmenu);this.append(">")}},responsiveCell:function(a,b,d,k,g){this.base(a,b,d,k,g);this._getHtml=function(){this.append("<div");"undefined"!=typeof this.width&&0!=this.width&&this.tagAtt("width",this.width);"undefined"!=typeof this.height&&0!=this.height&&this.tagAtt("height",this.height);""!=this.background&&this.tagAtt("background",this.background);""!=this.backColor&&(this.style+="background-color:"+this.backColor+
";");""!=this.style&&this.tagAtt("style",this.style);""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);""!=this.colSpan&&this.tagAtt("colspan",this.colSpan);""!=this.rowSpan&&this.tagAtt("rowspan",this.rowSpan);this.tagAtt("class","col-xs-12 "+(this.cssClass||""));this.append(">")}},group:function(a,b,d,k,g){this.base(a,b,d,k,g);this.type=gx.html.controls.types.group;
this.caption="";this.setProperties=function(a,b,d,k,g,c,f,j,o){this.id=a;this.caption=b;this.visible=0!=d;this.width=k;this.widthUnit=g;this.height=c;this.heightUnit=f;this.cssClass=j;this.extraAtts=o};this._getHtml=function(){this.append("<fieldset");this.tagAtt("id",this.id);this.tagAtt("name",this.id);""!=this.cssClass&&this.tagAtt("class",this.cssClass);var a="-moz-border-radius:3pt;";"0"!=this.width&&(a+="width: "+this.width+this.widthUnit+";");"0"!=this.height&&(a+="height: "+this.height+this.heightUnit+
";");this.visible||(a+="display:none;");this.tagAtt("style",a);""!=this.extraAtts&&this.append(this.extraAtts);this.append(">");this.append("<legend");""!=this.cssClass&&this.tagAtt("class",this.cssClass+"Title");this.append(">");this.append(gx.getMessage(this.caption));this.append("</legend>")}},div:function(a,b,d,k,g){this.base(a,b,d,k,g);this.type=gx.html.controls.types.div;this.setProperties=function(a,b,d,k,g,c,f,j,o,l,m){this.id=a;this.visible=0!=b;this.width=d;this.widthUnit=k;this.height=
g;this.heightUnit=c;this.cssClass=f;this.align=j;this.vAlign=o;this.extraAtts=l;this.extraStyle=m};this._getHtml=function(){var a=this.getVStruct(),b=this.align&&"left"!=this.align.toLowerCase(),d=this.vAlign&&"top"!=this.vAlign.toLowerCase(),k=this.visible?"":";display:none;";""!=this.height&&(k=k+"height: "+this.height+this.heightUnit+";");""!=this.width&&(k=k+"width: "+this.width+this.widthUnit+";");k+=this.extraStyle;this.append("<div");this.id&&this.tagAtt("id",this.id);""!=this.cssClass&&this.tagAtt("class",
this.cssClass);""!=k&&this.tagAtt("style",k);""!=this.extraAtts&&this.append(this.extraAtts);b&&this.tagAtt("data-align",this.align.toLowerCase());d&&this.tagAtt("data-valign",this.vAlign.toLowerCase());a&&a.evt&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,a.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()));this.append(">");(b||d)&&this.append('<div data-align-outer=""><div data-align-inner="">')}},divEnd:function(a,b,d,k,g){this.base(a,b,d,k,g);this.type=gx.html.controls.types.divEnd;
this.setProperties=function(a,b){this.align=a;this.vAlign=b};this._getHtml=function(){var a=this.align&&"left"!=this.align.toLowerCase(),b=this.vAlign&&"top"!=this.vAlign.toLowerCase();(a||b)&&this.append("</div></div>");this.append("</div>")}},specificDomainCtrls:function(a){if(a.domainName==gx.domains.component&&0==a.enabled){var b=a.enabled?";display:none;":"",d=a.id+"_comp_trigger",k=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"Resources\\"+gx.theme+"\\Select.png",!1);a.append("<img");
a.tagAtt("src",k);a.tagAtt("id",d);a.tagAtt("class","");a.tagAtt("style",b+" margin-left:2px; cursor:pointer;");a.tagAtt("onclick","gx.popup.openUrl('"+a.value+"')");a.append("/>");b=[];b.push(a.column.gxId)}else a.dataType==gx.types.geolocation&&(b=!a.enabled?";display:none;":"",d=a.id+"_geoLocMe",a.append("<img"),a.tagAtt("src",gx.ajax.getImageUrl(gx,"myLocationImage")),a.tagAtt("id",d),a.tagAtt("class","GeoLocOption"),a.tagAtt("style",b),a.tagAtt("onclick","gx.geolocation.getMyPosition(this)"),
a.append(">"),b=[],b.push(a.column.gxId))},_init:function(){gx.lang.inherits(this.singleLineEdit,this.htmlControl);gx.lang.inherits(this.multipleLineEdit,this.singleLineEdit);gx.lang.inherits(this.blob,this.htmlControl);gx.lang.inherits(this.radio,this.htmlControl);gx.lang.inherits(this.comboBox,this.htmlControl);gx.lang.inherits(this.listBox,this.comboBox);gx.lang.inherits(this.checkBox,this.htmlControl);gx.lang.inherits(this.imageReadOnly,this.htmlControl);gx.lang.inherits(this.textBlock,this.htmlControl);
gx.lang.inherits(this.button,this.htmlControl);gx.lang.inherits(this.grid,this.htmlControl);gx.lang.inherits(this.userControl,this.htmlControl);gx.lang.inherits(this.userControlContainer,this.htmlControl);gx.lang.inherits(this.webComponent,this.htmlControl);gx.lang.inherits(this.embeddedPage,this.htmlControl);gx.lang.inherits(this.table,this.htmlControl);gx.lang.inherits(this.row,this.htmlControl);gx.lang.inherits(this.cell,this.htmlControl);gx.lang.inherits(this.group,this.htmlControl);gx.lang.inherits(this.multimedia,
this.htmlControl);gx.lang.inherits(this.image,this.multimedia);gx.lang.inherits(this.video,this.multimedia);gx.lang.inherits(this.audio,this.multimedia);gx.lang.inherits(this.div,this.htmlControl);gx.lang.inherits(this.divEnd,this.htmlControl);gx.lang.inherits(this.responsiveRow,this.row);gx.lang.inherits(this.responsiveCell,this.cell);gx.lang.inherits(this.label,this.htmlControl)}}}()}}(gx.$);
gx.util.Observable=function(){return{observers:[],addObserver:function(f,c,j,b){new gx.thread.Mutex(this,this.addObserverSync,arguments)},addObserverSync:function(f,c,j,b){b=b||{};(!1===b.unique||0>this.indexOf(f,c,j))&&this.observers.push({e:f,o:c,f:j,cfg:b})},deleteObserver:function(f,c,j){new gx.thread.Mutex(this,this.deleteObserverSync,[f,c,j])},deleteObserverSync:function(f,c,j){f=this.indexOf(f,c,j);0<=f&&this.observers.splice(f,1)},removeAll:function(){this.observers=[]},indexOf:function(f,
c,j){for(var b=this.observers.length,a=0;a<b;a++){var d=this.observers[a];if(d&&d.e==f&&d.o==c&&d.f==j)return a}return-1},notify:function(f,c){c||(c=[]);for(var j=this.observers.length,b=[],a=0;a<j;a++){var d=this.observers[a];if(d&&d.e==f&&!d.removed)try{d.cfg&&d.cfg.single&&(d.removed=!0,b.push(a)),d.f.apply(d.o,c)}catch(k){gx.dbg.logEx(k,"gxfx.js","gx.obs.notify")}}if(0<b.length)for(a=b.length-1;0<=a;a--)this.observers.splice(b[a],1)}}};
gx.fx={delayedSuggest:function(){gx.$.each(gx.suggestControls,function(f,c){gx.fx.installSuggest(c,!0)})},installSuggest:function(f,c){if(!c&&document.readyState&&"complete"!=document.readyState)gx.suggestControls[f.id]=f;else try{var j=gx.O.getValidStructFld(f.id);if(j&&!gx.lang.emptyObject(j.gxsgprm)){var b=0<j.grid?gx.fn.currentGridRowImpl(j.grid):"main",a=j.gxsgprm;a.installed||(a.installed={});a.installed[b]||(gx.ajax.suggest(gx.O,a[1],f.id,a[0],a[3],a[2]),a.installed[b]=!0)}}catch(d){gx.dbg.logEx(d,
"gxfx.js","installSuggest")}},updateSuggestParms:function(f){if(f)for(var c=f.length,j=0;j<c;j++){var b=gx.fn.validStruct(f[j]);b&&"function"==typeof b.c2v&&b.c2v()}},firesuggest:function(f,c,j,b){this.updateSuggestParms(b);f.textbox.value&&c.requestSuggestions(f.sdtParms,function(){c.values?f.autosuggest(c.values,j):f.hideSuggestions()});delete gx.fx.suggestProcessing;gx.fx.obs.notify("gx.validation")},autoSuggestControl:function(f,c,j,b,a,d){this.cur=-1;this.layer=this.IFrameControl=null;this.provider=
c;this.textbox=f;"undefined"==typeof this.textbox.GXonblur&&(this.textbox.GXonblur=f.onblur);this.ControlRefresh=j;this.typeahead=b;this.suggestParms=a||[];this.sdtParms=d||[];this.requestSuggestions=function(a,b,d){gx.fx.suggestProcessing=true;var c=this.suggestParms;this.timer&&window.clearTimeout(this.timer);this.timer=window.setTimeout(function(){gx.fx.firesuggest(a,b,d,c)},400)};this.hideSuggestions=function(){$(this.IFrameControl).hide();$(this.layer).hide()};this.highlightSuggestion=function(a){for(var b=
this.layer.childNodes.length,d=0;d<b;d++){var c=this.layer.childNodes[d];if(c==a)c.className="current";else if(c.className=="current")c.className=""}};this.init=function(){var a=function(a){if(!a)a=window.event;this.handleKeyUp(a)};gx.evt.attach(this.textbox,"keyup",a.closure(this));gx.evt.attach(this.textbox,"keydown",function(a){if(!a)a=window.event;this.handleKeyDown(a)}.closure(this));gx.evt.attach(this.textbox,"blur",function(){this.hideSuggestions();this.textbox.GXonblur()}.closure(this));gx.util.browser.isFirefox()&&
gx.evt.attach(this.textbox,"input",a.closure(this));this.createDropDown()};this.nextSuggestion=function(){var a=this.layer.childNodes;if(a.length>0){this.cur=this.cur<a.length-1?this.cur+1:0;a=a[this.cur];this.highlightSuggestion(a);this.pickvalue(a.firstChild.nodeValue)}};this.previousSuggestion=function(){var a=this.layer.childNodes;if(a.length>0){this.cur=this.cur>0?this.cur-1:a.length-1;a=a[this.cur];this.highlightSuggestion(a);this.pickvalue(a.firstChild.nodeValue)}};this.selectRange=function(a,
b){if(this.textbox.createTextRange){var d=this.textbox.createTextRange();d.moveStart("character",a);d.moveEnd("character",b-this.textbox.value.length);d.select()}else this.textbox.setSelectionRange&&this.textbox.setSelectionRange(a,b);gx.csv.stopOnError&&this.textbox.focus()};this.showSuggestions=function(a){this.cur=-1;var b=null;this.setupLayer();gx.dom.shouldPurge()&&gx.dom.purge(this.layer,true);this.layer.innerHTML="";if(!this.IFrameControl){b=false;this.IFrameControl=gx.dom.byId("gxAutosuggestIFrame");
if(!this.IFrameControl){b=true;this.IFrameControl=document.createElement("IFRAME");this.IFrameControl.src="about:blank";this.IFrameControl.id="gxAutosuggestIFrame"}$(this.IFrameControl).css({zIndex:1,display:"none",position:"absolute"});this.IFrameControl.frameBorder="0";b&&document.body.appendChild(this.IFrameControl)}for(var d=a.length,c=0;c<d;c++){b=document.createElement("div");b.appendChild(document.createTextNode(a[c].d));b.style.width=this.textbox.offsetWidth;this.layer.appendChild(b)}this.layer.style.left=
this.getLeft()+"px";this.layer.style.top=this.getTop()+this.textbox.offsetHeight+"px";this.layer.style.zIndex=2;this.IFrameControl.style.top=this.layer.style.top;this.IFrameControl.style.left=this.layer.style.left;this.IFrameControl.style.height=this.layer.offsetHeight;this.IFrameControl.style.width=this.layer.offsetWidth;$([this.IFrameControl,this.layer]).show()};this.typeAhead=function(a){if(this.textbox.createTextRange||this.textbox.setSelectionRange){var b=this.textbox.value.length;this.pickvalue(a);
a=a.length;b<a&&this.selectRange(b,a)}};this.pickvalue=function(a){for(var b=this.aSuggestions.length,d=0;d<b;d++)if(this.aSuggestions[d].d==a){this.textbox.value=a;gx.evt.onchange_impl(this.textbox);break}};this.autosuggest=function(a,b){this.aSuggestions=a;var d=this.aSuggestions.length;if(b&&this.aSuggestions!=null&&d==1)this.typeAhead(this.aSuggestions[0].d);else if(this.textbox==gx.csv.lastControl&&(this.aSuggestions!=null&&d>0)&&(d==1&&this.aSuggestions[0].d!=this.textbox||d>1)){this.showSuggestions(this.aSuggestions);
return}this.hideSuggestions()};this.createDropDown=function(){var a=false;this.layer=gx.dom.byId("gxAutosuggestElement");if(!this.layer){a=true;this.layer=document.createElement("div");this.layer.className="suggestions";this.layer.id="gxAutosuggestElement"}this.setupLayer();a&&document.body.appendChild(this.layer)};this.setupLayer=function(){$(this.layer).hide();this.textbox.offsetWidth&&$(this.layer).width(this.textbox.offsetWidth);this.layer.onmousedown=this.layer.onmouseup=this.layer.onmouseover=
function(a){var a=a||window.event,b=gx.evt.source(a);if(a.type=="mousedown"){gx.evt.cancel(a,true);this.pickvalue(b.firstChild.nodeValue);this.hideSuggestions();window.setTimeout(function(){gx.fn.setFocus(this.textbox)},100)}else a.type=="mouseover"?this.highlightSuggestion(b):this.textbox.focus()}.closure(this)};this.getLeft=function(){for(var a=this.textbox,b=0;a.tagName!="BODY";){b=b+a.offsetLeft;a=a.offsetParent}for(a=this.textbox;a.tagName!="BODY";){b=b-a.scrollLeft;a=a.parentNode}return b};
this.getTop=function(){for(var a=this.textbox,b=0;a.tagName!="BODY";){b=b+a.offsetTop;a=a.offsetParent}for(a=this.textbox;a.tagName!="BODY";){b=b-a.scrollTop;a=a.parentNode}return b};this.handleKeyDown=function(a){switch(a.keyCode){case 38:this.previousSuggestion();break;case 40:this.nextSuggestion();break;case 13:this.hideSuggestions()}};this.handleKeyUp=function(a){a=a.keyCode;a==9?this.hideSuggestions():a==8||a==46?this.requestSuggestions(this,this.provider,false):a<32||(a>=33&&a<46||a>=112&&a<=
123)||this.requestSuggestions(this,this.provider,this.typeahead)};this.init()},suggestProvider:function(f,c,j,b){this.requestSuggestions=function(a,d,k,g){var o,l=gx.ajax.gxObjectUrl(f)+"?",m="gxajaxSuggest_"+b,n=c.length;for(o=0;o<n;o++)m+=","+encodeURIComponent(gx.fn.evalCtxScope(f,c[o]));m+=","+encodeURIComponent(void 0===g?gx.fn.getControlValue_impl(j):g);n=a.length;for(o=0;o<n;o++)m+=","+encodeURIComponent(gx.fn.evalCtxScope(f,a[o]));l+=gx.ajax.encryptParms(f,m);gx.http.doCall({method:"GET",
url:l,handler:function(a,b){var k=gx.json.evalJSON(b);this.values=gx.fx.returnSuggestValues(this.VarRefresh,k[0]);d()},error:k,obj:this})}},returnSuggestValues:function(f,c){return c},addElement:function(f,c,j){if(!this.elementExists(f,c,j)){var b=c.id;!0===j&&(b+=c.types.sort().join(""));f.splice(0,0,c);f[b]=c}},elementExists:function(f,c,j){var b=c.id;!0===j&&(b+=c.types.sort().join(""));return f[b]?!0:!1},deleteElement:function(f,c,j){var b=c;j&&(b+=j.sort().join(""));f[b]&&delete f[b];for(var b=
f.length,a=0;a<b;a++){var d=f[a];if(d.id==c)if(j){if(this.matchingTypes(j,d.types)){f.splice(a,1);break}}else{f.splice(a,1);break}}return f},matchingTypes:function(f,c){for(var j=c.length,b=0;b<j;b++){for(var a=!1,d=f.length,k=0;k<d;k++)c[b].toLowerCase()==f[k].toLowerCase()&&(a=!0);if(!a)return!1}return!0},findControl:function(f,c,j){c=gx.dom.el(j);if(null!=c)return c;c=gx.dom.el("gxHTMLWrp"+j);if(null!=c)return c;j=RegExp("^"+j+"_(?:(?:[0-9]){4})+$");return null!=f&&j.test(f.id)?f:null},isUnderMouse:function(f){var c=
gx.evt.mouse.x,j=gx.evt.mouse.y,b=gx.dom.position(f),a=gx.dom.dimensions(f);return c>=b.x&&c<=b.x+a.w&&j>=b.y&&j<=b.y+a.h||"DIV"==f.tagName&&(0===a.w&&0===a.h&&f.firstChild)&&(b=gx.dom.position(f.firstChild),a=gx.dom.dimensions(f.firstChild),c>=b.x&&c<=b.x+a.w&&j>=b.y&&j<=b.y+a.h)?!0:!1},dom:{generics:[],dblclicks:[],getEventHandlers:function(f){return"dblclick"==f?this.dblclicks:this.generics},addEventHandler:function(f,c,j,b){j=gx.lang.emptyObject(f)?j:f.CmpContext+j;f={id:c+j,cId:j,type:c,obj:f,
hdl:b};c=this.getEventHandlers(c);gx.fx.addElement(c,f,!1)},deleteEventHandlers:function(f){for(var c=[this.dblclicks,this.generics],j=c.length,b=0;b<j;b++){for(var a=[],d=c[b],k=d.length,g=0;g<k;g++){var o=d[g];o.obj==f&&a.push(o)}k=a.length;for(g=0;g<k;g++)gx.fx.deleteElement(d,a[g].id)}},raiseEvent:function(f,c){for(var j=gx.evt.source(c),b=this.getEventHandlers(f),a=b.length,d=0;d<a;d++){var k=b[d],g=gx.fx.findControl(j,k.obj,k.cId);null!=g&&gx.fx.isUnderMouse(g)&&k.hdl.call(k.obj)}},highlight:function(f,
c,j){var b=gx.color.fromRGB(c[0],c[1],c[2]),a=gx.dom.getStyle(f,"backgroundColor"),d="transparent"==a||"rgba(0, 0, 0, 0)"==a;return{play:function(){f.style.backgroundColor=b.Html;setTimeout(this.end,j)},end:function(){var b=a;d&&(b="transparent");f.style.backgroundColor=b}}}},obs:new gx.util.Observable,dnd:{obj:null,dragCtrl:null,clonCtrl:null,sources:[],targets:[],dropCtrl:null,noDropCtrl:null,toHdl:null,drag:function(f,c,j){j&&(gx.evt.setEventRow(f,this.dragCtrl),this.obj=j.call(f,this.dragCtrl),
this.obj.gxDragTypes=c)},drop:function(f,c,j){j&&j.call(c,f,this.dragCtrl,this.obj)},noDrop:function(){var f=this.noDropCtrl;null!=f&&f.gxDndClassName&&(f.className=f.gxDndClassName+"NoAcceptDrag")},out:function(){var f=this.dropCtrl;f&&f.gxClassName&&(f.className=f.gxClassName);this.dropCtrl=null;f=this.noDropCtrl;null!=f&&f.gxClassName&&(f.className=f.gxClassName);this.noDropCtrl=null},over:function(){var f=this.dropCtrl;null!=f&&f.gxDndClassName&&(f.className=f.gxDndClassName+"AcceptDrag")},deleteClonControl:function(){null!=
this.clonCtrl&&gx.dom.removeControlSafe(this.clonCtrl);this.clonCtrl=null},restoreControl:function(){var f=this.clonCtrl;null!=f&&((null==this.toHdl&&(f.dropLeft=parseFloat(f.style.left||"0"),f.dropTop=parseFloat(f.style.top||"0"),this.toHdl=setInterval("gx.fx.dnd.restoreControl()",2)),this.controlRestored())?(clearInterval(this.toHdl),this.toHdl=null,this.deleteClonControl()):(f=this.nextCoords(),this.moveDragControl(f.X,f.Y)))},nextCoords:function(){var f=this.clonCtrl,c=parseFloat(f.style.left||
"0"),j=parseFloat(f.style.top||"0"),b=0,a=0;c>=j?(b=c-1,a=f.dropTop-(f.dropTop-f.originalTop)*(f.dropLeft-b)/(f.dropLeft-f.originalLeft)):(a=j-1,b=f.dropLeft-(f.dropTop-a)*(f.dropLeft-f.originalLeft)/(f.dropTop-f.originalTop));b<=f.originalLeft&&(b=f.originalLeft);a<=f.originalTop&&(a=f.originalTop);return{X:b,Y:a}},moveControl:function(f){if(null==this.clonCtrl){var c=document.createElement("DIV");c.style.position="absolute";f.gxDndClassName&&(c.className=f.gxDndClassName+"Dragging");gx.dom.shouldPurge()&&
gx.dom.purge(c,!0);c.innerHTML=this.dragInfo();gx.fn.setOpacity(50,c);document.body.appendChild(c);c.originalLeft=gx.evt.mouse.x-10;c.originalTop=gx.evt.mouse.y-10;c.diffLeft=10;c.diffTop=10;this.clonCtrl=c}this.moveDragControl(gx.evt.mouse.x,gx.evt.mouse.y)},controlRestored:function(){var f=this.clonCtrl;if(null==f)return!0;var c=parseFloat(f.style.left||"0"),j=parseFloat(f.style.top||"0")-f.originalTop;return 0>=c-f.originalLeft&&0>=j?!0:!1},moveDragControl:function(f,c){try{var j=this.clonCtrl;
null!=j&&(j.style.left=f-j.diffLeft+"px",j.style.top=c-j.diffTop+"px")}catch(b){this.deleteClonControl()}},dragInfo:function(){if(null!=this.obj){var f="",c="",j;for(j in this.obj){if("gxDragTypes"!=j){var b=[f];if("function"==typeof this.obj[j])continue;c+=j+": "+this.obj[j]+"</br>";f=b[0]}if(5<=f){c+="...";break}f++}return c}return""},deleteHandlers:function(f){gx.thread.Mutex(this,this.deleteHandlersSync,[f])},deleteHandlersSync:function(f){var c=[],j,b=this.sources.length;for(j=0;j<b;j++){var a=
this.sources[j];a.obj!=f&&c.push(a)}this.sources=c;c=[];b=this.targets.length;for(j=0;j<b;j++)a=this.targets[j],a.obj!=f&&c.push(a);this.targets=c},addSource:function(f,c,j,b,a){gx.thread.Mutex(this,this.addSourceSync,[f,c,j,b,a])},addSourceSync:function(f,c,j,b,a){c=gx.lang.emptyObject(f)?c:f.CmpContext+c;gx.fx.addElement(this.sources,{id:c,cssClass:j,types:b,obj:f,hdl:a},!1)},addTarget:function(f,c,j,b,a){gx.thread.Mutex(this,this.addTargetSync,[f,c,j,b,a])},addTargetSync:function(f,c,j,b,a){c=
gx.lang.emptyObject(f)?c:f.CmpContext+c;gx.fx.addElement(this.targets,{id:c,cssClass:j,types:b,obj:f,hdl:a},!0)},deleteSource:function(f){gx.thread.Mutex(this,this.deleteSourceSync,[f])},deleteSourceSync:function(f){this.sources=gx.fx.deleteElement(this.sources,f)},getSource:function(f){for(var f=gx.evt.source(f),c=this.sources.length,j=0;j<c;j++){var b=this.sources[j],a=this.dragCtrl=gx.fx.findControl(f,b.obj,b.id);if(null!=a&&(a.gxClassName=a.className,a.gxDndClassName=b.cssClass,gx.fx.isUnderMouse(a)))return b}return this.obj=
this.dragCtrl=null},getTarget:function(f,c){for(var j=gx.evt.source(f),b=this.targets.length,a=0;a<b;a++){var d=this.targets[a],k=gx.fx.findControl(j,d.obj,d.id);if(null!=k&&(k.gxClassName=k.className,k.gxDndClassName=d.cssClass,gx.fx.isUnderMouse(k))){if(gx.fx.matchingTypes(c,d.types))return this.noDropCtrl=null,this.dropCtrl=k,d;this.out();this.noDropCtrl=k;this.noDrop();return null}}this.out();return null}},notifications:{queuedEvents:[],addTracker:function(f,c,j,b,a,d){f.notifications||(f.notifications=
[],gx.fx.obs.addObserver("gx.ws.onMessage.notifications",f,gx.fx.notifications.notify.closure(f),{single:!1}),gx.fx.obs.addObserver("gx.onafterevent",f,gx.fx.notifications.fireQueuedEvents.closure(f),{single:!1}));f.notifications[c||""]={gxO:f,handler:a,eventName:j,type:b,noWait:d};this.webSocket||(f.fullAjax||gx.dbg.write('Warning: WebNotifications are not supported with "Web User Experience": "Previous versions". You must use Smooth.'),f={},f.port=gx.fn.getHidden("GX_WEBSOCKET_PORT"),f.clientId=
gx.fn.getHidden("GX_WEBSOCKET_ID"),f.wsProtocol="https:"===location.protocol?"wss://":"ws://",f.host=f.port?location.hostname+":"+f.port+"/":location.host+"/",f.resourceUrl=gx.gen.isDotNet()?"/gxwebsocket.svc?":"/gxwebsocket?",f.wsURL=gx.config.websocket.URL,f.basePath=gx.basePath,f.namespace="notifications",this.webSocket=new gx.webSocket(f))},notify:function(f){var f=gx.json.evalJSON(f),c=this.notifications[f.GroupName||""];c&&(gx.fx.notifications.queuedEvents.push({notifObj:c,data:f}),(c.noWait||
gx.isInputEnabled())&&gx.fx.notifications.fireQueuedEvents())},fireQueuedEvents:function(){for(var f=0;f<gx.fx.notifications.queuedEvents.length;f++){var c=gx.fx.notifications.queuedEvents[f];if(!c.executed){gx.fx.notifications.queuedEvents.splice(f--,1);var j=c.notifObj.gxO;c.executed=!0;if(gx.lang.emptyObject(c.data.Object)||c.data.Object.toUpperCase()==j.ServerClass.toUpperCase()){var b=c.notifObj.type,a=c.notifObj.eventName;if(a){var d=j.isServerEvent(a),k={};k[b[0][0]]=c.data;j.setEventParameters(c.notifObj.type,
k);gx.evt.dispatcher.dispatch(j.getServerEventName(a),j,0,0,d)}else c.notifObj.handler(c.data)}}}}},ctx:{setters:[],trackers:[],deleteHandlers:function(f){gx.thread.Mutex(this,this.deleteHandlersSync,[f])},deleteHandlersSync:function(f){var c,j=[],b=this.setters.length;for(c=0;c<b;c++){var a=this.setters[c];a.obj!=f&&j.push(a)}this.setters=j;j=[];b=this.trackers.length;for(c=0;c<b;c++)a=this.trackers[c],a.obj!=f&&j.push(a);this.trackers=j},addSetter:function(f,c,j,b,a){gx.thread.Mutex(this,this.addSetterSync,
[f,c,j,b,a])},addSetterSync:function(f,c,j,b,a){c=gx.lang.emptyObject(f)?c:f.CmpContext+c;gx.fx.addElement(this.setters,{id:c,cssClass:j,types:b,obj:f,hdl:a},!1)},addTracker:function(f,c,j){gx.thread.Mutex(this,this.addTrackerSync,[f,c,j])},addTrackerSync:function(f,c,j){gx.fx.addElement(this.trackers,{id:f.CmpContext+f.IsMasterPage.toString(),cssClass:"",types:c,obj:f,hdl:j},!0)},deleteSetter:function(f){gx.thread.Mutex(this,this.deleteSetterSync,[f])},deleteSetterSync:function(f){this.setters=gx.fx.deleteElement(this.setters,
f)},notify:function(f,c,j){gx.thread.Mutex(this,this.notifySync,[f,c,j])},notifySync:function(f,c,j){if(f&&f.forcedFocus)f.forcedFocus=!1;else{var b,a=gx.lang.emptyObject,d=function(a,b){var d=gx.O;gx.setGxO(a);b();gx.setGxO(d)},k=null;if(a(c)||a(j)){var g=this.setters.length;for(b=0;b<g;b++){var o=this.setters[b];if(a(f)){if(k=gx.fx.findControl(null,o.obj,o.id),null!=k&&a(k.onfocus)&&gx.fx.isUnderMouse(k)){d.apply(this,[o.obj,function(){gx.evt.setEventRow(o.obj,k);c=o.types;j=o.hdl.call(o.obj,k)}]);
break}}else if(f.id==o.id){d.apply(this,[o.obj,function(){k=f;gx.evt.setEventRow(o.obj,k);c=o.types;j=o.hdl.call(o.obj,k)}]);break}}}if(!a(c)&&(j||""===j)){a=this.trackers.length;for(b=0;b<a;b++){var l=this.trackers[b];gx.fx.matchingTypes(c,l.types)&&d.apply(this,[l.obj,function(){l.hdl.call(l.obj,null,k,j)}])}}}}}};
gx.date=function(){var f=/([0-9]{1,4})\/?-?([0-9]{1,2})\/?-?([0-9]{1,4})\s?T?([0-9]{1,2})?:?([0-9]{1,2})?:?([0-9]{1,2})?:?([0-9]{1,2})?\s?(AM|PM)?/i,c=/([0-9]{1,2}):?([0-9]{1,2})?:?([0-9]{1,2})?:?([0-9]{1,2})?\s?(AM|PM)?/i,j=/^[0-9]{4}[/-]{1}[0-9]{2}[/-]{1}[0-9]{2}$/,b=/^([ ]*([\/|\-][ ]*[\/|\-][ ]*((00|12)(:00(:00)?)?[ ]*(a|am)?)?)?)?[ ]*$/i,a=new Date(0,0,0,0,0,0,0);return{UTC_Offset:(new Date).getTimezoneOffset(),clone:function(){return new Date(this.getTime())},equalsNoTime:function(a){return this.getDay()==
a.getDay()&&this.getMonth()==a.getMonth()&&this.getFullYear()==a.getFullYear()?!0:!1},toJson:function(){var a=new gx.date.gxdate("");a.assign_date(this);return a.json()},gxdate:function(b,k){this.json=function(){var a=this.TimeFmt;this.TimeFmt=24;var b=this.HasTimePart,d=this.HasDatePart;this.HasDatePart=this.HasTimePart=!0;var k=this.getStringWithFmt("Y4MD")+" "+this.getTimeString(!0,!0);this.TimeFmt=a;this.HasTimePart=b;this.HasDatePart=d;return k};this.mapCTODFormatToPattern=function(a){return"ANSI"==
a?"Y4MD":a};this.emptyDateString=function(a){return-1==a.indexOf("Y4")?gx.blankWhenEmpty?"        ":"  /  /  ":gx.blankWhenEmpty?"          ":"Y4MD"==a?"    /  /  ":"  /  /    "};this.getStringWithFmt=function(b){b=this.mapCTODFormatToPattern(b);if(0===this.Value-a)return this.emptyDateString(b);var d=b,k=gx.text.padl(this.Value.getDate().toString(),2,"0"),c=gx.text.padl((this.Value.getMonth()+1).toString(),2,"0"),f=gx.text.padl(this.Value.getFullYear().toString(),4,"0"),j=this.FormatPos(b),d=d.replace("D",
k+(3>j.DPos?"/":"")),d=d.replace("M",c+(3>j.MPos?"/":""));-1==b.indexOf("Y4")?(f=f.slice(2,4),d=d.replace("Y",f+(3>j.YPos?"/":""))):d=d.replace("Y4",f+(3>j.YPos?"/":""));return d};this.getString=function(a){gx.lang.emptyObject(a)&&(a=gx.dateFormat);return this.getStringWithFmt(a)};this.toString=function(){var a=this.HasTimePart?" "+this.getTimeString(!0,!0):"";return this.getString()+a};this.gxdtoc=function(a,b){return this.getStringWithFmt(this.mapCTODFormatToPattern(a)).replace("/",b)};this.getUrlVal=
function(){var a,b,d;if(gx.date.isNullDate(this))return"";this.HasDatePart?(a=gx.text.padl(this.Value.getDate().toString(),2,"0"),b=gx.text.padl((this.Value.getMonth()+1).toString(),2,"0"),d=gx.text.padl(this.Value.getFullYear().toString(),4,"0")):(b=a="01",d="0001");var k=this.HasTimePart?gx.text.padl(this.Value.getHours().toString(),2,"0"):"",c=this.HasTimePart?gx.text.padl(this.Value.getMinutes().toString(),2,"0"):"",f=this.HasTimePart?gx.text.padl(this.Value.getSeconds().toString(),2,"0"):"";
return d+b+a+k+c+f};this.getTimeString=function(a,b,d){if(gx.date.isNullDate(this)&&gx.blankWhenEmpty){var k="";d&&(k+="  ");a&&(k+="   ");b&&(k+="   ");return k}var k="",c=this.Value.getHours(),d=d||!0;12==this.TimeFmt&&12<=c?(12<c&&(c-=12),k=" PM"):12==this.TimeFmt&&(k=" AM");var f=this.HasTimePart?gx.text.padl(c.toString(),2,"0"):"",j=this.HasTimePart?gx.text.padl(this.Value.getMinutes().toString(),2,"0"):"",u=this.HasTimePart?gx.text.padl(this.Value.getSeconds().toString(),2,"0"):"";0===c&&""!==
k&&(f="12");c="";d&&(c=f);a&&(c=c+":"+j);b&&(c=c+":"+u);return c+k};this.FormatPos=function(a){var b,d,k;"ANSI"==a?(b=1,d=2,a=3):(k=a.indexOf("Y4"),b=-1==k?a.indexOf("Y")+1:k+1,d=a.indexOf("M"),0!==k&&d++,a=a.indexOf("D"),0!==k&&a++);return{YPos:b,MPos:d,DPos:a}};this.assign_date=function(b){b instanceof gx.date.gxdate?(this.Value=b.Value,this.HasTimePart=b.HasTimePart,this.HasDatePart=b.HasDatePart):this.Value=void 0===b?a:b};this.toUTC=function(){if(gx.date.isNullDate(this)||"undefined"==typeof gx.StorageTimeZone||
gx.StorageTimeZone==gx.NULL_TIMEZONEOFFSET)return this;var a=new gx.date.gxdate("");a.Value.setTime(this.Value.getTime()+6E4*this.Value.getTimezoneOffset());a.HasTimePart=this.HasTimePart;a.HasDatePart=this.HasDatePart;return a};this.fromUTC=function(){if(gx.date.isNullDate(this)||"undefined"==typeof gx.StorageTimeZone||gx.StorageTimeZone==gx.NULL_TIMEZONEOFFSET)return this;var a=new gx.date.gxdate("");a.Value.setTime(this.Value.getTime()-6E4*this.Value.getTimezoneOffset());a.HasTimePart=this.HasTimePart;
a.HasDatePart=this.HasDatePart;return a};this.assign_string=function(a,b,d,k){var j=f,p=j.exec(a),q=0;if(null==p)-1!=a.indexOf("  /  /  ")&&(d=!0);else for(var u=p.length,s=1;s<u;s++)gx.lang.emptyObject(p[s])||q++;var r=this.FormatPos(b),t=s=u=b=0,v=0,y=0,z=0;try{this.HasDatePart=!0;if(6==r.DPos+r.MPos+r.YPos&&null!=p&&3<=q){null!=p[r.YPos]&&(b=parseInt(p[r.YPos],10));if(isNaN(b))throw"InvalidDate";b<this.FYearOfCentury?b+=2E3:100>b?b+=1900:1E3>b&&(b+=1E3);null!=p[r.MPos]&&(u=parseInt(p[r.MPos],10)-
1);if(isNaN(u)||0>u||11<u)throw"InvalidDate";null!=p[r.DPos]&&(s=parseInt(p[r.DPos],10));if(isNaN(s)||0>s||s>gx.date.maxDays(u,b))throw"InvalidDate";}else this.HasDatePart=!1;this.HasTimePart=!1;r=0;null==p?(j=c,p=j.exec(a),null!=p&&(r=1,this.HasTimePart=!0)):3<q&&(r=4,this.HasTimePart=!0);if(this.HasTimePart&&!d){null!=p[r]&&(t=parseInt(p[r],10));if(gx.lang.emptyObject(p[r])||isNaN(t))throw this.HasTimePart=!1,"InvalidHour";null!=p[r+1]&&(v=parseInt(p[r+1],10));isNaN(v)&&(v=0);null!=p[r+2]&&(y=parseInt(p[r+
2],10));isNaN(y)&&(y=0);null!=p[r+3]&&(z=parseInt(p[r+3],10));isNaN(z)&&(z=0);if(!this.validTime(-1!=a.toLowerCase().indexOf("m"),t,v,y,z))throw"InvalidHour";if((-1!=a.indexOf("PM")||-1!=a.indexOf("pm"))&&12>t)t+=12;if((-1!=a.indexOf("AM")||-1!=a.indexOf("am"))&&12==t)t=0}}catch(C){if(k)throw C;"InvalidDate"==C&&(z=y=v=t=s=u=b=0);"InvalidHour"==C&&(z=y=v=t=0)}this.Value=new Date(b,u,s,t,v,y,z);if(0<b+u+s+t+v+y+z&&(!this.HasTimePart||d)&&this.Value.getDate()!=s)this.Value=new Date(Date.UTC(b,u,s,t+
12,v,y,z))};this.validTime=function(a,b,d,k,c){return a&&12<b||!a&&(24<b||24==b&&0<d+k)?!1:59>=d||59>=k||59>=c};this.compare=function(a){return"string"==typeof a?this.compare_string(a):this.compare_date(a)};this.compare_string=function(a){return this.compare_date((new gx.date.gxdate(a)).Value)};this.compare_date=function(a){a=a instanceof gx.date.gxdate?a.Value:a;return this.HasTimePart?this.Value-a:this.Value.getFullYear()>a.getFullYear()?1:this.Value.getFullYear()<a.getFullYear()?-1:this.Value.getMonth()>
a.getMonth()?1:this.Value.getMonth()<a.getMonth()?-1:this.Value.getDate()>a.getDate()?1:this.Value.getDate()<a.getDate()?-1:0};this.TimeFmt=gx.timeFormat||12;this.SFmt=k||gx.dateFormat;this.FYearOfCentury=gx.centuryFirstYear||40;"string"==typeof b?this.assign_string(b,this.SFmt):this.assign_date(b)},isANSIDateTime:function(a){return"string"==typeof a&&f.test(a)?!0:!1},isANSIDate:function(a){return"string"==typeof a&&j.test(a)?!0:!1},isLeapYear:function(a){return 0===a%400?!0:0===a%100?!1:0===a%4?
!0:!1},dateObject:function(a){return a instanceof this.gxdate?a.Value:"string"==typeof a?(new this.gxdate(a,this.isANSIDate(a)?"Y4MD":void 0)).Value:a instanceof Date?a:new Date},gxdateObject:function(a){if(a instanceof this.gxdate)return a;if("string"==typeof a)return new this.gxdate(a,this.isANSIDate(a)?"Y4MD":void 0);if(a instanceof Date){var b=new this.gxdate("");b.assign_date(a);return b}return new this.gxdate("")},clonedDate:function(a,b){var c=new this.gxdate("");c.assign_date(b);a instanceof
this.gxdate&&(c.SFmt=a.SFmt,c.HasTimePart=a.HasTimePart,c.HasDatePart=a.HasDatePart);return c},nullDate:function(){return(new this.gxdate("")).Value},now:function(){var a=this.today();a.HasTimePart=!0;a.HasDatePart=!0;return a},today:function(){var a=new this.gxdate("");a.assign_date(new Date);return a},ctot:function(a,b){return new this.gxdate(a,b)},ctod:function(a,b){var c=new this.gxdate(a,b);c.Value.setHours(0,0,0,0);return c},ymdtod:function(a,b,c){a=new this.gxdate(a+"/"+b+"/"+c,"ANSI");a.Value.setHours(0,
0,0,0);return a},ymdhmstot:function(a,b,c,f,j,m){return new this.gxdate(a+"/"+b+"/"+c+" "+f+":"+j+":"+m,"ANSI")},hour:function(a){return(new this.gxdate(a)).Value.getHours()},minute:function(a){return(new this.gxdate(a)).Value.getMinutes()},second:function(a){return(new this.gxdate(a)).Value.getSeconds()},millisec:function(a){return 864E5*a},day:function(a){return(new this.gxdate(a)).Value.getDate()},month:function(a){return(new this.gxdate(a)).Value.getMonth()+1},year:function(a){return(new this.gxdate(a)).Value.getFullYear()},
addDays:function(a,b){return this.addMill(a,this.dayToMillisec(b))},addSec:function(a,b){return this.addMill(a,this.secToMillisec(b))},addMill:function(a,b){var c=this.dateObject(a).clone(),f=new this.gxdate;f.assign_date(c);var j=c.getMilliseconds();c.setMilliseconds(j+b);return f.getString(this.isANSIDate(a)?"Y4MD":void 0)},secDiff:function(a,b){return this.millisecToSec(this.milliDiff(a,b))},daysDiff:function(a,b){return this.millisecToDay(this.milliDiff(a,b))},milliDiff:function(a,b){var c=this.gxdateObject(a),
f=this.gxdateObject(b),a=c.Value.valueOf(),b=f.Value.valueOf();return a-b},dayToMillisec:function(a){return 864E5*a},secToMillisec:function(a){return 1E3*a},millisecToDay:function(a){return a/24/60/60/1E3},millisecToSec:function(a){return a/1E3},dateParm:function(a){return"string"==typeof a?new this.gxdate(a):a},urlDate:function(a,b){var c=new this.gxdate("undefined"!=typeof a.value?a.value:gx.dom.spanValue(a)||a,b);return!this.isNullDate(c)?c.Value.getFullYear().toString()+gx.text.padl((c.Value.getMonth()+
1).toString(),2,"0")+gx.text.padl(c.Value.getDate().toString(),2,"0"):""},urlDateTime:function(a,b){var c=new this.gxdate("undefined"!=typeof a.value?a.value:gx.dom.spanValue(a)||a,b);return!c.HasDatePart?"00010101"+gx.text.padl(c.Value.getHours().toString(),2,"0")+gx.text.padl(c.Value.getMinutes().toString(),2,"0")+gx.text.padl(c.Value.getSeconds().toString(),2,"0"):!this.isNullDate(c)?c.Value.getFullYear().toString()+gx.text.padl((c.Value.getMonth()+1).toString(),2,"0")+gx.text.padl(c.Value.getDate().toString(),
2,"0")+gx.text.padl(c.Value.getHours().toString(),2,"0")+gx.text.padl(c.Value.getMinutes().toString(),2,"0")+gx.text.padl(c.Value.getSeconds().toString(),2,"0"):""},isNullDate:function(a){a instanceof this.gxdate&&(a=a.Value);var b=this.nullDate();return b.getFullYear()!=a.getFullYear()||b.getMonth()!=a.getMonth()||b.getDate()!=a.getDate()||b.getHours()!=a.getHours()||b.getMinutes()!=a.getMinutes()||b.getSeconds()!=a.getSeconds()?!1:!0},dtoc:function(a,b,c){return(new this.gxdate(a,this.isANSIDate(a)?
"Y4MD":void 0)).gxdtoc(b,c)},dttoc:function(a,b,c){var a=new this.gxdate(a,this.isANSIDateTime(a)?"Y4MD":void 0),f=gx.dateFormat,j="";0<b&&(8<b&&-1==f.indexOf("Y4")&&(f=f.replace("Y","Y4")),j=a.getStringWithFmt(f)+" ");return 0<c?j+a.getTimeString(3<c,8==c,1<c):j},nulldate_toc:function(a,b){var c=new this.gxdate("");c.HasTimePart=!0;c.HasDatePart=!0;var f=gx.dateFormat,j="";0<a&&(8<a&&-1==f.indexOf("Y4")&&(f=f.replace("Y","Y4")),j=c.getStringWithFmt(f)+" ");return 0<b&&!gx.blankWhenEmpty?j+c.getTimeString(1<
b,8==b,3<b):j},addyr:function(a,b){return this.addmth(a,12*b)},addmth:function(a,b){var c=this.gxdateObject(a),a=new Date(this.dateObject(a).getTime()),f=a.getDate();a.setDate(1);a.setMonth(a.getMonth()+1*b);a.setDate(Math.min(f,this.maxDays(a.getMonth(),a.getFullYear())));return this.clonedDate(c,a)},dtadd:function(a,b){var c=this.gxdateObject(a),a=new Date(this.dateObject(a).getTime()),f=a.getMilliseconds();a.setMilliseconds(f+1E3*b);return this.clonedDate(c,a)},dtdiff:function(a,b){a=this.dateObject(a);
b=this.dateObject(b);return(a-b)/1E3},maxDays:function(a,b){return[31,this.isLeapYear(b)?29:28,31,30,31,30,31,31,30,31,30,31][a]},eom:function(a){var b=this.gxdateObject(a),a=this.dateObject(a),a=new Date(a.getTime()),c=this.maxDays(a.getMonth(),a.getFullYear());a.setDate(c);return this.clonedDate(b,a)},dow:function(a){a=this.dateObject(a);return a.equalsNoTime(this.nullDate())?0:a.getDay()+1},age:function(a,b){var c,f,j;f=this.dateObject(a);c=this.dateObject(b);j=this.nullDate();if(f.equalsNoTime(j)||
c.equalsNoTime(j)||f.equalsNoTime(c))return 0;if(c>=f){j=36E5*c.getUTCHours()+6E4*c.getUTCMinutes()+1E3*c.getUTCSeconds()-(36E5*f.getUTCHours()+6E4*f.getUTCMinutes()+1E3*f.getUTCSeconds());if(c.getUTCDate()>f.getUTCDate()||c.getUTCDate()==f.getUTCDate()&&0<=j)j=new Date(Date.UTC(c.getUTCFullYear(),c.getUTCMonth(),f.getUTCDate(),f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds()));else{j=new Date(Date.UTC(c.getUTCFullYear(),c.getUTCMonth()-1,f.getUTCDate(),f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds()));
c=c.getUTCMonth()-1;for(-1==c&&(c=11);j.getUTCMonth()!=c;)j.setUTCDate(j.getUTCDate()-1)}return f=j.getUTCMonth()>=f.getUTCMonth()?j.getUTCFullYear()-f.getUTCFullYear():j.getUTCFullYear()-1-f.getUTCFullYear()}return 0},valid_date:function(a,c,g,f,j,m,n,p){var q=n||!1,u=!1,m=a.value,s="",n=g,r="",r="^[ ]*(",t=0<c?"GXM_invaliddate":"GXM_invalidtime",s=gx.num.replaceFullWidthNumerals(m),s=s.split("\n")[0],g="YMD"==g?1:0,j=12==j?1:0;if(b.test(s))u=!0,m=s="";else if(0<c&&4===s.length)var v=(new Date).getFullYear().toString().substring(10===
c?0:2),s=1===g?v+s:s+v;r=0<c?8==c?r+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{2})":0===g?q?r+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{4})":r+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{2,4})":q?r+"([0-9]{4})[/|-]?([0-9]{1,2})[/|-]?([0-9]{1,2})":r+"([0-9]{2,4})[/|-]?([0-9]{1,2})[/|-]?([0-9]{1,2})":r+"( )?( )?( )?";0<f&&(r+="(",0<c&&(r+="[ ]*"),r+="([0-9]{1,2})",r=2<f?r+"(:?([0-9]{1,2}))?":r+"(( )?)?",r=5<f?r+"(:?([0-9]{1,2}))?":r+"(( )?)?",r=(1==j?r+"[ ]*(a|am|p|pm)?":r+"(( )?)?")+")?");g=RegExp(r+
")?[ ]*$","i");if(g.test(s)){g=s.match(g);0<c?(r="/",0<s.indexOf("-")&&(r="-"),g[2]?r=g[2]+r+g[3]+r+g[4]:(r=1==p?"        ":"  "+r+"  "+r+"  ",10==c&&(r+="  "))):r="";0<f&&(0<c&&(r+=" "),1==p&&!g[6]&&!g[8]&&!g[10]?r+="        ":(g[6]?r+=g[6]:u?(p=s.match(b),r=p[4]?r+p[4]:r+(1==j?"12":"00")):r+=1==j?"12":"00",2<f&&(r=g[8]?r+":"+g[8]:r+":00"),5<f&&(r=g[10]?r+":"+g[10]:r+":00"),1==j&&(r="p"==(g[11]?g[11].substr(0,1):"a").toLowerCase()?r+" PM":r+" AM")));j=new this.gxdate("",n);try{j.assign_string(r,
n,0>=f,!0),""!==gx.text.trim(r)&&(r=this.formatDateTime(f,c,n,j))}catch(y){return gx.fn.alert(a,gx.getMessage(t)),gx.csv.setFormatError(a),!1}if(r!=m){a.value=r;if(-1!=navigator.userAgent.indexOf("Firefox/2"))a.onchange();(c=gx.O.getValidStructFld(a))&&gx.O.refreshDependantGrids(c)}gx.csv.setFormatError(a,!1);return!0}gx.fn.alert(a,gx.getMessage(t));gx.csv.setFormatError(a);return!1},formatDateTime:function(a,b,c,f){var j="";0<a&&f.HasTimePart&&(j=f.getTimeString(4<=a,8<=a));a=c;8<b&&-1==a.indexOf("Y4")&&
(a=a.replace("Y","Y4"));return 0<b?f.getStringWithFmt(a)+(f.HasTimePart?" "+j:""):f.HasTimePart?j:""},_init:function(){Date.prototype.equalsNoTime=this.equalsNoTime;Date.prototype.clone=this.clone;Date.prototype.json=this.toJson}}}();
gx.text={stringBuffer:function(f){this.capacity=f||10;this.buffer=[];this.append=function(c){this.buffer.push(c);return this};this.clear=function(){delete this.buffer;this.buffer=[]};this.toString=function(){return 0===this.buffer.length?"":this.buffer.join("")};this.length=function(){return this.toString().length}},format:function(){for(var f=arguments[0],c=arguments.length,j=1;j<c;j++)f=f.replace("%"+j,gx.text.rtrim(arguments[j].toString()));return f},formatString:function(f,c,j){return j?gx.text.padl("",
c,"*"):f},replaceAll:function(f,c,j){return-1!=f.toString().indexOf(c)?(""+f).split(c).join(j):f},charReplace:function(f,c,j){for(var b="",a=f.length,d=0;d<a;d++){for(var k=!1,g=c.length,o=0;o<g;o++)if(f.charAt(d)==c[o]&&o<j.length){b+=j[o];k=!0;break}!1===k&&(b+=f.charAt(d))}return b},length:function(f){return f.length},upper:function(f){return f.toUpperCase()},lower:function(f){return f.toLowerCase()},padr:function(f,c,j){c-=f.length;if(1>c)return f;for(var b=0;b<c;b++)f+=j;return f},padl:function(f,
c,j){c-=f.length;if(1>c)return f;for(var b="",a=0;a<c;a++)b+=j;return b+f},ltrim:function(f){return f.toString().replace(/^ */,"")},rtrim:function(f){return f.toString().replace(/ *$/,"")},trim:function(f){return this.rtrim(this.ltrim(f))},chr:function(f){return String.fromCharCode(f)},concat:function(f,c,j){return this.rtrim(f)+j+c},space:function(f){for(var c="",j=0;j<f;j++)c+=" ";return c},substring:function(f,c,j){return 0>j?f.toString().substring(c-1):f.toString().substring(c-1,c-1+j)},tostring:function(f){return f.toString()},
toformattedstring:function(f){return f.toString().replace(".",gx.decimalPoint)},newline:function(){return"\n"},escapeMapping:{"":"\\b","\t":"\\t","\n":"\\n","":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},escapeRegex:{start:/["\\\x00-\x1f]/,end:/([\x00-\x1f\\"])/g},escapeFn:function(f,c){var j=gx.text.escapeMapping[c];if(j)return j;j=c.charCodeAt();return"\\u00"+Math.floor(j/16).toString(16)+(j%16).toString(16)},escapeString:function(f){return this.escapeRegex.start.test(f)?'"'+f.replace(this.escapeRegex.end,
this.escapeFn)+'"':'"'+f+'"'},indexOf:function(f,c,j){if(j>f.length)return 0;0>=j&&(j=1);return f.indexOf(c,j-1)+1},lastIndexOf:function(f,c,j){if(j>f.length)return 0;0>=j&&(j=f.length);return f.lastIndexOf(c,j-1)+1},endsWith:function(f,c){return-1!==f.indexOf(c,f.length-c.length)},startsWith:function(f,c){return 1==this.indexOf(f,c)},contains:function(f,c){return 0<this.indexOf(f,c)},charAt:function(f,c){return f.charAt(c-1)}};
gx.num=function(){var f=/[\uFF10-\uFF19]|[\uFF0C-\uFF0E]|\u2015|\u30FC|\uFF0F/g,c=function(c,b,a,d){var k=gx.lang.instanceOf,g="undefined"==typeof gx.num.dec?null:gx.num.dec.bigDecimal,f=gx.thousandSeparator,l=gx.decimalPoint;"string"==typeof a&&(a=gx.num.parseFloat(a,f,l));"string"==typeof d&&(d=gx.num.parseFloat(d,f,l));return k(a,g)&&k(d,Number)?a[c](new g(d.toString())).toString():k(a,Number)&&k(d,g)?(new g(a.toString()))[c](d).toString():k(a,Number)&&k(d,Number)||"undefined"==typeof gx.num.dec?
b(a,d):a[c](d)};return{str:function(c,b,a){if("string"===typeof c)return c;"undefined"==typeof b&&(b=10);if("undefined"==typeof a||b-1<=a)a=0;c=c.toFixed(a);return c.length<=b?gx.text.padl(c,b," "):gx.text.padr("",b,"*")},maxNumericPrecision:function(){return 15},extractValue:function(c,b){b=gx.num.replaceFullWidthNumerals(b);if(gx.lang.instanceOf(b,Number)||this.overflowNumber(b))return b;var a,d=void 0===b?"":b;if(c){a="+"==c.charAt(0)||"-"==c.charAt(0)?c.replace(/[\+\-\d,*\.*Z*\s]+/,""):c.replace(/[\d,*\.*Z*\s]+/g,
"");c.lastIndexOf(".")!=c.indexOf(".")&&(d=gx.text.replaceAll(d,".",""));for(var k=0;k<a.length;k++)d=d.replace(a.charAt(k),"")}return gx.text.trim(d)},formatNumber:function(c,b,a,d,k,g){gx.lang.emptyObject(c)&&(c="0");var f=-1!=a.indexOf(",")?gx.thousandSeparator:"",l=gx.decimalPoint,m=!1;"string"==typeof c&&f&&(c=gx.text.replaceAll(c,f,""));"string"==typeof c&&(c=c.replace(l,"."));if(gx.num.overflowNumber(c))return c;try{c=gx.num.setScale(c,b)}catch(n){c=c.toString()}var p=c.split(".");p[0]||(p[0]=
"0");p[1]||(p[1]="");if(g){if(p[1].length>b&&p[1].replace(/0*$/,"").length>b)throw"InvalidNumber";d=0===b?d:d-b-1;if(k&&"-"==p[0].charAt(0)&&p[0].replace(/0*/,"").length>d||!k&&"-"==p[0].charAt(0)||p[0].replace(/[+]?0*/,"").length>d)throw"InvalidNumber";}0>c&&(k=!0);if(p[1].length<b){d=p[1];for(c=p[1].length+1;c<=b;c++)d+="0";p[1]=d}d="";k&&"-"==p[0].charAt(0)&&(d="-",p[0]=p[0].substring(1));if(f&&3<p[0].length){g=p[0];p[0]="";for(k=3;k<g.length;k+=3)c=g.slice(g.length-k,g.length-k+3),p[0]=f+c+p[0]+
"";k=g.substr(0,0===g.length%3?3:g.length%3);p[0]=k+p[0]}l=!p[1]?"":l;0<b?(k=a.split("."),k[1]==gx.text.padr("",b,"Z")&&(m=!0)):(k=Array(a),0<k.length&&0===gx.text.replaceAll(gx.text.replaceAll(k[0],",",""),"Z","").length&&(m=!0));b=0;a="";if(1<k.length){g=k[1];for(c=0;c<g.length;c++){var q=g.charAt(c);"9"==q||"Z"==q?p[1].length>b?(a+=p[1].charAt(b),b++):a+="0":"."!=q&&","!=q&&(a+=q)}}g="";k=k[0];b=p[0].length-1;for(c=k.length-1;0<=c;c--)q=k.charAt(c),"9"==q||"Z"==q?0<=b?("Z"==q&&"0"===p[0].charAt(b)&&
0===b||(g=p[0].charAt(b)+g),b--):g=("9"==q?"0":"")+g:"Z"!=q&&","!=q?g=q+g:","==q&&p[0].charAt(b)==f&&(g=p[0].charAt(b)+g,b--);return m&&("0"==g||""===g)&&0===a.replace(/0+$/,"").length?"":d+g+(!a?"":l+a)},add:function(f,b){return c("add",function(a,b){return a+b},f,b)},subtract:function(f,b){return c("substract",function(a,b){return a-b},f,b)},multiply:function(f,b){return c("multiply",function(a,b){return a*b},f,b)},divide:function(f,b){return c("divide",function(a,b){return a/b},f,b)},negate:function(c){return gx.lang.instanceOf(c,
Number)||"undefined"==typeof gx.num.dec?-c:c.negate()},pow:function(f,b){return c("pow",function(a,b){return a^b},f,b)},mod:function(f,b){return c("remainder",function(a,b){return a%b},f,b)},setScale:function(c,b){if(gx.lang.instanceOf(c,Number))return c.toFixed(b);"string"==typeof c&&(c=gx.text.trim(c));if(c.length<this.maxNumericPrecision()||"undefined"==typeof gx.num.dec){if(0===c.length&&0===b)return"0";var a=c.split("."),d;a[1]||(a[1]="");if(a[1].length<b){var k=a[1];for(d=a[1].length+1;d<=b;d++)k+=
"0";a[1]=k;return a[0]+(""===a[1]?"":".")+a[1]}return Number(parseFloat(c)).toFixed(b)}return(new gx.num.dec.bigDecimal(c)).setScale(b,gx.num.dec.ROUND_UP).toString()},parseFloat:function(c,b,a){if(gx.lang.instanceOf(c,Number)||this.overflowNumber(c))return c;c=this.toInvariant(c,b,a);return c.length>this.maxNumericPrecision()&&"undefined"!=typeof gx.num.dec?new gx.num.dec.bigDecimal(c):parseFloat(c)},toInvariant:function(c,b,a){return"number"==typeof c||"undefined"!=typeof gx.num.dec&&c instanceof
gx.num.dec.bigDecimal?c:gx.text.replaceAll(c,b,"").replace(a,".")},parseInt:function(c,b,a){if("number"==typeof c)return c;var d=c,d=gx.text.replaceAll(c,a,"");return parseInt(d,b)},overflowNumber:function(c){return/\*(\**)/.test(c)},urlDecimal:function(c,b,a){return"undefined"!=typeof c?(c="undefined"!=typeof c.value?c.value:c,c=this.parseFloat(c,b,a),c.toString()):""},random:function(){return Math.random()},intval:function(c){var b=0,c="undefined"!=typeof c?c.toString():"",b=c.length<gx.num.maxNumericPrecision()||
"undefined"==typeof gx.num.dec?parseInt(c,0):(new gx.num.dec.bigDecimal(c)).setScale(0,gx.num.dec.ROUND_UP);isNaN(b)&&(b=0);return b},val:function(c){c=gx.text.trim(c).replace(",",".");c=this.parseFloat(c);isNaN(c)&&(c=0);return c},trunc:function(c,b){var a=c,c=c.toString(),d=c.length,k=c.indexOf(".");if(-1!=k){a=c.substring(0,k);if(0===b)return Number(a);var g="";k+b<=d&&(g=c.substring(k+1,k+1+b));a=gx.num.parseFloat(a+"."+g);isNaN(a)&&(a=0)}return a},round:function(c,b){return 0<=b?parseFloat(gx.num.decimalAdjust("round",
c,-b).toFixed(b)):gx.num.roundNeg(c,b)},decimalAdjust:function(c,b,a){if("undefined"===typeof a||0===+a)return Math[c](b);b=+b;a=+a;if(isNaN(b)||!("number"===typeof a&&0===a%1))return NaN;b=b.toString().split("e");b=Math[c](+(b[0]+"e"+(b[1]?+b[1]-a:-a)));b=b.toString().split("e");return+(b[0]+"e"+(b[1]?+b[1]+a:a))},roundNeg:function(c,b){var c=c.toString(),a=c.indexOf("."),d="",k="",k=0,d="."+"0000000000000000000000".substring(1,parseInt(b,0)+1)+"5",k=parseFloat(d);-1==a?(k="0000000000000000000000",
d=""+c):0===a?(d="0",k=0+parseFloat(c)+parseFloat(k),c=k+"0000000000000000000000",k=""+c.substring(1,c.length)):(k=parseFloat(c)+k,d=k.toString().substring(0,a),k=""+(""+k+"0000000000000000000000").substring(a+1,a+1+parseInt(b,0)));k=k.substring(0,parseInt(b,0));a=parseFloat(d+"."+k);isNaN(a)&&(a=0);return a},valid_decimal:function(c,b,a,d){var k=c.value,g=k.lastIndexOf(a),f=!0;","==a&&(-1==g&&k.lastIndexOf(".")==k.indexOf("."))&&(k=k.replace(".",a));var l=gx.O.getValidStructFld(c);gx.lang.emptyObject(l)||
(k=gx.num.extractValue(l.pic,k));g=RegExp("^[ ]*((([+-]{1}[0-9]+)||([0-9]*))(\\"+b+"[0-9]{3})*(\\"+a+"[0-9]*)?)?[ ]*$");if(k)if(g.test(k)){var g=k.lastIndexOf(a),m=k;-1!=g&&(m=k.slice(0,g+parseInt(d,10)+1));try{gx.lang.emptyObject(l)||(m=gx.num.formatNumber(m,l.dec,l.pic,l.len,l.sign,!0)),"."!=a&&"SELECT"==c.tagName&&(m=gx.num.toInvariant(m,b,a))}catch(n){f=!1}if(f&&m!=gx.text.trim(c.value)&&(c.value=m,-1!=navigator.userAgent.indexOf("Firefox/2")))c.onchange()}else f=!1;else f=!0;f?gx.csv.setFormatError(c,
!1):(gx.csv.setFormatError(c),gx.fn.alert(c,gx.getMessage("GXM_badnum")))},valid_integer:function(c,b){var a,d,k,g=gx.O.getValidStructFld(c),f=gx.lang.emptyObject(g);d=c.value;f||(d=gx.num.extractValue(g.pic,d));a=!f&&-1!=g.pic.indexOf(",")?RegExp("^[ ]*([+-]{1}[0-9]+||[0-9]*)(\\"+b+"[0-9]{3})*[ ]*$"):/^[ ]*(([+-]{1}[0-9]+)||([0-9]*))[ ]*$/;k=!0;if(d)if(a.test(d)){try{f||(d=gx.num.formatNumber(d,g.dec,g.pic,g.len,g.sign,!0))}catch(l){k=!1}if(d!=gx.text.trim(c.value)&&(c.value=d,-1!=navigator.userAgent.indexOf("Firefox/2")))c.onchange()}else k=
!1;else k=!0;k?gx.csv.setFormatError(c,!1):(gx.csv.setFormatError(c),gx.fn.alert(c,gx.getMessage("GXM_badnum")))},replaceFullWidthNumerals:function(c){return"string"===typeof c?c.replace(f,function(b){return 8213==b.charCodeAt()||12540==b.charCodeAt()?String.fromCharCode(45):String.fromCharCode(b.charCodeAt()-65248)}):c}}}();
gx.color={rgb:function(f,c,j){return 65536*f+256*c+j},css:function(f){return"rgb"==f.substring(0,3)?eval(f):"#"==f.charAt(0)?parseInt(f.substring(1),16):0},html:function(f){f=this.toHex(f);gx.lang.emptyObject(f)&&(f="000000");var f=gx.text.padl(f,6,"0"),c={};c.Hexa=f;c.Html="#"+f;c.R=parseInt(f.substring(0,2),16);c.G=parseInt(f.substring(2,4),16);c.B=parseInt(f.substring(4,6),16);return c},fromRGB:function(f,c,j){var b={};"undefined"!=typeof f&&("undefined"!=typeof c&&"undefined"!=typeof j)&&(b.Hexa=
this.toHex(f)+this.toHex(c)+this.toHex(j),b.Html="#"+b.Hexa,b.R=f,b.G=c,b.B=j);return b},ARGBToHex:function(f){var c=this.toHex(f>>16&255),j=this.toHex(f>>8&255),f=this.toHex(f&255);return c+j+f},toHex:function(f){if(void 0===f)return"000000";if(0>f)return gx.color.ARGBToHex(f);if(0===f)return f+"0";for(var c=0,j="";0!==f;)c=f%16,f=(f-c)/16,j="0123456789ABCDEF".charAt(c)+j;0!==j.length%2&&(j="0"+j);return j}};
gx.popup=function(f){return{lvl:-1,currentPopup:null,currentPrompt:null,showParentPopups:!1,Dialog:function(){this.id="";this.autoresize=1;this.top=this.position=this.height=this.width=0;this.cssClass="";this.left=0;this.zindex=1E3;this.lvl=-1;this.InternalPopup=this.Opener=this.document=this.window=this.parentPopup=null;this.state="created";this.callbacks={};this.open=function(c){this.state="opening";this.id=c.id||"gxdialog";this.callbacks=c.callbacks;var f=void 0===c.resizable||c.resizable,b="PopupBorder gx-popup gx-popup-default";
this.cssClass&&(b=b.replace("gx-popup-default",""),b+=" "+this.cssClass);gx.popup.ext.window(this,!1,0,0,c.w,c.h,c.contentHtml,"white",c.title,"black","black","black","black",!0,!0,!0,f,!1,gx.ajax.getImageUrl(gx,"resizeImage"),"PopupHeader gx-popup-header","PopupHeaderButton gx-popup-close","PopupContent gx-popup-content",b,"PopupShadow",c.showParentPopups,!1,c.callbacks,c.parentElement);gx.popup.ext.win.gx.popup.setPopup(this);this.state="opened"};this.close=function(){this.state="closing";gx.popup.ext.close(this,
this.callbacks.beforeClose);this.cleanup();this.state="closed"};this.cleanup=function(){delete this.InternalPopup;delete this.window;delete this.document;delete this.Opener;delete this.parentPopup;delete this.InternalPopup;delete this.callbacks};this.isActive=function(){return!("closed"==this.state||"closing"==this.state)};this.getEl=function(){return gx.dom.byId(this.id+"_b")}},Popup:function(c,f){this.url="";this.frameWindow=this.frameDocument=null;this.ReturnParms=[];this.RawReturnedParms=[];this.ModifCtrl=
null;this.IsPrompt=f?f:!1;this.PromptIsGet=!1;this.OncloseCmds=[];this.CustomRenderGrid=null;this.setPopupData=function(){if(gx.lang.isArray(c))this.url=c[0],this.autoresize=c[1],this.width=c[2],this.height=c[3],this.position=c[4],this.top=c[5],this.left=c[6],this.OncloseCmds=c[7]||[],this.ReturnParms=c[8]||[],this.cssClass=c[9];else if(c&&c.Url&&(this.url=c.Url,"undefined"!=typeof c.Autoresize&&(this.autoresize=c.Autoresize),"undefined"!=typeof c.Width&&(this.width=c.Width),"undefined"!=typeof c.Height&&
(this.height=c.Height),"undefined"!=typeof c.Position&&(this.position=c.Position),"undefined"!=typeof c.Top&&(this.top=c.Top),"undefined"!=typeof c.Left&&(this.left=c.Left),"undefined"!=typeof c.Class&&(this.cssClass=c.Class),"undefined"!=typeof c.OncloseCmds&&(this.OncloseCmds=c.OncloseCmds),"undefined"!=typeof c.ReturnParms))this.ReturnParms=c.ReturnParms};this.open=function(){this.state="opening";var b=gx.popup.gxOpener();this.lvl=-1;this.lvl=b&&b.gx&&b.gx.popup.ext.win&&b.gx.popup.ext.win.gx?
b.gx.popup.ext.win.gx.popup.lvl:gx.popup.lvl;null!=document.gxPopup?(this.parentPopup=document.gxPopup,this.zindex=gx.popup.ext.zdx+document.gxPopup.zindex):this.zindex=gx.popup.ext.zdx;b=this.url;if(this.IsPrompt){gx.popup.currentPrompt=this;for(var a="?",d="",c="",g=this.ReturnParms.length,f=0;f<g;f++){if(gx.lang.emptyObject(this.ReturnParms[f].Ctrl))if("string"==typeof this.ReturnParms[f])d=gx.util.urlValue(this.ReturnParms[f])+",";else if("number"==typeof this.ReturnParms[f])d=gx.util.urlValue(this.ReturnParms[f].toString())+
",";else if(this.CustomRenderGrid)c=this.CustomRenderGrid.grid.getCellValue(this.ReturnParms[f].id),gx.lang.emptyObject(c)||(d=gx.util.urlValue(c+"")+",");else if(gx.lang.emptyObject(this.ReturnParms[f].id))continue;else c=gx.fn.getHidden(this.ReturnParms[f].id),gx.lang.emptyObject(c)||(d=gx.util.urlValue(c)),d+=",";else d=gx.util.urlValue(this.ReturnParms[f].Ctrl)+",";a="out"==this.ReturnParms[f].IOType?a+",":a+d;this.ReturnParms[f].isLastKey&&(gx.fn.isOutputParm(this.ReturnParms[f])&&!this.PromptIsGet)&&
(gx.fn.setControlValue("_EventName",this.Opener.CmpContext),this.PromptIsGet=!0)}null!=this.ModifCtrl&&(this.ModifCtrl.value=1);b+=a}a=document.activeElement;a==document.body&&gx.csv.lastControl&&(a=gx.csv.lastControl);a&&(a&&(this.callerActiveElement=a),a.blur&&a.blur());this.InternalPopup=gx.popup.Impl(this,b,this.autoresize,this.width,this.height,this.position,this.top,this.left)};this.getOutputParms=function(){var b=[];if(this.IsPrompt)for(var a=this.ReturnParms.length,d=0;d<a;d++){var c=this.ReturnParms[d];
gx.fn.isOutputParm(c)&&b.push(c)}else return this.ReturnParms;return b};this.close=function(b){var a;this.state="closing";b&&(this.RawReturnedParms=b);var d=window;gx.popup.ext.win?(d=gx.popup.ext.win,gx.ajax.windowClosed(gx.popup.ext.win.gx.popup.lvl),gx.popup.ext.win.gx.popup.lvl--):(gx.ajax.windowClosed(gx.popup.lvl),gx.popup.lvl--);var c=function(){this.beforeClose&&this.beforeClose(b);if(!this.isPdf&&this.frameWindow&&this.frameWindow.gx){if(this.IsPrompt)this.parentPopup==null?gx.popup.currentPrompt=
null:this.parentPopup.frameWindow.gx.popup.currentPrompt=null;this.frameWindow.gx.evt.onunload.call(this.frameWindow);this.frameWindow=this.frameDocument=this.frameDocument.gxPopup=null}gx.popup.ext.close(this);var d=this.getOutputParms();if(b!=null&&this.IsPrompt){var c=b.length,k=gx.popup.assignPromptField,g=gx.popup;if(!gx.lang.emptyObject(this.CustomRenderGrid)){k=this.CustomRenderGrid.grid.setCellValue;g=this.CustomRenderGrid.grid}for(a=0;a<c;a++)k.apply(g,[d[a],b[a]]);k=null;c=d.length;for(a=
0;a<c;a++){g=d[a].Ctrl;gx.fn.isAccepted(g)&&(k=g)}if(k&&gx.TabOnPrompSelect){d=gx.fn.getControlIndex(k);d!=-1&&(k=gx.fn.searchFocus(d+1,true))}gx.fn.setFocus(k);if(this.PromptIsGet){gx.csv.loadScreen();gx.fn.setFocus(k)}else try{gx.evt.ctrlOnchange(gx.fn.getControlValue(this.Opener.CmpContext+"Mode"),gx.fn.getControlValue(this.Opener.CmpContext+"IsConfirmed"),typeof window.GXPkIsDirty=="undefined"?false:window.GXPkIsDirty,null,"eng")}catch(f){gx.dbg.logEx(f,"gxpopup.js","close")}}else b&&d&&(d instanceof
Array&&d.length>0)&&gx.fn.setReturnParms(this.Opener,d,b,this.CustomRenderGrid);gx.ajax.dispatchCommands(this.OncloseCmds);this.cleanup();this.state="closed";this.afterClose&&this.afterClose(b);this.parentPopup?this.parentPopup.frameWindow.gx.fx.obs.notify("popup.afterclose",[this]):gx.fx.obs.notify("popup.afterclose",[this])},g=gx.util.browser;g.isFirefox()||g.isIE()?d.setTimeout(c.closure(this),10):c.call(this)};this.setFocusFirst=function(){this.frameWindow.gx&&this.frameWindow.gx.fn.setFocusOnload()};
this.cleanup=function(){try{this.OncloseCmds=[],this.ReturnParms=[],this.PromptIsGet=!1,this.parentPopup=this.Opener=this.document=this.window=this.InternalPopup=null,this.RawReturnedParms=[],this.CustomRenderGrid=this.InternalPopup=this.ModifCtrl=null}catch(b){gx.dbg.logEx(b,"gxpopup.js","popupObj.cleanup")}};this.setPopupData()},getWindowIframeElement:function(c){for(var f,c=c.document.getElementsByTagName("iframe"),b=0;b<c.length&&!f;b++){var a=c[b];a.contentWindow===window&&(f=a)}return f},gxOpener:function(){try{parent.gxTestAvailable=
1;var c=this.getWindowIframeElement(parent);return c&&void 0!==f(c).attr("data-gx-popup-ct")?parent:window}catch(j){}return null},setFocus:function(){var c=this.getPopup();c&&c.window.frames[0].focus()},ispopup:function(){return null!=this.getPopup()},popupurl:function(){return this.getPopup().url},waitCallback:function(c){var f=gx.popup.getPopup();f?"opened"==f.state?c():gx.lang.doCallTimeout(gx.popup.waitCallback,gx.popup,[c],50):c()},getPopup:function(){var c=this.gxOpener();try{if(!gx.lang.emptyObject(c)&&
!gx.lang.emptyObject(c.gx))return c.gx.popup.currentPopup}catch(f){}return null},setPopup:function(c){this.currentPopup=c},open:function(c){return this.openPopup(c)},openUrlToOpenPopupParms:function(c,f,b){var a=1,d=0,k=0,g=0,o=0,l=0;b&&(a=b[0],d=b[1],k=b[2],g=b[3],o=b[4],l=b[5]);return[c,a,d,k,g,o,l,[],f]},openUrl:function(){return this.openPopup(this.openUrlToOpenPopupParms.apply(this,arguments))},openPopup:function(c){var f=this.getPopup(),b,a;if(!f||f.Opener!==gx.O||!gx.lang.isArray(c)){var d=
new this.Popup(c,!1);d.Opener=gx.O;c=0;for(f=d.ReturnParms.length;c<f;c++)if((a=gx.fn.vStructForVar(d.ReturnParms[c]))&&a.grid)if(b=gx.O.getGridById(a.grid))break;b&&b.isUsercontrol&&(d.CustomRenderGrid=b);d.open();return d}f.OncloseCmds.push({popup:c})},openDialog:function(c){var f=new this.Dialog;f.Opener=gx.O;f.open(c);return f},openPrompt:function(c,f,b,a,d,k){if(null==gx.popup.currentPrompt){a&&gx.setGxO(a,d);var g=f[0].Ctrl,o=!1,l,m;if(g)l=gx.fn.rowGridId(g),g=gx.fn.controlRowId(g),!gx.lang.emptyObject(l)&&
!gx.lang.emptyObject(g)&&(gx.csv.lastGrid=l,gx.fn.setCurrentGridRow(l,g));else{for(var g=0,n=f.length;g<n;g++)if(f[g].IOType){l=f[g].id;break}if(l&&(l=gx.O.getValidStructFld(l),!gx.lang.emptyObject(l)&&(m=gx.O.getGridById(l.grid))))if(o=m.isUsercontrol)l=m.gridId+"",g=!gx.lang.emptyObject(m.grid.getSelectedRow)?gx.text.padl(m.grid.getSelectedRow()+"",4,"0"):void 0,!gx.lang.emptyObject(l)&&!gx.lang.emptyObject(g)&&(gx.csv.lastGrid=l,gx.fn.setCurrentGridRow(l,g))}if(k||this.outParmsAccepted(f)||o)c=
new this.Popup([c,1,0,0,0,0,0,[],f],!0),c.IsMod=b,c.Opener=gx.getObj(a,d),o&&(c.CustomRenderGrid=m),c.open()}},outParmsAccepted:function(c){for(var f=c.length,b=!1,a=0;a<f;a++){var d=c[a];gx.fn.isOutputParm(d)&&(b=!0);if(gx.fn.isOutputParm(d)&&d.Ctrl&&gx.fn.isAccepted(d.Ctrl))return!0}return!b},gxReturn:function(c){gx.fn.closeWindow(c)},parmId:function(c){c=gx.dom.id(c);0===c.indexOf("span_")&&(c=c.substring(5));return c},popuplvl:function(){var c=gx.popup.getPopup();return!c||!c.window?-1:c.window.gx.popup.lvl},
assignPromptField:function(c,f){if(!gx.lang.emptyObject(c)&&(gx.csv.pkDirty=c.isKey,c.Ctrl)){"checkbox"==c.Ctrl.type&&c.Ctrl.value!=f&&(c.Ctrl.checked=!c.Ctrl.checked);c.Ctrl.value!=f&&c.isKey&&(gx.popup.gxOpener().GXPkIsDirty=!0);var b=gx.csv.ctxControlId(this.parmId(c.Ctrl)),a=gx.O.getValidStructFld(b),d;if(!gx.lang.emptyObject(a)&&(d=gx.O.getValidStructId(a.fld)))d>gx.O.toValid&&(gx.O.toValid=d),gx.csv.validateAll();!gx.lang.emptyObject(a)&&!gx.lang.emptyObject(a.v2c)&&("date"==a.type||"dtime"==
a.type)?(a.v2v(f),gx.fn.v2c(a,f)):gx.fn.setControlValue(this.parmId(c.Ctrl),f,0);gx.fn.setControlGxValid(c.Ctrl,"0");gx.evt.execOnchange(c.Ctrl);var k=gx.dom.byId("span_"+c.Ctrl.name);null!=k&&(0===k.childNodes.length&&k.appendChild(gx.popup.gxOpener().document.createTextNode("")),k.childNodes[0].nodeValue=f);a&&a.gxgrid&&a.gxgrid.updateControlValue(a,!1);gx.util.balloon.clear(b);if(d&&(gx.O.toValid=d,gx.csv.validateAll(),!gx.lang.emptyObject(a.rgrid))){b=a.rgrid.length;for(d=0;d<b;d++)a.rgrid[d].filterVarChanged()}}},
autofit:function(){var c=this.getPopup();!gx.lang.emptyObject(c)&&"opened"==c.state&&this.ext.autofit(c,null,!1)},Impl:function(c,f,b,a,d,k,g,o){var l="PopupBorder gx-popup gx-popup-default";c.cssClass&&(l=l.replace("gx-popup-default",""),l+=" "+c.cssClass);return new this.ext.popUp(c,b,k,o,g,a,d,"gxp",f,"white","#00385c","16pt serif","GxPopup","#00385c","white","lightgrey","#00568c","black",!0,!1,!0,!0,!0,!0,!1,"min.gif","max.gif","close.gif",gx.ajax.getImageUrl(gx,"resizeImage"),"PopupHeader gx-popup-header",
"PopupHeaderButton gx-popup-close","PopupContent gx-popup-content",l,"PopupShadow",void 0)},setZIndex:function(c){c=gx.dom.getStyle(c,"zIndex");isNaN(c)&&(c=999);c++;this.zindex=c;this.ext.zdx=c},ext:{currIDb:null,xoff:0,yoff:0,currRS:null,rsxoff:0,rsyoff:0,zdx:1E3,sdiff:5,win:null,doc:null,compatMode:function(){return!gx.runtimeTemplates||gx.util.browser.isIE()&8>=gx.util.browser.ieVersion()},hide:function(c){var f=gx.dom.byId;gx.popup.ext.compatMode()&&(f(c+"_t").style.visibility="hidden",f(c+"_c").style.visibility=
"hidden",f(c+"_rs").style.visibility="hidden");f(c+"_b").style.visibility="hidden"},show:function(c){var j=gx.dom.byId,b=f("#"+c+"_b");gx.popup.ext.compatMode()&&(j(c+"_t").style.visibility="visible",j(c+"_c").style.visibility="visible",j(c+"_rs").style.visibility="visible");b.css("visibility","visible");gx.popup.ext.compatMode()||f(document.body).toggleClass("gx-popup-opened",!0)},close:function(c,j){f(document.body).toggleClass("gx-popup-opened",!1);if(!j||!("function"==typeof j&&!1===j())){gx.popup.ext.iFrame=
null;gx.popup.ext.win=null;gx.popup.ext.doc=null;gx.popup.ext.currIDb=null;gx.popup.ext.currRS=null;var b=c.id,a=document.getElementById(b+"_b"),b=document.getElementById(b+"_ifrm");gx.popup.ext.deinitmodal(c);gx.popup.setPopup(c.parentPopup);var d=c.callerActiveElement;d&&d.focus&&d.focus();c.parentPopup?c.parentPopup.frameWindow.gx.fx.obs.notify("popup.close",[c]):gx.fx.obs.notify("popup.close",[c]);b&&(b.src=gx.util.getIFrameEmptySrc());gx.util.browser.isIE()&&7==gx.util.browser.ieVersion()?a.parentNode.removeChild(a):
gx.dom.removeControlSafe(a)}},move:function(c,j,b){c=f("#"+c+"_b");c.toggleClass("gx-popup-centered",!1);void 0!==j?c.css({left:j}).toggleClass("gx-popup-horizontal-center",!1):c.toggleClass("gx-popup-horizontal-center",!0);void 0!==b&&c.css({top:b})},resize:function(c,j,b){var a=gx.dom.byId;if(a(c+"_rs").rsEnable){var d=a(c+"_rs"),k=a(c+"_b"),g=a(c+"_t"),a=a(c+"_c");gx.popup.ext.compatMode()?(d.style.left=Math.max(j,92)+"px",d.style.top=Math.max(b,72)+"px",k.style.width=Math.max(j+8,100)+"px",k.style.height=
Math.max(b+8,80)+"px",g.style.width=Math.max(j+3,92)+"px",a.style.width=Math.max(j-5,87)+"px",a.style.height=Math.max(b-28,44)+"px"):(c=document.getElementById(c+"_ifrm"),f(c).css({width:j,height:b}));this.resizePopupContent(j,b)}},movepopup:function(){null!=this.currIDb&&this.move(this.currIDb.cid,gx.evt.mouse.x+this.xoff,gx.evt.mouse.y+this.yoff);null!=this.currRS&&this.resize(this.currRS.cid,gx.evt.mouse.x+this.rsxoff,gx.evt.mouse.y+this.rsyoff);return!1},stopRS:function(){gx.popup.ext.currRS=
null},startRS:function(c,j){var b=gx.popup.ext,a=c.pageX,d=c.pageY,k=f(j);gx.popup.ext.compatMode()?(b.rsxoff=parseInt(j.style.left,0)-a,b.rsyoff=parseInt(j.style.top,0)-d):(b.rsxoff=k.position().left-a,b.rsyoff=k.position().top-d);b.currRS=j;return!1},changez:function(c){var c=null!=c?c:this,f=gx.popup.ext,b=gx.dom.byId;c.style.zIndex=++f.zdx;b(c.cid+"_rs").style.zIndex=++f.zdx},stopdrag:function(){gx.popup.ext.currIDb=null},grab_id:function(c,j){var b=gx.popup.ext,a=gx.dom.byId,a=a(j.cid+"_b");
gx.evt.mouse.update(c);var d=gx.evt.mouse.x,k=gx.evt.mouse.y;gx.popup.ext.compatMode()?(b.xoff=parseInt(a.style.left,0)-d,b.yoff=parseInt(a.style.top,0)-k):(b.xoff=f(a).position().left-d,b.yoff=f(a).position().top-k);b.currIDb=a;return!1},subBox:function(c,f,b,a,d,k){d=document.createElement("div");d.setAttribute("id",k);d.style.position="absolute";d.style.left=c+"px";d.style.top=f+"px";d.style.width=b+"px";d.style.height=a+"px";d.style.visibility="visible";d.style.padding="0px";d.style.width=b+"px";
return d},window:function(){gx.popup.ext.compatMode()?this.window_compat.apply(this,arguments):this.window_responsive.apply(this,arguments)},window_responsive:function(c,j,b,a,d,k,g,o,l,m,n,p,q,u,s,r,t,v,y,z,C,D,x,H,w,A,E,B){w=void 0!==w?w:gx.popup.showParentPopups;j=c.id;this.win||(this.win=window);this.doc||(this.doc=this.win.document);b=this.win.gx.dom.byId.closure(this.win.gx.dom);a=f("<div/>",{id:j+"_rs"})[0];t&&(a.className+="gx-popup-resize",a.innerHTML='<img src="'+y+'" width="7px" height="7px" alt="'+
gx.getMessage("GXM_resize")+'">',a.style.cursor="se-resize");a.rsEnable=t;y=f("<div/>",{id:j+"_b",style:!s?"visibility:hidden;":""})[0];f(y).addClass("gx-responsive-popup gx-popup-centered "+x+" gx-popup-initial");x=f("<div/>",{id:j+"_t"})[0];x.className=z;x.innerHTML='<span id="'+j+'_gxtitle" class="PopupTitle">'+l+'</span><span class="'+C+'"; id="'+j+'_cls"></span>';l=f("<div/>",{id:j+"_c"})[0];l.className=D;"string"==typeof g?l.innerHTML=g:l.appendChild(g);y.appendChild(x);y.appendChild(l);y.appendChild(a);
B=gx.dom.el(B)||this.doc.body;B.appendChild(y);s||this.hide(j);var F=b(j+"_b"),J=f(F),g=b(j+"_rs"),s=b(j+"_cls");F.cid=j;F.isExt=v?!0:!1;var M=b(j+"_t");M.cid=j;t&&(g.cid=j,gx.evt.attach(g,"mousedown",this.startRS.closure(this,[g],!0)),gx.evt.attach(g,"mouseup",this.stopRS.closure(this,[g],!0)));gx.evt.attach(s,"click",E.close||this.close.closure(this,[c,E.beforeClose]));r&&(gx.evt.attach(M,"mousedown",function(a){this.grab_id(a,M);J.css({top:J.position().top,left:J.position().left});J.toggleClass("gx-popup-centered",
false);gx.evt.attach(F,"mouseup",this.stopdrag.closure(this,[M],true),this,{single:true})},this),t&&gx.evt.attach(a.firstChild,"dragstart",function(a){gx.evt.cancel(a,true)},!0));(u||w)&&this.initmodal(c,w,A)},window_compat:function(c,f,b,a,d,k,g,o,l,m,n,p,q,u,s,r,t,v,y,z,C,D,x,H,w,A,E,B){w=void 0!==w?w:gx.popup.showParentPopups;p=c.id;this.win||(this.win=window);this.doc||(this.doc=this.win.document);q=this.win.gx.dom.byId.closure(this.win.gx.dom);d=Math.max(d,100);k=Math.max(k,80);f=new this.subBox(d-
8,k-8,7,7,"",p+"_rs");t&&(f.className+="gx-popup-resize",f.innerHTML='<img src="'+y+'" width="7px" height="7px" alt="'+gx.getMessage("GXM_resize")+'" style="box-sizing:content-box">',f.style.cursor="se-resize");f.rsEnable=t;b=new this.subBox(b,a,d,k,n,p+"_b");b.className=x;b.style.display="block";b.style.boxSizing="content-box";b.style.zIndex=++this.zdx;s||(b.style.visibility="hidden");m=new this.subBox(2,2,d-5,20,m,p+"_t");m.style.overflow="hidden";m.style.boxSizing="content-box";m.className=z;m.innerHTML=
'<span id="'+p+'_gxtitle" class="PopupTitle" style="box-sizing:border-box;white-space:nowrap;position:absolute;padding:2px;">'+l+'</span><span class="'+C+'" style="z-index:'+ ++this.zdx+';" id="'+p+'_cls"></span>';d=new this.subBox(2,24,d-13,k-36,o,p+"_c");d.className=D;"string"==typeof g?d.innerHTML=g:d.appendChild(g);d.style.overflow="hidden";d.style.boxSizing="content-box";s||(b.style.visibility="hidden",m.style.visibility="hidden",d.style.visibility="hidden");b.appendChild(m);b.appendChild(d);
b.appendChild(f);B=gx.dom.el(B)||this.doc.body;B.appendChild(b);s||this.hide(p);var F=q(p+"_b");F.cid=p;F.isExt=v?!0:!1;var J=q(p+"_t");J.cid=p;t&&(g=q(p+"_rs"),g.cid=p,g.style.boxSizing="content-box",gx.evt.attach(g,"mousedown",this.startRS.closure(this,[g],!0)),gx.evt.attach(g,"mouseup",this.stopRS.closure(this,[g],!0)));g=q(p+"_cls");gx.evt.attach(g,"click",E.close||this.close.closure(this,[c,E.beforeClose]));r&&(gx.evt.attach(J,"mousedown",function(a){this.grab_id(a,J);gx.evt.attach(F,"mouseup",
this.stopdrag.closure(this,[J],true),this,{single:true})},this),t&&gx.evt.attach(f.firstChild,"dragstart",function(a){gx.evt.cancel(a,true)},!0));(u||w)&&this.initmodal(c,w,A)},popUp:function(c,j,b,a,d,k,g,o,l,m,n,p,q,u,s,r,t,v,y,z,C,D,x,H,w,A,E,B,F,J,M,L,W,V,U){n=gx.popup.ext;null!=c.parentPopup?(p=c.parentPopup.window,n=p.gx.popup.ext,n.win=p,n.doc=p.document,gx.popup.ext=n):(n.win=window,n.doc=n.win.document);n.win.gx.popup.setPopup(c);c.window=n.win;c.document=n.doc;n.win.gx.popup.lvl++;o+=n.win.gx.popup.lvl;
c.id=o;!c.IsPrompt&&!gx.util.sameAppUrl(l)?(gx.popup.setPopup(null),c=new Date,c=c.getTime(),o="",1==b&&(o="left="+a+",top="+d),a="",j||(a=",width="+k+",height="+g),window.open(H?l:"","gx"+c,"status=no,menubar=no"+a+",resizable="+(D?"yes":"no")+",scrollbars=yes,"+o)):(l+=-1!=l.indexOf("?")?",":"?",l+=encodeURIComponent("gxPopupLevel="+n.win.gx.popup.lvl+";"),b="",b=gx.util.getFileName(l),b=b.charAt(0).toUpperCase()+b.slice(1),gx.popup.ext.compatMode()?(p=gx.HTML5?"auto":"100%",b='<iframe id="'+o+
'_ifrm" src="'+l+'" width="'+p+'" height="'+p+'" frameborder="0" style="overflow:auto;" title="'+b+'" data-gx-popup-ct=""></iframe>'):(p=!j&&0<k?k:gx.dom.fixes.getPopupMinWidth(),l=f("<iframe/>",{id:o+"_ifrm",src:l,title:b,style:"width:"+gx.dom.addUnits(p)}),l.attr("data-gx-popup-ct",""),b=l[0].outerHTML),l={close:c.close.closure(c)},n.window(c,j,a,d,k,g,b,m,q,u,r,t,v,y,z,C,D,H,F,J,M,L,W,V,U,!0,l),j=n.win.gx.dom.el(o+"_ifrm"),n.iFrame=j,gx.lang.doCallTimeout(n.showIfLoaded,n,[c,j,1],50))},initmodal:function(c,
f,b){c.showParentPopups=f;null==c.parentPopup?gx.ajax.disableForm(b,!0):f||this.hide(c.parentPopup.id)},deinitmodal:function(c){if(null==c.parentPopup)gx.ajax.enableForm();else{this.show(c.parentPopup.id);var f=c.parentPopup.frameWindow;f&&f.gx&&c.parentPopup.frameWindow.gx.ajax.enableForm()}},isPDFPopup:function(c,f){if(void 0===f.isPdf){var b=c.src;if(gx.util.getContentTypeFromExt(b)==gx.util.contentTypes.pdf)return f.isPdf=!0;var a=!0;try{if(a=c.contentDocument,a=c.contentWindow.document,a.contentType==
gx.util.contentTypes.pdf)return f.isPdf=!0}catch(d){a=!1}if(!1===a){var k,a={};a.url=b;a.method="HEAD";a.sync=!0;a.ajaxHeader=!1;a.handler=function(a,b,d){k=d.getResponseHeader("Content-Type")};a.obj=!0;gx.http.doCall(a);if(k&&0<=k.indexOf(gx.util.contentTypes.pdf))return f.isPdf=!0}return!1}return f.isPdf},showIfLoaded:function(c,f,b){try{if(c.isActive()&&(this.docReady(f,b)||10<b&&this.isPDFPopup(f,c))){var a=gx.dom.iFrameDoc(f),d=!1;try{d=a&&"about:blank"!=a.URL}catch(k){}var g=this.isPDFPopup(f,
c);if(d||g){c.state="opened";this.autofit(c,a,!0);return}}}catch(o){gx.dbg.logEx(o,"gxpopup.js","showIfLoaded")}b++;gx.lang.doCallTimeout(gx.popup.ext.showIfLoaded,gx.popup.ext,[c,f,b],50*b)},docReady:function(c,f){if("complete"==c.readyState)return!0;var b=gx.dom.iFrameDoc(c);if(b){var a;try{a="undefined"!=typeof b.gxReadyState?b.gxReadyState:b.readyState}catch(d){return!0}if("complete"==a)return!0}return!gx.util.browser.isIE()&&50<=f&&b&&b.body&&0!==b.body.childNodes.length?!0:!1},resizePopupContent:function(c,
j){if(gx.HTML5&&this.iFrame){var b=gx.dom.iFrameDoc(this.iFrame),a=0<j?j:"100%",d=0<c?c:"100%",k=f(this.iFrame),g=0<c&&0<j,o=gx.popup.ext.compatMode(),l;if(b){var m=b.documentElement;if(m)if(o)d=a="100%";else{try{l=k[0].contentWindow.gx&&k[0].contentWindow.gx.runtimeTemplates}catch(n){}g?(f(m).width(c),f(m).height(j),f(m).css("min-width",""),k.width(d),k.height(a)):(l||k.width(50),f(m).width(f(m).width()),k.width(f(m).width()));d=Math.max(Math.max(b.body.scrollWidth,b.documentElement.scrollWidth),
Math.max(b.body.offsetWidth,b.documentElement.offsetWidth));a=void 0}}k.width(d);void 0===a&&(a=Math.max(Math.max(b.body.scrollHeight,b.documentElement.scrollHeight),Math.max(b.body.offsetHeight,b.documentElement.offsetHeight)));k.height(a)}},autofit:function(){gx.popup.ext.compatMode()?this.autofit_comp.apply(this,arguments):this.autofit_responsive.apply(this,arguments)},autofit_responsive:function(c,j,b){if(!gx.lang.emptyObject(c)){var a=document,d=c.id,k=c.isPdf,g=f("#"+d+"_c");this.doc||(this.doc=
c.document);var a=this.doc,o=a.getElementById(d+"_ifrm"),l=f(a.getElementById(d+"_gxtitle"));!j&&gx.popup.ispopup()&&(j=gx.dom.iFrameDoc(o));l.text(j&&!k?j.title:"");c.frameDocument=j;c.frameWindow=o.contentWindow;j&&!k&&(j.gxPopup=c);gx.util.browser.isIPad()&&(g.css("overflow-y","auto"),g.css("-webkit-overflow-scrolling","touch"));if(window.self!==window.top){var m=this.getiFrameSizeInfo(a);m.accessParentFrame&&(l=m.scrollTop,o=m.maxHeight+Math.min(window.top.document.body.scrollTop-m.y,0)-50,g.css("max-height",
o).parent().css("margin-top","0px"),m=Math.max(window.top.document.body.scrollTop-m.y,0),j=Math.min(j.body.offsetHeight,o),this.move(d,void 0,m+l+(o-j)/2))}var n,p;k&&(g.addClass("gx-popup-pdf"),n=0.5*a.body.clientWidth,p=0.85*a.body.clientHeight);c.autoresize||(n=c.width,p=c.height);this.resizePopupContent(n,p);b&&(c.position&&(b=parseInt(c.top,0),c=parseInt(c.left,0),this.move(d,c,b)),this.show(d))}},autofit_comp:function(c,j,b){if(!gx.lang.emptyObject(c)){var a=document;c.zindex=null!=a.gxPopup?
this.zdx+a.gxPopup.zindex:this.zdx;var d=c.id,k=c.isPdf;this.doc||(this.doc=c.document);var a=this.doc,g=a.getElementById(d+"_ifrm");!j&&gx.popup.ispopup()&&(j=gx.dom.iFrameDoc(g));c.frameDocument=j;c.frameWindow=g.contentWindow;j&&!k&&(j.gxPopup=c);var g=a.getElementById(d+"_rs"),o=a.getElementById(d+"_t"),l=a.getElementById(d+"_b"),m=a.getElementById(d+"_c"),n=a.getElementById(d+"_gxtitle");n.innerHTML=j&&!k?j.title:"";n.style.width="auto";var p=gx.dom.getComputedStyle(m),q=gx.dom.getComputedStyle(o),
u=gx.dom.getComputedStyle(l),s=gx.dom.getComputedStyle(g),r=parseInt(p.height,0),t=parseInt(p.width,0),v=this.getiFrameSizeInfo(a),y=v.maxWidth,z=v.maxHeight,C=v.scrollTop,D=v.scrollLeft,x=v.x,v=v.y,H=gx.dom.dimensions(l);c.autoresize||(r=c.height-r+H.h,t=c.width-t+H.w);var w=c.width-t,A=c.height-r;if(c.autoresize)if(!k&&j)if(j=gx.HTML5?j.documentElement||j.body:j.body,a=b&&gx.util.browser.isEdge()?f.position.scrollbarWidth():0,j){gx.util.browser.isChrome()||gx.util.browser.isIE()?(j.gxwidth||(j.gxwidth=
j.scrollWidth),w=j.gxwidth+a):w=j.scrollWidth+a;var a=j.gxwidth+30-y,A=j.scrollHeight+30-z,E=0;if(j.scrollWidth>y)var B=w-j.clientWidth,E=E+(b&&0<B?B:0);w=Math.max(w,n.clientWidth+15)-t-(0<a?a:0)+E;A=j.scrollHeight-r-(0<A?A:0)}else gx.util.browser.isIE()&&(0>w&&(w=0),0>A&&(A=0));else k&&(w=a.body.clientWidth/2,A=a.body.clientHeight/2);n=parseInt(c.top,0);r=parseInt(c.left,0);if(!c.position&&(n=(z-A)/2-H.h/2+C-v,r=(y-w)/2-H.w/2+D-x,0>n&&(n=5,A-=5),0>r))r=5,w-=5;l.style.top=parseInt(n,0)+"px";l.style.left=
parseInt(r,0)+"px";c.autoresize?(c=function(a,b){var d=parseInt(a,0)+b;return d>0?d:a},o.style.width=c(q.width,w)+"px",l.style.height=c(u.height,A)+"px",l.style.width=c(u.width,w)+"px",m.style.height=c(p.height,A)+"px",m.style.width=c(p.width,w)+"px",c=gx.util.browser.isIE()?4:2,g.style.top=parseInt(u.height,0)-parseInt(s.height,0)-c+"px",g.style.left=parseInt(u.width,0)-parseInt(s.width,0)-c+"px"):(r=c.height,t=c.width,g.style.left=Math.max(t,92)+"px",g.style.top=Math.max(r,72)+"px",l.style.width=
Math.max(t+8,100)+"px",l.style.height=Math.max(r+8,80)+"px",o.style.width=Math.max(t+3,92)+"px",m.style.width=Math.max(t-5,87)+"px",m.style.height=Math.max(r-28,44)+"px");gx.util.browser.isIPad()||gx.util.browser.isIPhone()?(m.style["overflow-y"]="auto",m.style["-webkit-overflow-scrolling"]="touch"):m.style.overflow="hidden";k&&gx.util.browser.isIE()?this.resizePopupContent("100%","100%"):this.resizePopupContent(parseInt(m.offsetWidth,10),parseInt(m.offsetHeight,10));b&&this.show(d)}},getiFrameSizeInfo:function(c){var f=
gx.util.getWindowInfo().canAccessFrame,b={x:0,y:0,accessParentFrame:f};!f||window==window.top||gx.lang.emptyObject(window.top)?(b.maxWidth=window.innerWidth||c.documentElement.clientWidth||c.body.offsetWidth,b.maxHeight=window.innerHeight||c.documentElement.clientHeight||c.body.offsetHeight,b.scrollTop=gx.dom.documentScroll(c).scrollTop,b.scrollLeft=gx.dom.documentScroll(c).scrollLeft):(f=gx.dom.position(window.frameElement),window.top.document.body.clientHeight>c.body.clientHeight?b.maxHeight=c.body.clientHeight:
(b.maxHeight=window.top.document.body.clientHeight,b.y=f.y),b.scrollTop=c.body.scrollTop,b.scrollLeft=c.body.scrollLeft,b.maxWidth=Math.min(window.top.document.body.clientWidth,c.body.clientWidth),window.top.document.body.clientWidth>c.body.clientWidth)?b.maxWidth=c.body.clientWidth:(b.maxWidth=window.top.document.body.clientWidth,b.x=f.x);return b},_init:function(){setInterval(gx.popup.ext.movepopup.closure(gx.popup.ext),40)}},_init:function(){gx.lang.inherits(this.Popup,this.Dialog);this.ext._init();
var c=this.getPopup();if(c){try{c.frameDocument&&(c.frameDocument.gxPopup=c)}catch(f){c.frameDocument=c.frameWindow.document,gx.dbg.logEx(f,"gxpopup.js","_init")}c=c.window.gx.popup;gx.fx.obs.addObserver("gx.onload",c,function(){this.autofit()}.closure(c));gx.fx.obs.addObserver("grid.onafterrefresh",c,function(b,a,d){a<d&&this.autofit()}.closure(c));gx.fx.obs.addObserver("gx.onafterevent",c,function(){this.autofit()}.closure(c))}}}}(gx.$);
gx.ajax=function(f){var c=/\?(.*)/,j=function(b,a,d){gx.dbg.logMsg("Unable to execute external object "+b+" - "+a+"("+d+")")};return{reqHeader:"GxAjaxRequest",resourceProvider:"",dfTimer:null,resolveParmKey:function(b){var a=!1;b.av?a=b.av:b.ctrl&&b.prop?a=b.ctrl+b.prop:b.ctrl&&(a=b.ctrl);return a},serviceUrl:function(b,a){var d=gx.ajax.selfUrl();a&&(d=c.test(d)?d.replace(c,"?"+a+",$1"):d+("?"+a));return d},message:function(b,a,d,c,g,j){var l;return{disableForm:j,gxO:a,grid:d,row:c,methods:[b],addMethod:function(a){this.methods.push(a)},
gridsData:function(){var a=this.gxO.getGridById(this.grid,this.row),b=a,d={};if(a){var c=function(a,b,d,k){f.each(a.childGrids,function(a,f){var g=d.getGridById(f.gridId,k);g?(b[g.gridName]={id:g.gridId,lastRow:g.lastRowId},c(g,b,d,k+g.grid.GridRow)):gx.dbg.write("gx.ajax.gridsData - grid not found for row: "+k,!0)})};c(a,d,this.gxO,this.row)}else for(f.each(this.gxO.Grids,function(a,b){d[b.gridName]={id:b.gridId,lastRow:b.lastRowId}});b;)d[a.gridName]={id:a.gridId,lastRow:a.lastRowId},b=b.parentGrid;
return d},to_json:function(){var a={MPage:this.gxO.IsMasterPage,cmpCtx:this.gxO.CmpContext,parms:this.parms,hsh:this.hashedParms,objClass:this.gxO.ServerClass,pkgName:this.gxO.PackageName||"",events:this.methods};this.fullPost&&(a.fullPost=this.fullPost);this.addGXStateParms(a);this.grid&&(a.grid=this.grid);a.grids=this.gridsData();this.row&&(a.row=this.row.substring(this.row.length-4));return gx.json.serializeJson(a)},getParmsMetadata:function(a){for(var b=[],d={},c=0,k=this.methods.length;c<k;c++){var f=
this.methods[c];if(this.gxO.EvtParms[f])for(var f=this.gxO.EvtParms[f]["input"==a?0:1],g=0;g<f.length;g++)if(f[g].postForm||f[g].sPrefix||f[g].sSFPrefix||f[g].sCompEvt)b.push(f[g]);else{var j=gx.ajax.resolveParmKey(f[g]);j&&(void 0===d[j]?(d[j]=b.length,b.push(f[g])):void 0===b[d[j]].grid&&void 0!==f[g].grid&&(b[d[j]]=f[g]))}}return b},parmFromHidden:function(a,b){var d=gx.O,c;gx.setGxO(b);!gx.lang.emptyObject(a)&&(!gx.lang.emptyObject(b)&&a.v2v)&&(c=gx.fn.getHidden(this.gxO.IsMasterPage?a.fld+"_MPAGE":
gx.O.CmpContext+a.fld),a.v2v(c),c=b[a.gxvar]);gx.setGxO(d);return c},getInputParms:function(){for(var a=this.getParmsMetadata("input"),b=this.gxO.CmpContext,d=[],c=[],k,g,j,o,l,y=0,z=a.length;y<z;y++)if(k=a[y],k.postForm){o={};o.formNode=this.gxO.getContainer()||gx.dom.form();this.fullPost=gx.http.getPostData(o,gx.http.postDataFormat.JSON);for(var C in gx.http.viewState)this.fullPost[C]||(this.fullPost[C]=gx.http.viewState[C])}else if("Referrer"==k.prop)d.push(gx.referrer?gx.referrer:document.referrer);
else if(k.sPrefix)d.push(this.gxO.sPrefix());else if(k.sSFPrefix)d.push("");else if(k.sCompEvt)d.push(gx.fn.getHidden("_EventName").replace(this.gxO.sPrefix(),""));else{if(k.ctrl)k.prop?g=this.gxO.getCtrlPropertyValue(this.gxO.sPrefix()+k.ctrl,k.prop):(j=this.gxO.getValidStructFld(k.ctrl),null!=j&&gx.html.controls.isMultiSelection(j.ctrltype)&&(o=gx.fn.getControlGridRef(j.fld,j.grid),(o=gx.dom.comboBoxToObj(o,g))&&(g=o)));else if(void 0!==k.fld&&(o=this.gxO.IsMasterPage?k.fld.replace(/_MPAGE$/,""):
k.fld,(j=k.fld?this.gxO.getValidStructFld(o):null)&&("function"==typeof j.c2v&&"function"==typeof j.val&&void 0!==j.val())&&j.c2v()),g="function"==typeof this.gxO[k.av]?this.gxO[k.av](this.row):void 0===this.gxO[k.av]?"":this.gxO[k.av],void 0!==k.grid){var D=g,x=[];f.each(this.gxO.Grids,function(a,d){if(d.gridId===k.grid){var c=d.parentRow?d.parentRow.gxId:"";if(j){g={pRow:c,c:[],hc:[],hsh:[],v:D};for(var f=1;f<=d.lastRowId;f++){l=gx.grid.getPaddedRowId(f);var o=j.isuc?gx.fn.getControlValue(j.fld+
"_"+l+c):j.val(l+c);g.c.push(o);k.hsh&&g.hsh.push(gx.fn.getHash(b,j.fld,l+c));gx.lang.emptyObject(j.hc)||g.hc.push(gx.fn.getControlValue("GXHC"+j.fld+"_"+l+c))}}else gx.lang.isArray(g)&&(g={pRow:c,c:g,v:g[Number(gx.fn.currentGridRowImpl(k.grid))-1]});x.push(g)}});g=x}else k.hsh&&(j&&j.grid?(l=gx.fn.currentGridRowImpl(j.grid)||"",""===l&&(g=this.parmFromHidden(j,this.gxO))):l="",c.push({hsh:gx.fn.getHash(this.gxO.CmpContext,k.fld,l),row:l}));d.push(g)}return{input:d,hashed:c}},addGXStateParms:function(a){var b=
{};gx.notifications&&(gx.notifications.webSocket.initialized&&gx.fn.getHidden("GX_WEBSOCKET_ID"))&&(b.GX_WEBSOCKET_ID=gx.fn.getHidden("GX_WEBSOCKET_ID"));gx.lang.emptyObj(b)||(a.gxstate=b)},call:function(){l=f.Deferred();var a=gx.O;gx.setGxO(this.gxO);var b;this.grid&&this.row&&(b=gx.fn.currentGridRowImpl(this.grid),gx.fn.setCurrentGridRow(this.grid,this.row));g&&gx.fn.objectOnpost();var d=this.getInputParms();g?(this.parms=d.input,this.hashedParms=d.hashed,this.doFullAjaxCall(!1,this.disableForm)):
this.doClientSideCall();this.grid&&this.row&&gx.fn.setCurrentGridRow(this.grid,b);gx.setGxO(a);return l.promise()},doFullAjaxCall:function(a,b){var d=this.to_json();gx.evt.setProcessing(!0);!1!==b&&this.gxO.startFeedback();gx.fx.obs.notify("gx.onbeforeevent",[d,a]);var c=gx.ajax.getPostInfo(this.gxO,d,a);c.handler=this.postHandlerFullAjax.closure(this);c.handleAllStatusCodes=!0;c.url=gx.ajax.serviceUrl(gx.pO,gx.ajax.encryptParms(this.gxO,"gxfullajaxEvt"));c.reqData=d;c.always=this.callback;c.contentType=
"application/json";gx.http.doCall(c)},doClientSideCall:function(){this.callback();l.resolve()},postHandlerFullAjax:function(a,b,d){gx.evt.enter=!1;gx.csv.lastEvtResponse=null;var c;d.status==gx.http.STATUS_FORBIDDEN?alert(gx.getMessage("GXM_runtimeappsrv")+" ("+d.status+")"):gx.http.checkResponseStatus(d)||(200>d.status||299<d.status?gx.dom.writeError(d.responseText,gx.getMessage("GXM_runtimeappsrv"),d.status):gx.http.validJsonResponse(d,b)&&(c=gx.json.evalJSON(b),null==c?gx.dom.writeError(b.toString(),
gx.getMessage("GXM_runtimeappsrv"),d.status):(gx.csv.lastEvtResponse=c,gx.ajax.setJsonResponse({response:c,isPostBack:!0,gxObject:this.gxO,gridId:this.grid,row:this.row}))));gx.evt.setProcessing(!1);l.resolve();gx.fx.obs.notify("gx.onafterevent",[c])}}},timeoutActions:{ignore:0,warn:1},maxGETLength:function(b){return b.AjaxSecurity?600:1350},getImageUrl:function(b,a){var d=b[a];if(gx.lang.emptyObject(d))return"";"object"==typeof d&&(b[a]=gx.ajax.imageGuidToUrl(d.guid));return gx.util.resourceUrl(gx.basePath+
gx.staticDirectory+b[a],!0)},imageGuidToUrl:function(b){try{if(!gx.lang.emptyObject(this.resourceProvider)){var a=gx.ajax.objectUrl(this.resourceProvider)+"?image,"+encodeURIComponent(b)+",,"+encodeURIComponent(gx.theme);gx.http.callBackend_simple(a,!0,!0,"GET",null,!0);return gx.http.lastResponse}}catch(d){gx.dbg.logEx(d,"gxcallrpc.js","getImageUrl")}return b},sendHeader:function(b){try{if(!gx.lang.emptyObject(this.resourceProvider))return gx.http.callBackend_simple(location.href,!0,!0,"HEAD",null,
!0,!0,b),!0}catch(a){}return!1},encryptParms:function(b,a){return b.AjaxSecurity?gx.sec.encrypt(a):a},doPost:function(b,a,d,c){!1!==d&&gx.O.startFeedback();gx.fx.obs.notify("gx.onbeforeevent",[b,a]);gx.fn.objectOnpost();gx.http.saveState();gx.fn.forceEnableControls(!1);a=this.getPostInfo(gx.O,b,a);a.url=gx.ajax.serviceUrl(gx.O,b);a.onReady=function(){gx.evt.setProcessing(!1);!1!==d&&!gx.popup.getPopup()&&gx.O.endFeedback()};a.always=c;gx.http.doCall(a)},getPostInfo:function(b,a,d){a={};a.formNode=
gx.dom.form();a.method="POST";a.encoding="UTF-8";a.useCash=!1;a.gxO=b;!0===d&&(a.sync=!0);a.handler=gx.http.postHandler;this.multipartInfo(a);return a},multipartInfo:function(b){gx.dom.hasSelectedFile()&&(b.multipart=!0,b.mimetype="text/html",b.formNode.encoding="multipart/form-data")},dispatchRefreshCommand:function(b,a){var d=void 0!==b.refresh_form,c;"GET"==(b.refresh||b.refresh_form)?gx.http.reload(!0):(c="RFR",a.IsMasterPage&&(c+="_MPAGE"),d=d||!gx.pO.fullAjax?gx.pO:a,d.executeServerEvent(c,
!0,null,!0))},dispatchCommands:function(b,a,d){var c,f,a=a||gx.O,d=d||[];if(b&&0<b.length)for(var j=b.length,l=0;l<j;l++){var m=b[l];c=Object.keys?Object.keys(m)[0]:"";if(!gx.util.inArray(c,d)){m.set_focus&&gx.fn.usrSetFocus(m.set_focus,!0);m.print&&gx.printing.print(m.print);m.close&&(c=[],m.close instanceof Array&&(c=m.close),gx.fn.closeWindow(c,void 0,a));(void 0!==m.refresh||void 0!==m.refresh_form||""===m.cmp_refresh)&&gx.ajax.dispatchRefreshCommand(m,a);m.redirect&&(c=m.redirect,c.url=gx.ajax.removeGXParms(c.url),
gx.http.redirect(c.url,c.forceDisableFrm,!1,a));m.calltarget&&gx.nav.callFromServerRedirect(m.calltarget.url,m.calltarget.target);m.callback&&m.callback.apply(m.callback.scope,m.args||[]);m.cmp_refresh&&(c=gx.pO.getWebComponent(m.cmp_refresh),gx.evt.dispatcher.dispatch("REFRESH",c));if(m.popup){a.endFeedback();b.length>l+1&&(gx.lang.isArray(m.popup)?m.popup[7]=b.slice(l+1):m.popup.OncloseCmds=b.slice(l+1));gx.popup.open(m.popup);break}if(m.ucmethod&&(f=gx.getObj(m.ucmethod.CmpContext,m.ucmethod.IsMasterPage)))c=
gx.O,gx.setGxO(f),(f=gx.O.getUserControl(m.ucmethod.Control))&&"function"==typeof f[m.ucmethod.Method]&&f[m.ucmethod.Method].apply(f,m.ucmethod.Parms),gx.setGxO(c);m.exomethod&&gx.ajax.dispatchExoMethod(m.exomethod);m.exoprop&&gx.ajax.dispatchExoProperty(m.exoprop)}}},resolveExoObject:function(b,a){var d=b[a],c,f,j;if(!d){d=a.split(".");c=window;f=0;for(j=d.length;f<j;f++)if(c=c[d[f]],void 0===c)return;d=c}return d},dispatchExoMethod:function(b){var a=gx.getObj(b.CmpContext,b.IsMasterPage),d,c,f;
if(a){d=gx.O;gx.setGxO(a);try{(c=this.resolveExoObject(a,b.ObjectName))&&"GlobalEvents"===b.ObjectName?c.executeMethod(b.Method,b.Parms):b.IsEvent?gx.fx.obs.notify(b.Method,b.Parms):c?(f=c[b.Method])?f.apply(c,b.Parms):j("method","Method not found",b.Method):"GlobalEvents"===b.ObjectName?c.executeMethod(b.Method,b.Parms):j("method","Object not found",b.ObjectName)}catch(o){gx.dbg.logEx(o,"gxcallrpc.js","dispatchCommands")}finally{gx.setGxO(d)}}},dispatchExoProperty:function(b){var a=gx.getObj(b.CmpContext,
b.IsMasterPage),d,c;if(a){d=gx.O;gx.setGxO(a);try{(c=this.resolveExoObject(a,b.ObjectName))?c[b.PropertyName]=b.Value:j("property","Object not found",b.ObjectName)}catch(f){gx.dbg.logEx(f,"gxcallrpc.js","dispatchCommands")}finally{gx.setGxO(d)}}},ROW_ID_REGEXP:/[0-9]{4}$/,dispatchPreCommands:function(b,a,d,c,f,j,l,m){a=a||gx.O;if(b&&0<b.length){d=b.length;for(f=0;f<d;f++)if(j=b[f],j.load){if(c=a.getGridById(j.load.grid,m))j.load.props.values=j.load.values,c.loadNewRows(j.load.props)}else j.addlines&&
(c=a.getGridById(j.addlines.grid,m))&&c.getNewRows(j.addlines.count)}},willLeavePage:function(b){if(b)for(var a=b.length,d=0;d<a;d++)if(b[d].close)return!0;return!1},getRedirectCommand:function(b){if(b)for(var a=b.length,d=0;d<a;d++){var c=b[d];if(c.popup)break;if(c.redirect)return c}return null},saveJsonResponse:function(b){this.lastJsonResponse=b},clearJsonResponse:function(){delete this.lastJsonResponse},getJsonResponse:function(){this.lastJsonResponse&&delete this.lastJsonResponse.gxCommands;
return this.lastJsonResponse},setPostResponse:function(b,a,d){return this.setJsonResponse({response:b,isPostBack:!0,gxObject:a||gx.O,context:d})},setJsonResponse:function(b){var a=b.response,d=b.isPostBack,c=b.afterCmpLoaded,g=b.gxObject,j=b.gridId,l=b.row,m=b.context||{},n=gx.fn,p=gx.lang.doCall,q,u,b=this.willLeavePage(a.gxCommands);g&&(q=gx.O,gx.O=g);j&&l&&(u=gx.fn.currentGridRow(j),gx.fn.setCurrentGridRow(j,l));if(gx.evt.srvCommand)gx.evt.srvCommand=!1,p(gx.ajax.dispatchCommands,a.gxCommands,
g);else{var s=this.getRedirectCommand(a.gxCommands);s&&s.redirect.forceDisableFrm?p(gx.ajax.dispatchCommands,a.gxCommands,g,["refresh","cmp_refresh"]):b?p(gx.ajax.dispatchCommands,a.gxCommands,g):(p(gx.ajax.dispatchPreCommands,a.gxCommands,g,a.gxComponents,a.gxHiddens,a.gxValues,a.gxGrids,a.gxProps,l),p(n.clearCompontHiddens,a.gxComponents),p(n.setJsonHiddens,a.gxHiddens),p(n.setJsonComponents,a.gxComponents,a.DynComponentMap,a.gxHiddens,function(b){gx.http.loadStyles();gx.updateTheme();d&&gx.fn.installComponents(false);
typeof c=="function"&&c();if(q)gx.O=q;var s=p(n.setJsonValues,a.gxValues),v=p(n.setJsonProperties,a.gxProps,l),y=[],z=f.map(b,function(a){a=n.cmpContextFromCtrl(a);if(a=gx.pO.WebComponents[a])return gx.lang.objToArray(a.UserControls).concat(a.getUserControlGrids())});gx.util.balloon.clearAll();n.enableDisableDelete();d&&(y=p(n.loadJsonGrids,a.gxGrids,d));p(n.setErrorViewer,a.gxMessages);if(d){var C;gx.pO.supportAjaxEvents&&(C=gx.lang.arrayUnique(v.concat(s,z,y)));n.objectPostback(C,b);n.setFocusAfterLoad(true);
gx.dom.indexElements()}m.autoRefreshing||gx.popup.currentPopup||g.endFeedback();p(gx.ajax.dispatchCommands,a.gxCommands,g);u&&gx.fn.setCurrentGridRow(j,u)},d))}return b},swallowKeys:function(b){b.cancel=!0},disableForm:function(b,a){b=void 0===b||b;gx.pO.startFeedback(a);b&&gx.fx.obs.addObserver("gx.keypress",this,this.swallowKeys)},enableForm:function(b){b=b||gx.O;gx.pO&&gx.pO.endFeedback();b!=gx.pO&&b.endFeedback();gx.fx.obs.deleteObserver("gx.keypress",this,this.swallowKeys)},isFormEnabled:function(){return gx.pO?
!gx.pO.isFeedbackOn()&&!gx.O.isFeedbackOn():!0},saveFormForAutoComplete:function(){if(gx.ajax.formAutocomplete&&!(gx.grid.drawAtServer||gx.util.browser.isIE()&&(gx.util.browser.isCompatMode()||7>=document.documentMode||7>=gx.util.browser.ieVersion()))){var b=gx.dom.form(),a=document.createElement("iframe");a.id="gx_iframe_force_ajax_autocomplete";a.name="gx_iframe_force_ajax_autocomplete";a.style.cssText="display: none";a.src="/content/blank";document.body.appendChild(a);var d=document.createElement("input");
d.type="submit";d.style.cssText="display: none";b.appendChild(d);var c=b.target,g=b.action;b.target=a.name;b.action=a.src;var j=f(d);gx.evt.attach(d,"click",function(a){a.stopPropagation();return!0});j.click();setTimeout(function(){b.target=c;b.action=g;b.removeChild(d);document.body.removeChild(a)})}},suggest:function(b,a,d,c,f,j,l){b=new gx.fx.suggestProvider(b,a,d,c);return new gx.fx.autoSuggestControl(gx.fn.screen_CtrlRef(d),b,d,f,j,l)},hideCode:function(b,a,d){for(var c=this.objectUrl()+"?",
a="gxajaxHideCode_"+a,f=b.length,j=0;j<f;j++)a+=","+encodeURIComponent(eval(b[j]));c+=gx.ajax.encryptParms(gx.O,a);gx.http.callBackend_impl(function(a){gx.fn.setVarValues(d,a)},c,!0,gx.http.modes.retval);return this.lastStatus},callCrl:function(b,a,d){var c=d?gx.fn.setGridComboValues:gx.fn.setComboValues,f=d?a:gx.fn.screen_CtrlRef(a).name,d=this.objectUrl()+"?",b="gxajaxCallCrl_"+a+","+this.arrayToUrl(b),d=d+gx.ajax.encryptParms(gx.O,b);gx.http.callBackend_impl(function(a){c(f,a)},d,!0,gx.http.modes.retval)},
refreshGrid:function(b,a){var d=gx.O;gx.setGxO(b.parentObject);var c="GET",f=gx.ajax.gxObjectUrl(b.parentObject)+"?",j="gxajaxGridRefresh_"+b.gridName+","+a,l;gx.fx.obs.notify("grid.onbeforerefresh",[b]);b.autoRefreshing=!0;gx.csv.autoRefreshing=b;var m=b.grid.rows.length;b.setPagingVars(0,0);if(j.length>gx.ajax.maxGETLength(gx.O)){c="POST";l=["GXEvent="+gx.ajax.encryptParms(gx.O,"gxajaxGridRefresh_"+b.gridName)];for(var j=a.split(","),n=0,p=j.length;n<p;n++)l.push("GXParm"+n+"="+j[n])}else f+=gx.ajax.encryptParms(gx.O,
j);b.grid.mask();gx.http.doCall({method:c,url:f,reqData:l,handler:function(a,d,c){gx.http.postHandler(a,d,c,{autoRefreshing:!0});gx.fx.obs.notify("grid.onafterrefresh",[b,m,b.grid.rows.length])},always:function(){gx.csv.autoRefreshing=null;b.autoRefreshing=!1;b.grid.unmask();gx.setGxO(d)}})},newRows:function(b,a,d,c,f,j,l,m){var n=this.objectUrl()+"?",c="gxajaxNewRow_"+d+","+c+","+f+","+j,b=gx.fn.gridObj(b,l?d+"_"+l:d,a);gx.O.IsComponent&&(c+=","+gx.O.CmpContext);for(a=0;a<b.postingVariables.length;a++)c+=
","+encodeURIComponent(b.parentObject[b.postingVariables[a]]);n+=gx.ajax.encryptParms(gx.O,c);gx.http.callBackend_simple(n,!0);if(n=gx.http.lastResponse)n=gx.json.evalJSON(n),m.call(b,n),gx.dom.indexElements(),gx.fx.obs.notify("gx.onafterevent",[n])},loadCrl:function(b,a,d){if("1"==gx.fn.getControlValue("IsConfirmed"))this.lastStatus=0;else{var c=this.objectUrl()+"?",b="gxajaxExecAct_"+b+","+this.arrayToUrl(a),c=c+gx.ajax.encryptParms(gx.O,b);gx.http.callBackend_impl(function(a){gx.fn.setVarValues(d,
a)},c,!0,gx.http.modes.retval)}},udp:function(b,a,d){var c=this.objectUrl()+"?",b=b+","+this.arrayToUrl(a),c=c+gx.ajax.encryptParms(gx.O,b);gx.http.callBackend_impl(function(a){gx.fn.setVarValues(d,a)},c,!0,gx.http.modes.retval)},srvEvt:function(b,a,d,c){var f=this.objectUrl()+"?",b=b+","+a+","+this.arrayToUrl(d),f=f+gx.ajax.encryptParms(gx.O,b);gx.http.callBackend_impl(function(a){gx.fn.setVarValues(c,a)},f,!0,gx.http.modes.full)},validSrvEvt:function(b,a,d,c){var f=function(a){gx.csv.setValidValues(d,
c,a)},j=this.objectUrl(),l=b+","+a+","+this.arrayToUrl(d,!0);l.length>this.maxGETLength(gx.O)?this.validAsPost(j,f,b,a,d):(j+="?"+gx.ajax.encryptParms(gx.O,l),gx.http.callBackend_impl(f,j,!0,gx.http.modes.call,!gx.ajax.isFormEnabled()))},validAsPost:function(b,a,d,c,f){d="GXEvent="+gx.ajax.encryptParms(gx.O,d)+"&GXAction="+c;0<f.length&&(d+="&"+this.getParmsPostData(f));gx.http.callBackend_impl(a,b,!0,gx.http.modes.call,!1,"POST",d)},getParmsPostData:function(b){for(var a="",d=0;d<b.length;d++)0<
d&&(a+="&"),a+="GXParm"+d+"="+this.parmToUrl(b[d],!0);return a},getCallerUrl:function(b){if(gx.stackSupported()){var b=(b=gx.call_stack_storage.get(gx.stackId(b)))||[],a=1==b.length&&b[0]!=gx.ajax.selfUrl()?b[0]:"";return a=1<b.length?b[b.length-2]:a}return gx.fn.getHidden("sCallerURL")},pushReferer:function(b,a){a="undefined"==typeof a?location.href:gx.ajax.absoluteurl(a);if(gx.stackSupported()){"undefined"==typeof b&&(b=gx.popup.popuplvl());var d=gx.call_stack_storage.get(gx.stackId(b)),d=d||[];
a!=gx.util.lastArray(d)&&d.push(a);gx.call_stack_storage.set(gx.stackId(b),d)}else{var d=this.objectUrl()+"?",c="dyncall,PushReferer,"+encodeURIComponent(a),d=d+gx.ajax.encryptParms(gx.O,c);gx.http.callBackend_simple(d,!0,!0)}},windowClosed:function(b){if(gx.stackSupported())if(-1==b){var a=gx.stackId(gx.popup.popuplvl()),b=(b=gx.call_stack_storage.get(a))||[];b.pop();gx.call_stack_storage.set(a,b)}else gx.call_stack_storage.remove(gx.stackId(b));else a="",a=-1==b?",PopReferer":",DeleteReferer,"+
b.toString(),b=this.objectUrl()+"?",b+=gx.ajax.encryptParms(gx.O,"dyncall"+a),gx.http.callBackend_simple(b,!0,!0)},aggSel:function(b,a,d){var c=this.objectUrl()+"?",b="gxajaxAggSel"+a+"_"+b+","+this.arrayToUrl(d),c=c+gx.ajax.encryptParms(gx.O,b);return gx.http.callBackend_impl(null,c,!1,gx.http.modes.retval)[0]},aggSelDecimal:function(b,a,d,c,f){return gx.num.parseFloat(this.aggSel(b,a,f),d,c)},aggSelInteger:function(b,a,d){return parseInt(this.aggSel(b,a,d),10)},dynComponent:function(b,a,d,c){var g=
f.Deferred(),b=b.toLowerCase();gx.gen.isDotNet()&&(b+=".aspx");b=gx.ajax.objectUrl(b);d="GXEvent="+gx.ajax.encryptParms(gx.O,"dyncomponent")+"&GXAction="+encodeURIComponent(d)+"&GXParm0="+encodeURIComponent(c);for(c=0;c<a.length;c++)d+="&GXParm"+(c+1).toString()+"="+encodeURIComponent("function"==typeof a[c].getUrlVal?a[c].getUrlVal():a[c]);gx.http.doCall({method:"POST",url:b,reqData:d,handler:function(a,b){g.resolve(gx.json.evalJSON(b))},error:function(){g.reject()}});return g.promise()},selfUrl:function(){return location.href.replace(/#[\s\S]*$/,
"")},removeGXParms:function(b){return b.replace(/\?gxajaxEvt,?|\?gxportlet,?/,"?")},getSecurityToken:function(b){if(b&&b.ajaxSecurityToken){var a="GX_AUTH_"+(b.CmpContext?b.CmpContext:"")+b.ServerClass,a=a.toUpperCase(),b=gx.fn.getHidden(a)||b.InternalParms[a];return{id:a,value:b}}},arrayToUrl:function(b,a){for(var d="",c=b.length,f=0;f<c;f++)d+=this.parmToUrl(b[f],a)+",";return d},parmToUrl:function(b,a){var d=eval(b);if(d instanceof Array&&2==d.length&&"string"==typeof d[0]&&"string"==typeof d[1]){var c=
gx.fn.vStructForVar(d[0]);null!=c&&(d=gx.fn.getGridCtrlProperty(c.grid,c.fld,d[1]))}a&&(c=gx.fn.vStructForVar(gx.unprefixVar(b)),null!=c&&gx.html.controls.isMultiSelection(c.ctrltype)&&(c=gx.fn.getControlGridRef(c.fld,c.grid),(c=gx.dom.comboBoxToObj(c,d))&&(d=c)));"object"==typeof d&&(d=gx.json.serializeJson(d));if("undefined"==typeof d||null==d){c=!1;if(b&&0===b.indexOf("gx.O.")){var b=gx.unprefixVar(b),f=gx.fn.getHidden(gx.O.CmpContext+b);null!=f&&"undefined"!=typeof f&&(d=f,c=!0)}c||(d="")}return encodeURIComponent(d)},
gxObjectUrl:function(b){var a="";b&&b.serviceUrl?a=b.serviceUrl:b.fullAjax&&b&&(a=gx.fn.getControlValue(b.CmpContext+"_CMPPGM")||"");return this.objectUrl(a)},objectUrl:function(b){var a="";b?a=b:(a=gx.csv.cmpCtx?gx.fn.getControlValue(gx.csv.cmpCtx+"_CMPPGM"):gx.ajax.selfUrl(),null!=a&&(a=a.replace(/\?.*/,""),a=a.replace(/#[\s\S]*$/,"")),a=this.objnameFromUrl(a));return this.absoluteurl(this.objToRelativeUrl(a))},objToRelativeUrl:function(b){if(this.isabsoluteurl(b))return b;var a=location.pathname;
if(null!=b){for(var d=location.pathname.split("/"),a="",c=d.length,f=1;f<c-1;f++)a+="/"+d[f];a+="/"+b}return a},isabsoluteurl:function(b){return-1!==b.search("://")},isRelativeToHost:function(b){return"/"==b.substr(0,1)},absoluteurl:function(b){if(!this.isabsoluteurl(b)){if("/"!==b.charAt(0)){for(var a="",d=location.pathname.split("/"),c=1;c<d.length-1;c++)a+="/"+d[c];return location.protocol+"//"+location.host+a+"/"+b}return location.protocol+"//"+location.host+b}return b},objnameFromUrl:function(b){0<=
b.indexOf("?")&&(b=b.split("?")[0]);var a=b.split("/"),d=a.length;return 0===d?b:a[d-1]},_init:function(){this.resourceProvider=gx.fn.getHidden("GX_RES_PROVIDER");if(gx.stackSupported()){var b=gx.json.evalJSON(gx.fn.getHidden("GX_NAV"));if(b)for(var a=0;a<b.length;a++)gx.ajax.pushReferer(gx.popup.popuplvl(),b[a]);gx.ajax.pushReferer(gx.popup.popuplvl(),window.location.toString())}}}}(gx.$);
gx.util.balloon={balloons:{},timerOn:!1,lastLbl:null,impl:function(){function f(c){var f=$("#"+c.id+"_dp_trigger");if(0<f.length)return f.get(0);f=$("[data-gx-attached-ctrl~='"+c.id+"']");if(0<f.length)return f.parent().get(0)}this.init=function(c,f){this.id=c;this.balloonid=c+"_Balloon";this.hasMessage=!1;this.messageWar=this.messageErr="";this.isError=!1;this.active=!0;this.errorValue=null;this.sourceElements=f||[]};this.clear=function(){this.hasMessage=!1;this.messageWar=this.messageErr="";this.active=
!1;this.errorValue=null;gx.util.balloon.lastLbl=null};this.setMessage=function(c){this.hasMessage||(this.messageWar=c,this.hasMessage=!0)};this.setError=function(c){this.hasMessage||(this.messageErr=c,this.hasMessage=this.isError=!0)};this.create=function(c,j,b,a){var d;d=document.createElement("span");d.id=c;d.className=b;c=document.createElement("div");c.style.position="absolute";c.style.zIndex=1;c.style.display="none";a=document.createTextNode(a);d.appendChild(a);c.appendChild(d);"right"==gx.csv.messagePosition||
"bottom"==gx.csv.messagePosition?(a=$(j).closest(".gx-attribute"),!0===gx.csv.overlap&&gx.runtimeTemplates&&0<a.length?a.append(c):(a=f(j))?0<=a.id.indexOf("_dp_trigger")?$(a).closest(".dp_container").append(c):$(a).after(c):$(j).after(c)):!0===gx.csv.overlap?$(j).after(c):$(j).before(c);!0===gx.csv.overlap?(d.style.position="static",d.style.zIndex="1"):(c.style.position="relative",d.style.position="relative");return d};this.getControlValue=function(){for(var c=[gx.fn.getControlValue(this.id)],f=
0,b=this.sourceElements.length;f<b;f++)c.push(gx.fn.getControlValue(this.sourceElements[f]));return c.join(";")};this.groupControl=function(c){c=gx.dom.el(c);"INPUT"===c.nodeName&&"radio"===c.type&&(c=c.parentNode&&"SPAN"==c.parentNode.tagName?c.parentNode:gx.dom.findParentByTagName(c,"table"));return c};this.hideBalloon=function(c){c=c.parentNode;try{c&&(c.style.display="none")}catch(f){gx.dbg.logEx(f,"gxballoon.js","hideBalloon")}};this.showBalloon=function(c){try{var j=gx.csv.messagePosition,b=
gx.dom.el(this.id),a=c.parentNode,d,k,c=b,g=f(b);if(!0===gx.csv.overlap){switch(j){case "top":d="left bottom";k="left top";break;case "right":d="left center";k="right center";c=g||c;break;case "bottom":d="left top";k="left bottom";break;case "left":d="right center",k="left center"}a.style.display="inline";$(a).position({my:d,at:k,of:c,collision:"none"})}else a.style.display=("top"==j||"bottom"==j)&&!1===gx.csv.overlap?"block":"inline"}catch(o){gx.dbg.logEx(o,"gxballoon.js","showBalloon")}};this.show=
function(c){var f,b,a,d,k,g,o,l,m,n;if(!(void 0!==document.readyState&&"complete"!=document.readyState)){try{if(!1===this.hasMessage)return!0;b=gx.dom.el(this.id);null===b&&null!==gx.csv.validatingUC&&(b=gx.csv.validatingUC.getContainerControl());"hidden"==b.type?(f=gx.dom.el("span_"+this.id),null!==f&&(b=f)):"INPUT"===b.nodeName&&"radio"===b.type&&(l=gx.dom.byName(gx.dom.id(b)),b.parentNode&&"SPAN"==b.parentNode.tagName?b=b.parentNode:(o=l[0],b=gx.dom.findParentByTagName(b,"table")));if(l){f=[];
m=0;for(n=l.length;m<n;m++)f.push(l[m]);l=f}else{l=[b];m=0;for(n=this.sourceElements.length;m<n;m++)l.push(gx.dom.el(this.sourceElements[m]))}this.active=k=!0;0<this.messageErr.length?(a="Error",d=this.messageErr):0<this.messageWar.length&&(a="Warning",d=gx.html.encode(this.messageWar));""!==a&&(f=a+"Messages",gx.dom.addPrefixClass(b,a),(g=gx.dom.byId(this.balloonid))?(g.innerHTML=d,k=!1):g=this.create(this.balloonid,o?o:b,f,d));gx.util.balloon.lastLbl&&gx.csv.oneAtAtime&&this.hideBalloon(gx.util.balloon.lastLbl);
gx.util.balloon.lastLbl=g;!0===c?gx.csv.oneAtAtime||this.showBalloon(g):this.showBalloon(g);if(!1===gx.util.balloon.timerOn&&0<gx.csv.dismissSeconds)gx.util.balloon.timerOn=!0,this.timerId=setTimeout(function(){gx.util.balloon.clearAll()},1E3*gx.csv.dismissSeconds);else if(k){gx.csv.oneAtAtime&&(gx.evt.attach(b,"mouseout",gx.util.balloon.cvsMouseOutHandler.closure(this)),gx.evt.attach(b,"mouseover",gx.util.balloon.cvsMouseOverHandler.closure(this)));n=l.length;for(m=0;m<n;m++)"INPUT"===l[m].nodeName&&
"radio"===l[m].type?gx.evt.attach(l[m],"change",gx.util.balloon.cvsHide,this):gx.evt.attach(l[m],"blur",gx.util.balloon.cvsHide,this)}this.errorValue=this.getControlValue()}catch(p){gx.dbg.logEx(p,"gxballoon.js","show")}return!this.isError}}},cvsHide:function(){var f,c,j;try{f=this.groupControl(this.id),j=this.getControlValue(),j!=this.errorValue&&(this.errorValue=j,c=gx.dom.byId(this.balloonid),null!=c&&(gx.dom.removePrefixClass(f,"Error"),gx.dom.removePrefixClass(f,"Warning"),this.hideBalloon(c),
this.active=!1))}catch(b){}},cvsMouseOutHandler:function(){if(this.active){var f=gx.dom.byId(this.balloonid);null!=f&&(gx.util.balloon.lastLbl?gx.util.balloon.lastLbl.id!=f.id&&this.hideBalloon(f):this.hideBalloon(f))}},cvsMouseOverHandler:function(){if(this.active){var f=gx.dom.byId(this.balloonid);null!=f&&this.showBalloon(f)}},clearAll:function(){var f,c,j;this.timerOn=!1;for(j in this.balloons)f=this.balloons[j],c=gx.util.balloon.cvsHide.closure(f),f.clear(),c()},clear:function(f){var c,j,b;try{c=
gx.csv.ctxControlId(f),this.balloons[c]&&(j=this.balloons[c],b=gx.util.balloon.cvsHide.closure(j),j.clear(),b())}catch(a){gx.dbg.logEx(a,"gxballoon.js","clear")}},getNew:function(f,c,j){var j=j||[],b,a,d,k=j.length;"undefined"!=typeof c&&(f=f+"_"+c);try{b=gx.fn.screen_CtrlRef(f);a=gx.dom.id(b);f=gx.csv.ctxControlId(a);for(d=0;d<k;d++)b=gx.fn.screen_CtrlRef(j[d]),a=gx.dom.id(b),j[d]=gx.csv.ctxControlId(a)}catch(g){gx.dbg.logEx(g,"gxballoon.js","getNew")}this.balloons[f]?(c=this.balloons[f],c.sourceElements=
j||[],c.clear()):(c=new this.impl,this.balloons[f]=c,c.init(f,j));return c}};
gx.grid=function(f){return{drawAtServer:!1,deleteMethods:{images:0,menu:1,none:2},deletePositions:{left:0,right:1,bottomR:2,bottomL:3,topR:4,topL:5},deleteMethod:null,deleteImage:null,undeleteImage:null,deletePosition:null,deletePositionFree:null,deleteTooltip:null,deleteTitle:null,lastFocusCtrl:null,styles:{none:0,uniform:1,header:2,report:3,"0":"none",1:"uniform",2:"header",3:"report"},getImplClass:function(c,f){if(f){gx.lang.inherits(gx.ui.grid,gx.uc.UserControl,!0);gx.lang.inherits(gx.ui.grid,
c.isResponsive?gx.grid.responsiveGrid:gx.grid.impl,!0);gx.lang.inherits(f,gx.ui.grid,!0);var b=new f(gx.$);c&&(b.ParentObject=c.parentObject,b.ControlName=c.gridName,c.parentObject.setUserControl(b));return b}return c.isResponsive?new gx.grid.responsiveGrid("gx"):new gx.grid.impl("gx")},validGridColsValue:function(c){var f=c,f=void 0!=c?c:1;return 0!=f?f:9999},grid:function(c,j,b,a,d,k,g,o,l,m,n,p,q,u,s,r,t,v,y,z,C,D,x,H,w,A,E,B,F,J,M,L,W,V,U,K){var T=function(b){return function(d){d=this.parentObject.getGridById(a,
d||gx.fn.currentGridRow(a));return b.call(this,d||this)}.closure(this)}.closure(this);this.parentObject=c;this.parentObject["sub"+d+"_Rows"]=T(function(a){return a.grid.pageSize/a.grid.gxGridCols});this.parentObject[k.toUpperCase()+(l?"_MPAGE":"")+"_nFirstRecordOnPage"]=T(function(a){return a.grid.firstRecordOnPage});this.parentObject[k.toUpperCase()+(l?"_MPAGE":"")+"_nEOF"]=T(function(a){return a.grid.eof});this.gridLvl=j;this.gridLvlName=b;this.gridId=a;this.gridName=d;this.realGridName=k;this.containerName=
g||this.gridName+"Container";this.parentName=m||"";this.pagingParms=[];this.lvlKey=n||[];this.isFreestyle=p||!1;this.isResponsive=M||!1;this.allowHovering=(this.allowSelection=u||!1)&&s||!1;this.allowCollapsing=F||!1;this.collapsed=!1;this.sortable=!0;this.hoverColor=this.selectionColor=null;this.visible=!0;this.refreshTimer=null;this.pageSizeParm=H||!1;this.hasAddlines=w||!1;this.hasForEachLine=A||!1;this.width=void 0!=C?C:0;this.widthUnit=D||"";this.gridCols=void 0!=q?q:1;this.gridCols=0!=this.gridCols?
this.gridCols:9999;this.gridRows=void 0!=r?r:5;this.gridResponsiveCols=L||[1,1,1,1];this.usePaging=(this.usePaging=t||!1)&&!this.isFreestyle;this.eof=1;this.firstRecordOnPage=0;this.defaultDragable=v||!1;this.defaultSetsContext=y||!1;this.boundedCollType=z||"";this.boundedCollName=J||"";this.gxContainerCtrl=this.contextMenu=null;this.lastRefreshParms="";this.gxComponentContext=o;this.isMasterPageGrid=l;this.htmlTags="";this.onLineActivate=B;this.addingRows=!1;this.deleteMethod=gx.grid.deleteMethod;
this.DatePickersControls=[];this.GridUserControls=[];this.GridComponents=[];this.GridControls=[];this.IsValidState=[];this.implClass=E;this.grid=gx.grid.getImplClass(this,E);this.grid.ownerGrid=this;this.grid.parentGxObject=this.parentObject;this.grid.gxLvl=this.gridLvl;this.grid.gxId=this.gridId;this.grid.gxGridName=this.gridName;this.grid.gxGridObject=this.containerName;this.grid.gxParentName=this.parentName;this.grid.gxIsFreestyle=this.isFreestyle;this.grid.gxWidth=this.width;this.grid.gxWidthUnit=
this.widthUnit;this.grid.gxHeight=0;this.grid.gxAllowSelection=this.allowSelection;this.grid.gxAllowHovering=this.allowHovering;this.grid.gxAllowCollapsing=this.allowCollapsing;this.grid.gxCollapsed=this.collapsed;this.grid.gxSortable=this.sortable;this.grid.gxSelectionColor=this.selectionColor;this.grid.gxHoverColor=this.hoverColor;this.grid.gxVisible=this.visible;this.grid.gxGridCols=this.gridCols;this.grid.gxGridResponsiveCols=this.gridResponsiveCols;this.grid.gxCmpContext=this.gxComponentContext;
this.grid.gxHtmlTags=this.htmlTags;this.grid.gxIsMasterPageGrid=this.isMasterPageGrid;this.grid.gxDragable=this.defaultDragable;this.grid.gxHasAddlines=this.hasAddlines;this.grid.gxHasForEachLine=this.hasForEachLine;this.grid.gxOnLineActivate=this.onLineActivate;this.grid.gxNewRowText=void 0!=x?x:"New Row";this.grid.beforeRenderCallbacks=[];this.grid.isAbstract=U;this.currentBuffer=this.grid.gxBuffer;this.parentGrid=null;this.childGrids=[];this.hiddens=[];this.oldCmps={};this.ColumnPropertiesAfterRender=
[];this.isUsercontrol=gx.lang.instanceOf(this.grid,gx.uc.UserControl);this.gxCreateGridCode=function(a){var b,d=new gx.grid.grid(this.parentObject,this.gridLvl,this.gridLvlName,this.gridId,this.gridName+"_"+a,this.gridName,this.containerName+"_"+a,this.gxComponentContext,this.isMasterPageGrid,this.parentName,this.lvlKey,this.isFreestyle,this.gridCols,this.allowSelection,this.allowHovering,this.gridRows,this.usePaging,this.defaulDragable,this.defaultSetsContext,this.boundedCollType,this.width,this.widthUnit,
this.grid.gxNewRowText,this.pageSizeParm,this.hasAddlines,this.hasForEachLine,this.implClass,this.onLineActivate,this.allowCollapsing,this.boundedCollName,this.isResponsive,this.gridResponsiveCols,!1,0,this.grid.isAbstract,this.InverseLoading),c=this.grid,f=d.grid;f.ControlLvl=this.gridLvl;f.GridId=this.gridId;f.GridRow=a;f.GridBaseName=this.gridName;if(c.Properties)for(b in c.Properties)f.setProp(b,c.Properties[b],c[b],c.PropTypes[b]);if(c.DynProperties){a=0;for(len=c.DynProperties.length;a<len;a++)b=
c.DynProperties[a],f.setDynProp(b,c.Properties[b],c[b],c.PropTypes[b],!0)}return d}.closure(this);this.gxAddColumnsCode=[];this.grid.usePaging=this.usePaging;this.grid.eof=this.eof;this.grid.firstRecordOnPage=this.firstRecordOnPage;this.postingVariables=[];this.InfiniteScrolling=W;this.InverseLoading=K;this.ScrollType=V;this.isAbstract=U;this.addColumnDinCode=function(a,b){this.gxAddColumnsCode.push(function(){a.apply(this,b)})};this.addSingleLineEdit=function(a,b,d,c,f,k,g,j,x,o,l,m,n,s,w,r,p,H,
t,u,A,q,E){this.addColumnDinCode(this.addSingleLineEdit,arguments);var v=this.newColumn(c,g,m,j);v.visible=p;v.htmlName=d;v.gxId=b;v.gxAttId=a;v.gxAttName=k;v.gxTooltip=f;v.gxWidthUnit=x;v.gxColSize=l;v.gxSetsContext=t;v.gxCssClass=A;v.gxColumnClass=E;v.gxControl=new gx.html.controls.singleLineEdit;v.gxControl.column=v;v.gxControl.isPassword=u;v.gxControl.visible=v.visible;v.gxControl.dataType=v.type;v.gxControl.clickEvent=n;this.grid.addColumn(v)};this.addPostingVar=function(a){this.postingVariables.push(a)};
this.addMultipleLineEdit=function(a,b,d,c,f,k,g,j,x,o,l,m,n,s,w,r,p,H){this.addColumnDinCode(this.addMultipleLineEdit,arguments);var t=this.newColumn(c,k,n,g);t.visible=w;t.htmlName=d;t.gxId=b;t.gxAttId=a;t.gxAttName=f;t.gxWidthUnit=j;t.gxSetsContext=r;t.gxColumnClass=H;t.gxControl=new gx.html.controls.multipleLineEdit;t.gxControl.column=t;t.gxControl.dataType=t.type;t.gxControl.visible=t.visible;t.gxControl.heightUnit=o;t.gxControl.clickEvent=s;this.grid.addColumn(t)};this.addBlob=function(a,b,d,
c,f,k,g,j,x,o,l,m,n,s){this.addColumnDinCode(this.addBlob,arguments);var w=this.newColumn(c,k,"left",x);w.visible=m;w.htmlName=d;w.gxId=b;w.gxAttId=a;w.gxAttName=f;w.gxWidthUnit=l;w.gxSetsContext=n;w.gxColumnClass=s;w.gxControl=new gx.html.controls.blob;w.gxControl.column=w;w.gxControl.dataType=w.type;w.gxControl.visible=w.visible;w.gxControl.height=j;w.gxControl.width=x;this.grid.addColumn(w)};this.addRadioButton=function(a,b,d,c,f,k,g,j,x,o,l){this.addColumnDinCode(this.addRadioButton,arguments);
var m=this.newColumn(c,k,"left","");m.visible=x;m.htmlName=d;m.gxId=b;m.gxAttId=a;m.gxAttName=f;m.gxSetsContext=o;m.gxColumnClass=l;m.gxControl=new gx.html.controls.radio;m.gxControl.column=m;m.gxControl.dataType=m.type;m.gxControl.vertical=j;m.gxControl.visible=m.visible;m.gxControl.clickEvent=g;this.grid.addColumn(m)};this.addComboBox=function(a,b,d,c,f,k,g,j,x,o,l,m,n){this.addColumnDinCode(this.addComboBox,arguments);var w=this.newColumn(c,k,"left",l);w.visible=x;w.htmlName=d;w.gxId=b;w.gxAttId=
a;w.gxAttName=f;w.gxSetsContext=o;w.gxWidthUnit=m;w.gxColumnClass=n;w.gxControl=new gx.html.controls.comboBox;w.gxControl.column=w;w.gxControl.dataType=w.type;w.gxControl.rtEnabled=1==j;w.gxControl.visible=w.visible;w.gxControl.clickEvent=g;this.grid.addColumn(w)};this.addListBox=function(a,b,d,c,f,k,g,j,x,o,l,m,n,w){this.addColumnDinCode(this.addListBox,arguments);var s=this.newColumn(c,k,"left",l);s.visible=x;s.htmlName=d;s.gxId=b;s.gxAttId=a;s.gxAttName=f;s.gxSetsContext=o;s.gxWidthUnit=m;s.gxColumnClass=
n;s.gxControl=new gx.html.controls.listBox;s.gxControl.column=s;s.gxControl.dataType=s.type;s.gxControl.rows=void 0!==w?w:4;s.gxControl.rtEnabled=1==j;s.gxControl.visible=s.visible;s.gxControl.clickEvent=g;this.grid.addColumn(s)};this.addCheckBox=function(a,b,d,c,f,k,g,j,x,o,l,m,n,w,s){this.addColumnDinCode(this.addCheckBox,arguments);var r=this.newColumn(c,g,"left",n);r.visible=l;r.htmlName=d;r.gxId=b;r.gxAttId=a;r.gxAttName=k;r.gxChecked=j;r.gxUnChecked=x;r.gxSetsContext=m;r.gxWidthUnit=w;r.gxColumnClass=
s;r.gxControl=new gx.html.controls.checkBox;r.gxControl.column=r;r.gxControl.checkedValue=j;r.gxControl.uncheckedValue=x;r.gxControl.dataType=r.type;r.gxControl.visible=r.visible;r.gxControl.clickEvent=o;this.grid.addColumn(r)};this.addBitmap=function(a,b,d,c,f,k,g,j,x,o,l,m){this.addColumnDinCode(this.addBitmap,arguments);var n=this.newColumn(o,"","left",c);n.htmlName=b;n.gxId=d;n.gxAttId=a;n.gxWidthUnit=f;n.gxControl=new gx.html.controls.image;n.gxControl.column=n;n.gxControl.dataType=n.type;n.gxControl.width=
c;n.gxControl.widthUnit=f;n.gxControl.height=k;n.gxControl.heightUnit=g;n.gxControl.clickEvent=j;n.gxCssClass=l;n.gxColumnClass=m;this.grid.addColumn(n)};this.addVideo=function(a,b,d,c,f,k,g,j,x,o,l,m){this.addColumnDinCode(this.addVideo,arguments);var n=this.newColumn(o,"","left",c);n.htmlName=b;n.gxId=d;n.gxAttId=a;n.gxWidthUnit=f;n.gxControl=new gx.html.controls.video;n.gxControl.column=n;n.gxControl.dataType=n.type;n.gxControl.width=c;n.gxControl.widthUnit=f;n.gxControl.height=k;n.gxControl.heightUnit=
g;n.gxControl.clickEvent=j;n.gxCssClass=l;n.gxColumnClass=m;this.grid.addColumn(n)};this.addAudio=function(a,b,d,c,f,k,g,j,x,o,l,m){this.addColumnDinCode(this.addAudio,arguments);var n=this.newColumn(o,"","left",c);n.htmlName=b;n.gxId=d;n.gxAttId=a;n.gxWidthUnit=f;n.gxControl=new gx.html.controls.audio;n.gxControl.column=n;n.gxControl.dataType=n.type;n.gxControl.width=c;n.gxControl.widthUnit=f;n.gxControl.height=k;n.gxControl.heightUnit=g;n.gxControl.clickEvent=j;n.gxCssClass=l;n.gxColumnClass=m;
this.grid.addColumn(n)};this.addTextBlock=function(a,b,d){this.addColumnDinCode(this.addTextBlock,arguments);var c=this.newColumn("","","left");c.gxId=d;c.htmlName=a;c.gxControl=new gx.html.controls.textBlock;c.gxControl.column=c;c.gxControl.dataType=c.type;c.gxControl.clickEvent=b;this.grid.addColumn(c)};this.addLabel=function(a){this.addColumnDinCode(this.addLabel,arguments);var b=this.newColumn("","","left");b.htmlName=a;b.gxControl=new gx.html.controls.label;b.gxControl.column=b;this.grid.addColumn(b)};
this.addButton=function(a,b,d,c,f){this.addColumnDinCode(this.addButton,arguments);var k=this.newColumn("","","left");k.htmlName=b;k.gxId=a;k.gxControl=new gx.html.controls.button;k.gxControl.column=k;k.gxControl.dataType=k.type;this.grid.addColumn(k)};this.addGrid=function(a){this.addColumnDinCode(this.addGrid,arguments);this.childGrids.push(a);var b=this.newColumn("","","left");b.htmlName=a.getContainerControlId();b.gxControl=new gx.html.controls.grid;b.gxControl.column=b;this.grid.addColumn(b)};
this.addUsercontrol=function(a,b,d,c,f,k,g,j,x,o){this.addColumnDinCode(this.addUsercontrol,arguments);var l="",m=this.parentObject;m.GridUCsProps&&m.GridUCsProps[f]&&(l=m.GridUCsProps[f].title||"");l=this.newColumn(l,"","left");l.gxUCId=a;l.gxUCLastId=b;l.gxUCClassName=d;l.gxUCContainerName=c;l.gxUCControlName=f;l.gxUCFieldName=k;l.gxShowFunc=g;l.gxC2VFuncs=j;l.gxV2CFuncs=x;l.visible=o;l.gxControl=new gx.html.controls.userControl;l.gxControl.column=l;l.gxControl.dataType=l.type;this.grid.addColumn(l)};
this.startContainer=function(){this.addColumnDinCode(this.startContainer,arguments);var a=this.newColumn("","","left");a.gxControl=new gx.html.controls.userControlContainer;a.gxControl.column=a;a.gxControl.dataType=a.type;this.grid.addColumn(a)};this.endContainer=function(){this.addColumnDinCode(this.endContainer,arguments);this.currentBuffer.append("</div>")};this.addWebComponent=function(a){this.addColumnDinCode(this.addWebComponent,arguments);var b=this.newColumn("","","left");b.gxControl=new gx.html.controls.webComponent;
b.gxControl.column=b;b.gxControl.dataType=b.type;this.grid.addColumn(b)};this.addEmbeddedPage=function(a){this.addColumnDinCode(this.addEmbeddedPage,arguments);var b=this.newColumn("","","left");b.gxControl=new gx.html.controls.embeddedPage;b.gxControl.column=b;b.gxControl.dataType=b.type;this.grid.addColumn(b)};this.addHtmlCode=function(a){this.addColumnDinCode(this.addHtmlCode,arguments);this.currentBuffer.append(a)};this.startTable=function(a,b,d){this.addColumnDinCode(this.startTable,arguments);
var c=this.newColumn("","","left");c.gxId=b;c.htmlName=a+"_"+b;c.gxControl=new gx.html.controls.table;c.gxControl.column=c;c.gxControl.width=d;c.gxControl.dataType=c.type;this.grid.addColumn(c)};this.endTable=function(){this.addColumnDinCode(this.endTable,arguments);this.currentBuffer.append("</table>")};this.startRow=function(a,b,d,c,f,k){this.addColumnDinCode(this.startRow,arguments);var g=this.newColumn("","","left");g.gxControl=new gx.html.controls.row;g.gxControl.column=g;g.gxControl.title=a;
g.gxControl.align=b;g.gxControl.verticalAlign=d;g.gxControl.backColor=c;g.gxControl.borderColor=f;g.gxControl.cssClass=k;g.gxControl.ownCssClass=k;g.gxControl.dataType=g.type;this.grid.addColumn(g)};this.endRow=function(){this.addColumnDinCode(this.endRow,arguments);this.currentBuffer.append("</tr>")};this.startCell=function(a,b,d,c,f,k,g,j,x,o){this.addColumnDinCode(this.startCell,arguments);var l=this.newColumn("","","left");l.gxControl=new gx.html.controls.cell;l.gxControl.column=l;l.gxControl.title=
a;l.gxControl.align=b;l.gxControl.verticalAlign=d;l.gxControl.backColor=c;l.gxControl.borderColor=f;l.gxControl.height=k;l.gxControl.width=g;l.gxControl.colSpan=j;l.gxControl.rowSpan=x;l.gxControl.cssClass=o;l.gxControl.dataType=l.type;this.grid.addColumn(l)};this.endCell=function(){this.addColumnDinCode(this.endCell,arguments);this.isResponsive?this.currentBuffer.append("</div>"):this.currentBuffer.append("</td>")};this.startGroup=function(a,b,d,c,f){this.addColumnDinCode(this.startGroup,arguments);
var k=this.newColumn("","","left");k.htmlName=a;k.gxControl=new gx.html.controls.group;k.gxControl.column=k;k.gxControl.id=a;k.gxControl.caption=b;k.gxControl.height=d;k.gxControl.width=c;k.gxControl.cssClass=f;k.gxControl.dataType=k.type;this.grid.addColumn(k)};this.endGroup=function(){this.addColumnDinCode(this.endGroup,arguments);this.currentBuffer.append("</fieldset>")};this.startDiv=function(a,b,d,c){this.addColumnDinCode(this.startDiv,arguments);var f=this.newColumn("","","left");f.gxId=a;f.htmlName=
b+"_"+a;f.gxControl=new gx.html.controls.div;f.gxControl.column=f;f.gxControl.width=c;f.gxControl.height=d;f.gxControl.dataType=f.type;this.grid.addColumn(f)};this.endDiv=function(){this.addColumnDinCode(this.endDiv,arguments);var a=this.newColumn("","","left");a.gxControl=new gx.html.controls.divEnd;a.gxControl.column=a;this.grid.addColumn(a)};this.newColumn=function(a,b,d,c){b=this.getColumnType(b);a=new gx.grid.column(a,b,c,d);this.currentBuffer=a.buffer;a.htmlName="";a.gxId="";a.gxAttId="";a.gxAttName=
"";return a};this.getColumnType=function(a){switch(a){case "decimal":case "int":a=gx.types.numeric;break;case "date":a=gx.types.date;break;case "dtime":a=gx.types.dateTime;break;case "boolean":a=gx.types.bool;break;case "GeneXus\\Geolocation":a=gx.types.geolocation;break;default:a=gx.types.character}return a};this.addOldComponent=function(a,b){"undefined"==typeof this.oldCmps[a]&&(this.oldCmps[a]=[]);this.oldCmps[a].push(b)};this.updateOldComponents=function(){for(var a=this.grid.rows.length,b=0;b<
a;b++)delete this.oldCmps[this.grid.rows[b].gxId];for(var d in this.oldCmps){for(a=this.oldCmps[d];0<a.length;)b=a.shift(),gx.fn.deleteHidden(b);delete this.oldCmps[d]}};this.addHidden=function(a){this.hiddens.push(a)};this.addHiddenControl=function(a,b,d){gx.fn.setHidden(a,b);!0!=d&&this.addHidden(a)};this.clearHiddens=function(){for(;0<this.hiddens.length;){var a=this.hiddens.shift();gx.fn.deleteHidden(a)}};var I={};this.setHtmlTags=function(a){gx.lang.apply(I,a);var b;b=' style="'+("0"==I.Visible?
"display:none;":"");var a=""+(' class="'+I.Class+'"'),d=gx.lang.emptyObject;b+=!d(I.Background)?"background:"+I.Background+";":"";b+=!d(I.Backcolor)&&"0"!=I.Backcolor?"background-color:"+gx.color.html(I.Backcolor).Html+";":"";b+=!d(I.Bordercolor)&&"0"!=I.Bordercolor?"border-color:"+gx.color.html(I.Bordercolor).Html+";":"";a+=!d(I.Align)?' align="'+I.Align+'"':"";a+=!d(I.Tooltiptext)?' title="'+I.Tooltiptext+'"':"";b+=!d(I.Borderwidth)&&"0"!=I.Borderwidth?" border-width:"+I.Borderwidth+";":"";a+=!d(I.Cellpadding)?
' data-cellpadding="'+I.Cellpadding+'"':"";a+=!d(I.Cellspacing)?' data-cellspacing="'+I.Cellspacing+'"':"";a+=!d(I.Height)&&"0"!=I.Height?' height="'+I.Height+'"':"";a+=!d(I.Width)&&"0"!=I.Width?' width="'+I.Width+'"':"";this.htmlTags=gx.text.trim(a+(b+'"'));this.grid.gxHtmlTags=this.htmlTags;d(I.Width)||(this.grid.gxWidth=I.Width);d(I.Height)||(this.grid.gxHeight=I.Height)};var G={};this.setGridStyles=function(a){gx.lang.apply(G,a);this.visible=void 0!=G.Visible?gx.lang.gxBoolean(G.Visible):!0;this.setSortable(void 0!=
G.Sortable?gx.lang.gxBoolean(G.Sortable):!0);this.background=void 0!=G.Background?G.Background:"";this.cssClass=void 0!=G.Class?G.Class:"";this.titleBackstyle=void 0!=G.Backcolorstyle?G.Backcolorstyle:gx.grid.styles.none;this.titleFont=void 0!=G.Titlefont?G.Titlefont:"";this.linesFont=void 0!=G.Linesfont?G.Linesfont:"";this.borderWidth=void 0!=G.Borderwidth?G.Borderwidth:"";this.toolTipText=void 0!=G.Tooltiptext?G.Tooltiptext:"";try{this.backcolor=void 0!=G.Backcolor?gx.color.html(G.Backcolor).Html:
"",this.titleBackcolor=void 0!=G.Titlebackcolor?gx.color.html(G.Titlebackcolor).Html:"",this.titleForecolor=void 0!=G.Titleforecolor?gx.color.html(G.Titleforecolor).Html:"",this.linesBackcolorOdd=void 0!=G.Backcolorodd?gx.color.html(G.Backcolorodd).Html:"",this.linesBackcolorEven=void 0!=G.Backcoloreven?gx.color.html(G.Backcoloreven).Html:"",this.bordercolor=void 0!=G.Bordercolor?gx.color.html(G.Bordercolor).Html:""}catch(b){gx.dbg.logEx(b,"gxgrid.js","setGridStyles")}this.borderWidth=void 0!=G.Borderwidth?
G.Borderwidth:"";this.toolTipText=void 0!=G.Tooltiptext?G.Tooltiptext:"";this.grid.gxCssClass="";this.grid.gxTitleClass="";this.grid.gxFooterClass="";this.grid.gxOddLlinesClass="";this.grid.gxEvenLinesClass="";this.grid.gxBackColor=this.backcolor;this.grid.gxTitleBackColor=this.titleBackcolor;this.grid.gxTitleForeColor=this.titleForecolor;this.grid.gxTitleBackstyle=this.titleBackstyle;this.grid.gxTitleFont=this.titleFont;this.grid.gxLinesFont=this.linesFont;this.grid.gxBackground=this.background;
this.grid.gxLinesBackcolorOdd=this.linesBackcolorOdd;this.grid.gxLinesBackcolorEven=this.linesBackcolorEven;this.grid.gxBorderWidth=this.borderWidth;this.grid.gxBordercolor=this.bordercolor;this.grid.gxToolTipText=this.toolTipText;this.grid.gxVisible=this.visible;""!=this.cssClass&&(this.grid.gxCssClass=this.cssClass,this.grid.gxTitleClass=this.cssClass+"Title",this.grid.gxFooterClass=this.cssClass+"Footer",this.titleBackstyle==gx.grid.styles.none?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=
this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.uniform?(this.grid.gxOddLlinesClass=this.cssClass+"Uniform",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.header?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.report&&(this.isFreestyle&&0>=this.gridCols?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):
(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.cssClass+"Even")))};this.setSortable=function(a){if(this.sortable!=a){this.sortable=a;for(var b=this.grid.columns.length,d=0;d<b;d++)this.grid.columns[d].sortable=a}};this.lastRowId=0;this.addRow=function(a){var b,d,c,f=this.lastRowId++,k=gx.grid.rowId(f+1),k=new gx.grid.row(f,a,k,this.grid.gxParentRowId);k.gxCmpContext=this.gxComponentContext;k.Grids=a.Grids;k.ownerGrid=this;k.gxLvl=this.gridLvl;this.setRowHiddens(a.Hiddens);
for(var g=this.grid.columns,j=g.length,x=0;x<j;x++){var o=g[x];if(0!==f){c=this.grid.rows[0].gxProps[x];b=a.Props[x].length;for(d=this.grid.rowsValues?c.length-1:c.length;b<d;b++)k.gxProps[x].push(c[b])}d=a.Props[x];d=d[d.length-1];if((c=this.grid.rowsValues)&&!this.autoRefreshing)b=c[f],void 0!==b&&0<b.length&&(d=c[f][x]);k.values[x]=d;this.grid.rowsValues&&k.gxProps[x].push(d);this.parentObject.isTransaction()&&(o=this.columnIndexInKey(o.gxAttId),-1!=o&&(k.gxKeyValues[o]=d))}this.isFreestyle&&(k.IsNew=
!0,this.installChildGrids(k));this.grid.addRow(k);return k};this.installChildGrids=function(a){for(var b=this.childGrids.length,d=0;d<b;d++){var c=this.childGrids[d],f=c.gxCreateGridCode(a.gxId);f.grid.parentGxObject=this.parentObject;var k=(!f.isMasterPageGrid?this.grid.gxCmpContext:"MP")+f.realGridName+"Container";f.gxContainerDivName=k+"Div_"+a.gxId;f.gxContainerDataName=k+"Data_"+a.gxId;f.gxContainerValuesName=k+"DataV_"+a.gxId;a.gxGrids.push(f);f.parentGrid=this;f.parentRow=a;this.parentObject.setGrid(f);
c.copyPropertiesTo(f);f.grid.gxCmpContext=this.grid.gxCmpContext;f.grid.gxParentRowId=a.gxId;this.installChildGridColumns(f,c)}};this.installChildGridColumns=function(a,b){for(var d=b.gxAddColumnsCode.length,c=0;c<d;c++)b.gxAddColumnsCode[c].call(a)};this.copyPropertiesTo=function(a){a.cssClass=this.cssClass;a.titleBackstyle=this.titleBackstyle;a.titleBackcolor=this.titleBackcolor;a.linesBackcolorOdd=this.linesBackcolorOdd;a.linesBackcolorEven=this.linesBackcolorEven;a.grid.gxCssClass=this.grid.gxCssClass;
a.grid.gxTitleClass=this.grid.gxTitleClass;a.grid.gxOddLlinesClass=this.grid.gxOddLlinesClass;a.grid.gxEvenLinesClass=this.grid.gxEvenLinesClass;a.grid.gxAllowCollapsing=this.grid.gxAllowCollapsing;a.grid.gxCollapsed=this.grid.gxCollapsed};this.setRowHiddens=function(a){if(a&&this.parentObject.isTransaction())for(var b in a)gx.fn.setHidden(b,a[b])};this.executeEvent=function(a,b){gx.evt.setGridEvt(this.gridId.toString(),b);this.instanciateRow(b);this.parentObject[a].call(this.parentObject,b)};this.getHiddenName=
function(a){var b="";this.parentRow&&(b="_"+this.parentRow.gxId);return this.grid.gxCmpContext+this.realGridName.toUpperCase()+(this.isMasterPageGrid?"_MPAGE":"")+"_"+a+b};this.updatePagingVars=function(a,b){void 0==a&&void 0==b?(this.grid.eof=gx.fn.getHidden(this.getHiddenName("nEOF")),this.grid.firstRecordOnPage=gx.fn.getHidden(this.getHiddenName("nFirstRecordOnPage"))):(this.grid.eof=a,this.grid.firstRecordOnPage=b)};this.setPagingVars=function(a,b){this.grid.eof=a;this.grid.firstRecordOnPage=
b;gx.fn.setHidden(this.getHiddenName("nEOF"),a);gx.fn.setHidden(this.getHiddenName("nFirstRecordOnPage"),b)};this.clearDefaultEventHandlers=function(){var a=0;if(this.defaultDragable||this.defaultSetsContext)for(var a=this.grid.rows.length,b=0;b<a;b++){var d=this.containerName+"Row_"+this.grid.rows[b].gxId;this.defaultDragable&&gx.fx.dnd.deleteSource(d);this.defaultSetsContext&&gx.fx.ctx.deleteSetter(d)}a=this.grid.columns.length;for(b=0;b<a;b++)if(d=this.grid.columns[b],!0==d.gxSetsContext)for(var c=
this.grid.rows.length,f=0;f<c;f++)gx.fx.ctx.deleteSetter(d.htmlName+"_"+this.grid.rows[f].gxId)};this.setDefaultEventHandlers=function(){var a=0,b=this.getRowAsTypes();if(this.defaultDragable||this.defaultSetsContext)if(gx.lang.emptyObject(this.boundedCollType))for(var a=this.grid.rows.length,d=0;d<a;d++){var c=this.gxComponentContext+this.containerName+"Row_"+this.grid.rows[d].gxId,c=gx.dom.el(c);null!=c&&(c.gxGrid=this.containerName,c.gxGridName=this.gridName,c.gxId=this.grid.rows[d].gxId);c=this.containerName+
"Row_"+this.grid.rows[d].gxId;f=function(a){return this.returnRowData(a)}.closure(this);this.defaultDragable&&gx.fx.dnd.addSource(this.parentObject,c,this.cssClass,b,f);this.defaultSetsContext&&gx.fx.ctx.addSetter(this.parentObject,c,this.cssClass,b,f)}else{var a=this.grid.gxCmpContext+this.containerName+"Div",f=function(){return this.returnGridData()}.closure(this);this.defaultDragable&&gx.fx.dnd.addSource(this.parentObject,a,this.cssClass,[this.boundedCollType],f);this.defaultSetsContext&&gx.fx.ctx.addSetter(this.parentObject,
a,this.cssClass,[this.boundedCollType],f)}if(this.parentGrid){f=gx.fx.ctx.setters[this.gxComponentContext+this.realGridName+"ContainerTbl"];a=this.grid.rows.length;for(d=0;d<a;d++)c=this.containerName+"Row_"+this.grid.rows[d].gxId,f&&f.hdl&&gx.fx.ctx.addSetter(this.parentObject,c,this.cssClass,b,f.hdl)}a=this.grid.columns.length;for(d=0;d<a;d++)if(b=this.grid.columns[d],!0==b.gxSetsContext){c=this.grid.rows.length;for(f=0;f<c;f++){var k=gx.dom.el(this.gxComponentContext+b.htmlName+"_"+this.grid.rows[f].gxId);
null!=k&&(k.gxHtmlName=b.htmlName,gx.fx.ctx.addSetter(this.parentObject,b.htmlName+"_"+this.grid.rows[f].gxId,"",[b.gxAttName],this.returnColumnContext))}}};this.infinite_scrolling_before_scroll=function(){var a=function(){this.mock_element&&this.mock_element.insertAfter(f("#"+(this.gxComponentContext+this.containerName+"Tbl")))};this.mock_element||(this.mock_element=f('<div class="gx-grid-loading">'+gx.getMessage("GXM_Loading")+"</div>"),gx.lang.doCallTimeout(a,this,[],500),gx.lang.doCallTimeout(this.remove_loading_message,
this,[],1500))};this.remove_loading_message=function(){this.mock_element&&(f(this.mock_element).remove(),this.mock_element=void 0)};this.infinite_scrolling_after_scroll=function(){this.remove_loading_message();f("#"+(this.gxComponentContext+this.containerName+"Tbl"));this.fixColumnsWidth(this.fixedColumnsWidth)};this.fixColumnsWidth=function(a){this.isFreestyle||(rows=f("#"+(this.gxComponentContext+this.containerName+"Tbl")).find("tbody tr[data-gxrendering_row]"),f.each(rows,function(b,d){f(d).children().map(function(b,
d){f(d).width(a[b])})}),rows.removeAttr("data-gxrendering_row"))};this.unInstallScrollListener=function(){f(this.ScrollingElement).unbind("scroll")};this.installScrollListener=function(a,b,d,c){var k=this.InverseLoading?function(){return a.scrollTop<=30*a.clientHeight/100}:function(){return gx.dom.element_in_scroll(a,"#"+b+c)};f(a).scroll(this,function(a){var d=a.data;grid=d.grid;!grid.isLastPage()&&k()&&(d.infinite_scrolling_before_scroll(),f("#"+b+c),grid.changeGridPage("NEXT",!1).then(function(){d.infinite_scrolling_after_scroll()}))})};
this.handleInfiniteScrolling=function(){if(this.InfiniteScrolling&&!this.grid.isLastPage()&&0<this.grid.rows.length){var a=this.getContainerControl();if(a){var b=f(a);b.removeClass("gx-infinite-scrolling-container");var d=this,c=this.gxComponentContext+this.containerName+"Tbl",k=this.grid.scroll_last_row_selector(this.gridRows),g=this.grid.scroll_first_row_selector(this.gridRows),j=f("#"+c),x=j.find("tbody tr:first").children(),o=f("#"+c+">tbody");this.fixedColntainerWidth||(this.fixedColntainerWidth=
j.width());this.fixedColumnsWidth||(this.fixedColumnsWidth=x.map(function(){return f(this).width()}).get());b.addClass("gx-infinite-scrolling-container");j.width(this.fixedColntainerWidth+f.position.scrollbarWidth()+2);0<this.fixedColumnsWidth.length&&(j.find("thead tr").children().each(function(a,b){f(b).width(d.fixedColumnsWidth[a])}),this.fixColumnsWidth(this.fixedColumnsWidth));var l;(l=1==this.ScrollType?document.forms.MAINFORM:0<o.length?o[0]:a)&&f(l).addClass("gx-infinite-scrolling-element");
this.ScrollingHeight&&f(l).css({height:this.ScrollingHeight});this.ScrollingElement=l;this.infinitScrollingInstalled=!0;this.grid.firstItemSelector="#"+c+g;this.grid.lastItemSelector="#"+c+k;var a=this.InverseLoading?this.grid.firstItemSelector:this.grid.lastItemSelector,m=this.infinite_scrolling_before_scroll.closure(this),n=this.infinite_scrolling_after_scroll.closure(this);1==this.ScrollType?(b="99.9vh",f(document.body).css({"overflow-y":"hidden"})):b=f(l).height()-2;this.ScrollingHeight||(this.ScrollingHeight=
b);if(l){f(l).css({height:b});var w=this.InverseLoading?function(){return l.scrollTop==0}:function(){return l.clientHeight==l.scrollHeight},s=function(){if(!this.grid.isLastPage()&&w()){m();return this.grid.changeGridPage("NEXT",false).then(function(){if(d.InverseLoading)l.scrollTop=l.scrollHeight;n();s()})}}.closure(this);s();this.installScrollListener(this.ScrollingElement,c,o,a)}}}};this.returnColumnContext=function(a){var b="",b="SPAN"==a.nodeName?gx.dom.spanValue(a):gx.fn.getControlValue_impl(a.id);
return null!=b?b:""};this.returnRowData=function(a){var b={};if(a=this.grid.getRowByGxId(a.gxId))for(var d=this.grid.columns.length,c=0;c<d;c++){var f=this.grid.columns[c].gxAttName;""!=f&&(b[f]=a.values[c])}return b};this.returnGridData=function(){for(var a=[],b=this.grid.rows.length,d=0;d<b;d++){var c={};a[d]=c;for(var f=this.grid.rows[d],k=this.grid.columns.length,g=0;g<k;g++){var j=this.grid.columns[g].gxAttName;""!=j&&(c[j]=f.values[g])}}return a};this.doDrop=function(a){this.getNewRows(void 0!=
a.length?ropObj.length:1,null,function(b){this.addDropedRows(b,a)})};this.addDropedRows=function(a,b){var d=b.length;if(void 0!=d)for(var c=0;c<d;c++)this.setDroppedRow(a[c],b[c]);else this.setDroppedRow(a[0],b);this.setNewRows(a)};this.setDroppedRow=function(a,b){for(var d=this.grid.columns.length,c=0;c<d;c++){var f=a.Props[c],k=this.grid.columns[c].gxAttName,g="";""!=k&&void 0!=b[k]&&(g=b[k]);f.Value=g;f.FormattedValue=g}};this.getRowAsTypes=function(){for(var a=[],b=this.grid.columns.length,d=
0;d<b;d++){var c=this.grid.columns[d].gxAttName;""!=c&&a.push(c)}return a};this.addRows=function(a){var b=a.Count;this.grid.rowsValues=a.values;for(var d=0;d<b;d++)this.addRow(a[d])};this.lastRowIsModified=function(){if(0==this.grid.rows.length)return!1;var a=this.grid.rows[this.grid.rows.length-1];return a.gxExists()||a.gxIsMod()?!0:!1};this.getNewRows=function(a,b,d){var d=void 0!=d?d:this.setNewRows,c=gx.util.browser.isFirefox()?"keypress":"keydown";null==b||(b.type==c&&(32==b.charCode||32==b.keyCode||
13==b.keyCode)||"click"==b.type)&&(0==this.grid.rows.length||this.lastRowIsModified())?(gx.csv.pkDirty=!1,gx.ajax.newRows(this.gxComponentContext,this.isMasterPageGrid,this.realGridName,a+this.lastRowId,this.lastRowId+1,gx.grid.rowId(this.lastRowId+1)+this.grid.gxParentRowId,this.grid.gxParentRowId,d),gx.csv.pkDirty=!1,null!=b&&gx.evt.cancel(b,!0)):null!=b&&(32==b.keyCode||13==b.keyCode)&&gx.evt.cancel(b,!0)};this.setNewRows=function(a){return this.setNewRows_impl(a,function(){this.refreshGrid({loadChildGrids:!1})})};
this.loadNewRows=function(a){return this.setNewRows_impl(a,function(a){this.loadGrid({rowProps:a,isPostback:!0,addRows:!0})})};this.setNewRows_impl=function(a,b){var d;if(void 0!=a.Count){var c=0;this.grid.rowsValues||(this.grid.rowsValues=[]);this.grid.rowsValues=this.grid.rowsValues.concat(a.values);for(c=0;c<a.Count;c++)d=this.addRow(a[c]),gx.fn.setCurrentGridRow(this.gridId,d.gxId);0<a.Count&&(this.addingRows=!0,b.call(this,a),this.addingRows=!1,this.setFocusFirstControl(a[0]))}return d};this.gxNewRowFocused=
function(a){a.style.textDecoration="underline";var b=gx.fn.firstGridControl(this.gridId);gx.evt.onfocus(a,b,this.gxComponentContext,this.isMasterPageGrid,"9999",this.gridId)};this.rowKeyPressed=function(a){var b=gx.evt.source(a);void 0!=b&&(a.ctrlKey&&46==a.keyCode)&&(this.setRowDeleted(b),gx.evt.cancel(a,!0))};this.gxHasDuplicateKey=function(){for(var a=[],b=this.grid.rows,d=b.length,c=0;c<d;c++){var f=b[c];if((f.gxExists()||f.gxIsMod())&&!f.gxDeleted()){for(var k="",g=f.gxKeyValues.length,j=0;j<
g;j++)k+=f.gxKeyValues[j].toString();if(void 0!=a[k])return!0;a[k]=1}}return!1};this.columnIndexInKey=function(a){for(var b=this.lvlKey.length,d=0;d<b;d++)if(this.lvlKey[d]==a)return d;return-1};this.refreshVars=[];this.addRefreshingVar=function(a){if(!gx.lang.emptyObject(a)){var b="";this.refreshVars[this.refreshVars.length]=a;if(a.fld){var d=gx.dom.el(this.gxComponentContext+a.fld);if(void 0!=d&&gx.lang.emptyObject(a.hc)&&(b="radio"==d.type||"checkbox"==d.type?"click":"SELECT"==d.tagName?"change":
gx.evt.eachKeyAutorefreshType(a.type)?["keyup","input"]:"blur",""!=b))if("radio"==d.type)for(var a=gx.dom.byName(this.gxComponentContext+a.fld),d=a.length,c=0;c<d;c++)gx.evt.attach(a[c],b,function(){this.filterVarChanged()},this);else"search"==d.type&&(b=[b,"search"]),gx.evt.attach(d,b,function(){this.filterVarChanged()},this)}}};this.doRefresh=function(){this.callAsyncRefresh(this.getRefreshParmsUrl())};this.filterVarChanged=function(){if(this.parentObject.autoRefresh&&!gx.grid.drawAtServer){var a=
this.getRefreshParmsUrl();this.lastRefreshParms!=a&&(this.lastRefreshParms=a,this.callAsyncRefresh())}else this.parentObject.conditionsChanged=this.conditionsChanged()};this.conditionsChanged=function(){for(var a=this.refreshVars.length,b=0;b<a;b++){var d=this.refreshVars[b];if("undefined"==typeof d.rfrVar){var c=gx.fn.getHidden(this.gxComponentContext+"GXH_"+d.fld),d=d.val();if(c!=d)return!0}}return!1};this.getRefreshParmsUrl=function(){var a=gx.O;gx.setGxO(this.parentObject);var b="";this.pageSizeParm&&
(b=this.grid.pageSize+",");for(var d=this.refreshVars.length,c=0;c<d;c++){var f=this.refreshVars[c];f&&("function"==typeof f.c2v&&f.c2v(),"function"==typeof f.v2bc&&f.v2bc.call(gx.O));if("undefined"!=typeof f.rfrVar){var k=ctrlName=colType=colVStruct=void 0;if("undefined"!=typeof f.rfrProp){var g;"undefined"!=typeof f.gxAttId&&(g=this.grid.getColumnByGxAttId(f.gxAttId));g||(g=this.grid.getColumnForVar(f.rfrVar));if(g){if(f=f.rfrProp.toLowerCase(),k=g[f],"value"==f&&g.gxControl.type==gx.html.controls.types.image&&
(k=gx.util.removeBaseUrl(k)),(colVStruct=this.parentObject.getValidStruct(g.gxId))&&"value"==f)colType=colVStruct.type}else k=""}else"undefined"!=typeof this.parentObject.VarControlMap[f.rfrVar]&&(ctrlName=this.parentObject.VarControlMap[f.rfrVar].id),gx.lang.emptyObject(this.parentObject[f.rfrVar])?"undefined"==typeof k&&"undefined"!=typeof ctrlName&&(k=gx.fn.getHidden(this.gxComponentContext+ctrlName)):k=this.parentObject[f.rfrVar],"object"==typeof k&&(k=gx.json.serializeJson(k));b+=this.getFormattedParm(k,
colType)+","}else b=gx.lang.emptyObject(f.hc)?b+(this.getFormattedVStructParm(f)+","):b+(encodeURIComponent(this.parentObject[f.hc])+","),gx.fn.setHidden(this.gxComponentContext+"GXH_"+f.fld,f.val())}this.parentObject.IsComponent&&(b+=encodeURIComponent(this.parentObject.CmpContext)+",");gx.setGxO(a);return b};this.initRefreshParms=function(){this.parentObject.autoRefresh&&(this.lastRefreshParms=this.getRefreshParmsUrl())};this.getFormattedVStructParm=function(a){var b;"date"==a.type||"dtime"==a.type?
(b=gx.dom.el(this.gxComponentContext+a.fld),b="undefined"!=typeof b.value?b.value:gx.dom.spanValue(b)||b):b=a.val();return this.getFormattedParm(b,a.type)};this.getFormattedParm=function(a,b){"date"===b?a=gx.date.urlDate(a,gx.dateFormat):"dtime"===b&&(a=gx.date.urlDateTime(a,gx.dateFormat));return encodeURIComponent(a)};this.callAsyncRefresh=function(a,b){gx.evt.refreshGridCallback||(gx.evt.refreshGridCallback=[]);null!=this.refreshTimer&&(window.clearTimeout(this.refreshTimer),this.refreshTimer=
null,gx.evt.setReady(!0));gx.evt.setReady(!1);this.refreshTimer=window.setTimeout(function(){if(this.autoRefreshing)this.callAsyncRefresh(a);else{gx.fx.obs.addObserver("grid.onafterrefresh",gx.evt,gx.evt.notifyRefreshGrid,{single:true});typeof a==="undefined"&&(a=this.getRefreshParmsUrl());gx.ajax.refreshGrid(this,a);gx.evt.setReady(true)}}.closure(this),b||400)};this.updatePropsHidden=function(a){var b=this.getDataHiddenName();gx.fn.setHidden(b,a)};this.updatePagingVarsAfterRefresh=function(a){if(this.usePaging){var b=
this.grid.gxGridName.toUpperCase()+"_nEOF",d=this.grid.gxGridName.toUpperCase()+"_nFirstRecordOnPage";this.setPagingVars(a[b],a[d])}};this.getSelection=function(){if(this.allowSelection)for(var a=this.grid.rows.length,b=0;b<a;b++)if(this.grid.rows[b].selected)return b;return-1};this.setSelection=function(a){if(this.allowSelection&&0<=a){var a=gx.grid.rowId(a+1),b=gx.dom.el(this.grid.gxCmpContext+this.grid.gxGridObject+"Row_"+a);b&&this.grid.setRowSelected(b,a)}};this.blankGridRows=function(){this.InfiniteScrolling&&
(this.additiveResponse=0!=this.grid.firstRecordOnPage);if(!this.InfiniteScrolling||!this.additiveResponse)this.lastRowId=0,this.grid.rows=[],delete this.grid.rowsValues};this.setRowDeleted=function(a){var b=null,b="string"==typeof a?this.grid.getRowByGxId(a):void 0==a.gxId?this.getRowFromHtmlCtrl(a):a;b.setDeleted(!b.gxDeleted());this.setRowModified(b.gxId);gx.fn.removeGridRow(b.gxId,this.gridId.toString());this.refreshGrid({loadChildGrids:!1});gx.dom.indexElements()};this.setFocusFirstControl=function(a){for(var b=
0;b<a.Count;b++){var d=this.grid.getRowByGxId(gx.grid.rowId(this.lastRowId)+this.grid.gxParentRowId);if(d&&(d=gx.dom.el(this.grid.gxCmpContext+this.grid.columns[b].htmlName+"_"+d.gxId),void 0!=d&&gx.fn.isAccepted(d))){gx.grid.lastFocusCtrl=this.grid.columns[b].gxId;gx.fn.setFocus(d);break}}};this.instanciateRow=function(a){var b=gx.O;gx.setGxO(this.parentObject);gx.csv.instanciatedRowGrid=this;try{var d=a;"string"==typeof d&&(d=this.grid.getRowByGxId(a));if(null!=d){gx.fn.setCurrentGridRow(this.gridId,
d.gxId);for(var c=d.values.length,f=0;f<c;f++){var k=this.grid.columns[f];if(""!=k.gxId){var g=this.parentObject.getValidStruct(k.gxId);g&&(this.isUsercontrol?g.v2v&&(g.v2v(this.grid.properties[d.id][k.index].value),gx.fn.setHidden(this.grid.properties[d.id][k.index].id,this.grid.properties[d.id][k.index].value)):"function"==typeof g.c2v&&g.c2v())}}}else{gx.fn.setCurrentGridRow(this.gridId,a);c=this.grid.columns.length;for(f=0;f<c;f++)k=this.grid.columns[f],""!=k.gxId&&(g=this.parentObject.getValidStruct(k.gxId))&&
"function"==typeof g.c2v&&g.c2v()}}catch(j){gx.dbg.logEx(j,"gxgrid.js","instanciateRow")}gx.setGxO(b);return!0};this.setRenderProp=function(a,b,d,c){this.grid.setProp(a,b,d,c)};this.setRenderDynProp=function(a,b,d,c){this.grid.setDynProp(a,b,d,c)};this.addRenderEventHandler=function(a,b){this.grid.addEventHandler(a,b)};this.cleanup=function(){this.parentGrid=this.parentObject=null;this.grid.ownerGrid=null;this.grid.parentGxObject=null;this.grid.container=null;this.grid.ascLabel=null;this.grid.descLabel=
null;this.grid.columns=null;this.grid=this.grid.rows=null;this.unInstallScrollListener()};this.loadGrid=function(a){gx.dbg.logPerf("loadGrid_"+this.gridName);var a=a||{},b=a.rowProps,d=a.isPostback,c=a.addRows,a=a.isNestedLoad;this.isNestedLoad=this.isNestedLoad||a;a=gx.O;gx.setGxO(this.parentObject);this.isLoading=!0;var f=this.parentObject.isTransaction();f&&null==this.contextMenu&&(this.contextMenu=new gx.grid.contextMenu(this));void 0!=b?(f=this.getContainerControl(),null!=f&&(d&&(c||(b.values=
this.getValuesFromHidden()),this.isFreestyle&&gx.lang.emptyObject(this.parentRow)&&this.backupComponents()),this.deleteGridData(),this.grid.setContainerDelayed(f),this.clearHiddens(),this.setRowsProperty(),d=this.getSelection(),this.autoRefreshing?this.updatePagingVarsAfterRefresh(b):this.updatePagingVars(),c||this.blankGridRows(),this.setHtmlTags(b),this.setGridStyles(b),this.setDeleteMethod(b.DeleteMethod),this.setSelectionAndHover(b.Allowselection,b.Selectioncolor,b.Allowhover,b.Hovercolor),this.setCollapsing(b.Allowcollapsing,
b.Collapsed),this.setSflColumns(b.SflColumns),this.setColumnsProperties(b.Columns),c||this.addRows(b),this.updateOldComponents(),this.initRefreshParms(),this.refreshGrid({loadChildGrids:null,fromAutoRefresh:this.autoRefreshing}),this.setSelection(d))):(this.clearHiddens(),this.setRowsProperty(),this.grid.pageSize=f||this.isFreestyle?9999:this.gridRows,f=this.getContainerControl(),null!=f?(this.grid.setContainerDelayed(f),b=this.getRowsFromHidden(),null!=b?(b.values=this.getValuesFromHidden(),this.blankGridRows(),
this.setHtmlTags(b),this.setGridStyles(b),this.setDeleteMethod(b.DeleteMethod),this.setSelectionAndHover(b.Allowselection,b.Selectioncolor,b.Allowhover,b.Hovercolor),this.setCollapsing(b.Allowcollapsing,b.Collapsed),this.setSflColumns(b.SflColumns),this.setColumnsProperties(b.Columns),this.updatePagingVars(),this.addRows(b),this.initRefreshParms(),this.addingRows=!0,this.refreshGrid(),this.addingRows=!1):(this.blankGridRows(),this.updatePagingVars(),this.initRefreshParms(),this.refreshGrid())):this.loadWrappedGridChilds());
this.isLoading=!1;gx.setGxO(a);gx.dbg.logPerf("loadGrid_"+this.gridName,"Grid '"+this.gridName+"' loaded")};this.loadWrappedGridChilds=function(){try{var a=gx.fn.getHidden(this.grid.gxCmpContext+"nRC_GXsfl_"+this.gridId);if("undefined"!=typeof a){for(var a=parseInt(a),b=0;b<a;b++)for(var d=this.grid.columns.length,c=0;c<d;c++){var f=this.grid.columns[c];f.gxControl.type==gx.html.controls.types.userControl&&this.addUsercontrolToDraw({r:gx.grid.rowId(b+1),c:f})}this.setupGridUsercontrols(this.GridUserControls)}}catch(k){gx.dbg.logEx(k,
"gxgrid.js","loadWrappedGridChilds")}};this.getRowsFromHidden=function(){var a=this.getDataHiddenName(),b=gx.fn.getHidden(a);gx.json.setNonSerializable(a);return"string"==typeof b?gx.json.evalJSON(b):"object"==typeof b?b:null};this.deleteGridData=function(){var a=this.getDataHiddenName();gx.json.setNonSerializable(a)};this.getValuesFromHidden=function(){var a=this.getValuesHiddenName(),b=gx.fn.getHidden(a);gx.lang.emptyObject(b)&&(b=gx.fn.getControlValue(a));gx.json.setNonSerializable(a);a=null;null!=
b&&""!=b&&(a=gx.json.evalJSON(b));return a};this.getContainerControlId=function(){return void 0!=this.gxContainerDivName?this.gxContainerDivName:this.grid.gxCmpContext+this.containerName+"Div"};this.getContainerControl=function(){var a=gx.dom.byId(this.getContainerControlId());a&&(this.gxContainerCtrl=a,a.setAttribute("data-gxgridid",this.gridId.toString()),gx.dom.addClass(a,"gx-grid"),this.isResponsive&&gx.dom.addClass(a,"gx-responsive-grid"),gx.dom.addClass(a,this.isFreestyle?"gx-freestyle-grid":
"gx-standard-grid"),a.gxGridName=this.grid.gxGridName);return a};this.getHiddenSuffix=function(){return""==this.grid.gxParentRowId?"":"_"+this.grid.gxParentRowId};this.getDataHiddenName=function(){return void 0!=this.gxContainerDataName?this.gxContainerDataName:this.grid.gxCmpContext+this.containerName+"Data"+this.getHiddenSuffix()};this.getValuesHiddenName=function(){return void 0!=this.gxContainerValuesName?this.gxContainerValuesName:this.grid.gxCmpContext+this.containerName+"DataV"+this.getHiddenSuffix()};
this.setColumnsProperties=function(a){try{if(!gx.lang.emptyObject(a))for(var b=a.length,d=0;d<b;d++){var c=this.grid.columns[d],f;for(f in a[d]){var k=a[d][f];f=this.fixColumnPropName(f);this.isUsercontrol&&(c[f]=k);c[f.toLowerCase()]=k}this.checkPromptColumn(c)}}catch(g){gx.dbg.logEx(g,"gxgrid.js","setColumnsProperties")}};this.checkPromptColumn=function(a){try{if(this.isPromptColumn(a)){var b=gx.fn.getAttachedCtrl(a.htmlName);if(b&&b.info&&b.info.controls){for(var d=!1,c=!1,f=b.info.controls.length,
k=0;k<f;k++){var g=this.grid.getColumnByGxId(b.info.controls[k]),j=gx.lang.gxBoolean(g.enabled),x=gx.lang.gxBoolean(g.visible);j&&(c=!0);x&&(d=!0)}c||(a.enabled="0");d||(a.visible="0")}}}catch(o){gx.dbg.logEx(o,"gxgrid.js","checkPromptColumn")}};this.fixColumnPropName=function(a){return"Horizontalalignment"==a?"align":a};this.setDeleteMethod=function(a){if(this.parentObject.isTransaction()){var b="DSP"==this.parentObject.Gx_mode;!b&&(a&&"none"==a)&&(b=!0);this.deleteMethod=b?gx.grid.deleteMethods.none:
gx.grid.deleteMethod}};this.setSelectionAndHover=function(a,b,d,c){try{"undefined"!=typeof a&&(this.allowSelection=gx.lang.gxBoolean(a));"undefined"!=typeof b&&(this.selectionColor=null);"undefined"!=typeof c&&(this.hoverColor=null);if(this.allowSelection&&"undefined"!=typeof b&&("undefined"!=typeof d&&(this.allowHovering=gx.lang.gxBoolean(d)),b=eval(b),this.selectionColor="undefined"!=typeof b[0]?gx.color.fromRGB(b[0],b[1],b[2]):gx.color.html(b),this.allowHovering&&"undefined"!=typeof c))c=eval(c),
this.hoverColor="undefined"!=typeof c[0]?gx.color.fromRGB(c[0],c[1],c[2]):gx.color.html(c);this.grid.gxAllowSelection=this.allowSelection;this.grid.gxSelectionColor=this.selectionColor;this.grid.gxAllowHovering=this.allowHovering;this.grid.gxHoverColor=this.hoverColor}catch(f){gx.dbg.logEx(f,"gxgrid.js","setSelectionAndHover")}};this.setCollapsing=function(a,b){try{if(void 0!==a&&(this.allowCollapsing=gx.lang.gxBoolean(a),this.grid.gxAllowCollapsing=this.allowCollapsing),void 0!==b)this.collapsed=
gx.lang.gxBoolean(b),this.grid.gxCollapsed=this.collapsed}catch(d){gx.dbg.logEx(d,"gxgrid.js","setCollapsing")}};this.setSflColumns=function(a){try{if(!gx.lang.emptyObject(a)||0===a)this.gridCols=gx.grid.validGridColsValue(parseInt(a)),this.grid.gxGridCols=this.gridCols,1<this.gridCols&&0<this.gridRows&&(this.grid.pageSize=(this.gridRows?this.gridRows:1)*this.gridCols)}catch(b){gx.dbg.logEx(b,"gxgrid.js","setSflColumns")}};this.isPromptColumn=function(a){return a.gxAttId.indexOf&&-1!=a.gxAttId.indexOf("prompt_")?
!0:!1};this.setRowsProperty=function(){var a=gx.fn.getHidden(this.getHiddenName("Rows"));if(null!=a){try{this.gridRows=parseInt(a,10)}catch(b){gx.dbg.logEx(b,"gxgrid.js","setRowsProperty")}this.grid.pageSize=this.gridRows*(1<this.gridCols?this.gridCols:1)}};this.crearInstalledSuggests=function(){for(var a=this.grid.columns.length,b=0;b<a;b++){var d=this.parentObject.getValidStruct(this.grid.columns[b].gxId);d&&(d.gxsgprm&&d.gxsgprm.installed)&&(d.gxsgprm.installed={})}};this.refreshCollection=function(a){try{this.blankGridRows();
this.updatePagingVars();this.initRefreshParms();for(var b=a.length,d=0;d<b;d++){for(var c={Props:[]},f=a[d],k=this.grid.columns.length,g=0;g<k;g++){var j=this.grid.columns[g];c.Props[j.index]=[f[j.gxAttName]]}this.addRow(c)}this.refreshGrid({loadChildGrids:!1,fromAutoRefresh:!1,fromCollection:!0})}catch(x){gx.dbg.logEx(x,"gxgrid.js","refreshCollection")}};this.refreshGrid=function(a){var a=a||{},b=a.loadChildGrids,d=a.fromAutoRefresh,c=a.fromCollection,a=a.isNestedLoad;this.isNestedLoad=this.isNestedLoad||
a;this.DatePickersControls=[];this.GridUserControls=[];this.GridComponents=[];this.GridControls=[];this.clearDefaultEventHandlers();this.clearHiddens();this.crearInstalledSuggests();this.setRowsProperty();void 0!=this.parentRow&&!gx.lang.emptyObj(this.parentRow.Grids)&&(a=this.parentRow.Grids[this.realGridName],null!=a&&(this.setHtmlTags(a),this.setGridStyles(a),this.setColumnsProperties(a.Columns),this.addingRows||this.parentRow.IsNew&&this.addRows(a)));var f=!1,a=function(){this.setupGridControls(this.GridControls);
this.setupCellAttributes(this.IsValidState);this.setupFixedColumnProperties();this.setupGridUsercontrols(this.GridUserControls);var a=this,b=function(){gx.spa.isNavigating()?gx.spa.addObserver("onnavigatecomplete",a,a.handleInfiniteScrolling,{single:true}):a.handleInfiniteScrolling()};this.setupGridComponents(this.GridComponents).then(function(){a.isFreestyle&&a.loadRowsGrids(f);gx.fx.obs.notify("grid.onafterrender",[a.grid]);if(a.isNestedLoad){a.isNestedLoad=false;b()}else a.applyTemplateObject().then(b)});
this.triggerDatePickersSetup(this.DatePickersControls);this.installImageControls();this.updateRcdCount();this.setDefaultEventHandlers()}.closure(this);this.grid.doSort();!1==b?this.grid.render(f,!1,c,a):(f=!0,this.grid.render(f,d,c,a))};this.applyTemplateObject=function(){var a=this.isFreestyle?"."+gx.GxObject.WEBCOMPONENT_CLASS_NAME+" *":"";return gx.plugdesign.applyTemplateObject({selector:"#"+this.getContainerControl().id,excluded:a})};var N="gx-wc-bkp_"+o+"_"+d;this.getComponentsBackupContainer=
function(){var a=gx.dom.el(N);a||(a=document.createElement("div"),a.id=N,a.style.display="none",document.body.appendChild(a));return a};this.destroyComponentsBackup=function(){var a=gx.dom.el(N);a&&a.parentNode&&gx.dom.removeControlSafe(a)};this.backupComponents=function(){try{if(!this.InfiniteScrolling)for(var a=this.grid.rows.length,b=0;b<a;b++){for(var d=this.grid.rows[b],c=this.grid.columns.length,f=0;f<c;f++)if(this.grid.columns[f].gxControl.type==gx.html.controls.types.webComponent){var k=this.gxComponentContext+
"gxHTMLWrp"+this.parentObject.getComponentPrefix(d.gxProps[f][0])+d.gxId,g=gx.dom.el(k);g&&(g.parentNode.removeChild(g),this.getComponentsBackupContainer().appendChild(g))}for(var j=d.gxGrids.length,f=0;f<j;f++){var x=d.gxGrids[f];x&&x.isFreestyle&&x.backupComponents()}}}catch(o){gx.dbg.logEx(o,"gxgrid.js","backupComponents")}};this.getEntireGridColumn=function(a){var b=this.getContainerControl();if(!b)return[];var d=b.firstChild,b=[];if(d.querySelectorAll)b=gx.fn.toArray(d.querySelectorAll("td[data-colindex='"+
a+"'], th[colindex='"+a+"']"));else{for(var c=gx.dom.byTag("TD",d),d=gx.dom.byTag("TH",d),f=0,k=c.length;f<k;f++)c[f].getAttribute("data-colindex")==a&&b.push(c[f]);f=0;for(k=d.length;f<k;f++)d[f].getAttribute("colindex")==a&&b.push(d[f])}return b};this.applyPropEntireColumn=function(a,b,d){for(var a=this.getEntireGridColumn(a),c=0;c<a.length;c++)gx.fn.setCtrlPropertyImpl(a[c],b,d)};this.setupFixedColumnProperties=function(){for(var a=0;a<this.ColumnPropertiesAfterRender.length;a++){var b=this.ColumnPropertiesAfterRender[a];
this.applyPropEntireColumn(b.colIndex,b.ptyName,b.ptyValue)}};this.addColPropertyAfterRender=function(a,b,d){this.ColumnPropertiesAfterRender.push({colIndex:a,ptyName:b,ptyValue:d})};this.setupCellAttributes=function(a){for(var b in a){var d=a[b],c=gx.dom.el(b);if(c)for(var f in d)c.setAttribute(f,d[f])}};this.setupGridControls=function(a){for(var b=0,d=a.length;b<d;b++){var c=a[b],f=gx.dom.el(c.hookId),k=f.parentNode;k&&(k.insertBefore(c.el,f),gx.dom.removeControlSafe(f))}};this.setupGridComponents=
function(a){var b=f.Deferred(),d=a.length,c=[];0==d&&b.resolve();for(var k=0;k<d;k++){var g=a[k];if(!1===g.create){var j=gx.dom.el(g.existingEl);if(j){var x=j.parentNode,g=gx.dom.el(g.el);gx.dom.removeControlSafe(j);x.appendChild(g)}k==d-1&&b.resolve()}else c.push(g.c)}0<c.length&&gx.html.processCode(c.join(""),!1,function(){for(var c=0;c<d;c++){var f=a[c];if(f.create!==false){var k=gx.createComponent(f.n,f.p);if(k!=null){gx.addComponent(k);k.readServerVars();if(f.load)k.onload(void 0,true);c==d-
1&&b.resolve()}}}});this.destroyComponentsBackup();return b.promise()};this.setupGridUsercontrols=function(a){for(var b=a.length,d=0;d<b;d++){var c=a[d].r,f=a[d].c,c=gx.uc.getNew(this.parentObject,f.gxUCId,f.gxUCLastId,f.gxUCClassName,f.gxUCContainerName+"_"+c,f.gxUCControlName,f.gxUCFieldName,this.gridLvl,this.gridId,c);c.DesignContainerName=f.gxUCContainerName;c.setC2ShowFunction(f.gxShowFunc);for(var k=f.gxC2VFuncs.length,g=0;g<k;g++)c.addC2VFunction(f.gxC2VFuncs[g]);k=f.gxV2CFuncs.length;for(g=
0;g<k;g++)c.addV2CFunction(f.gxV2CFuncs[g]);c.setGridProperties();c.setGridEventHandlers();this.parentObject.setUserControl(c);c.execV2CFunctions(!0);c.execShowFunction()}};this.triggerDatePickersSetup=function(a){for(var b=a.length,d=0;d<b;d++){for(var c=a[d].CtrlId,f=a[d].Grid,k=a[d].Row,g=gx.O,j=null,x=gx.fn.controlIds(),o=x.length,l=0;l<o&&!(j=gx.fn.validStruct(x[l]),j.grid==f&&g.CmpContext+j.fld+"_"+k==c);l++);null!=j&&void 0!=j.dp&&gx.fn.installDatePicker(c,j.dp.f,j.dp.st,j.dp.wn,j.dp.mf,gx.fn.datePickerFormat(j.dp.pic,
j.dp.dec,j.len),j.len,j.dp.dec)}};this.installImageControls=function(){for(var a=gx.dom.byClass(gx.html.multimediaUpload.gxCssClass,"",this.gxContainerCtrl),b=0,d=a.length;b<d;b++)gx.html.multimediaUpload.createControl(a[b])};this.addComponentToDraw=function(a){this.GridComponents.push(a)};this.addUsercontrolToDraw=function(a){this.GridUserControls.push(a)};this.addDatepickerToSetup=function(a){this.DatePickersControls.push(a)};this.addControlToReuse=function(a){a.el.parentNode&&gx.dom.removeControlSafe(a.el);
this.GridControls.push(a)};this.loadRowsGrids=function(a){for(var b=this.grid.rows.length,d=0;d<b;d++)this.loadRowGrids(this.grid.rows[d],a)};this.loadRowGrids=function(a,b){for(var d=a.gxGrids.length,c=0;c<d;c++){var f=a.gxGrids[c];f.grid.setContainerDelayed(gx.dom.el(f.gxContainerDivName));if(b){if(void 0!=f.parentRow&&!gx.lang.emptyObj(f.parentRow.Grids)){var k=f.getDataHiddenName();gx.fn.setHidden(k,gx.json.serializeJson(f.parentRow.Grids[f.realGridName]))}f.loadGrid({isNestedLoad:!0})}else f.refreshGrid({isNestedLoad:!0});
a.IsNew=!1}};this.updateRcdCount=function(){if(this.hasForEachLine||this.parentObject.isTransaction())gx.fn.setHidden(this.grid.gxCmpContext+"nRC_GXsfl_"+this.gridId+(""==this.grid.gxParentRowId?"":"_"+this.grid.gxParentRowId),this.lastRowId.toString());var a=gx.fn.getHidden(this.grid.gxCmpContext+this.gridName.toUpperCase()+"_ROW");parseInt(a,10)>this.lastRowId&&this.grid.instanciateSelectionVars("0000");0===this.lastRowId&&gx.fn.setCurrentGridRow(this.gridId,"")};this.updateControlValue=function(a,
b,d){try{var c=this,f=d=d||gx.fn.currentGridRow(a.grid).toString(),k=d.length;if(4<k){var g=d.substring(4,k),c=gx.fn.gridObj(this.gxComponentContext,this.gridName+"_"+g,this.isMasterPageGrid);if(!c)return;f=d.substring(0,4)}var j=parseInt(f,10)-1;!0==b&&c.setRowModified(d);var x=c.getColumnIndexByName(a.fld),o=gx.dom.el(this.gxComponentContext+a.fld+"_"+d);c.updateRowValue(x,j,o);return c}catch(l){gx.dbg.logEx(l,"gxgrid.js","updateControlValue")}return null};this.persistControlValue=function(a,b,
d){var c=a.lastIndexOf("_");if(-1!=c){var f=a.substring(0,c);if(c=this.grid.getRowByGxId(a.substring(c+1)))if(f=this.grid.getColumnByHtmlName(f)){var k=this.parentObject[d.gxvar];"decimal"==d.type&&gx.lang.instanceOf(k,Number)&&(k=k.toFixed(d.dec));c.values[f.index]=k;c.gxProps[f.index]||(c.gxProps[f.index]={});if((a=gx.dom.el(a))&&"SELECT"==a.tagName)c.gxProps[f.index].Values=gx.dom.comboBoxToObj(a);c.gxProps[f.index].Value=k;c.gxProps[f.index].FormattedValue=b}}};this.getColumnIndexByName=function(a){for(var b=
this.grid.columns,d=b.length,c=0;c<d;c++)if(b[c].htmlName==a)return c;return-1};this.setRowModified=function(a){gx.fn.setHidden(this.grid.gxCmpContext+"nIsMod_"+this.gridLvl.toString()+"_"+a,1);null!=this.parentGrid&&this.parentGrid.setRowModified(this.grid.gxParentRowId);this.grid.showDeleteImage(a)};this.validateRow=function(a){if(a)try{var b=a.getAttribute("data-gxgridid");gx.fn.setCurrentGridRow(b,a.gxrow);var d=gx.fn.lastGridControl(b);gx.csv.validControls(gx.csv.lastId,d+1,!0,gx.O)}catch(c){gx.dbg.logEx(c,
"gxgrid.js","validateRow")}};this.updateRowValue=function(a,b,d){var b=this.grid.getRowById(b),c=this.grid.columns[a];"checkbox"==d.type&&(d.value=d.checked?c.gxChecked:c.gxUnChecked);d=this.parentObject.getValidStruct(this.grid.columns[a].gxId).val(b.gxId);b.values[a]=d;gx.lang.emptyObject(b.gxProps[a])||(b.gxProps[a].Value=d,b.gxProps[a].FormattedValue=gx.fn.getControlValue(this.grid.columns[a].htmlName+"_"+b.gxId,"screen"));this.parentObject.isTransaction()&&(a=this.columnIndexInKey(c.gxAttId),
-1!=a&&(b.gxKeyValues[a]=d));c.gxControl.type==gx.html.controls.types.blob&&gx.fn.setControlValue(this.grid.gxCmpContext+c.htmlName+"_"+b.gxId+"_gxBlob",d)};this.expandCollapse=function(a,b){gx.evt.cancel(b,!0);var d=gx.dom.el(this.gxComponentContext+this.containerName+"Tbl");null!=d&&(this.collapsed?(d.style.display="block",a.src=gx.ajax.getImageUrl(gx,"collapseImage")):(d.style.display="none",a.src=gx.ajax.getImageUrl(gx,"expandImage")),this.collapsed=!this.collapsed,this.grid.gxCollapsed=this.collapsed,
this.parentGrid?(d=this.gridName.substring(this.gridName.lastIndexOf("_")),d=this.gxComponentContext+this.realGridName.toUpperCase()+"_Collapsed"+d):d=this.gxComponentContext+this.realGridName.toUpperCase()+"_Collapsed",gx.fn.setHidden(d,this.collapsed?"1":"0"))};this.getRowFromHtmlCtrl=function(a){var b=a.gxrow;gx.lang.emptyObject(b)&&(b=a.id.lastIndexOf("_"),b=a.id.substring(b+1));return this.grid.getRowByGxId(b)};this.showContextMenu=function(a,b){this.contextMenu.show(a,b)}},contextMenu:function(c){this.gxgrid=
c;this.controlName=this.gxgrid.containerName+"ContextMenu";this.eventSource=this.contextEvent=this.rowClicked=null;var f=new gx.text.stringBuffer;this.show=function(b,a){this.gxgrid.validateRow(b);this.contextEvent=a;this.eventSource=gx.evt.source(this.contextEvent);gx.evt.cancel(a,!0);this.rowClicked=b;this.startMenu();f.append('<div class="').append("menuItem").append('" id="').append("deleteRow").append('" align="center">').append(gx.getMessage("GXM_deleterow")).append("</div>");this.endMenu()};
this.startMenu=function(){f.clear();var b=this.getMenuCoords();f.append('<div onclick="').append(this.gxgrid.grid.gridObject()+".contextMenu.contextMenuClicked(event);").append('" onmouseover="');f.append(this.gxgrid.grid.gridObject()+".contextMenu.switchContextMenu();").append('" onmouseout="').append(this.gxgrid.grid.gridObject()+".contextMenu.switchContextMenu();").append('" oncontextmenu="gx.evt.cancel(event, true);');f.append('" style="').append("position:absolute;width:100;background-Color:menu; border: outset 1px gray;");
f.append("top:"+b.top+"; left:"+b.left+";").append('">')};this.endMenu=function(){f.append("</div>");var b=gx.dom.byId(this.controlName);null==b&&(b=document.createElement("SPAN"),ContextControlShadow=document.createElement("SPAN"),ContextControlShadow2=document.createElement("SPAN"),IFrameControl=document.createElement("IFRAME"),b.id=this.controlName,ContextControlShadow.id=this.controlName+"Shadow",ContextControlShadow2.id=this.controlName+"Shadow2",IFrameControl.id=this.controlName+"GXiFrameIEHack",
IFrameControl.src="about:blank",IFrameControl.style.zIndex=1,IFrameControl.style.visibility="hidden",IFrameControl.style.position="absolute",IFrameControl.frameBorder="0",document.body.appendChild(b),document.body.appendChild(ContextControlShadow),document.body.appendChild(ContextControlShadow2),document.body.appendChild(IFrameControl));gx.dom.shouldPurge()&&gx.dom.purge(b,!0);b.innerHTML=f.toString()};this.hide=function(){this.contextEvent=this.rowClicked=null;gx.dom.removeControl(gx.dom.byId(this.controlName))};
this.getMenuCoords=function(){var b=0,a=0,d=this.contextEvent;if(d.pageX||d.pageY)b=d.pageX,a=d.pageY;else if(d.clientX||d.clientY)b=d.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,a=d.clientY+document.body.scrollTop+document.documentElement.scrollTop;return{left:b,top:a}};this.contextMenuClicked=function(b){this.handleContextMenuAction(gx.evt.source(b).id);this.hide()};this.handleContextMenuAction=function(b){switch(b){case "deleteRow":this.gxgrid.setRowDeleted(this.rowClicked);
break;case "undeleteRow":this.gxgrid.setRowDeleted(this.rowClicked)}};this.switchContextMenu=function(){}},getPaddedRowId:function(c){c=""+c;return"0000".substring(0,4-c.length)+c},rowId:function(c){for(c=c.toString();4>c.length;)c="0"+c;return c},_init:function(){this.deleteMethod||(this.deleteMethod=this.deleteMethods.images);this.baseDeleteImage||(this.baseDeleteImage=this.deleteImage);this.deleteImage=this.deleteImage&&this.deleteMethod==this.deleteMethods.images?gx.ajax.getImageUrl(this,"baseDeleteImage"):
gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"delete_16x.jpg",!0);this.baseUndeleteImage||(this.baseUndeleteImage=this.undeleteImage);this.undeleteImage=this.undeleteImage&&this.deleteMethod==this.deleteMethods.images?gx.ajax.getImageUrl(this,"baseUndeleteImage"):this.deleteImage;this.deletePosition||(this.deletePosition=this.deletePositions.left);this.deletePositionFree||(this.deletePositionFree=this.deletePositions.topL);this.deleteTooltip=this.deleteTooltip?gx.getMessage(this.deleteTooltip):
"";this.deleteTitle=this.deleteTitle?gx.getMessage(this.deleteTitle):""},_deinit:function(){this.lastFocusCtrl=null}}}(gx.$);
gx.grid.impl=function(f){return function(c){var j=/style="([^"]*)"/ig;this.basePath=gx.basePath;this.imgsDir=gx.staticDirectory;this.columns=[];this.columnsHtmlName=[];this.columnsGxId=[];this.columnsGxAttId=[];this.rows=[];this.rowsById=[];this.rowsByGxId=[];this.fixedValues=[];this.align=this.width="";this.border="0";this.padding="1";this.spacing="0";this.sortColumn=-1;this.usePaging=this.ascSort=!0;this.eof=1;this.firstRecordOnPage=0;this.pageSize=9999;this.currentPage=1;this.gxLvl=0;this.gxGridName=
"";this.gxGridObject=null;this.gxBuffer=new gx.text.stringBuffer;this.evenRowCellClass=this.evenRowClass=this.oddRowCellClass=this.oddRowClass=this.columnHeaderTextClass=this.columnHeaderClass=this.highlightedNavigationLinkClass=this.navigationLinkClass=this.navigationClass=this.editControlClass=this.footerClass=this.headerClass=this.tableClass=this.gxParentRowId="";this.rowsValues=[];this.pagingButtonFirstClass="PagingButtonsFirst";this.pagingButtonPreviousClass="PagingButtonsPrevious";this.pagingButtonNextClass=
"PagingButtonsNext";this.pagingButtonLastClass="PagingButtonsLast";this.pagingButtonDisabled="gx-grid-paging-disabled";this.pagingBarClass="gx-grid-paging-bar";this.selectedRowClass="gx-row-selected";this.rendered=!1;"undefined"!=typeof Image?(this.ascLabel=new Image,this.descLabel=new Image):this.descLabel=this.ascLabel=null;this.id=c;this.container=null;this.setContainerDelayed=function(a){this.container=a};this.addColumn=function(a){if(a.isGxRemove())a.visible=false;var b=this.columns.length;a.index=
b;a.table=this;this.columns[b]=a;typeof a.htmlName!="undefined"&&(this.columnsHtmlName[a.htmlName]=a);typeof a.gxId!="undefined"&&(this.columnsGxId[a.gxId]=a);typeof a.gxAttId!="undefined"&&(this.columnsGxAttId[a.gxAttId]=a);return a};this.getColumnByIndex=function(a){return this.columns[a]};this.getColumnByCtrlType=function(a){return f.map(this.columns,function(b){return b.gxControl.type==a?b:null})};this.addRow=function(a,b){a.table=this;if(a!=null){this.rows[this.rows.length]=a;typeof a.id!="undefined"&&
(this.rowsById[a.id]=a);typeof a.gxId!="undefined"&&(this.rowsByGxId[a.gxId]=a);gx.lang.booleanValue(b)&&this.render();return a}};this.getColumnByHtmlName=function(a){var b,c;b=this.columnsHtmlName[a];if(typeof b=="undefined"&&typeof this.gxCmpContext!="undefined"&&this.gxCmpContext.length<a.length){c=a.substring(0,this.gxCmpContext.length);if(c==this.gxCmpContext){a=a.substring(this.gxCmpContext.length,a.length);b=this.columnsHtmlName[a]}}return b};this.getColumnByGxId=function(a){return this.columnsGxId[a]};
this.getColumnByGxAttId=function(a){return this.columnsGxAttId[a]};this.getColumnForVar=function(a){for(var b=0;b<this.columns.length;b++){var c=this.parentGxObject.getValidStruct(this.columns[b].gxId);if(c&&c.gxvar==a)return this.columns[b]}return null};this.getRowById=function(a){return this.rowsById[a]};this.getRowByGxId=function(a){return this.rowsByGxId[a]};this.setSort=function(a,b){if(a==this.sortColumn)this.ascSort=b==null?!this.ascSort:gx.lang.booleanValue(b);else{this.sortColumn=a;this.ascSort=
b==null?true:gx.lang.booleanValue(b)}this.doSort();this.ownerGrid.refreshGrid()};this.doSort=function(){this.sortColumn!=-1&&this.rows.sort(this.sort)};this.getControlName=function(a,b){return this.gxCmpContext+b.htmlName+"_"+a.gxId};this.getControlId=function(a,b){return this.getControlName(a,b)};this.getRowCount=function(){return this.rows.length};this.getMaxPage=function(){return Math.ceil(this.getRowCount()/this.pageSize)};this.isGxTrn=function(){return this.parentGxObject.isTransaction()};this.gridObject=
function(){return"gx.fn.gridObj('"+this.gxCmpContext+"','"+this.gxGridName+"',"+this.gxIsMasterPageGrid.toString()+")"};this.deleteImgId=function(a){return this.gxCmpContext+"delete"+this.gxGridName+"_"+a};this.showDeleteImage=function(a){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&this.isGxTrn())if((a=gx.dom.el(this.deleteImgId(a)))&&!gx.fn.isVisible(a)){a.style.display="inline";if(a.parentNode.nodeName=="A")a.parentNode.style.display="inline"}};this.appendDeleteHeader=function(a,
b){if(!this.gxIsFreestyle&&this.ownerGrid.deleteMethod!=gx.grid.deleteMethods.none){var c=this.isGxTrn(),f=false;if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)if(b==gx.grid.deletePositions.left)f=true;else return;else gx.grid.deletePosition==b&&(f=true);if(c&&f){c="&nbsp;";if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images)c=gx.grid.deleteTitle;a.append('<th class="'+this.columnHeaderClass+'">'+c+"</th>")}}};this.appendDeleteImage=function(a,b,c){if(this.ownerGrid.deleteMethod!=
gx.grid.deleteMethods.none&&this.isGxTrn()){var f=false,j=false;if(this.parentGxObject.Gx_mode!="DSP"&&this.parentGxObject.Gx_mode!="DLT"){f=b.gxDeleted();j=b.gxIsMod()||b.gxExists()}var l=this.deleteImgId(b.gxId),m=false;if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)if(c==gx.grid.deletePositions.left)m=true;else return;else if(!this.gxIsFreestyle&&gx.grid.deletePosition==c)m=true;else if(this.gxIsFreestyle){var n=gx.grid.deletePositionFree;c==gx.grid.deletePositions.left?m=n==gx.grid.deletePositions.topL||
n==gx.grid.deletePositions.bottomL:c==gx.grid.deletePositions.right&&(m=n==gx.grid.deletePositions.topR||n==gx.grid.deletePositions.bottomR);c=n}if(m){var p="<"+this.CELL_TAG+' class="gx-remove-row" style="text-align:'+this.deleteImageAlign(c)+";vertical-align:"+this.deleteVerticalAlign(c)+'">',c="</"+this.CELL_TAG+">",m="",n=false;if(f&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images)m=gx.grid.undeleteImage;else if(j&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images)m=gx.grid.deleteImage;
else if(f&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)m=gx.grid.deleteImage;else{m=gx.grid.deleteImage;n=true}f="";a.append(p);if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images){j=gx.fn.firstGridControl(this.ownerGrid.gridId);f=gx.grid.deleteTooltip;a.append('<a gxfocusable="1" href="javascript:'+this.gridObject()+".setRowDeleted('"+b.gxId+"');\"");a.append(' onfocus="gx.evt.onfocus(this,'+j+",'"+this.ownerGrid.gxComponentContext+"',"+this.ownerGrid.isMasterPageGrid+",'"+b.gxId+
"',"+this.ownerGrid.gridId+')"');b="";n&&(b=b+"display:none;");b&&a.append(' style="'+b+'"');a.append(">")}a.append('<img id="'+l+'" src="'+m+'"');f&&a.append(' title="'+f+'"');a.append(' style="border-style: none;');n&&a.append("display:none;");a.append('"');a.append(' class="gx-grid-delete"/>');this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&a.append("</a>");a.append(c)}}};this.deleteVerticalAlign=function(a){if(this.gxIsFreestyle){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)return"middle";
var b="top";if(a==gx.grid.deletePositions.bottomL||a==gx.grid.deletePositions.bottomR)b="bottom";return b}return"middle"};this.deleteImageAlign=function(a){if(this.gxIsFreestyle){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)return"left";var b="right";if(a==gx.grid.deletePositions.bottomL||a==gx.grid.deletePositions.topL)b="left";return b}return"center"};this.scroll_last_row_selector=function(a){return" tbody tr:nth-last-child("+Math.min(a/2,1)+")"};this.scroll_first_row_selector=function(){return" tbody tr:first-child"};
this.ROW_TAG="tr";this.CELL_TAG="td";this.ROW_BASE_CLASS="";this.getRowRenderingProps=function(a,b){var c=this.ROW_TAG,f=this.ROW_BASE_CLASS;if(this.gxIsFreestyle)c=this.CELL_TAG;this.gxIsFreestyle||(f=f+((f?" ":"")+(a?this.evenRowClass:this.oddRowClass)+(b?" RowDeleted":"")));return{cls:f,tag:c}};this.simpleAppendFn=function(a){return function(b){b.append(a)}};this.appendGridStyle=function(a){var b=j.exec(this.gxHtmlTags);b&&b.length>1&&a.append(b[1]);gx.lang.emptyObject(this.gxBackground)||a.append(";background-image:url('"+
gx.util.resourceUrl(this.gxBackground,true)+"');");gx.lang.emptyObject(this.gxBorderWidth)||a.append(";border: solid "+this.gxBorderWidth+"px ");gx.lang.emptyObject(this.gxBordercolor)?a.append(";"):a.append(this.gxBordercolor+";");this.ownerGrid.width>0&&a.append("width:"+this.ownerGrid.width+this.ownerGrid.widthUnit+";");this.gxAllowCollapsing&&this.gxCollapsed&&a.append(";display:none")};this.appendGridAttributes=function(a){a.append(this.gxHtmlTags.replace(j,""))};this.appendGridClassAttribute=
function(a){this.gxHtmlTags.indexOf("class=")==-1&&a.append(' class="'+this.gxCssClass+'"')};this.appendCollapsingWrapperStart=function(a){a.append('<div valign="top" ><div>');a.append('<img class="collapse-icon" style="cursor:pointer;" src="');this.gxCollapsed?a.append(gx.ajax.getImageUrl(gx,"expandImage")):a.append(gx.ajax.getImageUrl(gx,"collapseImage"));a.append('" onclick="'+this.gridObject()+'.expandCollapse(this, event);"></div><div>')};this.appendCollapsingWrapperEnd=function(a){a.append("</div></div>")};
this.appendContainerStart=function(a,b){b.append("<table ");this.appendGridClassAttribute(b);b.append(' id="'+a+'" ');gx.lang.emptyObject(this.gxToolTipText)||b.append('title="'+this.gxToolTipText+'" ');b.append('style="');this.appendGridStyle(b);b.append('" ');this.appendGridAttributes(b);if(!this.isAbstract){b.append('data-bkgstyle="');b.append(gx.grid.styles[this.gxTitleBackstyle]);b.append('" ')}b.append(">")};this.appendContainerEnd=this.simpleAppendFn("</table>");this.appendHeaderText=function(a,
b){gx.lang.emptyObject(this.headerText)||b.append('<tr><td colspan="'+a+'" class="'+this.headerClass+'">'+this.headerText+"</td></tr>")};this.appendFooterText=function(a,b){gx.lang.emptyObject(this.footerText)||b.append('<tr><td colspan="'+a+'" class="'+this.footerClass+'">'+this.footerText+"</td></tr>")};this.appendHeader=function(a,b){var c=a.length,f=[],j=gx.ajax.getImageUrl(gx,"ascImage"),l=gx.ajax.getImageUrl(gx,"descImage"),m=0,n;b.append("<thead>");b.append("<tr>");this.appendDeleteHeader(b,
gx.grid.deletePositions.left);for(var p=0;p<c;p++){var q=a[p];n=[this.columnHeaderClass,q.gxColumnClass].join(" ");b.append('<th class="'+n+'"');n="white-space:nowrap;";gx.lang.gxBoolean(q.visible)||(n=n+"display:none;");if(q.width){if(!q.gxWidthUnit)q.gxWidthUnit="px";n=n+("width:"+q.width+q.gxWidthUnit+";")}q.align&&(n=n+("text-align:"+q.align+";"));if(!gx.lang.emptyObject(this.gxTitleBackColor)&&(this.gxTitleBackstyle==gx.grid.styles.header||this.gxTitleBackstyle==gx.grid.styles.report)){n=n+("background-color:"+
this.gxTitleBackColor+";");this.gxRealTitleBackColor=this.gxTitleBackColor}if(!gx.lang.emptyObject(this.gxBackColor)&&this.gxTitleBackstyle==gx.grid.styles.uniform){n=n+("background-color:"+this.gxBackColor+";");this.gxRealTitleBackColor=this.gxBackColor}gx.lang.emptyObject(this.gxTitleForeColor)||(n=n+("color:"+this.gxTitleForeColor+";"));gx.lang.emptyObject(this.gxTitleFont)||(n=n+this.gxTitleFont);q.titlefontunderline?n=n+"text-decoration: underline;":q.titlefontstrikethru&&(n=n+"text-decoration: line-through;");
q.titlefontbold&&(n=n+"font-weight: bold;");q.titlefontitalic&&(n=n+"font-style: italic;");q.titlebackcolor&&(n=n+("background-color:"+gx.color.html(q.titlebackcolor).Html+";"));q.titleforecolor&&(n=n+("color:"+gx.color.html(q.titleforecolor).Html+";"));b.append(' style="'+n+';"');b.append(' data-colindex="'+m+'"');b.append(">");m++;if(gx.lang.emptyObject(gx.text.trim(q.title)))b.append("&nbsp;");else{b.append("<span");q.gxTooltip&&b.append(' title="'+q.gxTooltip+'"');q.sortable&&b.append(' onclick="'+
this.gridObject()+".grid.setSort("+q.index+');" onMouseOver="window.status=\''+this.sortMessage+"';return true;\" onMouseOut=\"window.status='';return true;\"");b.append(">");b.append(q.title);if(this.ascLabel!=null&&this.descLabel!=null){this.ascLabel.src=j;this.descLabel.src=l;q.sortable&&this.sortColumn==q.index&&b.append("&nbsp;"+this.handleLabel(this.ascSort?this.ascLabel:this.descLabel,f))}b.append("</span>")}b.append("</th>")}this.appendDeleteHeader(b,gx.grid.deletePositions.right);b.append("</tr>");
b.append("</thead>")};this.appendBodyWrapperStart=this.simpleAppendFn("<tbody>");this.appendBodyWrapperEnd=this.simpleAppendFn("</tbody>");this.appendFooterWrapperStart=this.simpleAppendFn("<tfoot>");this.appendFooterWrapperEnd=this.simpleAppendFn("</tfoot>");this.appendRowStart=this.simpleAppendFn("<tr>");this.appendRowEnd=this.simpleAppendFn("</tr>");this.appendRowBreaksWrapperStart=this.simpleAppendFn("<table width='100%' data-cellspacing='0' data-cellpadding='0'><tbody>");this.appendRowBreaksWrapperEnd=
this.simpleAppendFn("</tbody></table></td>");this.appendCellPrefixEnd=this.appendCellPrefixStart=this.appendRowPrefix=gx.emptyFn;this.beforeRender=function(){this.tableClass=this.gxCssClass;this.evenRowClass=this.gxEvenLinesClass;this.oddRowClass=this.gxOddLlinesClass;this.columnHeaderTextClass=this.columnHeaderClass=this.headerClass=this.gxTitleClass;this.evenRowCellClass=this.evenRowClass;this.oddRowCellClass=this.oddRowClass;f.each(this.beforeRenderCallbacks,function(a,b){b()});this.beforeRenderCallbacks=
[]};this.drawEmptyContent=function(){var a=this.ownerGrid,b=a.gxComponentContext+a.containerName+"Tbl";a.emptyText&&f("#"+b+" + .gx-text-gridnodata").length===0&&f(document.createElement("div")).addClass("GridNoDataText gx-text-gridnodata").text(a.emptyText).insertAfter(f("#"+b));this.rows.length===0?f("#"+b).attr("data-gx-grid-nodata",""):f("#"+b).removeAttr("data-gx-grid-nodata")};this.render=function(a,b,c,g){var a=!!a,j=this.gxCmpContext+this.gxGridObject+"Tbl";this.beforeRender();a=this.drawGrid(j,
a,b,c);if(gx.dom.shouldPurge()){for(var l=["onblur","onclick","onfocus","onchange"],m=gx.dom.byTag("input",this.container),c=0,b=m.length;c<b;c++)gx.dom.purgeElement(m[c],l);m=gx.dom.byTag("textarea",this.container);c=0;for(b=m.length;c<b;c++)gx.dom.purgeElement(m[c],l);m=gx.dom.byTag("select",this.container);c=0;for(b=m.length;c<b;c++)gx.dom.purgeElement(m[c],l);m=gx.dom.byTag("span",this.container);c=0;for(b=m.length;c<b;c++)gx.dom.purgeElement(m[c],l);m=gx.dom.byTag("img",this.container);c=0;for(b=
m.length;c<b;c++)gx.dom.purgeElement(m[c],l)}var n=gx.dom.getActiveElement(),b=n&&(n.id||n.name)&&gx.dom.isChildNode(n,this.container),p=gx.dom.getCaretOffset(n);gx.csv.IgnoreBlur=true;this.ownerGrid.additiveResponse?this.ownerGrid.InverseLoading?f(a).insertBefore(this.firstItemSelector):f(a).insertAfter(this.lastItemSelector):this.container.innerHTML=a;gx.csv.IgnoreBlur=false;b&&setTimeout(function(){var a=gx.dom.el(n.id||n.name);if(a){gx.csv.disableFocus=true;a.offsetWidth>0&&a.offsetHeight>0&&
gx.fn.setFocus(a,function(){gx.dom.setCaretOffset(a,p)})}},10);this.drawEmptyContent();this.afterRender(j);g();this.rendered=true};this.afterRender=function(){this.rendered||this.defineEventHandlers()};this.drawGrid=function(a,b,c,f){var j=this.isGxTrn(),l=this.gxIsFreestyle&&this.gxGridCols>1,m=new gx.text.stringBuffer,n=this.columns,c=n.length,p,q,u,s;!this.gxIsFreestyle&&j&&c++;var r,t,v;if(this.ownerGrid.additiveResponse){r=this.firstRecordOnPage=="0"?0:this.lastRenderedRow;t=this.rows.length}else if(Number(this.pageSize)!==
0){v=this.getMaxPage();if(this.currentPage<=0)this.currentPage=1;else if(this.currentPage>v)this.currentPage=v;r=Math.max(this.pageSize*(this.currentPage-1),0);t=Math.min(r+this.pageSize,this.rows.length)}else{r=0;t=this.rows.length}this.gxAllowCollapsing&&this.appendCollapsingWrapperStart(m);var y=n.length;if(!this.ownerGrid.additiveResponse){this.appendContainerStart(a,m);this.appendHeaderText(c,m);this.gxIsFreestyle||this.appendHeader(n,m);this.appendBodyWrapperStart(m)}var z=true,a=function(){z=
!z;var a=this.rows[p];b&&(p===r&&!gx.fn.currentGridRowImpl(this.gxId))&&gx.fn.setCurrentGridRow(this.gxId,a.gxId);var c=a.gxDeleted(),k=new gx.text.stringBuffer,H=this.getRowRenderingProps(z,c,p,r,t);if(l&&this.gxIsFreestyle&&(p>0&&p%this.gxGridCols===0||p===0&&this.gxGridCols>0)){p>0&&this.appendRowEnd(m,p,r,t);this.appendRowStart(m,p,r,t)}var w="";this.gxTitleBackstyle==gx.grid.styles.report&&(w=z?this.gxLinesBackcolorEven:this.gxLinesBackcolorOdd);if(this.gxTitleBackstyle==gx.grid.styles.header)w=
this.gxLinesBackcolorOdd;if(this.gxTitleBackstyle==gx.grid.styles.uniform)w=this.gxBackColor;if(!this.gxIsFreestyle||this.gxIsFreestyle&&l){this.appendRowPrefix(k,p,r,t);k.append("<"+H.tag+" id='"+this.gxCmpContext+this.gxGridObject+"Row_"+a.gxId+"'");k.append(' data-gxrendering_row=""');if(this.gxIsFreestyle&&l){k.append(' data-gxrow="'+a.gxId.toString()+'"');(s=this.columns[1].gxControl.verticalAlign)&&k.append(' data-cell-valign="'+s+'"')}else k.append(' data-gxrow="'+a.gxId.toString()+'"');k.append(' class="'+
H.cls+'"');a.selected&&k.append(' data-selected="1"');var A="";w&&(A="background-color:"+w+";");gx.lang.emptyObject(this.gxLinesFont)||(A=A+this.gxLinesFont);A&&k.append(' style="'+A+'" ');k.append(">");m.append(k.toString())}if(this.gxIsFreestyle){l&&this.appendRowBreaksWrapperStart(m,a);u=this.gxBuffer.toString();m.append(u)}this.gxIsFreestyle||this.appendDeleteImage(m,a,gx.grid.deletePositions.left);this.appendCellPrefixStart(m,p,r,t,a,H);for(k=0;k<y;k++){q=n[k];var H=gx.lang.gxBoolean(q.visible),
v=a.gxProps[q.index],B=a.values[q.index],A=q.gxControl;if(this.gxIsFreestyle&&A.type==gx.html.controls.types.row&&q.index===0)A.isFreestyleRow=true;A.setGridData({grid:this.ownerGrid,row:a,gridId:this.gxId,gridRow:a.gxId});if(f){delete A.formattedValue;A.value=B;A.id=q.htmlName+"_"+A.gridRow}else A.setProperties.apply(A,v);if(b)delete gx.usrPtys[A.id];else if(gx.usrPtys[A.id]!==void 0)for(var F in gx.usrPtys[A.id]){if(F=="enabled")A.rtEnabled=true;A.setIndividualProp(F,gx.usrPtys[A.id][F])}if(c){A.rtEnabled=
true;A.enabled=false}if(typeof v.Value!=="undefined"){B=this.parentGxObject.getValidStruct(q.gxId);A.value=gx.decimalPoint!="."&&B&&B.type=="decimal"&&typeof v.Value=="string"?v.Value.replace(".",gx.decimalPoint):v.Value}if(typeof v.FormattedValue!=="undefined")A.formattedValue=v.FormattedValue;if(v.Values)A.possibleValues=v.Values.v;if(this.gxIsFreestyle&&A.type==gx.html.controls.types.row&&q.index===0){A.id=this.gxCmpContext+this.gxGridObject+"Row_"+a.gxId;if(j&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)A.oncontextmenu=
this.gridObject()+".showContextMenu(this, event);";if(w)A.style=A.style+("background-color:"+w+";")}if(!this.gxIsFreestyle){m.append("<"+this.CELL_TAG+' class="gx-attribute '+(A.columnClass||"")+'" data-cell-valign="'+q.valign+'"');m.append(' data-colindex="'+k+'"');v="";if(!H){v=v+"display:none;";A.visible&&(!q.isGxRemove()&&!this.ownerGrid.isPromptColumn(q))&&this.ownerGrid.addColPropertyAfterRender(k,"Visible",1)}if(q.width){if(!q.gxWidthUnit)q.gxWidthUnit="px";v=v+("width:"+q.width+q.gxWidthUnit+
";")}else if(q.gxColSize)A.colSize=q.gxColSize;q.align&&(v=v+("text-align:"+q.align+";"));A.style&&(v=v+A.style);v&&m.append(' style="'+v+'" ');m.append(">")}m.append(A.getHtml());this.gxIsFreestyle&&(A.type==gx.html.controls.types.row&&q.index===0)&&this.appendDeleteImage(m,a,gx.grid.deletePositions.left);A.persistValue();this.gxIsFreestyle||m.append("</"+this.CELL_TAG+">");if(this.gxIsFreestyle){q.index==this.columns.length-1&&this.appendDeleteImage(m,a,gx.grid.deletePositions.right);u=q.buffer.toString();
m.append(u)}}this.appendCellPrefixEnd(m,p,r,t);this.gxIsFreestyle&&l?this.appendRowBreaksWrapperEnd(m):this.appendDeleteImage(m,a,gx.grid.deletePositions.right)};if(this.ownerGrid.InverseLoading)for(p=t-1;p>=r;p--)a.apply(this);else for(p=r;p<t;p++)a.apply(this);this.gxIsFreestyle&&(this.gxGridCols>0&&l)&&this.appendRowEnd(m);this.lastRenderedRow=t;if(!this.ownerGrid.additiveResponse){this.appendBodyWrapperEnd(m);this.appendFooterWrapperStart(m);!this.ownerGrid.InfiniteScrolling&&(j||this.hasPagingButtons())&&
this.appendNavigationBar(c,m);this.appendFooterText(c,m);this.appendFooterWrapperEnd(m);this.appendContainerEnd(m);this.gxAllowCollapsing&&this.appendCollapsingWrapperEnd(m)}a=m.toString();m.clear();m=null;return a};this.defineEventHandlers=function(){if(!this.gxIsFreestyle){gx.evt.attach(this.container,"mouseover",this.mouseOverHandler,this);gx.evt.attach(this.container,"mouseout",this.mouseOutHandler,this)}this.isGxTrn()&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu&&gx.evt.attach(this.container,
"contextmenu",this.contextMenuHandler,this);gx.evt.attach(this.container,"mousedown",this.mouseDownHandler.closure(this,[],true),this);gx.evt.attach(this.container,"click",this.clickHandler,this);this.isGxTrn()&&gx.evt.attach(this.container,"keydown",this.keyDownHandler,this)};this.isGridRow=function(a){return a&&a.tagName.toLowerCase()==this.ROW_TAG&&a.getAttribute("data-gxrow")!=null&&f(a).closest(".gx-grid")[0]==this.container};this.getTargetRow=function(a,b){for(var c=a;c&&gx.dom.isChildNode(c,
this.container);){if(this.isGridRow(c)&&(!b||b=="body"&&c.parentNode.tagName=="TBODY"||b=="header"&&c.parentNode.tagName=="THEAD"))return c;c=gx.dom.findParentByTagName(c,this.ROW_TAG)}};this.mouseOverHandler=function(a){if(this.gxAllowHovering)(a=this.getTargetRow(gx.evt.source(a)))&&a.getAttribute("data-selected")!="1"&&this.startRowHover(a,parseInt(a.getAttribute("data-gxrow").substring(0,4),10)-1)};this.mouseOutHandler=function(a){if(this.gxAllowHovering)(a=this.getTargetRow(gx.evt.source(a)))&&
a.getAttribute("data-selected")!="1"&&this.endRowHover(a,parseInt(a.getAttribute("data-gxrow").substring(0,4),10)-1)};this.contextMenuHandler=function(a){var b=this.getTargetRow(gx.evt.source(a));b&&this.ownerGrid.showContextMenu(b,a)};this.mouseDownHandler=function(a,b){var c=this.getTargetRow(gx.evt.source(a));if(c){b=typeof b==="undefined"?this.gxAllowSelection&&!this.gxIsFreestyle:b;this.setRowSelected(c,c.getAttribute("data-gxrow"),true,b)}};this.keyDownHandler=function(a){this.getTargetRow(gx.evt.source(a))&&
this.ownerGrid.rowKeyPressed(a)};this.clickHandler=function(a){var b=gx.evt.source(a);b.parentNode&&gx.dom.hasClass(b.parentNode,this.pagingBarClass)&&gx.evt.waitGridRefresh(function(){this.pagingHandler(b,a)}.closure(this))};this.pagingHandler=function(a,b){var c="";gx.evt.cancel(b,true);if(!gx.dom.hasClass(a,this.pagingButtonDisabled)){gx.dom.hasClass(a,this.pagingButtonFirstClass)?c="FIRST":gx.dom.hasClass(a,this.pagingButtonPreviousClass)?c="PREV":gx.dom.hasClass(a,this.pagingButtonNextClass)?
c="NEXT":gx.dom.hasClass(a,this.pagingButtonLastClass)&&(c="LAST");this.changeGridPage(c)}};this.changeGridPage=function(a,b){var c=f.Deferred(),g=this.gxGridName.toUpperCase()+"PAGING",j=this.ownerGrid,l="",m;if(a){j.InfiniteScrolling||this.mask();if(gx.pO.fullAjax){gx.setGxO(this.parentGxObject);l="E"+j.realGridName.toUpperCase()+"_"+a+"PAGE"+(j.isMasterPageGrid?"_MPAGE":"");if(j.parentGrid)m=j.parentGrid.gridId}else{gx.fn.setHidden(this.gxCmpContext+g,a);l=this.gxCmpContext+"E"+g+"."}gx.evt.execEvt(void 0,
void 0,l,gx.evt.dummyCtrl,m,void 0,void 0,false,function(){this.unmask();c.resolve()}.closure(this),b);return c.promise()}};this.setRowSelected=function(a,b,c,g){var g=g===void 0||g,j=function(){var c=gx.O;if(!gx.lang.emptyObject(this.parentGxObject)){if(g&&!gx.runtimeTemplates){if(a.gxOriginalBackcolor===void 0)a.gxOriginalBackcolor=a.style.backgroundColor;gx.dom.forEachChild(a,this,function(b){if(a.gxOriginalBackcolor===void 0)b.gxOriginalBackcolor=b.style.backgroundColor})}this.instanciateSelectionVars(b);
var k=this.rows.length,j,o=[];for(j=0;j<k;j++){var q=this.rows[j];q.selected=q.gxId==b;if(q.selected){if(g){if(!gx.runtimeTemplates){a.gxSBackcolor=a.gxOriginalBackcolor!==void 0?a.gxOriginalBackcolor:a.style.backgroundColor;a.style.backgroundColor=this.gxSelectionColor.Html}gx.dom.addClass(a,this.selectedRowClass);f(a).attr("data-gxselected","")}o.push(q)}else if(g){var u=gx.dom.el(this.gxCmpContext+this.gxGridObject+"Row_"+q.gxId);if(u!=null&&u.gxSBackcolor!==void 0&&!gx.runtimeTemplates){u.style.backgroundColor=
u.gxSBackcolor;gx.util.browser.isIE()&&gx.dom.forEachChild(u,this,function(a){if(a!=null&&a.gxSBackcolor!==void 0)a.style.backgroundColor=u.style.backgroundColor})}gx.dom.removeClass(u,this.selectedRowClass);f(u).removeAttr("data-gxselected")}}for(j=0;j<o.length;j++){this.instanciateSelectedRow(o[j]);g&&!gx.runtimeTemplates&&gx.util.browser.isIE()&&gx.dom.forEachChild(a,this,function(a){a.gxSBackcolor=a.gxOriginalBackcolor!==void 0?a.gxOriginalBackcolor:a.style.backgroundColor;a.style.backgroundColor=
this.gxSelectionColor.Html})}gx.setGxO(c)}};c&&(g||gx.O.isTransaction())?setTimeout(j.closure(this),100):j.call(this)};this.instanciateSelectionVars=function(a){gx.setGxO(this.parentGxObject);gx.fn.setCurrentGridRow(this.gxId,a);gx.fn.setHidden(this.gxCmpContext+this.gxGridName.toUpperCase()+"_ROW",a.substring(0,4))};this.instanciateSelectedRow=function(a){this.setSelectedRowVars(a);if(this.gxOnLineActivate&&!this.ownerGrid.isLoading){gx.csv.instanciatedRowGrid=this.ownerGrid;this.parentGxObject[this.gxOnLineActivate].call(this.parentGxObject,
a.gxId)}};this.setSelectedRowVars=function(a){for(var b=this.parentGxObject,c=this.columns.length,f=0;f<c;f++){var j=this.columns[f],l=b.GXValidFnc[j.gxId];if(l!=null){var m=a.values[f];if(this.ownerGrid.isUsercontrol)m=this.properties[a.id][j.index].value;l.v2v&&l.c2v(m)}}};this.startRowHover=function(a,b){if(!gx.runtimeTemplates){if(a.gxOriginalBackcolor===void 0)a.gxOriginalBackcolor=a.style.backgroundColor;gx.dom.forEachChild(a,this,function(a){if(a.gxOriginalBackcolor===void 0)a.gxOriginalBackcolor=
a.style.backgroundColor});var c=this.getRowById(b);if(this.gxAllowHovering&&this.gxHoverColor&&!c.selected){a.gxHBackcolor=a.style.backgroundColor;a.style.backgroundColor=this.gxHoverColor.Html;gx.util.browser.isIE()&&gx.dom.forEachChild(a,this,function(a){a.gxHBackcolor=a.style.backgroundColor;a.style.backgroundColor=this.gxHoverColor.Html})}}};this.endRowHover=function(a,b){if(!gx.runtimeTemplates){var c=this.getRowById(b);if(this.gxAllowHovering&&!c.selected&&a.gxHBackcolor!==void 0){a.style.backgroundColor=
a.gxHBackcolor;gx.util.browser.isIE()&&gx.dom.forEachChild(a,this,function(a){if(a.gxHBackcolor!==void 0)a.style.backgroundColor=a.gxHBackcolor})}}};this.hasPagingButtons=function(){return this.usePaging&&(!this.isFirstPage()||!this.isLastPage())};this.appendNavBarRowStart=function(a,b){gx.lang.emptyObject(this.gxRealTitleBackColor)?b.append('<tr><td colspan="'+a+'" class="'+this.navigationClass+'" style="text-align: center;">'):b.append('<tr><td colspan="'+a+'" class="'+this.navigationClass+'" style="text-align: center;background-color:'+
this.gxRealTitleBackColor+';">')};this.appendNavBarRowEnd=function(a){a.append("</td></tr>")};this.appendNavigationBar=function(a,b){var c=this.getRowCount(),f=a,c=(c>0||c===0&&!this.isFirstPage())&&this.usePaging,j=this.parentGxObject.Gx_mode,j=this.isGxTrn()&&!this.gxHasAddlines&&!(j=="DSP"||j=="DLT");this.navigationClass=this.gxFooterClass;if(this.gxIsFreestyle&&this.gxGridCols>1)f=this.gxGridCols;(c||j)&&this.appendNavBarRowStart(f,b);if(c){b.append('<div class="'+this.pagingBarClass+'" style="padding-bottom:5px;">');
if(this.currentPage<=0)this.currentPage=1;b.append(this.buildPagingButton(this.pagingButtonFirstClass,!this.isFirstPage(),gx.getMessage("GXM_first")));b.append(this.buildPagingButton(this.pagingButtonPreviousClass,!this.isFirstPage(),gx.getMessage("GXM_previous")));b.append(this.buildPagingButton(this.pagingButtonNextClass,!this.isLastPage(),gx.getMessage("GXM_next")));b.append(this.buildPagingButton(this.pagingButtonLastClass,!this.isLastPage(),gx.getMessage("GXM_last")));b.append("</div>")}j&&b.append(this.buildLink("["+
this.gxNewRowText+"]",this.gridObject()+".getNewRows(1,event);",this.gxNewRowText,this.gxGridObject+"_NewRow",this.gridObject()+".gxNewRowFocused(this);"));(c||j)&&this.appendNavBarRowEnd(b)};this.buildPagingButton=function(a,b,c){return'<button class="'+a+(b?"":" "+this.pagingButtonDisabled)+'"'+('style="padding-left:20px;padding-bottom:5px;'+(b?"":"opacity:.7;cursor:default")+'"')+' title="'+c+'"'+(b?"":" disabled")+"/>"};this.buildLink=function(a,b,c,f,j){var l=this.navigationLinkClass;return"<a class='gx_newrow' type='gxlink' style='text-decoration:none;' tabindex='0' onfocus=\""+
j+'" onblur="this.style.textDecoration = \'none\';"><span '+(f!==void 0?'id="'+f+'"':"")+' style="'+("cursor:"+(document.createTextRange?"hand":"pointer")+";")+'" class="'+l+'" onclick="'+b+'" onMouseOver="this.className=\''+this.highlightedNavigationLinkClass+"';window.status='"+c+"';return true;\" onMouseOut=\"this.className='"+l+"';window.status='';return true;\">"+a+"</span></a>"};this.isLastPage=function(){return this.eof!="0"};this.isFirstPage=function(){return(gx.lang.emptyObject(this.firstRecordOnPage)?
"0":this.firstRecordOnPage)=="0"};this.getWebImageTag=function(a){return'<img border="0" src="/'+this.basePath+this.imgsDir+a.toString()+'"/>'};var b=0;this.handleLabel=function(a){if(a.src){var d="img"+b;b++;return"<img name='"+d+"' border='0' src='"+a.src+"'>"}return a};this.sort=function(a,b){if(a.table.isGxTrn()){if(!a.gxExists()&&!b.gxExists()&&!a.gxIsMod()&&!b.gxIsMod())return 0;if(!a.gxExists()&&b.gxExists()||!a.gxIsMod()&&b.gxIsMod())return 1;if(a.gxExists()&&!b.gxExists()||a.gxIsMod()&&!b.gxIsMod())return-1}var c=
a.table,f=c.getColumnByIndex(c.sortColumn),j,l;j=a.values[c.sortColumn];l=b.values[c.sortColumn];gx.lang.instanceOf(j,Array)||(j=[j]);gx.lang.instanceOf(l,Array)||(l=[l]);switch(f.type){case gx.types.numeric:f=function(a){a=gx.num.parseFloat(a,gx.thousandSeparator,gx.decimalPoint);isNaN(a)&&(a=0);return a};break;case gx.types.date:case gx.types.dateTime:f=function(a){try{a=(new gx.date.gxdate(a)).Value}catch(b){gx.dbg.logEx(b,"JSTable.js","sort")}return a.valueOf()};break;case gx.types.bool:f=function(a){return gx.lang.booleanValue(a)?
1:0};break;default:f=function(a){return(""+a).replace(/<[^\>]*\>/g,"").toUpperCase()}}for(var m=Math.max(j.length,l.length),n=0,p=0;n===0&&p<m;p++){var q=j[p];q==null&&(n=-1);var u=l[p];u==null&&(n=1);if(n===0){q=f(q);u=f(u);n=typeof q.localeCompare=="function"?q==u?0:q.localeCompare(u):q==u?0:q>u?1:-1}n!==0&&(n=n*(c.ascSort?1:-1))}return n};this.mask=function(){var a=this.container||typeof this.getContainerControl==="function"&&this.getContainerControl();a.firstChild&&gx.dom.mask(a.firstChild)};
this.unmask=function(){var a=this.container||typeof this.getContainerControl==="function"&&this.getContainerControl();a.firstChild&&gx.dom.unmask(a.firstChild)}}}(gx.$);
gx.grid.column=function(f,c,j,b,a){this.table=null;this.index=-1;this.title=f||"";this.type="undefined"!=typeof c?c:gx.types.character;this.width=j||"";this.align=b||"left";this.valign=a||"middle";this.htmlName=null;this.sortable=this.enabled=this.visible=!0;this.rowspan=this.colspan=1;this.gxAttId=this.gxId=-1;this.gxWidthUnit=this.gxAttName="";this.gxUnChecked=this.gxChecked=void 0;this.buffer=new gx.text.stringBuffer;this.isGxRemove=function(){return this.gxAttName?-1!=this.gxAttName.indexOf("GxRemove")||
-1!=this.gxAttName.indexOf("nRcdDeleted"):!1}};
gx.grid.row=function(f,c,j,b){this.table=null;this.id=f;this.gxParentRowId=b||"";this.gxId=j+this.gxParentRowId;this.gxCmpContext="";this.values=[];this.selected=!1;this.gxLvl=0;this.gxProps=c.Props||[];this.gxRenderProps=c.RenderProps||[];this.gxGrids=[];this.gxKeyValues=[];this.gxExists=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nRcdExists_"+this.gxLvl+"_"+this.gxId);return null!=a?0!==Number(a):!1};this.gxIsMod=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nIsMod_"+this.gxLvl+"_"+
this.gxId);return null!=a?0!==Number(a):!1};this.gxDeleted=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nRcdDeleted_"+this.gxLvl+"_"+this.gxId);return null!=a?0!==Number(a):!1};this.setDeleted=function(a){gx.fn.setHidden(this.gxCmpContext+"nRcdDeleted_"+this.gxLvl+"_"+this.gxId,a?1:0)}};
gx.grid.responsiveGrid=function(f){var c=["xs","sm","md","lg"];return function(j){j=new gx.grid.impl(j);j.appendContainerStart=function(b,a){a.append("<div ");this.appendGridClassAttribute(a);a.append(' id="'+b+'" ');gx.lang.emptyObject(this.gxToolTipText)||a.append('title="'+this.gxToolTipText+'" ');a.append('style="');this.appendGridStyle(a);a.append('" ');a.append(">")};j.scroll_last_row_selector=function(){return(1<this.gxGridCols?" >DIV":" ")+">DIV[data-gxrow]:last"};j.scroll_firt_row_selector=
function(){return(1<this.gxGridCols?" >DIV":" ")+">DIV[data-gxrow]:first"};j.ROW_TAG="div";j.CELL_TAG="div";j.ROW_BASE_CLASS="row";j.getRowRenderingProps=function(b,a){var d=this.ROW_TAG,k=this.ROW_BASE_CLASS,g=this.gxGridResponsiveCols;this.gxIsFreestyle&&(d=this.CELL_TAG,k=f.map(c,function(a,b){return["col-",a,"-",Math.floor(12/(g[b]||12))||1].join("")}).join(" "));this.gxIsFreestyle||(k+=" "+(b?this.evenRowClass:this.oddRowClass)+(a?" RowDeleted":""));return{cls:k,tag:d}};j.appendGridClassAttribute=
function(b){b.append(' class="'+this.gxCssClass+'"')};j.appendContainerEnd=j.simpleAppendFn("</div>");j.appendHeaderText=gx.emptyFn;j.appendFooterText=gx.emptyFn;j.appendHeader=gx.emptyFn;j.appendBodyWrapperStart=gx.emptyFn;j.appendBodyWrapperEnd=gx.emptyFn;j.appendFooterWrapperStart=j.simpleAppendFn("<div>");j.appendFooterWrapperEnd=j.simpleAppendFn("</div>");j.appendRowStart=function(b,a,d){a==d&&!0!==this.ownerGrid.additiveResponse&&b.append('<div class="row">')};j.appendRowEnd=function(b,a,d,
c){a==c&&!0!==this.ownerGrid.additiveResponse&&b.append("</div>")};j.appendRowBreaksWrapperStart=function(b,a){b.append("<div>");this.appendDeleteImage(b,a,gx.grid.deletePositions.left)};j.appendRowBreaksWrapperEnd=j.simpleAppendFn("</div></div>");j.appendRowPrefix=function(b,a,d){if(a!=d){var k=this.gxGridResponsiveCols,g=!1,d=f.map(c,function(b,d){return 1!=k[d]&&0===a%k[d]||0===k[d]&&0===a%12?(g=!0,"visible-"+b):""}).join(" ");g&&b.append('<div class="clearfix '+d+'"></div>')}};j.appendCellPrefixStart=
function(b,a,d,c,f){1==this.gxGridCols&&(b.append('<div id="'+this.gxCmpContext+this.gxGridObject+"Row_"+f.gxId+'" data-gxrow="'+f.gxId.toString()+'" class="row"><div class="col-xs-12">'),this.appendDeleteImage(b,f,gx.grid.deletePositions.left))};j.appendCellPrefixEnd=function(b){1==this.gxGridCols&&b.append("</div></div>")};j.appendNavBarRowStart=function(b,a){a.append('<div class="row"><div class="col-xs-12 '+this.navigationClass+'">')};j.appendNavBarRowEnd=function(b){b.append("</div></div>")};
return j}}(gx.$);
gx.GxObject=function(f){var c=function(){this._isTrn=null;this.ServerClass=this.Gx_mode="";this.ReadonlyForm=!1;this.ObjectType="web";this.MasterPage=null;this.IsComponent=this.IsMasterPage=!1;this.AjaxSecurity=!0;this.OnSessionTimeout=gx.ajax.timeoutActions.ignore;this.JustCreated=!1;this.CmpContext="";this.WebComponents=[];this.Grids=[];this.UserControls={};this.GridUCsProps={};this.GridUCsEvts={};this.UCBindings=[];this.GXValidFnc=[];this.GXLastCtrlId=0;this.GXCtrlIds=[];this.MsgList=[];this.CmpControls=
{};this.VarControlMap={};this.FormBCs={};this.GridBCs={};this.LvlOlds=[];this.Events={};this.EvtParms={};this.InternalParms={};this.conditionsChanged=this.autoRefresh=this.focusOnlyNEmb=this.hasEnterEvent=!1;this.toValid=this.fromValid=0;this.getValidStructFld_cache={};this.cmpRegex=gx.GxObject.CONTROL_CMP_REGEX;this.rowPatternRegex=/_([0-9]{4})*$/;this.sPrefix=function(){return this.CmpContext};this.postEventPopupCommands=[];this.declareDomainHdlr=function(a,b){this.GXValidFnc[a].dom_hdl=b};this.setVCMap=
function(a,b,d,c){this.VarControlMap[a]={id:b,grid:d,type:c}};this.Initialize=function(){this.InitStandaloneVars();this.initTargets()};this.InitStandaloneVars=function(){var a=gx.O;gx.setGxO(this);this.SetStandaloneVars();null!=a&&gx.setGxO(a)};this.getCmpType=function(a){a=this.cmpRegex.exec(a);this.cmpRegex.lastIndex=0;return a};this.getContainer=function(){if(this.containerControl)return gx.dom.el(this.containerControl);if(!this.CmpContext&&!this.IsMasterPage)return f(".gx-content-placeholder").get(0)||
document.body;var a,b=this.getCmpType(this.CmpContext);b&&(a=gx.dom.el(b[1]+"gxHTMLWrp"+b[2]+(b[3]||"")));if(a)return a};this.setContainer=function(a){this.containerControl=a};this.setObjectType=function(a){this.ObjectType=a};this.getObjectType=function(){return this.ObjectType};this.isTransaction=function(){return null!=this._isTrn?this._isTrn:this._isTrn="trn"==this.getObjectType()};this.setAjaxSecurity=function(a){this.AjaxSecurity=a};this.setOnAjaxSessionTimeout=function(a){switch(a){case "Warn":this.OnSessionTimeout=
gx.ajax.timeoutActions.warn;break;case "CallObj":this.OnSessionTimeout=gx.ajax.timeoutActions.callObj}};this.addKeyListener=function(a,b){gx.evt.addKeyListener(this.CmpContext,a,b)};this.clearMessages=function(){this.MsgList.length=0};this.addMessage=function(a){this.MsgList.push(a)};this.showMessages=function(){for(var a=[],b=this.MsgList.length,d=0;d<b;d++)a.push({att:"",type:2,text:this.MsgList[d]});b={};b[""==this.CmpContext?"MAIN":this.CmpContext]=a;gx.fn.setErrorViewer(b);this.clearMessages()};
this.setPrompt=function(a,b){gx.fn.attachCtrl(this.CmpContext+a,{id:a,isPrompt:!0,wc:this.CmpContext,mp:this.IsMasterPage,controls:b,obj:this});this.promptKeyHandlers||(this.promptKeyHandlers={});this.promptKeyHandlers[a]=function(b){if((b=(b||gx.dom.el(a)).parentNode)&&b.href)if((b=b.href.match("javascript:(.+)"))&&b.length>1){b=decodeURIComponent(b[1]);try{eval(b)}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","setPrompt")}}}};this.readServerVars=function(){if(!gx.lang.emptyObject(gx.csv.lastEvtResponse)){for(var a=
[],b=gx.csv.lastEvtResponse.gxValues,d=b.length,c=0;c<d;c++){var f=b[c];if(f.CmpContext==this.CmpContext&&gx.lang.booleanValue(f.IsMasterPage)==this.IsMasterPage){a.push(f);break}}gx.fn.setJsonValues(a)}};this.call=function(a,b,d){gx.nav.willRedirect(a)?this.postEventRedirect={url:gx.http.formatLink(a,b),forceDisableFrm:!1}:gx.nav.call.apply(gx.nav,arguments)};this.callUrl=function(a,b){gx.nav.willRedirectByUrl(a)?this.postEventRedirect={url:a,forceDisableFrm:!1}:gx.nav.callUrl.apply(gx.nav,arguments)};
this.popupOpen=function(a){this.postEventPopupCommands.push({popup:gx.lang.clone(a)})};this.popupOpenUrl=function(a,b){this.postEventPopupCommands.push({popup:gx.popup.openUrlToOpenPopupParms(a,b)})};this.refreshInputs=function(a){for(var b=a.length,d=0;d<b;d++){var c=this.getValidStructFld(a[d][1]);null!=c&&"function"==typeof c.c2v&&c.c2v()}};this.refreshOutputs_impl=function(a){for(var b=[],d=0,c=a.length;d<c;d++){var f=a[d];if(f.fld){var k=this.getValidStructFld(f.fld);if(null!=k)gx.fn.v2c(k),
f=gx.fn.getControlGridRef(k.fld,k.grid),gx.csv.invalidateGXCtrl(f),gx.fn.setControlOldValue(f,k.val());else{k=this.getVariable(f.av);if(null!=k&&"object"==typeof k){var g=this.getFormBCForVar(f.av);null!=g&&this.bcToScreen(g,k);(g=this.getGridForColl(f.av))&&g.refreshCollection(k)}gx.fn.setHidden(gx.csv.ctxControlId(f.fld,this),k)}}else f.ctrl&&b.push(f)}d=0;for(c=b.length;d<c;d++)f=b[d],gx.uc.isUserControl(f.ctrl)&&(f.ctrl.execV2CFunctions(!1),f.ctrl.execShowFunction())};this.refreshOutputs=function(a){var b=
this.postEventPopupCommands;this.postEventPopupCommands=[];this.postEventRedirect&&(b.push({redirect:this.postEventRedirect}),delete this.postEventRedirect);0<b.length&&gx.ajax.dispatchCommands(b);this.refreshOutputs_impl(a);this.showMessages()};this.refreshRowOutputs=function(a){this.refreshOutputs_impl(a)};this.refreshServerOutputs=function(a){for(var b=a.length,d=0;d<b;d++){var c=a[d],f=gx.fn.getHidden(this.CmpContext+c.fld);void 0!=f&&((c=this.getValidStructFld(c.fld))&&c.v2v?(c.v2v(f),gx.fn.v2c(c,
f)):this.setVariable(a[d].av,f))}};this.getContextObject=function(a){return null!=this.getValidStructFld(a)&&(a=gx.fn.getControlValue_impl(this.CmpContext+a),null!=a)?a:""};this.getValidStructId=function(a){if(!gx.lang.emptyObject(a))for(var b=this.getControlIds(),d=0;d<b.length;d++)if(this.isSameField(this.getValidStruct(b[d]),a))return b[d];return-1};this.getValidStructFld=function(a){if("function"==typeof a||"object"==typeof a&&a.tagName)a="object"==typeof a&&"radio"===a.type&&a.name?a.name:gx.dom.id(a);
var b=this.getValidStructFld_cache[a];if(b)return b;if(!gx.lang.emptyObject(a))for(var b=this.getControlIds(),d=b.length,c=0;c<d;c++){var f=this.getValidStruct(b[c]);if(this.isSameField(f,a))return this.getValidStructFld_cache[a]=f}return this.getValidStructFld_cache[a]=null};this.isSameField=function(a,b){var d=a.fld;if(d==b)return!0;this.IsComponent&&0==b.indexOf(this.CmpContext)&&(b=b.substring(this.CmpContext.length));0!=a.grid&&(b=b.replace(this.rowPatternRegex,""));return d==b};this.getUserFocus=
function(){var a=gx.fn.getHidden(this.CmpContext+"GX_FocusControl");if(!gx.lang.emptyObject(a)&&"notset"!=a){var b=gx.dom.byId(a);if(!gx.lang.emptyObject(b)&&!gx.fn.isAccepted(b)){a=gx.csv.cmpCtx;gx.csv.cmpCtx=this.CmpContext;var d=gx.O;gx.O=this;b=gx.fn.firstAcceptedControl(gx.popup.ispopup());gx.O=d;gx.csv.cmpCtx=a;a=gx.lang.emptyObject(b)?"":b.id}}if(gx.lang.emptyObject(a)){if(this.hasMasterPage()&&(a=this.MasterPage.getUserFocus(),!gx.lang.emptyObject(a)))return a;b=[];for(d=0;d<this.WebComponents.length;d++)if(0==
this.WebComponents[d].CmpContext.indexOf("MP"))b.push(this.WebComponents[d]);else if(a=this.WebComponents[d].getUserFocus(),!gx.lang.emptyObject(a))return a;for(d=0;d<b.length&&!(a=b[d].getUserFocus(),!gx.lang.emptyObject(a));d++);}return a};this.getGridColumn=function(a,b){var d=null,c=null;gx.fn.getPropertyControlRef(a,b);c=gx.fn.controlGridId(a);0!=c&&(c=gx.O.getGridById(c,b))&&(d=c.grid.getColumnByHtmlName(a));return d};this.hasMasterPage=function(){return null!=this.MasterPage};this.setComponent=
function(a){this.CmpControls[a.id.toLowerCase()]=a};this.getComponentByPrefix=function(a){var b=f.map(this.CmpControls,function(b){return b.Prefix==a?b:null});return 1==b.length?b[0]:null};this.refreshGrid=function(a){(a=this.getGrid(a))&&a.doRefresh()};this.refreshComponent=function(a){var b=this.getWebComponent(this.CmpContext+this.getComponentData(a).Prefix);b?gx.evt.dispatcher.dispatch("REFRESH",b):(b=gx.fn.controlGridId(a),0!==b&&(b=gx.pO.getWebComponent(this.CmpContext+this.getComponentData(a).Prefix+
gx.fn.currentGridRow(b)))&&gx.evt.dispatcher.dispatch("REFRESH",b))};this.getComponentPrefix=function(a){return(a=this.getComponentData(a))?a.Prefix||"":""};this.getComponentData=function(a){return this.CmpControls[a.toLowerCase()]};this.createWebComponent=function(a,b,d,c,f,k,g){k=k||this.getComponentPrefix(a);c||(a=gx.fn.controlGridId(a),c=0!==a?gx.fn.currentGridRow(a):"");var f=f||this.CmpContext+"gxHTMLWrp"+k+c,k=this.CmpContext+k,j=gx.getObj(k,!1);j?j.startFeedback():gx.dom.mask(f);a=gx.gen.isJava()&&
gx.pO.PackageName?gx.pO.PackageName+".":"";gx.ajax.dynComponent(a+b,d,k,c).done(function(a){if(!a.DynComponentMap)a.DynComponentMap={};a.DynComponentMap[k+c]=f;gx.ajax.setJsonResponse({response:a,isPostBack:true,gxObject:j||gx.O,afterCmpLoaded:function(){g&&g(k)}});j?j.endFeedback():gx.dom.unmask(f)})};this.registerComponent=function(a){this.WebComponents[a.CmpContext]=a;this.WebComponents.push(a)};this.setWebComponent=function(a,b){this.deleteComponent(a.CmpContext,a,!1);b&&this.restoreComponentHiddens(a.CmpContext,
b);this.registerComponent(a);a.JustCreated=!0;gx.fn.setHidden(a.CmpContext,a.ServerClass);gx.fx.obs.notify("webcom.render",[a])};this.getWebComponent=function(a){return this.WebComponents[a]};this.deleteComponent=function(a,b,d){var d="undefined"==typeof d?!0:d,c=this.getWebComponent(a);if(c){var f=gx.gen.isJava()&&c.PackageName?c.PackageName+".":"";gx.cache.deleteInlineCode(a+f+c.ServerClass.toLowerCase());d&&this.deleteComponentHiddens(a);gx.lang.emptyObject(b)||gx.fn.setHidden(b.CmpContext,b.ServerClass);
c.ondestroy();delete this.WebComponents[a];b=this.WebComponents.length;for(d=0;d<b;d++)if(this.WebComponents[d].CmpContext==a){this.WebComponents.splice(d,1);break}var b=this.WebComponents,k;for(k in b)isNaN(parseInt(k))&&0===k.indexOf(a)&&this.deleteComponent(k)}};this.deleteComponentHiddens=function(a){var a=gx.fn.filterHiddens(RegExp("^"+a),gx.http.viewState),b;for(b in a)b&&gx.fn.deleteHidden(b)};this.restoreComponentHiddens=function(a,b){var d=gx.fn.filterHiddens(RegExp("^"+a),b),c;for(c in d)c&&
gx.fn.setHidden(c,d[c])};this.setCmpContext=function(a){void 0!=a&&(""!==a&&(this.IsComponent=!0),this.CmpContext=a)};this.getOldLvl=function(a){for(var b in this.LvlOlds)for(var d=this.LvlOlds[b],c=d.length,f=0;f<c;f++)if(d[f]==a)return b;return-1};this.refreshDependantGrids=function(a){for(var b=this.Grids.length,d=0;d<b;d++)for(var c=this.Grids[d],f=c.refreshVars,k=f.length,g=0;g<k;g++)if(f[g].fld==a.fld){c.filterVarChanged();break}};this.getCtrlPropertyValue=function(a,b){var d=gx.fn.getCtrlProperty(a,
b);void 0===d&&(d=gx.fn.getHidden(a+"_"+b));return d};this.setGrid=function(a){this.Grids[a.gridName]=a;var b=this.getGridIdxByName(a.gridName);-1!=b?this.Grids[b]=a:this.Grids.push(a)};this.getGrid=function(a){return this.Grids[a]};this.getGridIdxByName=function(a){for(var b=this.Grids.length,d=0;d<b;d++)if(this.Grids[d].gridName==a)return d;return-1};this.getGridIdx=function(a){for(var b=this.Grids.length,d=0;d<b;d++)if(this.Grids[d].gridId==a)return d;return-1};this.getGridById=function(a,b){for(var b=
b||"",d=this.Grids.length,c=0;c<d;c++){var f=this.Grids[c];if(f.gridId==a&&(!f.parentRow||gx.text.endsWith(b,f.parentRow.gxId)))return f}return null};this.getGridForColl=function(a){for(var b=this.Grids.length,d=0;d<b;d++){var c=this.Grids[d];if(c.boundedCollName==a)return c}return null};this.getFormBCForVar=function(a){for(var b in this.FormBCs){var d=this.FormBCs[b];if(d&&d.gxvar==a)return d}return null};this.getGridBC=function(a){var b=a;this.IsComponent&&0===a.indexOf(this.CmpContext)&&(b=a.substring(this.CmpContext.length));
return this.GridBCs[b]};this.getFormBC=function(a){var b=a;this.IsComponent&&0===a.indexOf(this.CmpContext)&&(b=a.substring(this.CmpContext.length));return this.FormBCs[b]};this.addGridBCProperty=function(a,b,d,c){var f=this.getGridBC(a);"undefined"==typeof f&&(f={},f.gxvar=c,this.GridBCs[a]=f);this.addBCProperties(f,b,d,c)};this.addBCProperty=function(a,b,d,c){var f=this.getFormBC(a);"undefined"==typeof f&&(f={},f.gxvar=c,this.FormBCs[a]=f);this.addBCProperties(f,b,d,c)};this.addBCProperties=function(a,
b,d,c){if(a)if(b instanceof Array)for(var k=b.length,g=function(){var a=this[d.gxvar];gx.lang.emptyObject(d.hc)||(a=this[d.hc]);if("date"==d.type)a=(new gx.date.gxdate(a)).getString("Y4MD");else if("bitstr"===d.type&&gx.pO.fullAjax){var k=gx.fn.getControlGridRef(d.fld,d.grid);""!==f(k).val()&&(a="gxformdataref:"+k.id)}this.valueToBCProp(this[c],b,d,a)},j=0;j<k;j++){if("undefined"==typeof a[b[j]])if(j<k-1)a[b[j]]={};else{a[b[j]]=d;"object"==typeof this[c]&&(d.v2bc=g);break}a=a[b[j]]}else"string"==
typeof b&&(a[b]=d)};this.valueToBCProp=function(a,b,d,c){try{if(a)for(var f=b.length,k=0;k<f;k++){if(gx.lang.isArray(a)&&d&&d.grid){if(0==a.length)continue;var g=gx.fn.getGridObj(d.grid),j=g&&g.grid?g.grid.firstRecordOnPage:0,l=gx.fn.currentGridRow(d.grid);4<l.length&&(l=l.substr(l.length-4*(k+1),4));a=a[Number(j||0)+Number(l)-1]}1<f&&(k<f-1&&void 0===a[b[k]])&&(a[b[k]]={});if("object"==typeof a[b[k]]&&(!d||!gx.lang.isDateType(d.type)))a=a[b[k]];else{a[b[k]]=c;break}}}catch(o){gx.dbg.logEx(o,"gxfrmutl.js",
"valueToBCProp")}};this.bcToScreen=function(a,b){for(var d in a)if("gxvar"!=d)try{if("object"==typeof b[d])this.bcToScreen(a[d],b[d]);else{var c=a[d];if((0==c.grid||gx.csv.validatingGrid&&c.grid==gx.csv.validatingGrid.gridId)&&gx.lang.emptyObject(c.hc)&&void 0!=b[d]&&c.v2v)c.v2v(b[d]),gx.fn.v2c(c,b[d])}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","bcToScreen")}};this.addGridUCEventHandler=function(a,b,d){gx.lang.emptyObject(this.GridUCsEvts[a])&&(this.GridUCsEvts[a]=[]);this.GridUCsEvts[a].push({e:b,h:d})};
this.getGridUCEventHandlers=function(a){a=this.GridUCsEvts[a];return gx.lang.emptyObject(a)?[]:a};this.setGridUCDynProp=function(a,b,d,c,f){this.setGridUCProp(a,b,d,void 0,f)};this.setGridUCProp=function(a,b,d,c,f){gx.lang.emptyObject(this.GridUCsProps[a])&&(this.GridUCsProps[a]=[]);this.GridUCsProps[a].push({p:b,h:d,v:c,t:f});"InternalTitle"==b&&(this.GridUCsProps[a].title=c)};this.getGridUCProperties=function(a){a=this.GridUCsProps[a];return gx.lang.emptyObject(a)?[]:a};this.addUsercontrolBinding=
function(a,b,d){this.UCBindings[a]||(this.UCBindings[a]={fld:b,uc:[]});gx.util.inArray(d,this.UCBindings[a].uc)||this.UCBindings[a].uc.push(d)};this.setUserControl=function(a){a.ContainerName&&(this.UserControls[a.ContainerName]=a)};this.getUserControl=function(a){var b=this.UserControls[a];!b&&""!=this.CmpContext&&(b=this.UserControls[this.CmpContext+a]);return b};this.getUserControlGrids=function(){return f.map(this.Grids,function(a){if(a.grid&&a.isUsercontrol)return a.grid})};this.execV2CFunctions=
function(a,b){b||(b=this.UserControls);var d=this;f.each(b,function(b,c){d==c.ParentObject&&c.updateAndShow(a)})};this.execC2VFunctions=function(){f.each(this.UserControls,function(a,b){try{b.execC2VFunctions()}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","execC2VFunctions")}try{b.saveProperties()}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","execC2VFunctions")}})};this.setMode=function(){gx.fn.setHidden(this.CmpContext+"_MODE",this.Gx_mode);gx.fn.setHidden(this.CmpContext+"Mode",this.Gx_mode)};this.setVariable=
function(a,b){var d=this[a]=b;0!=a.indexOf(this.CmpContext)&&gx.fn.setHidden(this.CmpContext+a,b);if(void 0!=this.VarControlMap[a]){var c=this.VarControlMap[a].type;if("date"==c||"dtime"==c)"string"==typeof b&&(b=new gx.date.gxdate(b),this[a]=b),d="date"==c?b.getStringWithFmt("Y4MD"):b.getStringWithFmt("Y4MD")+" "+b.getTimeString(!0,!0);"decimal"==c&&"."!=gx.decimalPoint?(d=b.toString().replace(".",gx.decimalPoint),"string"==typeof b&&(this[a]=gx.num.parseFloat(b))):"int"==c&&"string"==typeof b&&
(this[a]=gx.num.parseInt(b));gx.fn.setHidden(this.CmpContext+this.VarControlMap[a].id,d)}"Gx_mode"==a&&this.setMode();void 0!=this.UCBindings[a]&&gx.fn.setHidden(this.CmpContext+this.UCBindings[a].fld,b)};this.getVariable=function(a){return this[a]};this.isServerEvent=function(a){return this.Events[a][1]||!1};this.getServerEventName=function(a){return this.Events[a][0]||""};this.getClientEventName=function(a){for(var b in this.Events)if(this.Events[b][0]==a)return b;return""};var c={RFR:"REFRESH"};
this.cleanEventName=function(a){var a=a.replace(RegExp("^"+this.CmpContext),""),b=/^E('?(\w+)\.?([^\.]*)'?)/.exec(a),a=b&&b.length&&1<b.length?b[1].replace(/\.\d*$/,""):a;return c[a]||a};this.inputHasFormatErrors=function(a,b,d){var c,f;c=this.cleanEventName(a);var k,g,a=!1,j=gx.csv.anyFormatError(),l;if(!j||!this.EvtParms[c])return!1;f=this.EvtParms[c][0];var o=this,m=function(a){if(a)if(b&&d&&a.grid==b){if((k=gx.fn.getControlGridRef(a.fld,b,d))&&k.id&&gx.csv.gxFormatErrors[k.id])return!0}else if((k=
gx.fn.getControlGridRef(a.fld,a.grid))&&k.id)for(l in gx.csv.gxFormatErrors)if(a==o.getValidStructFld(l))return!0;return!1};c=0;for(len=f.length;c<len&&!a;c++){var n=f[c];if(n.postForm)return j;if(n.fld)if(g=this.getValidStructFld(n.fld))a=a||m(g);else if(n=this.getFormBCForVar(n.av),null!=n)for(var r in n)g=n[r],"object"===typeof g&&(a=a||m(g))}return a};this.setEventParameters=function(a,b){gx.csv.lastEvtRow=null;gx.O=this;var d=!0,c=-1;gx.csv.cmpCtx=this.CmpContext;for(var f=a.length,k=0;k<f;k++){var g=
a[k][0],j=a[k][1],l=a[k][2],o=!1;if(b instanceof q)this.setVariable(l,b.parms[k]),o=!0;else for(var m in b)if(m.toLowerCase()==g.toLowerCase()){this.setVariable(l,b[m]);o=!0;break}o||this.setVariable(l,b);g=this.getValidStructFld(j);null!=g?(0!=g.grid&&-1==c?c=g.grid:0!=g.grid&&g.grid!=c&&(d=!1),gx.fn.v2c(g)):gx.fn.setHidden(this.CmpContext+j,this.getVariable(l))}d&&(gx.csv.lastEvtRow=gx.fn.currentGridRowImpl(c))};this.executeEvent=function(a,b,d,c,f){gx.O=this;gx.csv.cmpCtx=this.CmpContext;var k=
this.getClientEventName(a);(k?this.isServerEvent(k):1)?(f?(f=this.getGrid(f))&&d?f.instanciateRow(d):gx.csv.instanciatedRowGrid=null:gx.csv.instanciatedRowGrid=null,this.executeServerEvent(a,b,d,c)):gx.evt.execCliEvt(this.CmpContext,this.IsMasterPage,k,f,d,"");gx.csv.instanciatedRowGrid=null};this.executeServerEvent=function(a,b,d,c,f){gx.O=this;gx.csv.cmpCtx=this.CmpContext;var k=!0;void 0!=b&&!1==b&&(k=!1);b="string"==typeof d?d:"";gx.lang.emptyObject(gx.csv.lastEvtRow)||(b=gx.csv.lastEvtRow);var d=
gx.csv.validatingGrid||gx.csv.instanciatedRowGrid,g=!gx.lang.emptyObject(d)?d.gridId:!1;f?b="":(""==b&&g&&(b=gx.csv.lastRow[g]),"undefined"==typeof b&&(b=gx.fn.currentGridRowImpl(d.gridId)));gx.evt.execEvt(this.CmpContext,this.IsMasterPage,this.CmpContext+"E"+a+"."+(b||""),gx.evt.dummyCtrl,g,k,null,null,null,c)};this.executeEnterEvent=function(a,b){var d=!1;if(b&&b.onblur)b.onblur();if((gx.pO.fullAjax||null==c)&&gx.evt.cancelAndRefresh(a)){if(!this.refreshAndEnter)return;d=!0}gx.dom.hasSubmitControl()&&
gx.evt.cancel(a,!0);b&&("INPUT"==b.nodeName&&gx.dom.isEditControl(b))&&gx.evt.cancel(a,!0);var c=this.gxOWithEnter();if(null!=c){gx.evt.enter=!0;var f="ENTER";c.IsMasterPage&&(f+="_MPAGE");var f=c.CmpContext+"E"+f+".",k;if(gx.evt.isEnterEvtCtrl(b)){var g=gx.fn.controlRowId(b);k=gx.fn.controlGridId(b.id);g&&(f+=g)}gx.evt.execEvt(c.CmpContext,c.IsMasterPage,f,gx.evt.dummyCtrl,k,!1,null,!1,null,d);gx.evt.enter=!1;gx.evt.cancel(a,!0)}};this.gxOWithEnter=function(){if(this.hasEnterEvent)return this;if(this.IsComponent){var a=
this.getCmpType(this.CmpContext),b=""==a[1]&&0==a[0].indexOf("MP"),a=gx.getObj(a[1],b);if(!gx.lang.emptyObject(a))return a.gxOWithEnter()}else if(this.hasMasterPage())return this.MasterPage.gxOWithEnter();return null};this.getLastControlId=function(){return this.GXLastCtrlId};this.getValidStruct=function(a){return this.GXValidFnc[a]};this.getControlIds=function(){return this.GXCtrlIds};this.getControlIdsh=function(){return this.GXCtrlIdsh};this.getUsercontrolFromChild=function(a){f.each(this.UserControls,
function(b,d){var c=d.getContainerControl();if(gx.dom.isChildNode(a,c))return d});return null};this.installFlatLevelDatePickers=function(){for(var a=null,b=this.getControlIds(),d=b.length,c=0;c<d;c++)a=this.getValidStruct(b[c]),void 0!=a&&(0==a.grid&&void 0!=a.dp)&&gx.fn.installDatePicker(this.CmpContext+a.fld,a.dp.f,a.dp.st,a.dp.wn,a.dp.mf,gx.fn.datePickerFormat(a.dp.pic,a.dp.dec,a.len),a.len,a.dp.dec)};this.installImageControls=function(){for(var a=gx.dom.byClass(gx.html.multimediaUpload.gxCssClass),
b=0,d=a.length;b<d;b++)gx.html.multimediaUpload.createControl(a[b]);gx.fx.obs.addObserver("gx.multimedia.clear",this,this.clearMultimediaValue)};this.initControlsEnabledFlag=function(a){if("bits"!=a.type&&("audio"!=a.type&&"video"!=a.type)&&(a=gx.fn.getControlRef(a.fld))){var b=gx.http.viewState[gx.dom.id(a)+"_Enabled"];void 0!==b&&gx.fn.setEnabledProperty(a,gx.lang.gxBoolean(b),!1)}};this.initControlsBehaviour=function(){var a=this;f.each(gx.O.GXValidFnc,function(b,d){if(d&&d.fld&&(a.initControlsEnabledFlag(d),
d.gxsgprm)){var c=gx.fn.getControlRef(d.fld);c&&gx.fx.installSuggest(c)}})};var l={},m=!1,n=function(a){try{var b=new Function("return "+a);if(b)return b()}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","evaluateCode")}return!1},p=function(b){var d=b.target,c=f(b.currentTarget),g=JSON.parse(c.attr(k)),l=c.attr(j),o;if(!d||!("A"===d.tagName.toUpperCase()&&void 0===f(d).attr(a)&&d.href))g&&1<g.length&&(o=gx.getObj(g[0],g[1])),o?c.hasClass("gx-disabled")||o.handleControlEvent(b,l,this):b.preventDefault()};this.handleControlEvent=
function(c,k,g){if(l[k]){var j=l[k],o=gx.fn.controlRowId(c.currentTarget),m=l[k].evt,k=this.Events[m]?this.Events[m][0]:l[k].std,m=f(g).attr(a),r=f(g).attr(d),s;s="img"==g.tagName.toLowerCase()?f(g).attr(b):f("a["+b+"]",g).attr(b);var p=this.getGridById(j.grid),t,u=!0,q=!1;if("combo"!=j.ctrltype)switch(m){case "1":c.preventDefault();c.stopPropagation();gx.fn.closeWindow();break;case "4":c.preventDefault();c.stopPropagation();r&&n(r);break;default:if(!s||n(s))if(p&&(t=p.gridName),"checkbox"===j.ctrltype&&
(gx.fn.checkboxClick(j,g,j.values[0],j.values[1]),u=!1,q=!0),this.executeEvent(k,!1,o,!1,t),q)gx.evt.onchange(g);u&&c.preventDefault();c.stopPropagation()}}};this.registerCtrlsEventHandlers=function(){var a,b,d=this.GXCtrlIds,c=this.GXValidFnc,g,o=this.IsMasterPage,n=this.CmpContext,r=o?"_MPAGE":"",s="["+j+"]",t,u,q=!n&&!o;a=0;for(b=d.length;a<b;a++)g=c[d[a]],g.evt&&(l[g.fld]=g,0===g.grid&&(t=n+g.fld+(g.gxvar?"":r),u="#span_"+t,t="#"+t,u=g.gxvar&&0<f(u).length?f(u):f(t),u.attr(j,g.fld).attr(k,JSON.stringify([n,
o]))));q&&!m&&(m=!0,f(document.body).on("click",s,p))};this.unregisterCtrlsEventHandlers=function(){m&&f(document.body).off("click",p);m=!1};this.clearMultimediaValue=function(a){a=gx.html.multimediaUpload.getElements(a);a.fileField.onchange(a.fileField);gx.fn.setHidden(a.fileField.id,"");gx.fn.setHidden(a.uriField.id,"");gx.fn.setHidden(a.fileField.id+"_gxBlob","")};this.refreshOlds=function(){for(var a in this.LvlOlds){var b=this.LvlOlds[a];if("function"!=typeof b){var d=gx.fn.lvlGrid(parseInt(a,
10)),c;0!=d&&(c=gx.fn.currentGridRow(d));for(var d=b.length,f=0;f<d;f++){var k=b[f],g=k,j="",l=gx.fn.vStructForOld(g);if(l){if(!l.gxgrid||0<l.gxgrid.grid.rows.length)j=gx.typedOld(l.fld,g,l.type)}else gx.lang.emptyObject(c)||(k+="_"+c),j=gx.fn.getHidden(k);"undefined"!=typeof j&&(l||(window[g]=j),this[g]=j)}}}};var q=function(a){this.parms=a;return this},u={};this.addExoEventHandler=function(a,b){var d=function(){var a=gx.O;gx.setGxO(this);b.call(this,null,null,new q(Array.prototype.slice.call(arguments,
0)));gx.setGxO(a)};gx.fx.obs.addObserver(a,this,d);u[a]=d};this.deleteExoEventHandlers=function(){for(var a in u)u.hasOwnProperty(a)&&gx.fx.obs.deleteObserver(a,this,u[a])};this.restoreExoEventHandlers=function(){for(var a in u)gx.fx.obs.addObserver(a,this,u[a])};this.deleteEventHandlers=function(){try{this.unregisterCtrlsEventHandlers(),gx.fx.ctx.deleteHandlers(this),gx.fx.dnd.deleteHandlers(this),this.deleteExoEventHandlers(),gx.fx.dom.deleteEventHandlers(this)}catch(a){gx.dbg.logEx(a,"gxfrmutl.js",
"deleteEventHandlers")}};this.ondestroy=function(){try{this.endFeedback(),this.deleteEventHandlers(),f.each(this.UserControls,function(a,b){if(!gx.lang.emptyObject(b.destroy))try{b.destroy()}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","ondestroy")}}),delete this.containerControl}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","ondestroy")}};this.onpost=function(){var a=gx.O;gx.setGxO(this);if(this.hasMasterPage())this.MasterPage.onpost();for(var b=this.WebComponents.length,d=0;d<b;d++)this.WebComponents[d].onpost();
this.ReadonlyForm&&(this.IsComponent&&a!=this)&&this.roControlsAsHidden();this.execC2VFunctions();gx.setGxO(a)};this.roControlsAsHidden=function(){for(var a=this.getControlIds(),b=a.length,d=0;d<b;d++){var c=this.getValidStruct(a[d]);if(0==c.grid&&"function"==typeof c.val){var c=this.CmpContext+c.fld,f=gx.dom.el(c);f&&!gx.fn.isAccepted(f)&&gx.fn.setHidden(c,gx.fn.getControlValue(c))}}};this.onload=function(a,b){gx.dbg.logPerf("objectOnload_"+this.CmpContext+this.ServerClass);gx.setGxO(this);this.screenToVars();
this.hasMasterPage()&&(this.MasterPage.onload(),gx.setGxO(this));var d=this.Grids.length;if(!1!==a)for(var c=0;c<d;c++)this.Grids[c].loadGrid();d=this.WebComponents.length;for(c=0;c<d;c++)this.WebComponents[c].onload(a);b?this.afterLoad():gx.fx.obs.addObserver("gx.onready",this,this.afterLoad.closure(this),{single:!0});gx.dbg.logPerf("objectOnload_"+this.CmpContext+this.ServerClass)};this.afterLoad=function(){gx.dbg.logPerf("objectAfterLoad_"+this.CmpContext+this.ServerClass);gx.setGxO(this);this.installFlatLevelDatePickers();
this.installImageControls();this.refreshOlds();this.initControlsBehaviour();this.execV2CFunctions(!0);this.JustCreated=!1;this.registerCtrlsEventHandlers();this===gx.pO&&(gx.dom.indexElements(),gx.fn.doAttachs());gx.dbg.logPerf("objectAfterLoad_"+this.CmpContext+this.ServerClass)};this.onunload=function(a){if(this.hasMasterPage()&&!1!==a)this.MasterPage.onunload();a=this.Grids.length;for(a-=1;0<=a;a--)delete this.Grids[this.Grids[a].gridName],this.Grids[a].cleanup(),this.Grids.splice(a,1);a=this.WebComponents.length;
for(a-=1;0<=a;a--)delete this.WebComponents[this.WebComponents[a].CmpContext],this.WebComponents[a].onunload(),this.WebComponents.splice(a,1);this.getValidStructFld_cache={};gx.fn.cleanAttachedCtrls();this.ondestroy()};this.clean=function(a){this.cleanHiddens();this.onunload(a)};this.cleanHiddens=function(){gx.http.clearState();gx.http.clearMultipartHidden()};this.screenToVars=function(){try{for(var a=this.getControlIds(),b=a.length,d=0;d<b;d++){var c=this.getValidStruct(a[d]);c&&(0==c.lvl&&"function"==
typeof c.c2v)&&c.c2v()}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","screenToVars")}};this.postbackLoad=function(a,b){this.hasMasterPage()&&this.MasterPage.postbackLoad(a);for(var d=this.WebComponents.length,c=0;c<d;c++)this.WebComponents[c].postbackLoad(a);this.IsComponent&&this.JustCreated&&(this.installImageControls(),this.installFlatLevelDatePickers(),this.registerCtrlsEventHandlers());this.execV2CFunctions(!0,a);this.conditionsChanged=this.JustCreated=!1;this===gx.pO&&gx.fn.doAttachs(b)};this.addDragSource=
function(a,b,d,c){gx.fx.dnd.addSource(this,a,b,d,c)};this.addDropTarget=function(a,b,d,c){gx.fx.dnd.addTarget(this,a,b,d,c)};this.addContextSetter=function(a,b,d,c){gx.fx.ctx.addSetter(this,a,b,d,c)};this.addContextTracker=function(a,b,d,c){gx.fx.ctx.addTracker(this,d,c)};this.addOnMessage=function(a,b,d,c,f){gx.fx.notifications.addTracker(this,a,b,d,c,f)};this.addEventHandler=function(a,b,d){gx.fx.dom.addEventHandler(this,a,b,d)};this.updateBitmapValue=function(a,b,d,c){a=gx.html.multimediaUpload.getContainer(a);
"file"==gx.html.multimediaUpload.getOptionValue(a)?this[b]=c:this[d]=c};var s,r=0,t=void 0===gx.NotificationDelay?200:gx.NotificationDelay;this.getFeedbackContainer=function(){return gx.pO&&!gx.pO.fullAjax||this==gx.pO?document.body:this.getContainer()};this.startFeedback=function(a){r++;var b=!0===a?0:t,d=function(){var a=this.getFeedbackContainer();a&&gx.dom.mask(a)};0===b?d.call(this):s||(b=gx.lang.doCallTimeout(d,this,arguments,b),s=b.t)};this.endFeedback=function(){0<r&&r--;if(0==r){s&&(clearTimeout(s),
s=!1);var a=this.getFeedbackContainer();a&&gx.dom.unmask(a)}};this.isFeedbackOn=function(){return 0<r};var v=function(){var a=9996,b=this;return function(d){var c="MPW"+a++,k=b.CmpContext+"gxHTMLWrp"+c;b.setComponent({id:"GX-"+d.toUpperCase()+"-TARGET",GXClass:null,Prefix:c,lvl:1});return f('<div class="gx-call-target '+d+' off empty"><div class="'+g+'" id="'+k+'"></div></div>')}}.call(this);this.initTargets=function(){var a,b,d,c,k;gx.pO&&(gx.pO.fullAjax&&this.IsMasterPage)&&(a=f(gx.dom.form()).children("[data-abstract-form]").first().addClass("gx-center-target"),
b=v("top"),d=v("right"),c=v("bottom"),k=v("left"),f('<div id="gx-column-targets"></div>').insertBefore(a).append(k).append(a).append(d).before(b).after(c))};var y={};this.createObjectInTarget=function(a,b,d){var a=a.toLowerCase(),c=z(a);this.createWebComponent("GX-"+a.toUpperCase()+"-TARGET",b,d,void 0,void 0,void 0,function(b){(b=gx.pO.getWebComponent(b))&&(y[a]=b)});f(c.selector).removeClass("empty")};this.restoreTargetComponents=function(){for(var a in y)y.hasOwnProperty(a)&&gx.pO.registerComponent(y[a])};
var z=function(a){return{selector:".gx-call-target."+a,centerSelector:".gx-center-target"}},C,D={useCapture:!0};this.showTarget=function(a,b){var a=a.toLowerCase(),d=z(a),c=d.selector,k=d.centerSelector,g;f(d.selector).removeClass("empty");f(c).removeClass("off");f(k).addClass("slideout "+a);f(document.documentElement).addClass("gx-blocking");gx.fx.obs.notify("gx.targetshown",[a]);!1!==b&&(C=function(a){!f(a.target).closest(c).length&&!f(a.target).is(c)&&f(c).is(":visible")&&(g.call(this),a.stopImmediatePropagation(),
a.preventDefault())}.closure(this),g=function(){this.hideTarget(a)},gx.evt.attach(document,"click",C,!1,D),gx.spa.addObserver("onnavigate",this,g))};this.hideTarget=function(a){var a=a.toLowerCase(),b=z(a),d=b.centerSelector;f(b.selector).addClass("off");f(d).removeClass("slideout "+a);f(document.documentElement).removeClass("gx-blocking");gx.evt.detach(document,"click",C,D);gx.fx.obs.notify("gx.targethidden",[a])};this.collapseTarget=function(a){var a=a.toLowerCase(),b=z(a),d=b.selector,b=b.centerSelector;
this.showTarget(a,!1);f(d).addClass("collapsed");f(b).addClass("collapsed");gx.fx.obs.notify("gx.targetcollapsed",[a])};this.expandTarget=function(a){var a=a.toLowerCase(),b=z(a),d=b.selector,b=b.centerSelector;this.showTarget(a,!1);f(d).removeClass("collapsed");f(b).removeClass("collapsed");gx.fx.obs.notify("gx.targetexpanded",[a])}},j="data-gx-evt-control",b="data-gx-evt-condition",a="data-gx-evt",d="data-gx-evt-code",k="data-gx-context",g="gxwebcomponent";c.GX_EVENT_CONTROL_DATA_ATTR=j;c.GX_EVENT_CONDITION_DATA_ATTR=
b;c.GX_EVENT_DATA_ATTR=a;c.GX_EVENT_CODE_DATA_ATTR=d;c.GX_EVENT_CONTEXT_DATA_ATTR=k;c.WEBCOMPONENT_CLASS_NAME=g;c.WEBCOMPONENT_BODY_CLASS_NAME="gxwebcomponent-body";c.CONTROL_CMP_REGEX=/((?:(?:MP)?W[0-9]{4})*)((?:MP)?W[0-9]{4})([0-9]{4})?/;return c}(gx.$);
gx.uc=function(f){return{gxCssClass:"gx_usercontrol",getNew:function(c,j,b,a,d,k,g,o,l,m){a=eval(a);gx.lang.inherits(a,gx.uc.UserControl,!0);a=new a(f);a.ContainerName=d;a.DesignContainerName=d;a.setupControl(c,k,g,j,b,o,l,m);return a},fromChild:function(c){var f=gx.pO.getUsercontrolFromChild(c);if(null!=f||gx.pO.hasMasterPage()&&(f=gx.pO.MasterPage.getUsercontrolFromChild(c),null!=f))return f;for(var b=gx.pO.WebComponents.length,a=0;a<b;a++)if(f=gx.pO.WebComponents[a].getUsercontrolFromChild(c),
null!=f)return f;return null},getUserControlObj:function(c){var f=gx.O.getUserControl(c);if(gx.lang.emptyObject(f)){if(gx.pO.hasMasterPage()&&(f=gx.pO.MasterPage.getUserControl(c),!gx.lang.emptyObject(f)))return f;for(var b=gx.pO.WebComponents.length,a=0;a<b&&!(f=gx.pO.WebComponents[a].getUserControl(c),!gx.lang.emptyObject(f));a++);}return f},CtrlId:function(c){return c.replace(/Container$/,"")},userControlContainerId:function(c){var f=c.lastIndexOf("_");return-1!=f&&(f=c.substring(0,f)+"Container"+
c.substring(f),null!=gx.dom.byId(f))?f:c+"Container"},setProperties:function(c,f){var b=gx.uc.getUserControlObj(gx.uc.userControlContainerId(c));if(null!=b)if(void 0!=f.length)for(var a=f.length,d=0;d<a;d++)for(var k in f[d]){var g=f[d][k];b[k]=g}else for(k in f)g=f[k],b[k]=g},isUserControl:function(c){if(gx.lang.emptyObj(gx.O.UserControls))return!1;if(c instanceof gx.uc.UserControl)return!0;c=gx.dom.byId(gx.uc.userControlContainerId(c));return null!=c&&"DIV"==c.tagName?!0:!1},UserControl:function(){this.ParentObject=
null;this.GridRow=this.GridId="";this.ControlLvl=this.ControlId=0;this.ControlName=this.ContainerName="";this.LastIdBefore=0;this.Properties=[];this.DynProperties=[];this.PropTypes=[];this.ValidFunctions=[];this.V2CFunctions=[];this.C2VFunctions=[];this.RealControl=this.C2ShowFunction=null;this.IsPostBack=!1;this.clearFunctions=function(){this.ValidFunctions=[];this.V2CFunctions=[];this.C2VFunctions=[];this.C2ShowFunction=null};this.me=function(){return"gx.getObj('"+this.ParentObject.CmpContext+"', "+
this.ParentObject.IsMasterPage.toString()+").getUserControl('"+this.ContainerName+"')"};this.getChildContainer=function(c){return gx.dom.byId(this.DesignContainerName+c+(""!=this.GridRow?"_"+this.GridRow:""))};this.getContainerControl=function(){return gx.dom.byId(this.ContainerName)};this.getRealControl=function(){return this.RealControl?this.RealControl:this.getContainerControl()};this.setupControl=function(c,f,b,a,d,k,g,o){this.ParentObject=c;this.ControlName=f;this.ControlId=a;this.LastIdBefore=
d;this.ControlLvl=void 0!=k?k:0;this.GridId=void 0!=g?g:0;this.GridRow=void 0!=o?o:"";gx.util.pushOnce(this.ControlId,this.ParentObject.GXCtrlIds);this.ParentObject.GXValidFnc[this.ControlId]={lvl:this.ControlLvl,fld:b,grid:this.GridId,op:[],ip:[],isuc:!0,uc:this,fnc:this.validateControl}};this.addValidFunction=function(c,f,b){this.ValidFunctions.push(c);this.ParentObject.addUsercontrolBinding(f,b+(""==this.GridRow?"":"_"+this.GridRow),this)};this.validateControl=function(){gx.csv.validatingUC=this;
for(var c=this.ValidFunctions.length,f=0;f<c;f++)if(!this.ValidFunctions[f].call(gx.O))return gx.O.AnyError=1,gx.csv.validatingUC=null,!1;gx.csv.validatingUC=null;return!0};this.attachEvents=function(){try{var c=this.getContainerControl();if(gx.lang.emptyObject(document.frames))c.onfocus=this.onfocus,this.RealControl=c;else{var f=document.frames.length;if(0<f)for(var b=0,b=0;b<f;b++){var a=document.frames[b];if(!0==gx.dom.isChildNode(a,c)){a.frameElement.onfocus=this.onfocus;this.RealControl=a.frameElement;
break}}}}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","attachEvents")}};this.onfocus=function(){gx.evt.onfocus(this.getRealControl(),this.ControlId,this.ParentObject.CmpContext,this.ParentObject.IsMasterPage,this.GridRow,this.GridId);gx.csv.lastId=this.ControlId;gx.csv.anyError||this.setFocusBase()};this.onchange=function(){0<this.GridId&&gx.fn.getGridObj(this.GridId).setRowModified(gx.fn.currentGridRow(this.GridId))};this.setFocusBase=function(){"function"==typeof this.setFocus&&this.setFocus()};this.setHtml=
function(c){gx.dom.shouldPurge()&&gx.dom.purge(this.getContainerControl(),!0);this.getContainerControl().innerHTML=c};this.createWebComponent=function(c,f,b,a,d){this.ParentObject.createWebComponent(c,f,b,this.GridRow,a,d)};this.deleteWebComponent=function(c){this.ParentObject.deleteComponent(gx.fn.cmpContextFromCtrl(c))};this.notifyContext=function(c,f){gx.fx.ctx.notify(null,c,f)};this.addV2CFunction=function(){if(1==arguments.length&&"function"==typeof arguments[0])this.V2CFunctions.push(arguments[0]);
else{var c=arguments[0],f=arguments[1],b=arguments[2];this.ParentObject.addUsercontrolBinding(c,f,this);this.V2CFunctions.push(function(a,d,k){var g=f;k&&(d&&(g=f+"_"+d),a.ParentObject[c]=gx.fn.getControlValue(g));a[b](a.ParentObject[c])})}};this.addC2VFunction=function(c){this.C2VFunctions.push(c)};this.setC2ShowFunction=function(c){this.C2ShowFunction=c};this.execV2CFunctions=function(c){var f=gx.csv.cmpCtx;gx.csv.cmpCtx=this.ParentObject.CmpContext;for(var b=0,a=this.V2CFunctions,d=a.length,b=
0;b<d;b++)try{a[b](this,this.GridRow,c)}catch(k){gx.dbg.logEx(k,"gxfrmutl.js","execV2CFunctions")}gx.csv.cmpCtx=f};this.execC2VFunctions=function(){var c=gx.csv.cmpCtx;gx.csv.cmpCtx=this.ParentObject.CmpContext;for(var f=0,b=this.C2VFunctions,a=b.length,f=0;f<a;f++)try{b[f](this,this.GridRow)}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","execC2VFunctions")}gx.csv.cmpCtx=c};this.execShowFunction=function(){var c=this.getContainerControl();try{null!=this.C2ShowFunction&&c&&this.C2ShowFunction(this)}catch(f){gx.dbg.logEx(f,
"gxfrmutl.js","execShowFunction")}this.IsPostBack=!0;c&&gx.plugdesign.applyTemplateObject({selector:"#"+c.id,templateSelector:function(b){return!0===b.onDemandInvoke}})};this.updateAndShow=function(c){try{this.execV2CFunctions(c)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","updateAndShow")}c&&this.execShowFunction()};this.getEventRow=function(){return this.GridRow};this.isServerEvent=function(c){var f=this.ParentObject,b=f.IsMasterPage?"_MPAGE":"",c=this.ControlName.toUpperCase()+b+"."+c.toUpperCase()+
b;if(c=f.getClientEventName(c))return f.isServerEvent(c);gx.dbg.logDebug("Client event name couldn't be resolved.");return!1};this.eventHandler=function(c,f,b){gx.evt.setReady(!1);gx.setGxO(this.ParentObject);if(0<c){var a=this.DesignContainerName,d=RegExp("^(?:"+this.ParentObject.CmpContext+")?(.+)$").exec(this.DesignContainerName);d&&d[1]&&(a=d[1]);this.ParentObject[a]=this;(c=this.ParentObject.getGridById(c))&&c.instanciateRow(f)}this.execC2VFunctions();b.call(this.ParentObject,this.getEventRow());
gx.evt.setReady(!0);gx.csv.instanciatedRowGrid=null};this.addEventHandler=function(c,f){this[c]=function(b){var a=this.isServerEvent(c);a&&"function"===typeof b&&gx.fx.obs.addObserver("gx.onafterevent",this,b,{single:!0});this.eventHandler(this.GridId,this.GridRow,f);!a&&"function"===typeof b&&b.call(this)}.closure(this)};this.addProperty=function(c,f){this.Properties[c]=f};this.setProp=function(c,f,b,a){this.addProperty(c,f);this.PropTypes[c]=a;gx.lang.isBooleanType(a)?this[c]=gx.lang.gxBoolean(b):
"color"==a?gx.lang.emptyObject(b)||(this[c]="number"==typeof b||"string"==typeof b?gx.color.html(b):b):gx.lang.isNumericType(a)?gx.lang.emptyObject(b)||(this[c]=gx.num.parseFloat(b)):this[c]=b};this.setDynProp=function(c,f,b,a,d){this.addProperty(c,f);this.DynProperties.push(c);this.PropTypes[c]=a;var k=function(){var d=this.getDynPropertyValueFromHidden(c,f);void 0===d&&(d=b);this.setProp(c,f,d,a)};d?k.call(this):this.ParentObject.CmpContext?gx.fx.obs.addObserver("webcom.render",this,function(a){a===
this.ParentObject&&k.call(this)}):gx.fx.obs.addObserver("gx.onready",this,k,{single:!0})};this.refreshDynProperties=function(){for(var c=0,f=this.DynProperties.length;c<f;c++){var b=this.DynProperties[c];this[b]=this.getDynPropertyValueFromHidden(b,this.Properties[b])}};this.getDynPropertyValueFromHidden=function(c,f){var b=gx.fn.getHidden(this.getHiddenName(f));void 0===b&&(b=gx.fn.getHidden(this.getHiddenName(c)));return b};this.setGridProperties=function(){for(var c=this.ParentObject.getGridUCProperties(this.ControlName),
f=c.length,b=0;b<f;b++){var a=c[b],d=a.v;"undefined"==typeof d&&(d=this.getHiddenName(a.h),d=gx.fn.getHidden(d),"color"==a.t&&(d=gx.color.html(d)));this.setProp(a.p,a.h,d,a.t)}};this.setGridEventHandlers=function(){for(var c=this.ParentObject.getGridUCEventHandlers(this.ControlName),f=c.length,b=0;b<f;b++){var a=c[b];this.addEventHandler(a.e,a.h)}};this.getHiddenName=function(c){var f="",b=this.ControlName.toUpperCase();""!=this.GridRow&&(f="_"+this.GridRow,this.ownerGrid&&(b=this.ownerGrid.realGridName.toUpperCase()));
return this.ParentObject.CmpContext+b+(this.ParentObject.IsMasterPage?"_MPAGE":"")+"_"+c+f};this.saveProperties=function(){for(var c in this.Properties){var f=this[c];"function"!=typeof this.Properties[c]&&("undefined"!=typeof f&&("undefined"!=typeof f.R&&"undefined"!=typeof f.G&&"undefined"!=typeof f.B)&&(f=gx.color.rgb(f.R,f.G,f.B)),gx.lang.isBooleanType(this.PropTypes[c])&&(f=f?1:0),gx.fn.setHidden(this.getHiddenName(this.Properties[c]),f))}}}}}(gx.$);
gx.printing={loaded:!1,tries:0,waitInterval:100,IFrameId:"gxprintHelper_Iframe",print:function(f){if(gx.printing.avoidPrintingApplet)this.printDirect(f);else{if(!this.loaded){var c='<applet name="GeneXusPrintAppletForWindows" archive="'+gx.util.resourceUrl("printingappletsigned.jar",!0)+'" code="com/genexus/printing/Printer.class" width="0" height="0">',c=c+('<param name="path" value="'+gx.util.resourceUrl(gx.basePath,!0)+'">');document.body.appendChild(gx.html.nodesFromText(c+'<p>No java plugin detected. Click <a href="http://java.com/en/download/" target="new">here</a> to download it.</p></applet>')[0]);
this.loaded=!0}0==this.tries?this.printWhenReady(f):gx.dbg.logMsg("Already trying to print a document.")}},printDirect:function(f){f&&(gx.printing._deinit(),$iframe=$("<iframe>"),$iframe.attr("id",gx.printing.IFrameId).css({visibility:"hidden",position:"absolute",top:"-1000px",left:"-1000px"}),$(document.body).append($iframe),$iframe[0].onload=function(){this.contentWindow.print()},$iframe.attr("src",f.reportFile))},printWhenReady:function(f){this.tries>=60*this.waitInterval?(this.tries=0,gx.dbg.logMsg("The printing applet was not loaded.")):
(this.tries++,this.isReady()?(document.GeneXusPrintAppletForWindows.printReport(f.reportFile,f.printerRule,"GXPRN.INI"),this.tries=0):setTimeout(function(){gx.printing.printWhenReady(f)},this.waitInterval))},isReady:function(){var f=document.GeneXusPrintAppletForWindows;return f&&("function"==typeof f.isReady||"unknown"==typeof f.isReady)?f.isReady():!1},_deinit:function(){$("#"+gx.printing.IFrameId).remove()}};
gx.fn=function(f){var c=/((?:(?:MP)?W[0-9a-zA-Z\-]{4}[\S]*)*)gxHTMLWrp((?:MP)?W[0-9]{4}[\S]*)*/,j=function(b){b=b.replace(/\\/g,".");return gx.gen.isDotNet()?b.replace(/\.aspx$/,""):b};return{attachedControls:function(){return gx.attachedControls},cancelWindow:function(b){this.closeWindow(b,{ignoreCmds:gx.config.popup.ignoreCmdsOnCancel})},closeWindow:function(b,a,d){d=d||gx.O;if("string"==typeof b){if(this.closeFromServer(b))return;b=[]}b||(b=[]);if(gx.popup.ispopup()){var a=gx.popup.getPopup(),
c=a.url?gx.util.noParmsUrl(a.url):"";if(!a.frameWindow||-1!=a.frameWindow.location.href.search(c+"(\\?.*)?$")||gx.grid.drawAtServer){a.close(b);return}}-1!=location.href.indexOf("gxCalledAsPopup")?this.closeWindowImpl():(b=gx.ajax.getCallerUrl(gx.popup.popuplvl()),gx.lang.emptyObject(b)?this.closeWindowImpl():(gx.ajax.windowClosed(-1),b=gx.ajax.absoluteurl(b),gx.spa.started?(gx.spa.redirect(b),gx.ajax.enableForm(d)):location.href=b))},closeWindowImpl:function(){gx.util.browser.isIE()?window.close():
0<history.length?history.back():window.location.assign("about:blank")},closeFromServer:function(b){try{if(window.parent&&window.parent.gx)return gx.popup.ispopup()&&!gx.grid.drawAtServer&&!window.parent.gx.grid.drawAtServer?gx.fn.closeWindow(gx.json.evalJSON(b)):window.parent.gx.fn.closeWindow(gx.json.evalJSON(b)),!0}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","closeFromServer")}return!1},closeWindowServerScript:function(b,a){gx.evt.execLoad=!1;a&&(gx.evt.clinav=!0,gx.ajax.pushReferer(gx.popup.popuplvl()));
this.closeWindow(b)},invalidEmptyValue:function(b){if(gx.lang.emptyObject(b.s)){for(var a=b.v.length,d=0;d<a;d++)if(b.v[d][0]===b.s)return!1;return!0}return!1},trimSelectValue:function(b,a){return"int"==a?gx.text.trim(b):gx.text.rtrim(b)},selectedDescription:function(b,a){for(var d=b.v.length,c=0;c<d;c++)if(this.trimSelectValue(b.v[c][0],a)===b.s)return b.v[c][1];return null},setGridCheckBoxValue:function(b,a,d,c){this.setCheckBoxValue(b+"_"+a,d,c)},setGridDecimalValue:function(b,a,d){return this.setGridControlValue(b,
a,d)},setGridControlValue:function(b,a,d,c){if(void 0!==a)return this.setControlValue(b+"_"+a,d,c)},setVarValues:function(b,a){for(var d=b.length,c=0;c<d;c++){var f=gx.fn.vStructForVar(b[c]);f&&f.v2v?f.v2v(a[c]):eval(b[c]+'="'+a[c]+'"')}},setControlOldValue:function(b,a){if(b){var d=b.id,c=gx.O.getValidStructFld(d);c&&c.gxgrid&&(c.gxgrid.IsValidState[d]?c.gxgrid.IsValidState[d].gxOldValue=a:c.gxgrid.IsValidState[d]={gxOldValue:a});if("radio"==b.type)for(var d=gx.dom.byName(b.name),c=d.length,f=0;f<
c;f++)d[f].setAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE,a);else b.setAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE,a)}},setControlGxValid:function(b,a){if(b&&b.id){var d=b.id,c=gx.O.getValidStructFld(d);c&&c.gxgrid&&(c.gxgrid.IsValidState[d]?c.gxgrid.IsValidState[d].gxvalid=a:c.gxgrid.IsValidState[d]={gxvalid:a});b.setAttribute(gx.csv.GX_VALID_ATTRIBUTE,a)}},setControlValue:function(b,a,d){b=gx.csv.ctxControlId(b);this.setControlValueAny(b,a,d)},setControlValueAny:function(b,a,d){var c=gx.O.getValidStructFld(b),
f=gx.dom.el(b),j=!1;c&&("dtime"==c.type||"date"==c.type?""===a?a=gx.date.nulldate_toc(c.len,c.dec):"string"==typeof a&&(a=new gx.date.gxdate(a)):gx.lang.isCharacterType(c.type)&&(a=gx.text.rtrim(a)));a instanceof gx.date.gxdate?gx.lang.emptyObject(c)||(a=gx.date.formatDateTime(c.dec,c.len,gx.dateFormat,a)):gx.lang.instanceOf(a,Number)||"undefined"!=typeof gx.num.dec&&a instanceof gx.num.dec.bigDecimal?!gx.lang.emptyObject(c)&&void 0!=c.pic&&(a=gx.num.formatNumber(a,c.dec,c.pic,c.len,c.sign,!1)):"string"==
typeof a&&(!gx.lang.emptyObject(c)&&void 0!=c.isPwd)&&(j=!0,null!=f&&"SPAN"==f.nodeName&&(a=gx.text.formatString(a,c.len,c.isPwd)));this.persistGridControlValue(b,a);null!=f&&"SPAN"!=f.nodeName?this.setControlValue_impl(f,a,d):gx.fn.setHidden(b,a);null!=f&&"SPAN"==f.nodeName&&(b=f);var l=!1,l=c?c.multiline:null!=f&&"TEXTAREA"==f.tagName;j?this.setControlValue_span_safe(b,gx.text.formatString(a,c.len,c.isPwd),d,l):this.setControlValue_span_safe(b,a,d,l)},setDecimalValue:function(b,a){this.setControlValue(b,
a)},toDecimalValue:function(b,a,d){return gx.num.parseFloat(b,a,d)},toDatetimeValue:function(b,a){return new gx.date.gxdate(b,a)},setCheckBoxValue:function(b,a,d){try{var b=gx.csv.ctxControlId(b),c=gx.dom.byId(b);c||(c=gx.dom.form()[b]);c&&(c.checked=a.toString()==d.toString(),c.value=a)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","setCheckBoxValue")}},persistGridControlValue:function(b,a,d){var c=b.lastIndexOf("_");if(-1!=c&&(d=d?d:gx.O.getValidStructFld(b.substring(0,c)))&&d.gxgrid)c=b.substring(c+1),
4<c.length?(c=c.substring(4,c.length),(c=gx.O.getGrid(d.gxgrid.gridName+"_"+c))&&c.persistControlValue(b,a,d)):d.gxgrid.persistControlValue(b,a,d)},setControlValue_span_safe:function(b,a,d,c){"string"==typeof b&&(b=gx.dom.el("span_"+b));if(b&&"SPAN"!==b.nodeName)var g="span_",g="string"==typeof b?g+b:g+gx.dom.id(b),b=gx.dom.byId(g);null!=b&&(g=gx.dom.bySelector('[data-name="'+b.id+'"]'),2>g.length&&(g=[b]),f.each(g,function(b,f){gx.fn.setControlValue_fmt(f,a,d,c)}))},setControlValue_fmt:function(b,
a,d,c){try{if(null!=b)if(1==d){var f=b.getAttribute("gxlink");!gx.lang.emptyObject(f)&&(null!=b.firstChild&&"A"==b.firstChild.nodeName)&&(b=b.firstChild);gx.html.setInnerHtml(b,a,!0)}else{0==d&&"string"==typeof a&&(a=a.replace(/ +/g," "));for(f=b;null!=b.firstChild&&"#text"!=b.firstChild.nodeName;)b=b.firstChild;0==d&&(null==b.firstChild||"#text"!=b.firstChild.nodeName)&&"A"!=b.nodeName?gx.html.setInnerText(f,a,d,c):gx.html.setInnerText(b,a,d,c)}}catch(j){gx.dbg.logEx(j,"gxfrmutl.js","setControlValue_fmt")}},
setControlValue_impl:function(b,a,d){"string"==typeof b&&(b=gx.dom.el(b));a instanceof gx.date.gxdate&&(a=a.getString());if(null!=b){var c=gx.dom.byName(b.id);if(2>c.length||"radio"===b.type)c=[b];f.each(c,function(b,c){"radio"===c.type?gx.fn.setRadioValue(c.name,a):gx.dom.isEditControl(c)||"textarea"==c.type?c.value=gx.lang.decodeValue(a):void 0!=c.value?c.value=a:gx.fn.setControlValue_span_safe(c,a,d)})}},setGridComboBoxValue:function(b,a,d){this.setComboBoxValue(b+"_"+a,d)},setComboBoxValue:function(b,
a){var d=gx.util.browser.isIE(),b=gx.csv.ctxControlId(b),c=gx.dom.byId(b);if(c){var f="",j=gx.O.getValidStructFld(b);gx.lang.emptyObject(j)||(f=j.type);"int"==f?a=gx.text.trim(a):"date"==f&&a instanceof gx.date.gxdate?a=a.getStringWithFmt("Y4MD"):"decimal"!=f&&(a=gx.text.rtrim(a));var l=a,m=!1;try{for(var n=c.options.length,p,q=0;q<n;q++){var u=c.options[q];if(gx.lang.isNumericType(f)?Number(u.value)==Number(a):gx.text.trim(u.value)==gx.text.trim(a)){if(l="undefined"!=typeof u.innerText?u.innerText:
u.text,c.selectedIndex=q,m=!0,u.setAttribute("selected","selected"),p=u,d)break}else d||u.removeAttribute("selected")}p&&(p.value!=c.value&&gx.util.browser.isFirefox())&&gx.dom.redrawControl(c);m||(c.selectedIndex=0);0<j.grid&&this.persistGridControlValue(b,a,j)}catch(s){gx.dbg.logEx(s,"gxfrmutl.js","setComboBoxValue")}this.setControlValue_span_safe(b,l,0)}},loadRadioButton:function(b,a,d){var c=f(b).parent().closest(".gx-radio-button"),g=f(b),a=f(gx.html.controls.applyTemplate("radio",{id:b.name,
className:c.attr("class"),style:c.attr("style"),title:b.title,isDisabled:b.disabled,gxoch0:g.attr("gxoch0"),values:f.map(a,function(a,c){return{itemId:b.name+"_"+c,itemValue:a[0],itemDesc:a[1],isSelected:gx.text.trim(d.toString())==gx.text.trim(a[0].toString())}})}));c.replaceWith(a);gx.plugdesign.applyTemplateObject(a)},loadComboBox:function(b,a){this.setComboValues(b,a)},setGridComboValues:function(b,a){if(0==this.controlGridId(b))this.setComboValues(b,a);else for(var d=1;999>d;d++){var c=gx.text.padl(d.toString(),
4,"0"),c=gx.dom.el(b+"_"+c);if(null==c)break;this.setComboValues(c.name,a)}},setComboValues:function(b,a){var d=gx.dom.el(b),c=gx.util.browser;if(null!=d){var f="";-1!=d.selectedIndex&&(f=d.options[d.selectedIndex].value);for(;d.options.length>a.length;)d.remove(d.options.length-1);for(;a.length>d.options.length;){var j=document.createElement("OPTION");d.options.add(j)}for(var l=a.length,m=0;m<l;m++)if(j=d.options[m],j.value=a[m][0],c.isIE()&&9<=c.ieVersion()?j.innerText!=a[m][1]&&(j.innerText=a[m][1]):
j.text!=a[m][1]&&(j.text=a[m][1]),Number(j.value)?Number(j.value)==Number(f):gx.text.trim(j.value)==gx.text.trim(f))d.selectedIndex=m;if(0==d.options.length)d.selectedIndex=-1;else if(-1==d.selectedIndex||d.selectedIndex>d.options.length-1)d.options[0].selected=!0}},getControlRefById:function(b){return(b=this.validStruct(b))?0==b.grid?this.getControlRef(b.fld,!1):this.getControlGridRef(b.fld,b.grid):null},getControlRef:function(b,a){a||(b=gx.csv.ctxControlId(b));if("FORM"==b)return document;var d=
gx.dom.el(b);return null!=d?d:null},getControlRef_list:function(b){var a=gx.dom.byName(b);if(null!=a)return a;b=gx.dom.byId(b);return null!=b?[b]:null},screen_CtrlRef:function(b){b=this.getControlGridRef(b,this.controlGridId(b));return!gx.lang.emptyObject(b)?("hidden"==b.type&&(b=gx.dom.el("span_"+gx.dom.id(b))),b):null},screen_CtrlId:function(b){return this.getControlGridId(b,this.controlGridId(b))},getControlGridId:function(b,a,d){b=gx.csv.ctxControlId(b);if(gx.dom.el(b))return b;try{if(0==a)return b;
void 0==d&&(d=this.currentGridRow(a));return b+"_"+d}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","getControlGridId")}},getControlGridRef:function(b,a,d){var b=gx.csv.ctxControlId(b),c=gx.dom.el(b);if(c)return c;try{if(0==a)return gx.dom.el(b);void 0==d&&(d=this.currentGridRow(a));if(c=gx.dom.el(b+"_"+d))return c;var f=gx.O.getComponentData(b);if(f)return gx.dom.el("gxHTMLWrp"+f.Prefix+d)}catch(j){gx.dbg.logEx(j,"gxfrmutl.js","getControlGridRef")}},setCurrentGridRow:function(b,a){if("0000"!=a)try{return gx.currentRows[b]=
a}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","setCurrentGridRow")}},currentGridRowImpl:function(b){try{return gx.currentRows[b]}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","currentGridRowImpl")}},currentGridRow:function(b){b=this.currentGridRowImpl(b);return void 0==b?"0001":b},gridDuplicateKey:function(b){b=gx.fn.validStruct(b);if(void 0!=b){var a=b.gxgrid;if(null!=a&&(a=a.updateControlValue(b,!0)))return a.gxHasDuplicateKey()}return!1},firstGridControl:function(b,a){var d=gx.fn.controlIds(),c=d.length;for(i=
0;i<c;i++){var f=gx.fn.validStruct(d[i],a);if(void 0!=f&&f.grid==b)return d[i]}return-1},lastGridControl:function(b,a){var d=gx.fn.controlIds();for(i=d.length-1;0<=i;i--){var c=gx.fn.validStruct(d[i],a);if(void 0!=c&&c.grid==b)return d[i]}return-1},getGridDateTimeValue:function(b,a){var d=this.getControlValue(b+"_"+a);return new gx.date.gxdate(d,gx.dateFormat)},getGridDecimalValue:function(b,a,d,c){return this.getDecimalValue(b+"_"+a,d,c)},getGridIntegerValue:function(b,a,d){return this.getIntegerValue(b+
"_"+a,d)},getGridControlValue:function(b,a){return this.getControlValue(b+"_"+a)},getControlValue:function(b,a){return this.getControlValue_impl(gx.csv.ctxControlId(b),a)},getControlValue_impl:function(b,a){try{var d=gx.O&&gx.O.getValidStructFld(b),c;if(d&&d.gxgrid&&!d.gxgrid.isUsercontrol||!d||!d.gxgrid){var f=gx.dom.el(b);if(null!=f&&gx.O){d&&!f.gxtype&&(f.gxtype={type:d.type,len:d.len,dec:d.dec});if("checkbox"==f.type&&d.values&&d.values.length&&1<d.values.length)c=f.checked?d.values[0]:d.values[1];
else if("hidden"==f.type||"text"==f.type||"textarea"==f.type||"checkbox"==f.type)c=f.value;else if("radio"==f.type)c=gx.fn.getRadioValue(gx.dom.byName(b));else if("SELECT"==f.nodeName&&0<f.options.length?c=-1!=f.selectedIndex?"screen"==a?f.options[f.selectedIndex].text:f.options[f.selectedIndex].value:"screen"==a?f.options[0].text:f.options[0].value:d&&("date"!=d.type&&"dtime"!=d.type&&"bits"!=d.type&&"audio"!=d.type&&"video"!=d.type)&&(c=f.value),"IMG"==f.nodeName||"INPUT"==f.nodeName&&"image"==
f.type)c=f.getAttribute("src");if(void 0!==c)return d&&"boolean"==d.type?gx.lang.gxBoolean(c):c}f=gx.dom.el("span_"+b);if(null!=f){var j=gx.fn.getHidden(b),l=gx.fn.getControlValue_span(f);return"screen"==a?void 0!=l?l:j:void 0!=j?j:l}f=gx.dom.form()[b];if(null!=f)return this.getControlValueInt(f);f=gx.dom.byId("_"+b);if(null!=f)return f.value;(ControlList=gx.dom.byName(b))&&0==ControlList.length&&(ControlList=gx.dom.byName("_"+b));if(null!=ControlList){for(var m=ControlList.length,d=0;d<m;d++)if(f=
ControlList[d],null!=f)return this.getControlValueInt(f);if(f=ControlList[0])return f.value}}if(null==f)return"nohidden"===a?null:gx.fn.getHidden(b)}catch(n){gx.dbg.logEx(n,"gxfrmutl.js","getControlValue_impl")}return""},setRadioValue:function(b,a){var b=gx.csv.ctxControlId(b),d=gx.dom.byName(b);if(null!=d)for(var c=d.length,g=0;g<c;g++){var j=f(d[g]);if(gx.text.ltrim(d[g].value)==gx.text.ltrim(a)){j.attr("checked","");j.prop("checked",!0);break}}},getRadioValue:function(b){for(var a=b.length,d=0;d<
a;d++)if(b[d].checked)return b[d].value;return""},getControlValueInt:function(b){if(void 0!=b.length&&"SELECT"!=b.tagName&&"undefined"!=typeof b[0]&&"radio"==b[0].type)return this.getRadioValue(b);if("checkbox"==b.type)return b.checked;if("SPAN"==b.tagName){var a=gx.fn.getHidden(gx.dom.id(b));return void 0!=a?a:gx.fn.getControlValue_span(b)}if("INPUT"==b.tagName&&"text"==b.type&&(a=gx.dom.id(b),gx.O)){var d=gx.O.getValidStructFld(a);if(d&&"undefined"!=typeof d.pic){if("int"==d.type)return this.getIntegerValue(a,
-1!=d.pic.indexOf(",")?gx.thousandSeparator:"");if("decimal"==d.type)return this.getDecimalValue(a,-1!=d.pic.indexOf(",")?gx.thousandSeparator:"",gx.decimalPoint)}}return b.value},getControlValue_span:function(b){for(;b&&!b.nodeValue;)b=b.childNodes[0];return b&&b.nodeValue?b.nodeValue:""},getDateTimeArrayValue:function(b){try{var a,d=function(a,b){gx.lang.emptyObject(a)||f.each(a,function(d,c){a[d]=new gx.date.gxdate(c,b)});return""},c=this.getControlValue(b,"nohidden");a=d(c,gx.dateFormat);a||(c=
gx.fn.getHidden(gx.csv.ctxControlId(b)),a=d(c,"Y4MD"));return a}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","getDateTimeArrayValue")}return""},getDateValue:function(b){return this.getDateTimeValue(b)},getDateTimeValue:function(b){try{var a=this.getControlValue(b,"nohidden");if(!gx.lang.emptyObject(a))return new gx.date.gxdate(a,gx.dateFormat);a=gx.fn.getHidden(gx.csv.ctxControlId(b));return new gx.date.gxdate(a,"Y4MD")}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","getDateValue")}return""},getIntegerValue:function(b,
a){var d=0,d=gx.O?gx.O.getValidStructFld(b):null,c=this.getControlValue(b);d&&c&&(c=gx.num.extractValue(d.pic,c));if(gx.lang.isArray(c))return c;c="undefined"!=typeof c?c.toString():"";d=c.length<gx.num.maxNumericPrecision()||"undefined"==typeof gx.num.dec?gx.num.parseInt(c,10,a):(new gx.num.dec.bigDecimal(gx.text.replaceAll(c,a,""))).setScale(0,gx.num.dec.ROUND_UP).toString();return isNaN(d)?0:d},getDecimalValue:function(b,a,d){var c=gx.O?gx.O.getValidStructFld(b):null,b=this.getControlValue(b);
c&&b&&(b=gx.num.extractValue(c.pic,b));if(gx.lang.isArray(b))return b;a=gx.num.parseFloat(b||"",a,d);return isNaN(a)?0:a},getBlobValue:function(b){var a=gx.dom.el("Object_"+b);if(null!=a){if(a.data&&!gx.text.endsWith(a.data,"about:blank"))return a.data}else if(a=gx.dom.el("Link_"+b),null!=a)return a.getAttribute("href");return""},getVarControlMap:function(b){for(var a in gx.O.VarControlMap)if("function"!=typeof a){var d=gx.O.VarControlMap[a];if(d.id==b||gx.O.CmpContext+d.id==b)return a}return null},
getVarControlMapForVar:function(b){for(var a in gx.O.VarControlMap)if("string"==typeof a&&a==b)return gx.O.VarControlMap[a];return null},v2c:function(b,a){b.v2c();"undefined"===typeof a&&(a=b.val());var d=gx.fn.getControlGridRef(b.fld,b.grid);gx.plugdesign.controlValueChanged(d,a)},v2cMap:function(b){var a=this.getVarControlMapForVar(b);if(null!=a){var d="";"number"==typeof a.grid&&0!=a.grid&&(d="_"+gx.fn.currentGridRowImpl(a.grid));gx.fn.setHidden(gx.O.CmpContext+a.id+d,gx.O[b])}},c2vMap:function(b){var a=
this.getVarControlMapForVar(b);if(null!=a){var d="";"number"==typeof a.grid&&0!=a.grid&&(d="_"+gx.fn.currentGridRowImpl(a.grid));gx.O[b]=gx.fn.getHidden(gx.O.CmpContext+a.id+d)}},depsToVars:function(b){for(var a=0;a<b.length;a++){var d=b[a],c=gx.fn.vStructForVar(d);!gx.lang.emptyObject(c)&&"function"==typeof c.c2v?c.c2v():this.c2vMap(d)}},verticalFormula:function(b,a,d,c,f,j){var l=gx.fn.vStructForVar(b);gx.lang.emptyObject(l)?this.v2cMap(b):l.v2c();for(var m=gx.fn.currentGridRowImpl(d),n=gx.fn.getGridObj(d),
p=0,q=!1,u=n.grid.rows.length,s=0;s<u;s++){var r=n.grid.rows[s],t=r.gxDeleted(),v=r.gxExists(),y=r.gxIsMod();if(!t&&(v||y))gx.fn.setCurrentGridRow(d,r.gxId),j&&0<j.length?this.depsToVars(j):!gx.lang.emptyObject(l)&&"function"==typeof l.c2v?l.c2v():this.c2vMap(b),c.call(gx.O)&&(q=!0,p=f(s,p))}gx.fn.setCurrentGridRow(d,m);j&&0<j.length?this.depsToVars(j):!gx.lang.emptyObject(l)&&"function"==typeof l.c2v?l.c2v():this.c2vMap(b);q||(p=a);return p},rowValueHandler:function(b,a,d,c,f,j,l){try{var m=gx.fn.vStructForVar(b)||
gx.fn.getVarControlMapForVar(b),n=m?m.type:"decimal";switch(n){case "boolean":return c(b,a,d);case "int":case "decimal":var p=gx.num.parseFloat(gx.O[b],j,l);return 0==a?p:f(b,a,d,p);default:gx.dbg.write("Warning: Forumula not supported for: ",b,n)}}catch(q){gx.dbg.logEx(q,"gxfrmutl.js","Formula could not be calculated for Field: "+b)}},maxFrm:function(b,a,d,c,f,j,l){var m=function(a,b,d){return d||gx.O[a]},n=function(a,b,d,c){return c>d?c:d};return gx.fn.verticalFormula(b,a,f,j,function(a,f){return gx.fn.rowValueHandler(b,
a,f,m,n,d,c)},l)},sumFrm:function(b,a,d,c,f,j,l){var m=function(a,b,d){return d||gx.O[a]},n=function(a,b,d,c){return c+d};return gx.fn.verticalFormula(b,a,f,j,function(a,f){return gx.fn.rowValueHandler(b,a,f,m,n,d,c)},l)},minFrm:function(b,a,d,c,f,j,l){var m=function(a,b,d){return d&&gx.O[a]},n=function(a,b,d,c){return c<d?c:d};return gx.fn.verticalFormula(b,a,f,j,function(a,f){return gx.fn.rowValueHandler(b,a,f,m,n,d,c)},l)},averageFrm:function(b,a,d,c,f,j,l){return gx.fn.verticalFormula(b,a,f,j,
function(a,f){var g=gx.num.parseFloat(gx.O[b],d,c);return 0==a?g:(f*a+g)/(a+1)},l)},countFrm:function(b,a,d,c,f){return gx.fn.verticalFormula(b,a,d,c,function(a,b){return 0==a?1:b+1},f)},serialRule:function(b,a,d,c,f){f=f||gx.O;if("INS"!=gx.fn.getGridRowMode(gx.fn.gridLvl(d),d))return f[b];gx.lang.emptyObject(f[a])&&(f[a]=f[b]+c,(d=gx.fn.vStructForVar(a))&&d.v2c(),(d=f.VarControlMap[b])&&gx.fn.setControlValue(d.id,f[a]));return Math.max(f[a]||0,f[b]||0)},setReturnParms:function(b,a,d,c){try{var f,
j,l;if(c){j=d.length;for(f=0;f<j;f++)l=gx.fn.vStructForVar(a[f]),c.grid.setCellValue.apply(c.grid,[l,d[f]])}else if(b&&(a&&d)&&(j=a.length,j==d.length)){gx.setGxO(b);c=null;for(f=0;f<j;f++){var m=a[f];if(m){var n=d[f];l=gx.fn.vStructForVar(m);gx.lang.emptyObject(l)&&(l=gx.fn.vStructForHC(m));if(l){var p=gx.fn.screen_CtrlRef(gx.csv.ctxControlId(l.fld));gx.fn.isAccepted(p)&&(c=p,gx.evt.execOnchange(p));l.v2v&&(l.v2v(n),gx.fn.v2c(l,n));"function"===typeof l.v2bc&&l.v2bc.call(b);b.refreshDependantGrids(l)}else b.setVariable(m,
n)}}c&&gx.fn.setFocus(c)}}catch(q){gx.dbg.logEx(q,"gxfrmutl.js","setReturnParms")}},isOutputParm:function(b){return b&&b.IOType&&("out"==b.IOType||"inout"==b.IOType)?!0:!1},checkPopupFocus:function(b){if(gx.popup.ispopup()){var a=gx.popup.getPopup();if(a&&a.frameDocument&&(b.ownerDocument?b.ownerDocument:b.document).URL!=a.frameWindow.location.href)return a.setFocusFirst(),!1}return!0},persistControlProperty:function(b,a,d){b=gx.fn.screen_CtrlId(gx.csv.ctxControlId(b));gx.usrPtys[b]||(gx.usrPtys[b]=
{});gx.usrPtys[b][a.toLowerCase()]=d},setCtrlProperty:function(b,a,d){if(gx.O){var c=null,c="FORM"==b?document:gx.fn.screen_CtrlRef(gx.csv.ctxControlId(b));null!=c&&(this.persistControlProperty(b,a,d),this.setCtrlPropertyImpl(c,a,d))}else gx.fx.obs.addObserver("gx.onready",this,gx.fn.setCtrlProperty.closure(this,arguments),{single:!0})},setGridCtrlProperty:function(b,a,d){var c=gx.fn.screen_CtrlRef(b);if(null!=c){this.setCtrlPropertyImpl(c,a,d);var g=gx.fn.controlGridId(b);if(g&&(c=f(c).parent().closest("TD",
f("[data-gxgridid="+g+"]").get(0)).get(0)))this.persistControlProperty(b,a,d),this.setCtrlPropertyImpl(c,a,d)}},setCtrlPropertyImpl:function(b,a,d){if(null!=b){b==document&&"Backcolor"==a&&(b=document.body,this.setCtrlPropertyImpl(gx.dom.form(),a,d));var c=gx.O.getValidStructFld(b.id);if(!("Enabled"===a||"Visible"===a)||!c||!(0<c.grid&&gx.fn.rowIsRemoved(c.grid,gx.fn.controlRowId(b)))){var g=b,c={control:g,property:a,value:d};gx.fx.obs.notify("gx.control.onbeforepropertychange",[c]);if(!c.cancel){var c=
this.getRONode(b.id,!1),j=[b];c&&j.push(c);j=f(j);switch(a){case "Caption":this.setCtrlCaption(b,d);break;case "Tooltiptext":b.title=d;break;case "Invitemessage":b.placeholder=d;break;case "Visible":if("INPUT"==b.nodeName&&"button"==b.type)this.setButtonVisibility(b,!this.propertyValueFalse(d));else{"INPUT"==b.nodeName&&("checkbox"==b.type?b=b.parentNode:"radio"==b.type&&(c=f(b).parent().closest(".gx-radio-button"),0<c.length&&(b=c[0])),(c=gx.html.multimediaUpload.getContainer(b))&&(b=c));c=this.propertyValueFalse(d);
j=b.gxusrdisabled?b.gxusrdisabled:!1;if(c){var l=gx.dom.el("span_"+b.id);this.setVisible(b,!c);l&&this.setVisible(l,!c)}else(l=this.getRONode(b.id,j))&&this.setVisible(l,j),this.setVisible(b,!j);gx.fn.setDateCtrlProperties(b,!j,!c)}gx.fn.checkAttachedProperty(b.id,a,d);break;case "Enabled":c=this.propertyValueFalse(d);if("hidden"===b.type||"SPAN"===b.tagName&&c)return;if("INPUT"===b.nodeName&&"radio"===b.type)for(var j=gx.dom.byName(b.name),l=j.length,m=0;m<l;m++)this.setEnabledProperty(j[m],!c);
else(gx.dom.isEditControl(b)||"textarea"===b.type||"file"===b.type||"SELECT"===b.tagName)&&"password"!==b.type?(l=this.getRONode(b.id,c),gx.fn.isVisible(b,0)||l&&gx.fn.isVisible(l,0)?(l&&this.setVisible(l,c),this.setEnabledProperty(b,!c),this.setVisible(b,!c),gx.fn.setDateCtrlProperties(b,!c,!0),gx.fn.checkAttachedProperty(b.id,a,!c),gx.fn.checkAttachedProperty(b.id,"Visible",!c)):(this.setEnabledProperty(b,!c),gx.fn.setDateCtrlProperties(b,!c,!1),gx.fn.checkAttachedProperty(b.id,a,!c))):this.setEnabledProperty(b,
!c);break;case "Class":b==document?(c=f(gx.dom.form()),j=f(document.body),l=c.attr("data-gx-class")||"",j.removeClass(l).attr("class",d+" "+j.attr("class")),c.removeClass(l).attr({"class":d+" "+c.attr("class"),"data-gx-class":d})):j.attr("class",d);break;case "Columnclass":(c=b.parentNode)&&"TD"==c.tagName&&this.setCtrlClass(c,"gx-attribute "+d);break;case "Link":this.setCtrlLink(this.getRONode(b.id,!1)||b,d);break;case "Linktarget":this.setCtrlLinkTarget(this.getRONode(b.id,!1)||b,d);break;case "Backcolor":if((c=
gx.color.html(d))&&void 0==b.gxGridName)b.style.backgroundColor=c.Html;break;case "Background":b.style.backgroundImage="url("+d+")";break;case "Forecolor":(c=gx.color.html(d))&&j.css("color",c.Html);break;case "Fontbold":c=this.propertyValueFalse(d);j.css("fontWeight",c?"normal":"bold");break;case "Fontitalic":c=this.propertyValueFalse(d);j.css("fontStyle",c?"normal":"italic");break;case "Fontunderline":c=this.propertyValueFalse(d);j.css("textDecoration",c?"none":"underline");break;case "Fontstrikethru":c=
this.propertyValueFalse(d);j.css("textDecoration",c?"none":"line-through");break;case "Fontname":j.css("fontFamily",d);break;case "Fontsize":j.css("fontSize",d+"pt");break;case "Filename":this.setBlobFilename(b,d);break;case "Filetype":this.setBlobFiletype(b,d);break;case "URL":this.setBlobUrl(b,d);break;case "IsBlob":this.setMultimediaType(b,d);break;case "Bitmap":b.src=d;break;case "SrcSet":void 0!==d&&(b.srcset=d);break;case "Multimedia":this.setMultimediaValue(b,d);break;case "Jsonclick":b.jsevent=
d;break;case "Source":c=d;j=c.indexOf("?");0<j&&(c=c.substring(0,j));b.src=-1==c.indexOf(":")&&-1==c.indexOf("/")?gx.ajax.objectUrl(d):gx.util.resourceUrl(d,!0);gx.evt.attach(b,"load",gx.dom.autofitIFrame);break;case "Values":if("SELECT"==b.tagName||gx.dom.isRadio(b)||"SPAN"==b.tagName)d=gx.json.evalJSON(d),"SELECT"==b.tagName?!1!=d.isset&&(gx.fn.loadComboBox(b.id,d.v),gx.fn.setComboBoxValue(b.id,d.s)):gx.dom.isRadio(b)?!1!=d.isset&&gx.fn.loadRadioButton(b,d.v,d.s):(j=b.id.substring(5),l="",m=d.s,
c=gx.O.getValidStructFld(j),gx.lang.emptyObject(c)||(l=c.type),m=gx.fn.trimSelectValue(m,l),d.s=m,gx.fn.setControlValue_span_safe(j,gx.fn.selectedDescription(d,l)));break;case "Width":b.width&&(b.width=d);b.style.width=gx.dom.addUnits(d);break;case "Height":b.height&&(b.height=d),b.style.height=gx.dom.addUnits(d)}if(b=gx.dom.id(b))b=b+"_"+a,gx.fn.isHidden(b)&&gx.fn.setHidden(b,d);gx.fx.obs.notify("gx.control.onafterpropertychange",[{control:g,property:a,value:d}])}}}},setEnabledProperty:function(b,
a,d){var c=gx.dom.id(b);if(!gx.lang.gxBoolean(a)||!gx.fn.isAccepted(b,!1)){if(!0==gx.csv.validating&&a&&null==gx.csv.validActivatedControl&&b!=gx.csv.lastControl){var f=gx.O.getValidStructId(c);f>gx.O.fromValid&&f<=gx.O.toValid&&(gx.csv.validActivatedControl=b)}a?delete gx.disabledControls[c]:gx.util.addOnce(gx.disabledControls,b,c);b.gxusrdisabled=!a;b.disabled=b.gxdisabled?!0==b.gxdisabled?!0:b.gxusrdisabled:b.gxusrdisabled;(void 0===d||d)&&this.setEnabled(b,a)}},setEnabled:function(b,a){f(b).toggleClass("gx-disabled",
!gx.lang.booleanValue(a));if(this.disabledAsSpan(b)){var d;try{"checkbox"==b.type&&(d=b.parentNode),"radio"==b.type&&(d=f(b).parent().closest(".gx-radio-button")[0])}catch(c){}if(gx.lang.booleanValue(a)){if(d&&0==d.className.indexOf("Readonly")&&(d.className=d.className.substring(8)),this.isVisible(b))this.setVisible(b,1),(d=this.getRONode(b.id,!0))&&this.setVisible(d,0)}else if(d&&0>d.className.indexOf("Readonly")&&(d.className="Readonly"+d.className),this.isVisible(b)&&"password"!=b.type&&"image"!=
b.type&&"checkbox"!=b.type&&"radio"!==b.type)if(d=this.getRONode(b.id,!0)){this.setVisible(b,0);this.setVisible(d,1);var g=gx.O.getValidStructFld(b),j=0;!gx.lang.emptyObject(g)&&g.format&&(j=g.format);this.setControlValue_span_safe(d,gx.fn.getControlValue(gx.dom.id(b),"screen"),j,"textarea"==b.type)}}},disabledAsSpan:function(b){return"IMG"!=b.tagName},setVisible:function(b,a){f(b).toggleClass("gx-invisible",!gx.lang.booleanValue(a));b.style.display=0==a?"none":this.displayByType(b.nodeName);var d=
gx.O.getValidStructFld(b),c=b.parentNode;a&&d&&d.gxgrid&&!d.gxgrid.grid.gxIsFreestyle&&null!=c.getAttribute("data-colindex")?d.gxgrid.applyPropEntireColumn(c.getAttribute("data-colindex"),"Visible",a):gx.fn.rowGridId(b)&&(d=f(b).find("table")[0])&&this.setVisible(d,a)},getRONode:function(b,a){if(gx.lang.emptyObject(b))return null;var d=gx.dom.byId(b),c="span_"+b,f=gx.dom.byId(c);if(null!=f)return f;if(!a||null==d)return null;f=document.createElement("SPAN");f.setAttribute("id",c);this.setVisible(f,
!1);f.className="Readonly"+d.className;f.appendChild(document.createTextNode(d.value||""));d.parentNode.insertBefore(f,d);return f},setDateCtrlProperties:function(b,a,d){var c=gx.dom.el(gx.dom.id(b)+"_dp_trigger");c&&f(c).toggle(a);if(c=f(gx.dom.el(gx.dom.id(b)+"_dp_container")))b.Flat&&f(b).hide(),b=f(".calendar",c),c.toggle(a&&d||!a&&d),b&&b.toggle(a&&d)},getGridCtrlProperty:function(b,a,d){try{if(0!=b){var c=this.getGridObj(b);if(c){var f=c.grid.getColumnByHtmlName(a);if(f)return f[d.toLowerCase()]}}else return this.getCtrlProperty(a,
d)}catch(j){gx.dbg.logEx(j,"gxfrmutl.js","getGridCtrlProperty")}return""},getCtrlProperty:function(b,a){var d=gx.O.getValidStructFld(b),d=d&&0<d.grid?"_"+gx.fn.currentGridRowImpl(d.grid):"",d=gx.uc.getUserControlObj(gx.uc.userControlContainerId(b+d));if(null!=d)return d[a];if(d=this.screen_CtrlRef(b))return"Text"===a?this.getControlValue(b,"screen"):"Visible"==a&&gx.fn.getRONode(b)?this.getCtrlProperty_impl(d,a)||this.getCtrlProperty_impl(gx.fn.getRONode(b),a):"Enabled"==a&&gx.fn.getRONode(d.id)?
!this.getCtrlProperty_impl(gx.fn.getRONode(d.id),"Visible"):this.getCtrlProperty_impl(d,a)},getCtrlProperty_impl:function(b,a){if(null==b)return"";switch(a){case "Tooltiptext":return b.title;case "Invitemessage":return b.placeholder;case "Visible":return"none"!=b.style.display;case "Enabled":return void 0===b.disabled?f(b).hasClass("gx-disabled")?!1:!0:!b.disabled;case "Class":return b.className;case "Backcolor":return gx.color.css(b.style.backgroundColor);case "Forecolor":return gx.color.css(b.style.color);
case "Width":return gx.dom.dimensions(b).w;case "Height":return gx.dom.dimensions(b).h;case "Caption":return this.getCtrlCaption(b);case "Fontbold":return"bold"==b.style.fontWeight;case "Fontitalic":return"italic"==b.style.fontStyle;case "Fontunderline":return"underline"==b.style.textDecoration;case "Fontstrikethru":return"line-through"==b.style.textDecoration;case "Fontname":return b.style.fontFamily;case "Filename":return b.value.split(/(\\|\/)/g).pop();case "Fontsize":var d=parseInt(b.style.fontSize);
return isNaN(d)?12:d}},displayByType:function(b){switch(b){case "TABLE":return!gx.util.browser.isIE()||8<=gx.util.browser.ieVersion()?"table":"block";case "P":case "DIV":return"block"}return""},setCtrlCaption:function(b,a){try{var d=gx.html.getFieldLabel(b);if(d)gx.fn.setControlValue_fmt(d,a,0,!1);else{switch(b.tagName){case "SPAN":case "DIV":case "FIELDSET":var c=b.getAttribute("data-gxformat"),f=gx.O.getValidStructFld(b);null==c&&(c=!gx.lang.emptyObject(f)&&f.format?f.format:0);d=!1;f&&(d=f.ctrltype?
f.multiline:!0);gx.fn.setControlValue_fmt(b,a,c,d);return;case "INPUT":"checkbox"!=b.type&&(b.value=a);return}"#document"==b.nodeName&&(b.title=a)}}catch(j){gx.dbg.logEx(j,"gxfrmutl.js","setCtrlCaption")}},getCtrlCaption:function(b){var a=gx.html.getFieldLabel(b);if(a)return f(a).text();switch(b.tagName){case "SPAN":case "DIV":case "FIELDSET":a=b.getAttribute("data-gxformat");if(null!=a&&"1"==a)return b.innerHTML;for(;null!=b.firstChild&&"#text"!=b.firstChild.nodeName;)b=b.firstChild;return"undefined"!=
typeof b.innerText?b.innerText:b.textContent||b.text;case "INPUT":if("checkbox"!=b.type)return b.value;break;default:return""}},propertyValueFalse:function(b){return"string"==typeof b&&(b=b.toLowerCase(),"false"==b||0==gx.num.parseFloat(b))?!0:0==b},setButtonVisibility:function(b,a){var d=a?"":"none",c=b.parentNode;!gx.lang.emptyObject(c)&&"SPAN"==c.nodeName&&(c.style.display=d,c=c.parentNode,!gx.lang.emptyObject(c)&&"SPAN"==c.nodeName&&(c.style.display=d,c=c.parentNode,!gx.lang.emptyObject(c)&&"SPAN"==
c.nodeName&&(c.style.display=d,c=c.parentNode,!gx.lang.emptyObject(c)&&"SPAN"==c.nodeName&&(c.style.display=d))));b.style.display=d},setBlobValue:function(b,a){this.setBlobUrl(gx.dom.el(b)||gx.dom.el("Object_"+b),a)},setBlobFilename:function(b,a){if(null!=b){var d=gx.O.getValidStructFld(b);d&&gx.fn.setHidden(d.fld+"_Filename",gx.text.trim(a))}},setBlobFiletype:function(b,a){if(null!=b){var d=gx.O.getValidStructFld(b);d&&gx.fn.setHidden(d.fld+"_Filetype",gx.text.trim(a));d=b;"INPUT"==d.nodeName&&"file"==
d.type&&(d=gx.dom.el("Object_"+b.id));null!=d&&(a=gx.util.getContentType(a),this.setObjectCtrlType(d,a),gx.fn.setVisible(d,!0))}},resolveResourceUrl:function(b,a){if(""==b)return a?gx.ajax.getImageUrl(gx,"blankImage"):"";if(!gx.ajax.isabsoluteurl(b))if(gx.ajax.isRelativeToHost(b)){if(0!=b.toLowerCase().indexOf("/"+gx.basePath.toLowerCase()))return gx.util.resourceUrl(gx.basePath+b,!1)}else return gx.util.resourceUrl(gx.basePath+gx.staticDirectory+b,!1);return b},setBlobUrl:function(b,a){var d=gx.html.multimediaUpload.getContainer(b);
if(d){var c=this.resolveResourceUrl(a,!1);gx.html.multimediaUpload.setPreviewImage(d,c);gx.html.multimediaUpload.setPreviewLink(d,c)}else if(!a.match(/^[a-z]:[\S]*/i)&&null!=b){d=b;c="INPUT"==d.nodeName&&"file"==d.type;if(""===a)if(c&&gx.util.browser.isIE()){var f=d.parentNode,j=document.createElement("div");j.innerHTML=d.outerHTML;f.removeChild(d);d=f.appendChild(j.firstChild)}else d.value="";c&&(d=gx.dom.el("Object_"+b.id));null!=d&&(c=gx.util.getContentTypeFromExt(a),d=this.setObjectCtrlType(d,
c));null!=d?"IMG"==d.tagName?(a=this.resolveResourceUrl(a,!0),d.src=a):(d.data=a||"about:blank",gx.fn.setVisible(d,!0),this.resizeObject(d),gx.dom.redrawControl(d)):(d=gx.dom.el("Link_"+b.id),null!=d&&(d.style.display=""!=a?"block":"none",d.href=a))}},setGridMultimediaValue:function(b,a,d,c){if(void 0!==a)return this.setMultimediaValue(b+"_"+a,d,c)},setMultimediaValue:function(b,a,d){var c=gx.dom.el(b);if(c){var f=gx.html.multimediaUpload.getContainer(c),j=this.resolveResourceUrl(a||d||"",!1);if(f){gx.html.multimediaUpload.setPreviewImage(f,
j);var l=""==a&&""==d||""!=a;if(!l){var m=gx.dom.el(c.id+"_GXI");m&&(m.value=d)}if((b=gx.dom.el(b))&&""==a)b.value="";this.setMultimediaType(c,l);gx.html.multimediaUpload.setPreviewLink(f,j)}else{if("IMG"==c.tagName||"INPUT"==c.tagName&&"image"==c.type)c.src=j;if((a=c.parentNode)&&"A"==a.tagName&&gx.dom.isMultimediaElement(c))j?a.href=j:a.removeAttribute("href")}}},setMultimediaType:function(b,a){if(b){var d=gx.html.multimediaUpload.getContainer(b);d&&gx.html.multimediaUpload.setType(d,gx.lang.gxBoolean(a))}},
setObjectCtrlType:function(b,a){var d=b;if("IMG"==b.nodeName&&(!a||0==a.indexOf("image/")))return d;if(b.type!=a||"OBJECT"==b.nodeName&&0==a.indexOf("image/"))if(d=0==a.indexOf("image/")?gx.html.nodesFromText('<img id="'+b.id+'">')[0]:gx.html.nodesFromText('<object style="display:none;" id="'+b.id+'" type="'+a+'">')[0]){try{for(var c in b.attributes)if("id"!=c&&("type"!=c&&"implementation"!=c)&&b[c])try{d[c]=b[c]}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","setObjectCtrlType")}}catch(j){gx.dbg.logEx(j,
"gxfrmutl.js","setObjectCtrlType")}if(c=b.parentNode){var l=null,m=c.childNodes.length;for(i=0;i<m;i++)if(c.childNodes[i]==b){i<m-1&&(l=c.childNodes[i+1]);break}gx.dom.removeControlSafe(b);null!=l?c.insertBefore(d,l):c.appendChild(d)}}return d},resizeObject:function(b){var a=gx.lang.emptyObject;!a(b.data)&&"about:blank"!=b.data&&(a(b.width)&&a(b.height)&&a(b.style.width)&&a(b.style.height))&&(b.style.width="200px",b.style.height="200px")},restoreLostCtrlOnGridRefresh:function(b,a){if(null==b.form){var d=
gx.dom.id(b);void 0!=gx.O.getValidStructId(d)&&"checkbox"==b.type&&(b=gx.dom.el(b.id)||gx.dom.el(b.name),b.checked=a)}return b},checkboxClick:function(b,a,d,c){var f=a.checked,j=function(){a=this.restoreLostCtrlOnGridRefresh(a,f);a.value=a.checked?d:c;var j="object"===typeof b?b:gx.fn.validStruct(b);j&&"function"==typeof j.c2v&&j.c2v();"function"==typeof j.v2bc&&j.v2bc.call(gx.O)};gx.pO.supportAjaxEvents&&gx.fx.obs.addObserver("gx.onaftervalidate",this,j,{single:!0});gx.fx.obs.notify("gx.validation");
if(gx.evt.fixWebKitOnFocus())a.onfocus();j.call(this)},setCtrlClass:function(b,a){null!=b&&(b.className=a)},setCtrlLink:function(b,a){if(null!=b)if(""==a)this.unsetCtrlLink(b);else if("A"==b.tagName)b.href=a;else{var d=b.firstChild;if(d&&"A"==d.tagName)d.href=a;else{var c=b.parentNode;if("A"==c.tagName)c.href=a;else{var g=document.createElement("A");g.href=a;d&&"#text"==d.nodeName?(gx.dom.shouldPurge()&&gx.dom.purge(g,!0),g.innerHTML=d.nodeValue,b.replaceChild(g,d)):(c.replaceChild(g,b),g.appendChild(b));
(d=f(b).attr("data-gx-link-target"))&&f(g).attr("target",d)}}}},unsetCtrlLink:function(b){if(null!=b&&(b=b.parentNode,"A"==b.tagName)){var a=b.firstChild;ParentTag2=b.parentNode;if(null!=ParentTag2){for(;null!=a;)ParentTag2.insertBefore(a,b),a=b.firstChild;gx.dom.removeControlSafe(b)}}},setCtrlLinkTarget:function(b,a){if(null!=b){var d=f(b);d.is("a")||(d=d.children());d.is("a")&&d.attr("target",a);f(b).attr("data-gx-link-target",a)}},isVisible:function(b,a){try{for(var d;b&&("undefined"==typeof a||
0<=a);){if((d=gx.dom.getComputedStyle(b))&&("hidden"==d.visibility||"none"==d.display))return!1;b=b.parentNode;"undefined"!=typeof a&&a--}}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","isVisible")}return!0},gridRowIsMod:function(b,a){var d=this.gridObjByLvl(b),c=null;if(d)return d=gx.O.getGridById(d.gridId,a)||d,(c=d.grid.getRowByGxId(a))?c.gxIsMod():!0;d=!1;try{d=1==this.getControlValue("nIsMod_"+b+"_"+a)}catch(f){d=!1}return d},gridObjByLvl:function(b){for(var a=gx.O.Grids,d=a.length,c=0;c<d;c++)if(a[c].gridLvl==
b)return a[c];return null},forceEnableControls:function(b){for(var a in gx.disabledControls){a=this.getControlRef_list(a);for(var d=a.length,c=0;c<d;c++)try{"button"!=a[c].type&&"submit"!=a[c].type&&(a[c].disabled=b)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","forceEnableControls")}}},alert:function(b,a){try{var d=gx.util.balloon.getNew(b.id);d.setError(a);d.show();gx.csv.invalidForcedCtrl=b}catch(c){alert(a)}},getGridRowMode:function(b,a){var d=this.currentGridRow(a),c=this.rowIsRemoved(a,d),d=this.getControlValue("nRcdExists_"+
b+"_"+d);return"1"==c?"DLT":"0"==d?"INS":"UPD"},rowIsRemoved:function(b,a){var d=this.getGridObj(b);return null!=d&&(d=d.grid.getRowByGxId(a))?d.gxDeleted():!1},getGridObj:function(b){return gx.O.getGridById(b)},changeCmpContext:function(){try{gx.O.SetStandaloneVars()}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","changeCmpContext")}},initOld:function(b){void 0==gx.oldValues[b.id]&&(gx.oldValues[b.id]=b.value)},setFocusOnError:function(b){var a=gx.fn.controlGridId(b),b=gx.csv.ctxControlId(b),d=null,d=0==
a?gx.dom.el(b):gx.fn.getControlGridRef(b,a);null!=d&&(gx.O.AnyError=1,gx.csv.anyError=!0,d.setAttribute("data-gxvalid","0"),gx.csv.stopOnError&&gx.fn.setFocus(d))},usrSetFocus:function(b,a){void 0===a&&(a=!0);b=gx.csv.ctxControlId(b);if(!0==gx.csv.validating)a?gx.fx.obs.addObserver("gx.onaftervalidate",this,gx.fn.usrSetFocus.closure(gx.fn,[b,!1]),{single:!0}):gx.usrFocusControl=b;else{var d=gx.dom.el(b);null!=d&&gx.fn.setFocus(d)}},setFocus:function(b,a){if(b){try{gx.popup.ispopup()&&(gx.util.browser.isIE()&&
window.parent.document.selection?window.parent.document.selection.empty():window.parent.gx.csv.lastControl&&window.parent.gx.csv.lastControl.blur&&window.parent.gx.csv.lastControl.blur())}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","setFocus")}try{if(!gx.lang.emptyObject(b.id)&&(b=gx.dom.byId(b.id),!b))return;gx.fn.setFocusSafe(b,function(b){gx.fn.setSelection(b);b.forcedFocus=!0;a&&a()})}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","setFocus")}}},setFocusSafe:function(b,a){if(b){var d=function(a,b){try{c&&b&&
gx.fx.obs.addObserver("gx.onafterfocus",this,b.closure(this,[a]),{single:!0}),f(a).focus()}catch(d){}!c&&b&&b(a)},c=gx.csv.setFocusOnload;c||!gx.util.browser.isIE()?gx.lang.doCallTimeout(d,this,[b,a],c?500:0):d(b,a)}},setFocusInit:function(){try{gx.csv.lastActiveControl=window.document.activeElement}catch(b){}gx.csv.lastActiveControl||(gx.csv.lastActiveControl=gx.csv.lastControl)},setFocusOnload:function(){if(!gx.pO.focusOnlyNEmb||top===self||gx.popup.ispopup()){var b=null,b=gx.pO.getUserFocus();
if(!gx.lang.emptyObject(b)){if("notset"==b)return;var a=gx.pO.getUserControl(gx.uc.userControlContainerId(b));if(gx.lang.emptyObject(a))gx.csv.userFocus=gx.fn.getControlRef(b);else{a.setFocusBase();return}}if("notset"!=gx.csv.userFocus){b=gx.csv.userFocus;gx.fn.isAccepted(b)||(b=gx.csv.lastActiveControl&&gx.fn.isAccepted(gx.csv.lastActiveControl)?gx.csv.lastActiveControl:gx.fn.firstAcceptedControl(gx.popup.ispopup()));try{b?(a=function(){gx.csv.setFocusOnload=!1},gx.csv.lastControl=b,gx.csv.setFocusOnload=
!0,gx.fn.isAccepted(b)?gx.fn.setFocus(b,a):(gx.popup.setFocus(),a())):gx.popup.setFocus()}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","setFocusOnload")}}}},setSelection:function(b){if(b&&gx.fn.isVisible(b))try{if(gx.csv.lastControl=b,(gx.dom.isEditControl(b)||"file"==b.type)&&b.select)b.select();else if("TEXTAREA"==b.nodeName||"SELECT"==b.nodeName)b.focus(),b.select&&b.select()}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","setSelection")}},isAccepted:function(b,a,d){var a=void 0==a||a,c=!0,d=d||gx.O,f=["FIELDSET"];
null!=b&&void 0!=b.type&&!gx.util.inArray(b.nodeName,f)&&"hidden"!=b.type&&gx.fn.isVisible(b)&&!1==b.disabled&&(null==b.readOnly||!1==b.readOnly)?a&&(c=gx.dom.id(b),c=d.getValidStructFld(c),b=d.getVariable("Gx_mode"),0<gx.csv.lastGrid&&d.setVariable("Gx_mode",gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid)),c=!gx.lang.emptyObject(c)&&c.nac?!1==c.nac.call(d):!0,d.setVariable("Gx_mode",b)):c=!1;return c},enterHasFocus:function(){return null==gx.csv.lastControl?!1:gx.evt.isEnterEvtCtrl(gx.csv.lastControl)},
skipFocus:function(b){var a=gx.csv.lastControl,d=gx.fn.getControlIndex(a),c=d,f=this.controlGridId(a.id||a.name),j=!1;b&&gx.dom.hasClass(a,"gx_newrow")&&(c=a.gxControlIdx,j=!0);if(-1==c)return!0;a=null;for(a=gx.fn.searchFocus(++c,!0);;a=gx.fn.searchFocus(++c,!0))if(null==a||c==gx.dom.form().elements.length)c=-1;else{if(b)break;if(gx.evt.isEnterEvtCtrl(a))break;if("INPUT"==a.nodeName&&"submit"!=a.type&&"button"!=a.type&&"image"!=a.type)break}if(!j&&(f&&gx.O.isTransaction())&&this.controlGridId(a.id||
a.name)!=f)b=gx.O.getGridById(f),a=gx.dom.el(b.containerName+"_NewRow").parentNode,a.gxControlIdx=d;gx.fn.setFocus(a)},getControlIndex:function(b){var a=gx.dom.form().elements.length-1;return el=this.controlIndex(b,0,a)},controlIndex:function(b,a,d){if(document.all){var c=gx.dom.form(),f=c.elements[a].sourceIndex,j=c.elements[d].sourceIndex,l=parseInt(a+(d-a)/2)+1,c=c.elements[l].sourceIndex;if(a==d&&b.sourceIndex==f&&b.sourceIndex==j||b.sourceIndex==f)return a;if(b.sourceIndex==j)return d;if(b.sourceIndex==
c)return l;if(b.sourceIndex>c&&b.sourceIndex<j)return this.controlIndex(b,l+1,d-1);if(b.sourceIndex>f&&b.sourceIndex<c)return this.controlIndex(b,a+1,l-1)}else return b.gxIndex},searchFocus:function(b,a){return a?this.searchFocusFwd(b):this.searchFocusBack(b)},searchFocusBack:function(b){for(var a=gx.dom.form();0<=b;b--)if(gx.fn.isAccepted(a.elements[b]))return a.elements[b];return null},searchFocusFwd:function(b){for(var a=gx.dom.form(),d=a.elements.length;b<d;b++)if(gx.fn.isAccepted(a.elements[b]))return a.elements[b];
return null},rowGridId:function(b){if(!b||!b.getAttribute)return null;var a=b.getAttribute("data-gxgridid");return null!=a?a:gx.fn.rowGridId(b.parentNode)},controlRowId:function(b){if(!b||!b.getAttribute)return null;var a=b.getAttribute("data-gxrow");return null!=a?a:gx.fn.controlRowId(b.parentNode)},controlGridId:function(b){try{var a,d,c=gx.O.Grids;if(c){d=0;for(len=c.length;d<len;d++)if(c[d].grid.columnsHtmlName[b])return c[d].gridId}a=gx.fn.controlIds();d=0;for(len=a.length;d<len;d++){var f=gx.fn.validStruct(a[d]);
if(gx.O.isSameField(f,b))return f.grid}var j=gx.O.getComponentData(b);if(j){var l=gx.fn.gridObjByLvl(j.lvl);if(l)return l.gridId}}catch(m){}return 0},oldGridId:function(b){try{var a=gx.fn.controlIds(),d=a.length;for(i=0;i<d;i++){var c=gx.fn.validStruct(a[i]);if(void 0!=c&&c.gxold==b)return c.grid}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","oldGridId")}return 0},saveLvlOldParm:function(b,a){var d="no_mode";null!=gx.csv.validatingGrid?this.isLvlParmOld(gx.csv.lastGrid,b)&&(d=gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),
gx.csv.lastGrid)):this.isLvlParmOld(0,b)&&(d=gx.O.Gx_mode);return"no_mode"==d?!0:"UPD"==d||null==gx.csv.validatingGrid?(window[b]=a,!0):!1},isLvlParmOld:function(b,a){try{var d=gx.O.getOldLvl(a);if(0<=d){if(0<b){var c=gx.fn.gridLvl(b);return d<c}return!0}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","isLvlParmOld")}return!1},gridLvl:function(b){try{var a=gx.fn.controlIds(),d=a.length;for(i=0;i<d;i++){var c=gx.fn.validStruct(a[i]);if(void 0!=c&&void 0!=c.lvl&&c.grid==b)return c.lvl}}catch(f){gx.dbg.logEx(f,
"gxfrmutl.js","gridLvl")}return 0},lvlGrid:function(b){try{var a=gx.fn.controlIds(),d=a.length;for(i=0;i<d;i++){var c=gx.fn.validStruct(a[i]);if(void 0!=c&&c.lvl==b)return c.grid}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","lvlGrid")}return 0},vStructId:function(b){try{var a=gx.fn.controlIds();for(i=0;i<a.length;i++){var d=gx.fn.validStruct(a[i]);if(void 0!=d&&d.fld==b)return a[i]}}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","vStructId")}return 0},getVStruct:function(b,a){try{var d=null;a&&(d=[]);var c=gx.fn.controlIds(),
f=c.length;for(i=0;i<f;i++){var j=gx.fn.validStruct(c[i]);if(void 0!=j&&b(j))if(j.id=c[i],a)d.push(j);else return j}}catch(l){gx.dbg.logEx(l,"gxfrmutl.js","getVStruct")}return d},vStructForOld:function(b){return gx.fn.getVStruct(function(a){return a.gxold==b})},vStructForVar:function(b){return gx.fn.getVStruct(function(a){return a.gxvar==b})},vStructForVarWId:function(b,a){var c=gx.fn.getVStruct(function(a){return a.gxvar==b},!0),f=c[0],g=c.length;if(1<g)for(var j=0;j<g&&!(f=c[j],f.id==a);j++);return f},
vStructForHC:function(b){return gx.fn.getVStruct(function(a){return a.hc==b})},firstCtrlAfterGrid:function(b,a){for(var c=gx.fn.lastCtrlId(),f=b;f<c;f++){var g=gx.fn.validStruct(f);if(void 0!=g&&g.grid!=a)return f}return c},clearOldKeys:function(){gx.oldKeyValues=[]},oldKey:function(b){try{return gx.oldKeyValues[b]}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","oldKey")}return""},oldGridKey:function(b,a){try{return gx.oldKeyValues[b+gx.fn.currentGridRow(a)]}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","oldGridKey")}return""},
setKey:function(b,a){null!=b&&(gx.oldKeyValues[b]=a)},unsetKey:function(b){null!=b&&(gx.oldKeyValues[b]=void 0)},setGridKey:function(b,a,c){null!=b&&(gx.oldKeyValues[b+gx.fn.currentGridRow(a)]=c)},unsetGridKey:function(b,a){null!=b&&(gx.oldKeyValues[b+gx.fn.currentGridRow(a)]=void 0)},removeGridRow:function(b,a){var c=gx.fn.rowIsRemoved(a,b);try{var f=gx.fn.controlIds(),g=f.length;for(i=0;i<g;i++){var j=gx.fn.validStruct(f[i]);if(void 0!=j&&j.grid==a){var l=gx.dom.el(j.fld+"_"+b);null!=l&&(l.gxdisabled=
c,l.disabled=c)}}}catch(m){gx.dbg.logEx(m,"gxfrmutl.js","removeGridRow")}gx.csv.validGridRow(a,b)},controlIds:function(){return gx.O.getControlIds()},validStruct:function(b,a){a=a||gx.O;return a.getValidStruct(b)},lastCtrlId:function(b){if(!0===b)for(var b=this.controlIds(),a=b.length-1;0<=a;a--){if(this.validStruct(b[a]).v2v)return b[a]}else return gx.O.getLastControlId()},lastMainLevelCtrlId:function(b,a){return 0==a&&b==this.lastCtrlId(!0)},vStructsArray:function(){return gx.O.GXValidFnc},firstAcceptedControl:function(b){try{for(var a=
gx.fn.vStructsArray(),c=gx.fn.controlIds(),f=c.length,g=0;g<f;g++){var j=a[c[g]];if(null!=j){var l=gx.fn.getControlGridRef(j.fld,j.grid);if(l&&gx.fn.isAccepted(l)&&(b||"submit"!=l.type&&"image"!=l.type&&"button"!=l.type&&"fieldset"!=l.type))return l}}}catch(m){gx.dbg.logEx(m,"gxfrmutl.js","firstAcceptedControl")}return null},enableDisableDelete:function(){var b=gx.dom.el(gx.csv.cmpCtx+"BTN_DELETE");null!=b&&gx.fn.setCtrlPropertyImpl(b,"Enabled","INS"==gx.getVar("Gx_mode")?0:1)},setFocusAfterLoad:function(b){!0!=
gx.csv.validating&&gx.lang.emptyObject(gx.csv.autoRefreshing)&&(b&&gx.csv.invalidateForm(),gx.csv.onloadFocus=!0,gx.lang.emptyObject(gx.usrFocusControl)||(gx.O.fromValid=gx.csv.lastId,gx.fn.setFocus(gx.dom.byId(gx.usrFocusControl)),gx.usrFocusControl=""),gx.csv.onloadFocus=!1)},disableCtrl:function(b){var a=function(a){try{for(var b=a.length,c=0;c<b;c++)gx.fn.setCtrlPropertyImpl(a[c],"Enabled",0)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","disableCtrl")}},b=gx.fn.getControlRef_list(b);if(null!=b)if("complete"==
document.gxReadyState)a(b);else gx.evt.on_ready(this,a.closure(this,[b]))},refreshGridRowBC:function(b,a){try{var c=gx.O.getGridBC(b);if(c){var f=gx.pO.getGridForColl(c.gxvar);if(gx.csv.validatingGrid&&f&&gx.csv.validatingGrid.gridId==f.gridId)return gx.fn.setGridHidden(b,a),a=a[parseInt(gx.fn.currentGridRow(f.gridId))-1],gx.O.bcToScreen(c,a),!0}}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","refreshGridRowBC")}return!1},refreshBC:function(b,a){return this.refreshFormBC(b,a)||this.refreshGridRowBC(b,a)},
refreshFormBC:function(b,a){try{var c=gx.O.getFormBC(b)||gx.O.getFormBCForVar(b);if(c)return gx.setVar(b,a),gx.fn.setGridHidden(b,a),gx.O.bcToScreen(c,a),!0}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","refreshFormBC")}return!1},isHidden:function(b){gx.http.viewStateLoaded||gx.http.loadState();return"undefined"!=typeof gx.http.viewState[b]},GX_HASH_PREFIX:"gxhash_",getHash:function(b,a,c){return gx.fn.getHidden(b+gx.fn.GX_HASH_PREFIX+a+(c?"_"+c:""))||gx.fn.getHidden(b+gx.fn.GX_HASH_PREFIX+a)},getHidden:function(b){gx.http.viewStateLoaded||
gx.http.loadState();return gx.http.viewState[b]},setHidden:function(b,a){gx.http.viewStateLoaded||gx.http.loadState();gx.http.viewState[b]=a},setGridHidden:function(b,a){var c=b,f=gx.fn.oldGridId(b);0<f&&(c=b+"_"+gx.fn.currentGridRowImpl(f));gx.fn.setHidden(c,a)},deleteHidden:function(b){gx.http.viewState&&delete gx.http.viewState[b]},setJsonHiddens:function(b,a){var a=void 0===a||a,c;for(c in b)a?gx.fn.setGridHidden(c,b[c]):gx.fn.setHidden(c,b[c])},filterHiddens:function(b,a){var c={},f;for(f in a)f&&
0==f.search(b)&&(c[f]=a[f]);return c},autoRefreshingControl:function(b,a){return!gx.lang.emptyObject(gx.csv.autoRefreshing)&&null!=gx.csv.lastControl&&gx.csv.lastControl.id==a+b},setJsonValues:function(b){if(!b)return[];for(var a=gx.O,c=b.length,f=[],g,j=0;j<c;j++){var l=b[j],m=l.CmpContext,n=gx.lang.booleanValue(l.IsMasterPage);gx.setGxO(m,n);if(!gx.lang.emptyObject(gx.O))for(var p in l)if(!("CmpContext"==p||"IsMasterPage"==p)&&!("object"==typeof l[p]&&gx.fn.refreshBC(p,l[p]))&&"function"!=typeof l[p]){var q=
gx.fn.vStructForVar(p)||gx.O.getValidStructFld(p);if(q){if(q.v2v&&!gx.fn.autoRefreshingControl(q.fld,m)){var u=gx.O.getGridById(q.grid),u=u&&u.InfiniteScrolling;0!=q.grid&&(g=gx.fn.controlRowId(gx.dom.el(p))||gx.fn.currentGridRowImpl(q.grid));u||(q.v2v(l[p]),q.v2c(g))}}else"GX_FocusControl"==p?a.CmpContext==m&&a.IsMasterPage==n&&(gx.usrFocusControl=l[p]):(q=gx.fn.getVarControlMap(p),gx.lang.emptyObject(q)?gx.setVar(p,l[p]):gx.setVar(q,l[p]),gx.fn.setGridHidden(p,l[p]),gx.O.UCBindings[p]&&(f=f.concat(gx.O.UCBindings[p].uc)))}}gx.setGxO(a);
return f},getPropertyControlRef:function(b,a){var c=gx.fn.getControlRef(b,!0),c=null==c?gx.dom.el("Object_"+b):c;null==c&&(c=gx.fn.screen_CtrlRef(gx.csv.ctxControlId(b)));null==c&&a&&(c=gx.dom.el(b+"_"+a));return c},setJsonProperties:function(b,a){if(!b)return[];for(var c=gx.O,f=b.length,g=[],j=0;j<f;j++){var l=b[j],m=l.CmpContext,n=gx.lang.booleanValue(l.IsMasterPage),m=gx.setGxO(m,n);if(!gx.lang.emptyObject(gx.O))for(var p in l)if(!("CmpContext"===p||"IsMasterPage"===p||""===p))if(n=l[p],"function"!=
typeof n){var q=gx.fn.getPropertyControlRef(p,a),u=m.getGridColumn(p,a);if(null==q&&gx.uc.isUserControl(p))gx.uc.setProperties(p,n),g.push(gx.uc.getUserControlObj(gx.uc.userControlContainerId(p)));else if(!(null==q&&null==u))for(var s in n){var r="object"===typeof n[s];u&&!r&&(u[s.toLowerCase()]=n[s]);if(q)if(q.parentElement||(q=gx.fn.getPropertyControlRef(p,a)),r)for(var t in n[s])gx.fn.setCtrlPropertyImpl(q,t,n[s][t]);else gx.fn.setCtrlPropertyImpl(q,s,n[s])}}}gx.setGxO(c);return g},loadJsonGrids:function(b,
a){var c=[];if(b)for(var f=b.length,g,j=0;j<f;j++)try{var l=b[j];if(void 0!=l.Count){var m=l.CmpContext,n=l.GridName,p=gx.csv.validatingGrid;if(gx.pO.fullAjax||gx.lang.emptyObject(p)||p.gxComponentContext!=m&&p.gridName!=n||!gx.lang.emptyObject(p.boundedCollType))if(g=gx.fn.gridObj(m,n,"true"==l.InMasterPage?!0:!1))g.isUsercontrol&&c.push(g.grid),a?g.loadGrid({rowProps:l,isPostback:a}):g.updatePropsHidden(l)}}catch(q){gx.dbg.logEx(q,"gxfrmutl.js","loadJsonGrids")}return c},getErrorViewerCtrls:function(){var b=
gx.dom.byName("gxErrorViewer");if(0==b.length)for(var b=[],a=gx.dom.byTag("span"),c=a.length,f=0;f<c;f++)"gxErrorViewer"==a[f].name&&b.push(a[f]);return b},setErrorViewer:function(b){gx.O.AnyError=0;if(b)try{gx.fx.obs.notify("gx.onmessages",[b]);var a=gx.dom.byClass("gx_ev","span"),c=a.length,f;for(f in b){var g,j=b[f];gx.lang.isArray(j)||(g=j.fields,j=j.msgs);var l=[];if(g)for(var m=0,n=g.length;m<n;m++){var p=gx.fn.vStructForVar(g[m].replace(/^gx\.O\./,""));p&&l.push(p.fld)}"MAIN"==f&&(f="");if("undefined"!=
typeof j){for(m=0;m<c;m++){var q=a[m];if(q&&q.id==f+"gxErrorViewer"){var u=gx.csv.setFocusOnload?q.innerHTML:"";break}}var s={},r;for(r in j){var t=j[r];t&&1==t.type&&(gx.O.AnyError=1);if(!gx.lang.emptyObject(t.text)&&"function"!=typeof t)if(""!=t.att&&gx.fn.isVisible(gx.fn.screen_CtrlRef(t.att))){var v=s[t.att];v||(v=gx.util.balloon.getNew(t.att,void 0,l),s[t.att]=v);1==t.type?v.setError(t.text):v.setMessage(t.text)}else u+='<div class="'+(1==t.type?"gx-error-message":"gx-warning-message")+'">'+
gx.html.encode(t.text)+"</div>"}for(var y in s)if(v=s[y],!1==v.show()){gx.fn.setFocusOnError(y);break}for(m=0;m<c;m++)if((q=a[m])&&q.id==f+"gxErrorViewer"&&q.innerHTML!=u)gx.dom.shouldPurge()&&gx.dom.purge(q,!0),q.innerHTML=u,""!=u&&gx.fx.dom.highlight(q,[255,255,165],2500).play()}}}catch(z){gx.dbg.logEx(z,"gxfrmutl.js","setErrorViewer")}},cmpContextFromCtrl:function(b){var a=c.exec(b);return a?a[1]+a[2]:b},clearCompontHiddens:function(b){for(var a in b)if("function"!=typeof b[a])try{var c=gx.fn.cmpContextFromCtrl(a);
gx.O.deleteComponentHiddens(c)}catch(f){except=!0,gx.dbg.logEx(f,"gxfrmutl.js","clearCompontHiddens")}},setJsonComponents:function(b,a,c,f,g){try{var o=[],l=!1;gx.gen.isDotNet();var m=[],n;for(n in b)if(gx.pO.getWebComponent(n)||m.push(n),"function"!=typeof b[n])try{var p=b[n];if(p){var q=gx.dom.el(n);!q&&a&&(q=gx.dom.el(a[n]));if(!gx.lang.emptyObject(q)){gx.html.setInnerHtml(q,p,!1,g);var u=gx.fn.cmpContextFromCtrl(n),s=j(gx.fn.getHidden(u+"_CMPPGM"));o.push({type:u,name:s,html:p,container:q})}}}catch(r){l=
!0,gx.dbg.logEx(r,"gxfrmutl.js","setJsonComponents")}}catch(t){l=!0,gx.dbg.logEx(t,"gxfrmutl.js","setJsonComponents")}if((0==o.length||l)&&"function"==typeof f)f(m);else{var v=null,y=function(){0<o.length?(v=o.shift(),gx.fn.createComponentAsync(v,c,y)):"function"==typeof f&&f(m)},v=o.shift();gx.fn.createComponentAsync(v,c,y)}},createComponentAsync:function(b,a,c){function f(){"function"==typeof c&&(c(),gx.fx.obs.notify("gx.onafterevent",[gx.csv.lastEvtResponse]))}var g=b.type,j=b.name,l=b.html,m=
b.container;try{var n=gx.fn.filterHiddens(RegExp("^"+g),a);gx.cache.codeLoaded(g+j)?(gx.fn.createComponentObj(j,g,m),gx.fn.setJsonHiddens(n),f()):(gx.cache.addInlineCode(g+j),gx.html.processCode(l,!1,function(a,b,c){gx.fn.createComponentObj(a,b,m);gx.fn.setJsonHiddens(c);f()},[j,g,n],j))}catch(p){gx.dbg.logEx(p,"gxfrmutl.js","createComponentAsync"),f()}},createComponentObj:function(b,a,c){b=gx.createComponent(b,a,c);null!=b&&gx.addComponent(b)},cleanAttachedCtrls:function(){gx.attachedControls=[]},
getAttachedCtrl:function(b){for(var a=gx.attachedControls.length,c=0;c<a;c++){var f=gx.attachedControls[c];if(f.id==b)return f}return null},attachCtrl:function(b,a){null==gx.fn.getAttachedCtrl(b)&&gx.attachedControls.push({id:b,info:a})},doAttachs:function(b){var a=gx.fn.attachedControls(),c=a.length,j=gx.O,g,b=b&&b.length?f.map(b,gx.fn.cmpContextFromCtrl):void 0,o,l,m,n,p,q;for(q=0;q<c;q++)if(o=a[q],!b||0<=f.inArray(o.info.wc,b))if(g=gx.setGxO(o.info.wc,o.info.mp),o.info.isPrompt&&g.isTransaction()&&
"DSP"==g.Gx_mode)gx.fn.setCtrlPropertyImpl(gx.dom.el(o.info.wc+o.info.id),"Visible",!1);else{g=o.info.controls;l=g.length;n=[];for(p=0;p<l;p++)gx.fn.addAttach(g[p],o),m=gx.fn.validStruct(g[p]),gx.fn.checkAttachedPropertyVS(m,"Visible",!1),gx.fn.checkAttachedPropertyVS(m,"Enabled",!1),n.push(m.fld);f("#"+o.id).attr("data-gx-attached-ctrl",n.join(" "))}gx.setGxO(j)},addAttach:function(b,a){var c=gx.fn.validStruct(b);void 0==c.attachedCtrls&&(c.attachedCtrls=[]);c.attachedCtrls.push(a)},checkAttachedProperty:function(b,
a,c){gx.fn.checkAttachedPropertyVS(gx.O.getValidStructFld(b),a,c)},checkAttachedPropertyVS:function(b,a,c){if(void 0!=b&&(b=b.attachedCtrls,void 0!=b))for(var f=b.length,g=0;g<f;g++)gx.fn.checkAttachedControlProperty(b[g],a,c)},checkAttachedControlProperty:function(b,a,c){for(var f=b.info.id,b=b.info,g=!0,j=b.controls,b=b.wc,l=j.length,m=0;m<l;m++){var n=gx.fn.getCtrlProperty(b+gx.fn.validStruct(j[m]).fld,a),g=c?n==c:g&&n==c;if(c&&g)break}g&&gx.fn.setCtrlPropertyImpl(gx.dom.el(b+f),a,c)},changeControlOpacity:function(b,
a,c,f){var g=Math.round(f),j="",j="string"==typeof b?b:b.id;a>c?(gx.fn.setOpacity(a,j),setTimeout(function(){gx.fn.changeControlOpacity(b,a-10,c,f)},g)):a<c?(gx.fn.setOpacity(a,j),setTimeout(function(){gx.fn.changeControlOpacity(b,a+10,c,f)},g)):gx.fn.setOpacity(c,j)},setOpacity:function(b,a){var c=a;"string"==typeof a&&(c="body"==a?document.body:gx.dom.el(a));if(null!=c){var c=c.style,f="reset"==b?"":b/100;c.opacity=f;c.MozOpacity=f;c.filter="alpha(opacity="+("reset"==b?100:b)+")"}},fadeControl:function(b,
a,c){"in"==a?gx.fn.changeControlOpacity(b,0,100,c):gx.fn.changeControlOpacity(b,100,0,c)},fadeIn:function(b,a){gx.fn.fadeControl(b,"in",a)},statusMsg:function(b){window.status=b},objectOnload:function(b,a){var c=f(document.body),j="true"===c.attr("data-HasEnter"),g="true"===c.attr("data-Skiponenter");f(document).keydown(function(){gx.evt.onkeypress(null,j,g)});f(document).keypress(function(a){gx.evt.onkeypress(a,j,g)});f(document).keyup(function(a){gx.evt.onkeyup(a)});null!=gx.pO&&(gx.pO.onload(b,
a),gx.setGxO(gx.pO))},objectOnUnload:function(b){if(null!=gx.pO)gx.pO.onunload(b)},objectOnpost:function(){if(null!=gx.pO)gx.pO.onpost()},objectPostback:function(b,a){null!=gx.pO&&(gx.pO.postbackLoad(b,a),gx.fx.obs.notify("gx.onobjectpostback",arguments))},gridObjFromGxO:function(b){return gx.fn.gridObj(gx.O.CmpContext,b,gx.O.IsMasterPage)},gridObj:function(b,a,c){return(b=gx.getObj(b,c))?b.getGrid(a):null},installComponents:function(b,a){var c=gx.fn.getHidden("GX_CMP_OBJS");if(void 0!=c){gx.gen.isDotNet();
for(var f in c)if(b||!gx.pO.getWebComponent(f)){var g=j(c[f].toLowerCase()),g=gx.createComponent(g,f);null!=g&&(gx.addComponent(g,a),setTimeout(function(a){this.addComponentRemoteFiles(a)}.closure(this,[g]),1))}}},addComponentRemoteFiles:function(b){if(b=b.getContainer())gx.html.processCode(b.innerHTML,!0),gx.dom.fitToParent(b)},datePickerFormat:function(b,a,c){var f=gx.dateFormat,g=f.substr(0,1),j=f.substr(1,1),f=f.substr(2,1),g=gx.fn.datePickerDateFormat(g,b),j=gx.fn.datePickerDateFormat(j,b),b=
gx.fn.datePickerDateFormat(f,b),f=gx.fn.datePickerTimeFormat(a);return 0<c&&0<a?g+"/"+j+"/"+b+" "+f:0<c?g+"/"+j+"/"+b:f},datePickerDateFormat:function(b,a){return"Y"==b&&"99/99/9999"==a.substr(0,10)?"%Y":"Y"==b?"%y":"M"==b?"%m":"D"==b?"%d":""},datePickerTimeFormat:function(b){var a=gx.timeFormat,c;12==a?(a="%I",c=" %p"):(a=24==a?"%H":"",c="");if(2==b)b="";else if(5==b)b=":%M";else if(8==b)b=":%M:%S";else return"";return a+b+c},installDatePicker:function(b,a,c,f,g,j,l,m){(new gx.ui.controls.datePicker({inputId:b,
triggerId:b+"_dp_trigger",inline:a,inputType:!c?"date":"datetime",weeksNumbers:f,mondayFirst:g,format:j,datePartLength:l,timePartLength:m,afterChange:gx.fn.datePickerChanged})).render()},datePickerChanged:function(b,a,c){if(!b||b.dateClicked){var f=gx.O,g=null,j=gx.fn.controlIds(),l=j.length;for(i=0;i<l;i++){var g=gx.fn.validStruct(j[i]),m=0!=g.grid?"_"+gx.fn.currentGridRow(g.grid):"";if(c.id==f.CmpContext+g.fld+m)break}null!=g&&void 0!=g.dp&&(a=gx.date.isNullDate(a)?gx.date.nulldate_toc(g.len,g.dec):
a.print(gx.fn.datePickerFormat(g.dp.pic,g.dp.dec,g.len)),a!=c.value&&(c.setAttribute("data-gxvalid","0"),c.value=a,c.onchange(),b&&b.callCloseHandler(),0<g.grid&&gx.fn.getGridObj(g.grid).setRowModified(gx.fn.currentGridRow(g.grid)),f.refreshDependantGrids(g)))}},toArray:function(b){if(gx.util.browser.isIE()&&8>=gx.util.browser.ieVersion()){for(var a=[],c=0,f=b.length;c<f;c++)a[c]=b[c];return a}return Array.prototype.slice.call(b)},evalCtxScope:function(b,a){var c=gx.O;gx.setGxO(b);var f=eval(a);gx.setGxO(c);
return f}}}(gx.$);
gx.thread={Map:function(){this.map={};this.add=function(f,c){this.map[f]=c};this.remove=function(f){delete this.map[f]};this.get=function(f){return null==f?null:this.map[f]};this.first=function(){return this.get(this.nextKey())};this.next=function(f){return this.get(this.nextKey(f))};this.nextKey=function(f){for(i in this.map){if(!f)return i;f==i&&(f=null)}return null}},Command:function(f,c,j){gx.thread.Command.LastID||(gx.thread.Command.LastID=0);this.id=++gx.thread.Command.LastID;this.execute=function(){c.apply(f,
j)};this.syncExecute=function(){new gx.thread.Mutex(this,"execute")}},Mutex:function(f,c,j,b){gx.thread.Mutex.Wait||(gx.thread.Mutex.Wait=new gx.thread.Map);gx.thread.Mutex.SLICE=function(a,b){gx.thread.Mutex.Wait.get(a).attempt(gx.thread.Mutex.Wait.get(b))};this.attempt=function(a){for(;a;a=gx.thread.Mutex.Wait.next(a.c.id))if(a.enter||a.number&&(a.number<this.number||a.number==this.number&&a.c.id<this.c.id))return setTimeout("gx.thread.Mutex.SLICE("+this.c.id+","+a.c.id+")",10);try{retVal=this.c.execute()}catch(c){gx.dbg.logEx(c,
"gxfrmutl.js","Mutex Call")}this.number=0;gx.thread.Mutex.Wait.remove(this.c.id);if(typeof b=="function")try{b.call(f,retVal)}catch(j){gx.dbg.logEx(j,"gxfrmutl.js","Mutex CallBack")}};this.c=new gx.thread.Command(f,c,j);gx.thread.Mutex.Wait.add(this.c.id,this);this.enter=!0;this.number=(new Date).getTime();this.enter=!1;this.attempt(gx.thread.Mutex.Wait.first())}};
gx.sec={key:null,keyName:"GX_AJAX_KEY",secToken:null,secTokenName:"AJAX_SECURITY_TOKEN",loadKey:function(){var f=gx.fn.getHidden(this.keyName);this.key=gx.lang.emptyObject(f)?null:f;null!=this.key&&this.loadSecToken()},loadSecToken:function(){var f=gx.fn.getHidden(this.secTokenName);this.secToken=gx.lang.emptyObject(f)?null:f},encrypt:function(f,c){try{if(c=null==c?this.key:c,null!=c){var j=this.rijndael,c=j.hexToByteArray(c),b=j.rijndaelEncrypt(f,c);return j.byteArrayToHex(b)}}catch(a){gx.dbg.logEx(a,
"gxfrmutl.js","encrypt")}return f},decrypt:function(f,c){try{if(c=null==c?this.key:c,null!=c){var j=this.rijndael,c=j.hexToByteArray(c),b=j.hexToByteArray(f),a=j.rijndaelDecrypt(b,c);return j.byteArrayToString(a)}}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","decrypt")}return f},_init:function(){this.rijndael._init()}};
gx.MD5={RotateLeft:function(f,c){return f<<c|f>>>32-c},AddUnsigned:function(f,c){var j,b,a,d,k;a=f&2147483648;d=c&2147483648;j=f&1073741824;b=c&1073741824;k=(f&1073741823)+(c&1073741823);return j&b?k^2147483648^a^d:j|b?k&1073741824?k^3221225472^a^d:k^1073741824^a^d:k^a^d},F:function(f,c,j){return f&c|~f&j},G:function(f,c,j){return f&j|c&~j},H:function(f,c,j){return f^c^j},I:function(f,c,j){return c^(f|~j)},FF:function(f,c,j,b,a,d,k){f=gx.MD5.AddUnsigned(f,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.F(c,
j,b),a),k));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(f,d),c)},GG:function(f,c,j,b,a,d,k){f=gx.MD5.AddUnsigned(f,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.G(c,j,b),a),k));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(f,d),c)},HH:function(f,c,j,b,a,d,k){f=gx.MD5.AddUnsigned(f,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.H(c,j,b),a),k));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(f,d),c)},II:function(f,c,j,b,a,d,k){f=gx.MD5.AddUnsigned(f,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.I(c,j,b),a),k));
return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(f,d),c)},ConvertToWordArray:function(f){var c,j=f.length;c=j+8;for(var b=16*((c-c%64)/64+1),a=Array(b-1),d=0,k=0;k<j;)c=(k-k%4)/4,d=8*(k%4),a[c]|=f.charCodeAt(k)<<d,k++;c=(k-k%4)/4;a[c]|=128<<8*(k%4);a[b-2]=j<<3;a[b-1]=j>>>29;return a},WordToHex:function(f){var c="",j="",b;for(b=0;3>=b;b++)j=f>>>8*b&255,j="0"+j.toString(16),c+=j.substr(j.length-2,2);return c},Utf8Encode:function(f){for(var f=f.replace(/\r\n/g,"\n"),c="",j=0;j<f.length;j++){var b=f.charCodeAt(j);
128>b?c+=String.fromCharCode(b):(127<b&&2048>b?c+=String.fromCharCode(b>>6|192):(c+=String.fromCharCode(b>>12|224),c+=String.fromCharCode(b>>6&63|128)),c+=String.fromCharCode(b&63|128))}return c},getHsh:function(f){var c=[],j,b,a,d,k,g,o,l,f=gx.MD5.Utf8Encode(f),c=gx.MD5.ConvertToWordArray(f);k=1732584193;g=4023233417;o=2562383102;l=271733878;for(f=0;f<c.length;f+=16)j=k,b=g,a=o,d=l,k=gx.MD5.FF(k,g,o,l,c[f+0],7,3614090360),l=gx.MD5.FF(l,k,g,o,c[f+1],12,3905402710),o=gx.MD5.FF(o,l,k,g,c[f+2],17,606105819),
g=gx.MD5.FF(g,o,l,k,c[f+3],22,3250441966),k=gx.MD5.FF(k,g,o,l,c[f+4],7,4118548399),l=gx.MD5.FF(l,k,g,o,c[f+5],12,1200080426),o=gx.MD5.FF(o,l,k,g,c[f+6],17,2821735955),g=gx.MD5.FF(g,o,l,k,c[f+7],22,4249261313),k=gx.MD5.FF(k,g,o,l,c[f+8],7,1770035416),l=gx.MD5.FF(l,k,g,o,c[f+9],12,2336552879),o=gx.MD5.FF(o,l,k,g,c[f+10],17,4294925233),g=gx.MD5.FF(g,o,l,k,c[f+11],22,2304563134),k=gx.MD5.FF(k,g,o,l,c[f+12],7,1804603682),l=gx.MD5.FF(l,k,g,o,c[f+13],12,4254626195),o=gx.MD5.FF(o,l,k,g,c[f+14],17,2792965006),
g=gx.MD5.FF(g,o,l,k,c[f+15],22,1236535329),k=gx.MD5.GG(k,g,o,l,c[f+1],5,4129170786),l=gx.MD5.GG(l,k,g,o,c[f+6],9,3225465664),o=gx.MD5.GG(o,l,k,g,c[f+11],14,643717713),g=gx.MD5.GG(g,o,l,k,c[f+0],20,3921069994),k=gx.MD5.GG(k,g,o,l,c[f+5],5,3593408605),l=gx.MD5.GG(l,k,g,o,c[f+10],9,38016083),o=gx.MD5.GG(o,l,k,g,c[f+15],14,3634488961),g=gx.MD5.GG(g,o,l,k,c[f+4],20,3889429448),k=gx.MD5.GG(k,g,o,l,c[f+9],5,568446438),l=gx.MD5.GG(l,k,g,o,c[f+14],9,3275163606),o=gx.MD5.GG(o,l,k,g,c[f+3],14,4107603335),g=
gx.MD5.GG(g,o,l,k,c[f+8],20,1163531501),k=gx.MD5.GG(k,g,o,l,c[f+13],5,2850285829),l=gx.MD5.GG(l,k,g,o,c[f+2],9,4243563512),o=gx.MD5.GG(o,l,k,g,c[f+7],14,1735328473),g=gx.MD5.GG(g,o,l,k,c[f+12],20,2368359562),k=gx.MD5.HH(k,g,o,l,c[f+5],4,4294588738),l=gx.MD5.HH(l,k,g,o,c[f+8],11,2272392833),o=gx.MD5.HH(o,l,k,g,c[f+11],16,1839030562),g=gx.MD5.HH(g,o,l,k,c[f+14],23,4259657740),k=gx.MD5.HH(k,g,o,l,c[f+1],4,2763975236),l=gx.MD5.HH(l,k,g,o,c[f+4],11,1272893353),o=gx.MD5.HH(o,l,k,g,c[f+7],16,4139469664),
g=gx.MD5.HH(g,o,l,k,c[f+10],23,3200236656),k=gx.MD5.HH(k,g,o,l,c[f+13],4,681279174),l=gx.MD5.HH(l,k,g,o,c[f+0],11,3936430074),o=gx.MD5.HH(o,l,k,g,c[f+3],16,3572445317),g=gx.MD5.HH(g,o,l,k,c[f+6],23,76029189),k=gx.MD5.HH(k,g,o,l,c[f+9],4,3654602809),l=gx.MD5.HH(l,k,g,o,c[f+12],11,3873151461),o=gx.MD5.HH(o,l,k,g,c[f+15],16,530742520),g=gx.MD5.HH(g,o,l,k,c[f+2],23,3299628645),k=gx.MD5.II(k,g,o,l,c[f+0],6,4096336452),l=gx.MD5.II(l,k,g,o,c[f+7],10,1126891415),o=gx.MD5.II(o,l,k,g,c[f+14],15,2878612391),
g=gx.MD5.II(g,o,l,k,c[f+5],21,4237533241),k=gx.MD5.II(k,g,o,l,c[f+12],6,1700485571),l=gx.MD5.II(l,k,g,o,c[f+3],10,2399980690),o=gx.MD5.II(o,l,k,g,c[f+10],15,4293915773),g=gx.MD5.II(g,o,l,k,c[f+1],21,2240044497),k=gx.MD5.II(k,g,o,l,c[f+8],6,1873313359),l=gx.MD5.II(l,k,g,o,c[f+15],10,4264355552),o=gx.MD5.II(o,l,k,g,c[f+6],15,2734768916),g=gx.MD5.II(g,o,l,k,c[f+13],21,1309151649),k=gx.MD5.II(k,g,o,l,c[f+4],6,4149444226),l=gx.MD5.II(l,k,g,o,c[f+11],10,3174756917),o=gx.MD5.II(o,l,k,g,c[f+2],15,718787259),
g=gx.MD5.II(g,o,l,k,c[f+9],21,3951481745),k=gx.MD5.AddUnsigned(k,j),g=gx.MD5.AddUnsigned(g,b),o=gx.MD5.AddUnsigned(o,a),l=gx.MD5.AddUnsigned(l,d);return(gx.MD5.WordToHex(k)+gx.MD5.WordToHex(g)+gx.MD5.WordToHex(o)+gx.MD5.WordToHex(l)).toLowerCase()}};
gx.base64={b64:[],f64:[],decode:function(f){return this.bytesToString(this.bytesFromUTF8Bytes(this.decodeImpl(f)))},encode:function(f){return this.encodeImpl(this.UTF8BytesFromString(f))},bytesFromUTF8Bytes:function(f){for(var c=[],j=0,b=c1=c2=0,a=f.length;j<a;)b=f[j],128>b?(c.push(b),j++):191<b&&224>b?(c2=f[j+1],c.push((b&31)<<6|c2&63),j+=2):(c2=f[j+1],c3=f[j+2],c.push((b&15)<<12|(c2&63)<<6|c3&63),j+=3);return c},UTF8BytesFromString:function(f){for(var f=f.replace(/\r\n/g,"\n"),c=[],j=f.length,b=
0;b<j;b++){var a=f.charCodeAt(b);128>a?c.push(a):(127<a&&2048>a?c.push(a>>6|192):(c.push(a>>12|224),c.push(a>>6&63|128)),c.push(a&63|128))}return c},bytesToString:function(f){for(var c=gx.util.browser.isChrome()?32765:5E4,j=[];f.length>=c;)j.push(eval("String.fromCharCode("+f.slice(0,c).join(",")+");")),f=f.slice(c);0!=f.length&&j.push(eval("String.fromCharCode("+f.join(",")+");"));return j.join("")},decodeImpl:function(f){for(var c=this.f64,j=[],b=0,f=f.replace(/\n|\r/g,""),f=f.replace(/=/g,""),
a=f.length;b<a;)j[j.length]=c[f.charAt(b)]<<2|c[f.charAt(b+1)]>>4,j[j.length]=(c[f.charAt(b+1)]&15)<<4|c[f.charAt(b+2)]>>2,j[j.length]=(c[f.charAt(b+2)]&3)<<6|c[f.charAt(b+3)],b+=4;2==f.length%4&&(j=j.slice(0,j.length-2));3==f.length%4&&(j=j.slice(0,j.length-1));return j},encodeImpl:function(f){var c=this.b64,j=[],b=0,a=f.length;1==a%3&&(f[f.length]=0,f[f.length]=0);2==a%3&&(f[f.length]=0);for(var d=f.length;b<d;)j[j.length]=c[f[b]>>2],j[j.length]=c[(f[b]&3)<<4|f[b+1]>>4],j[j.length]=c[(f[b+1]&15)<<
2|f[b+2]>>6],j[j.length]=c[f[b+2]&63],b+=3;1==a%3&&(j[j.length-1]=j[j.length-2]="=");2==a%3&&(j[j.length-1]="=");return j.join("")},_init:function(){for(var f=0;64>f;f++){var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f);this.b64[f]=c;this.f64[c]=f}}};
gx.webSocket=function(f){this.reconnect=!0;this.initialized=this.opened=!1;this.retryCount=0;this.maxRetries=f.maxRetries||3;this.retryDelay=f.retryDelay||1E4;this._init=function(b){if(!this.initialized&&"WebSocket"in window){b=b||{};b.clientId=b.clientId||"";b.basePath=b.basePath||"";this.namespace="."+b.namespace;try{var a=b.wsProtocol+b.host+b.basePath+b.resourceUrl+b.clientId;this.create(b.wsURL||a);this.initialized=!0;this.wsOpts=b}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","Could not initialize WebSocket")}}};
var c=this,j=function(){this.initialized=this.opened=!1;if(this.reconnect&&(-1==this.maxRetries||this.retryCount<this.maxRetries))this.retryCount++,gx.lang.doCallTimeout(this._init,this,[this.wsOpts],1E4)};this.create=function(b){try{this.ws=new WebSocket(b),this.ws.onopen=function(){c.opened=!0;c.retryCount=0;gx.fx.obs.notify("gx.ws.onOpen"+c.namespace,[])},this.ws.onerror=function(a){gx.dbg.logDebug("gx.webSocket - Error: "+a.data);gx.fx.obs.notify("gx.ws.onError"+c.namespace,[a.data])},this.ws.onmessage=
function(a){gx.dbg.logDebug("gx.webSocket - New Message: "+a.data);gx.fx.obs.notify("gx.ws.onMessage"+c.namespace,[a.data])},this.ws.onclose=function(){gx.dbg.logDebug("gx.webSocket - OnClose");c.opened&&(c.retryCount=0,j.apply(c))}}catch(a){gx.lang.doCallTimeout(gx.fx.obs.notify,gx.fx.obs,["gx.ws.onCtxError"+c.namespace,[a]],100)}};window.onbeforeunload=function(){c.opened&&c.ws.close()};this.close=function(){c.opened&&(c.opened=!1,c.ws.close())};this.send=function(b){this.ws?this.ws.send(b):gx.dbg.logDebug("gx.webSocket - ws is not initialized")};
this._init(f)};
gx.util.alert=function(f){var c=!1,j=!1,b=function(b){var b=b||{},k=b.message||"",g=b.cssClass||"",o=b.cssDisBtnClass||"",l=b.dataDisAtt,b=b.dismissmitAt;if(!c||0==f("#gx-main-error").length)f(gx.dom.form()).prepend("<div id='gx-main-error' style='display:none;'></div>"),c=!0;a();var m=f("#gx-main-error");m.html('<div class="'+g+'"><button type="button" class="'+o+'" data-dismiss="'+l+'" onclick=\'$(this).parent().hide();\' aria-hidden="true">&times;</button><span>'+k+"</span></div>");m.slideDown();
j=!0;b&&window.setTimeout(function(){a()},b)},a=function(){j&&(f("#gx-main-error").fadeOut(500,function(){f(this).empty()}),j=!1)};return{showMessage:function(a,c){f("#gx-main-error");b(f.extend({message:a,cssClass:"alert alert-warning alert-dismissable gx-ajax-error",cssDisBtnClass:"close",dataDisAtt:"alert"},c))},showError:function(a,c){f("#gx-main-error");b(f.extend({message:a,cssClass:"alert alert-danger alert-dismissable gx-ajax-error",cssDisBtnClass:"close",dataDisAtt:"alert"},c))},hide:a}}(gx.$);
gx.geolocation=function(f){return{attachedCtrls:null,_init:function(){attachedCtrls=[]},getMyPosition:function(c){c.attachedCtrl=f("#"+c.id.replace(/_geoLocMe$/,""))[0];attachedCtrls.push(c);navigator.geolocation?navigator.geolocation.getCurrentPosition(this.positionHandler,this.handle_errors):(msg="Your browser does not support HTML5 Geolocalization",gx.pO.clearMessages(),gx.pO.addMessage(msg),gx.pO.refreshOutputs([]))},positionHandler:function(c){var f=attachedCtrls.shift(),b=gx.fn.validStruct(gx.O.getValidStructId(f.attachedCtrl.id)),
c=c.coords.latitude+","+c.coords.longitude;gx.evt.setEventRow(gx.pO,f.attachedCtrl);b.v2v&&(b.v2v(c),b.v2c());b.gxgrid&&b.gxgrid.updateControlValue(b,!0)},handle_errors:function(c){attachedCtrls.shift();switch(c.code){case c.PERMISSION_DENIED:c="user did not share geolocation data";break;case c.POSITION_UNAVAILABLE:c="could not detect current position";break;case c.TIMEOUT:c="retrieving position timed out";break;default:c="unknown error"}gx.pO.clearMessages();gx.pO.addMessage(c);gx.pO.refreshOutputs([])}}}(gx.$);
gx.sec.rijndael={keySizeInBits:128,blockSizeInBits:128,roundsArray:[,,,,[,,,,10,,12,,14],,[,,,,12,,12,,14],,[,,,,14,,14,,14]],shiftOffsets:[,,,,[,1,2,3],,[,1,2,3],,[,1,3,4]],Rcon:[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],SBox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,
226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,
221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],SBoxInverse:[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,
108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,
201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],cyclicShiftLeft:function(f,c){var j=f.slice(0,c);return f=f.slice(c).concat(j)},xtime:function(f){f<<=1;return f&256?f^283:f},mult_GF256:function(f,c){var j,b=0;for(j=1;256>j;j*=2,c=this.xtime(c))f&j&&(b^=c);return b},byteSub:function(f,c){var j;j="encrypt"==c?this.SBox:this.SBoxInverse;for(var b=0;4>b;b++)for(var a=0;a<this.Nb;a++)f[b][a]=j[f[b][a]]},shiftRow:function(f,c){for(var j=
1;4>j;j++)f[j]="encrypt"==c?this.cyclicShiftLeft(f[j],this.shiftOffsets[this.Nb][j]):this.cyclicShiftLeft(f[j],this.Nb-this.shiftOffsets[this.Nb][j])},mixColumn:function(f,c){for(var j=[],b=0;b<this.Nb;b++){for(var a=0;4>a;a++)j[a]="encrypt"==c?this.mult_GF256(f[a][b],2)^this.mult_GF256(f[(a+1)%4][b],3)^f[(a+2)%4][b]^f[(a+3)%4][b]:this.mult_GF256(f[a][b],14)^this.mult_GF256(f[(a+1)%4][b],11)^this.mult_GF256(f[(a+2)%4][b],13)^this.mult_GF256(f[(a+3)%4][b],9);for(a=0;4>a;a++)f[a][b]=j[a]}},addRoundKey:function(f,
c){for(var j=0;j<this.Nb;j++)f[0][j]^=c[j]&255,f[1][j]^=c[j]>>8&255,f[2][j]^=c[j]>>16&255,f[3][j]^=c[j]>>24&255},keyExpansion:function(f){var c=[];this.Nk=this.keySizeInBits/32;this.Nb=this.blockSizeInBits/32;this.Nr=this.roundsArray[this.Nk][this.Nb];for(var j=0;j<this.Nk;j++)c[j]=f[4*j]|f[4*j+1]<<8|f[4*j+2]<<16|f[4*j+3]<<24;for(j=this.Nk;j<this.Nb*(this.Nr+1);j++)f=c[j-1],0==j%this.Nk?f=(this.SBox[f>>8&255]|this.SBox[f>>16&255]<<8|this.SBox[f>>24&255]<<16|this.SBox[f&255]<<24)^this.Rcon[Math.floor(j/
this.Nk)-1]:6<this.Nk&&4==j%this.Nk&&(f=this.SBox[f>>24&255]<<24|this.SBox[f>>16&255]<<16|this.SBox[f>>8&255]<<8|this.SBox[f&255]),c[j]=c[j-this.Nk]^f;return c},Round:function(f,c){this.byteSub(f,"encrypt");this.shiftRow(f,"encrypt");this.mixColumn(f,"encrypt");this.addRoundKey(f,c)},InverseRound:function(f,c){this.addRoundKey(f,c);this.mixColumn(f,"decrypt");this.shiftRow(f,"decrypt");this.byteSub(f,"decrypt")},FinalRound:function(f,c){this.byteSub(f,"encrypt");this.shiftRow(f,"encrypt");this.addRoundKey(f,
c)},InverseFinalRound:function(f,c){this.addRoundKey(f,c);this.shiftRow(f,"decrypt");this.byteSub(f,"decrypt")},encrypt:function(f,c){var j;if(f&&8*f.length==this.blockSizeInBits&&c){f=this.packBytes(f);this.addRoundKey(f,c);for(j=1;j<this.Nr;j++)this.Round(f,c.slice(this.Nb*j,this.Nb*(j+1)));this.FinalRound(f,c.slice(this.Nb*this.Nr));return this.unpackBytes(f)}},decrypt:function(f,c){var j;if(f&&8*f.length==this.blockSizeInBits&&c){f=this.packBytes(f);this.InverseFinalRound(f,c.slice(this.Nb*this.Nr));
for(j=this.Nr-1;0<j;j--)this.InverseRound(f,c.slice(this.Nb*j,this.Nb*(j+1)));this.addRoundKey(f,c);return this.unpackBytes(f)}},byteArrayToString:function(f){for(var c="",j=f.length,b=0;b<j;b++)0!=f[b]&&(c+=String.fromCharCode(f[b]));return c},stringToByteArray:function(f){for(var c=[],j=f.length,b=0;b<j;b++)c[c.length]=f.charCodeAt();return c},byteArrayToHex:function(f){var c="";if(f){for(var j=f.length,b=0;b<j;b++)c+=(16>f[b]?"0":"")+f[b].toString(16);return c}},hexToByteArray:function(f){var c=
[];if(!(f.length%2)){if(0==f.indexOf("0x")||0==f.indexOf("0X"))f=f.substring(2);for(var j=f.length,b=0;b<j;b+=2)c[Math.floor(b/2)]=parseInt(f.slice(b,b+2),16);return c}},packBytes:function(f){var c=[];if(f&&!(f.length%4)){c[0]=[];c[1]=[];c[2]=[];c[3]=[];for(var j=f.length,b=0;b<j;b+=4)c[0][b/4]=f[b],c[1][b/4]=f[b+1],c[2][b/4]=f[b+2],c[3][b/4]=f[b+3];return c}},unpackBytes:function(f){for(var c=[],j=f[0].length,b=0;b<j;b++)c[c.length]=f[0][b],c[c.length]=f[1][b],c[c.length]=f[2][b],c[c.length]=f[3][b];
return c},formatPlaintext:function(f){var c=this.blockSizeInBits/8,j;if("string"==typeof f||f.indexOf){var f=f.split(""),b=f.length;for(j=0;j<b;j++)f[j]=f[j].charCodeAt(0)&255}for(j=c-f.length%c;0<j&&j<c;j--)f[f.length]=0;return f},rijndaelEncrypt:function(f,c){var j,b,a,d=this.blockSizeInBits/8,k;if(f&&c&&8*c.length==this.keySizeInBits){mode="ECB";k=[];f=this.formatPlaintext(f);j=this.keyExpansion(c);for(var g=0;g<f.length/d;g++){a=f.slice(g*d,(g+1)*d);if("CBC"==mode)for(b=0;b<d;b++)a[b]^=k[g*d+
b];k=k.concat(this.encrypt(a,j))}return k}},rijndaelDecrypt:function(f,c,j){var b=this.blockSizeInBits/8,a=[],d,k;if(f&&(c&&"string"!=typeof f)&&8*c.length==this.keySizeInBits){j||(j="ECB");c=this.keyExpansion(c);for(k=f.length/b-1;0<k;k--)if(d=this.decrypt(f.slice(k*b,(k+1)*b),c),"CBC"==j)for(var g=0;g<b;g++)a[(k-1)*b+g]=d[g]^f[(k-1)*b+g];else a=d.concat(a);"ECB"==j&&(a=this.decrypt(f.slice(0,b),c).concat(a));return a}},_init:function(){this.Nk=this.keySizeInBits/32;this.Nb=this.blockSizeInBits/
32;this.Nr=this.roundsArray[this.Nk][this.Nb]}};
gx.ui=function(f){return{grid:function(){this.gridContainer=null;this.firstTime=!0;this.loadingCollection=this.autoRefreshing=!1;this.properties=[];this.setContainerDelayed=function(c){this.gridContainer=c;this.DesignContainerName=this.ContainerName=gx.dom.id(c);this.ParentObject.setUserControl(this)};this.getContainerControl=function(){return this.gridContainer};this.me=function(){return this.gridObject()+".grid"};this.render=function(c,b,a,d){this.clearFunctions();this.refreshDynProperties();this.properties=
[];for(var f=0;f<this.rows.length;f++){this.properties[f]=[];for(var g=this.rows[f],o=0;o<this.columns.length;o++){var l=this.columns[o],m=g.gxProps[l.index],n=l.gxControl;n.grid=this.ownerGrid;n.row=g;n.gridId=this.gxId;n.gridRow=g.gxId;a?n.value=m[0]:n.setProperties.apply(n,m);this.setRenderProperties(g.gxRenderProps[o],n);!n.enabled&&n.type<=gx.html.controls.types.checkBox&&(""!==n.cssClass&&0!==n.cssClass.indexOf("Readonly"))&&(n.cssClass="Readonly"+n.cssClass);this.properties[f][o]=gx.lang.clone(n);
this.addC2V(l,this.properties[f][o])}}this.firstTime=c;this.autoRefreshing=b?!0:!1;this.loadingCollection=a?!0:!1;this.show&&(this.setC2ShowFunction(function(a){a.show();d()}),this.autoRefreshing&&(this.show(),d()));this.autoRefreshing=!1};this.addC2V=function(c,b){this.addC2VFunction(function(a){if(""!==c.gxAttName){var d=a.ParentObject.getValidStruct(c.gxId);d&&(a.ParentObject[d.gxvar]=b.value);gx.fn.setHidden(b.id,b.value)}})};this.setRenderProperties=function(c,b){if(c)for(var a in c)b[a]=c[a]};
this.selectRow=function(c){if(c=this.rows[c])this.instanciateSelectionVars(c.gxId),this.instanciateSelectedRow(c)};this.getEventRow=function(){return!gx.lang.emptyObject(this.GridRow)?this.GridRow:"0001"};this.executeEvent=function(c,b){if(c<this.columns.length&&b<this.rows.length){var a=this.properties[b][c],d=gx.html.controls.eventJSCode(a.jsScrCode,a.eventName,a.jsDynCode,a.grid,a.row);if(""!==d)gx.lang.emptyObject(a.usrOnclick)||(d="if("+a.usrOnclick+") { "+d+" }"),a=new Function(d),"function"==
typeof a&&a();else if(a.clickEvent){var d=this.parentGxObject,f=a.row.gxId;this.ownerGrid.instanciateRow(f);d[a.clickEvent].call(d,f)}}};this.executeIsValid=function(c,b){if(c<this.columns.length&&b<this.rows.length){var a=this.parentGxObject,d=this.properties[b][c],f=d.vStruct||a.GXValidFnc[d.column.gxId],d=d.row.gxId;f&&f.isvalid&&(this.ownerGrid.instanciateRow(d),a[f.isvalid].call(a))}};this.addEventHandler=function(c,b){this[c]=function(a){var d=this.isServerEvent(c);d&&a&&gx.fx.obs.addObserver("gx.onafterevent",
this,a,{single:!0});this.eventHandler(this.GridId,gx.fn.currentGridRow(this.GridId),b);!d&&a&&a.call(this)}.closure(this)};var c={};this.requestSuggest=function(j,b,a){var d=f.Deferred();if(j<this.columns.length&&b<this.rows.length){var k=this.parentGxObject,b=this.properties[b][j],j=b.vStruct||k.GXValidFnc[b.column.gxId],b=b.row.gxId,g=c[b+"_"+j.id];!g&&(j&&j.gxsgprm)&&(this.ownerGrid.instanciateRow(b),g=new gx.fx.suggestProvider(k,j.gxsgprm[1],null,j.gxsgprm[0]),c[b+"_"+j.id]=g);g?(gx.fx.updateSuggestParms(j.gxsgprm[2]),
g.requestSuggestions([],function(){d.resolve(g.values)},function(){d.reject()},a)):d.reject()}else d.reject();return d.promise()};this.executeValidate=function(c,b){if(c<this.columns.length&&b<this.rows.length){var a=this.parentGxObject,d=this.properties[b][c],f=d.vStruct||a.GXValidFnc[d.column.gxId],d=d.row.gxId;f&&f.fnc&&(this.ownerGrid.instanciateRow(d),f.fnc.call(a))}}}}}(gx.$);gx._init();window.$?gx.dbg.write("Warning: Using custom $ version."):(window.$=gx.$,gx.dbg.write("Using jquery from GX distr."));
!window.$.fn||!window.$.fn.jquery?gx.dbg.write("Warning: $ is not a jQuery object instance"):gx.dbg.write("global $ is jquery"+window.$.fn.jquery);
window.Modernizr=function(f,c,j){function b(a,b){for(var c in a){var d=a[c];if(!~(""+d).indexOf("-")&&g[d]!==j)return b=="pfx"?d:true}return false}function a(a,c,d){var f=a.charAt(0).toUpperCase()+a.slice(1),g=(a+" "+o.join(f+" ")+f).split(" ");if(typeof c==="string"||typeof c==="undefined")return b(g,c);g=(a+" "+l.join(f+" ")+f).split(" ");a:{var a=g,k;for(k in a){f=c[a[k]];if(f!==j){if(d===false){c=a[k];break a}if(typeof f==="function"){c=f.bind(d||c);break a}c=f;break a}}c=false}return c}var d=
{},k=c.documentElement,c=c.createElement("modernizr"),g=c.style,o=["Webkit","Moz","O","ms"],l=["webkit","moz","o","ms"],c={},m=[],n=m.slice,p,q={}.hasOwnProperty,u;u=typeof q!=="undefined"&&typeof q.call!=="undefined"?function(a,b){return q.call(a,b)}:function(a,b){return b in a&&typeof a.constructor.prototype[b]==="undefined"};if(!Function.prototype.bind)Function.prototype.bind=function(a){var b=this;if(typeof b!="function")throw new TypeError;var c=n.call(arguments,1),d=function(){if(this instanceof
d){var f=function(){};f.prototype=b.prototype;var f=new f,g=b.apply(f,c.concat(n.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(n.call(arguments)))};return d};c.flexbox=function(){return a("flexWrap")};c.history=function(){return!(!f.history||!history.pushState)};c.csstransitions=function(){return a("transition")};for(var s in c)if(u(c,s)){p=s.toLowerCase();d[p]=c[s]();m.push((d[p]?"":"no-")+p)}d.addTest=function(a,b){if(typeof a=="object")for(var c in a)u(a,c)&&d.addTest(c,
a[c]);else{a=a.toLowerCase();if(d[a]!==j)return d;b=typeof b=="function"?b():b;if(typeof enableClasses!=="undefined"&&enableClasses)k.className=k.className+(" "+(b?"":"no-")+a);d[a]=b}return d};g.cssText="";c=null;d._version="2.8.3";d._domPrefixes=l;d._cssomPrefixes=o;d.testProp=function(a){return b([a])};d.testAllProps=a;return d}(this,this.document);
gx.spa=function(f){var c=/<head[^>]*>([\s\S]*?)<\/head>/i,j=/(<body[^>]*>[\s\S]*?<\/body>)/i,b=/<title[^>]*>([\s\S]*?)<\/title>/i,a=/#.*/,d=/#/,k=false,g=false,o=window.location.href,l=true,m={},n,p;"state"in window.history&&(l=false);gx.fx.obs.addObserver("gx.onload",this,function(){if(gx.pO.fullAjax)gx.cache.exceptionsRegEx=/messages\..+\.js/},{single:true});var q=function(){!k&&!g&&this.notify("onnavigatecomplete")};return{timeout:5E3,setTimeout:function(a){this.timeout=a},isSameApp:function(a,
b){var c=a.port===b.port,c=(c=c||a.port===""&&a.protocol==="http:"&&b.port==="80")||a.port===""&&a.protocol==="https:"&&b.port==="443";return a.protocol===b.protocol&&a.hostname===b.hostname&&c},handleClick:function(b){var c=this.getTarget(b),g,j;if(c&&c.tagName.toUpperCase()==="A"&&!(c.getAttribute("href")===null||c.getAttribute("href")===void 0))if(!c.target||!(c.target=="_blank"||c.target=="_parent"&&window.parent!=window||c.target=="_top"&&window.top!=window||c.target.substr(0,1)!="_"&&window.name!=
c.target))if(!(b.which>1||b.metaKey||b.ctrlKey)){j=this.parseUrl(c.href);if(this.isSameApp(location,j)){var k=j.pathname.charAt(0)=="/"?j.pathname:"/"+j.pathname;if(location.pathname.substring(0,location.pathname.lastIndexOf("/"))===k.substring(0,k.lastIndexOf("/"))&&!(j.href.search(d)>=0&&j.href.replace(a,"")===location.href.replace(a,""))&&c.getAttribute("href")!==""&&c.href.indexOf("javascript:")!==0)if(this.ignoreClick)this.ignoreClick=false;else{j=f(c);for(g in m)if(m.hasOwnProperty(g)&&j.is(g))return;
this.navigate({url:c.href,push:true,scrollTo:true,direction:"forward"});b.preventDefault()}}}},redirect:function(a,b){delete gx.referrer;var b=b===void 0||b,c=this.parseUrl(a),d=c.pathname.charAt(0)=="/"?c.pathname:"/"+c.pathname;if(this.isSameApp(location,c))if(location.pathname.substring(0,location.pathname.lastIndexOf("/"))!==d.substring(0,d.lastIndexOf("/")))window.location=a;else{gx.referrer=location.href;this.navigate({url:a,push:b,scrollTo:true,direction:"forward"})}else window.location=a},
setLocation:function(a){if(gx.util.browser.isFirefox())setTimeout(function(){k=false;window.location.href=a},100);else{k=false;window.location=a}},canNavigate:function(){return!k&&!g},isNavigating:function(){return!this.canNavigate()},navigate:function(a){var b,c,d=a.url;if(this.canNavigate()){k=true;this.notify("onbeforenavigate",[d]);if((c=this.request)&&c.readyState<4){c.onreadystatechange=gx.emptyFn;gx.dbg.logMsg("Request cancelled as data ir already being retrieved: "+c.readyState);c.abort()}this.request=
c=gx.http.doCall({method:"GET",url:d,handler:function(f,g,j){var f=j.getResponseHeader("X-SPA-REDIRECT-URL"),l=j.getResponseHeader("X-GXOBJECT");b&&clearTimeout(b);if(j.status==530)this.setLocation(d);else if(f){k=false;setTimeout(gx.spa.redirect.closure(gx.spa,[f]),100)}else{if(a.push&&c.readyState>0&&l){this.updateState();this.state=this.createState(a);window.history.pushState(null,"",d)}this.processResponse.call(this,g,j,a)}},beforeSend:function(a){this.notify("onbeforesend",[this.createEvent(a,
d),"X-SPA-REQUEST","X-SPA-MP"]);b=setTimeout(this.timeoutHandler.closure(this,[a,d]),this.timeout);a.setRequestHeader("X-SPA-REQUEST","1")},error:function(a){a=this.createEvent(a,d);a.cancel=true;this.notify("onerror",[a]);a.cancel&&this.setLocation(d)},ajaxHeader:false,avoidCache:false,handleAllStatusCodes:true,obj:this});this.notify("onnavigatestart",[d])}else this.setLocation(d)},processResponse:function(a,b,c){var d;try{d=c.url;var f=this.parseUrl(d).hash,j=c.direction,k=b.getResponseHeader("X-GXOBJECT"),
l=b.getResponseHeader("X-SPA-RETURN"),m=this.createEvent(b,d),n=gx.pO.MasterPage,o=gx.pO.MasterPage?gx.pO.MasterPage.ServerClass:"",p=b.getResponseHeader("X-SPA-MP")||"",q=!(o===""||o.toLowerCase()!=p.toLowerCase()),E=this.getContentPlaceholder();if(l!==null)gx.fn.closeWindowServerScript(l,true);else if(k){this.notify("onbeforeprocessresponse",[m,a,k,o,p,q]);var B=this.extractContents(b,!q),F=q?E.firstChild:document.body,J=B.body;if(B.body){this.state=this.createState(c);c.push&&window.history.replaceState(this.state,
"",d);if(B.title)document.title=B.title;this.notify("onbeforecontentreplace",[b,d,B]);gx.cache.removeRemoteFile(gx.getThemeElement().href);gx.dom.replaceWithFx(F,J,{domRemove:false,domAdd:q,enteringClass:j=="forward"?"entering":"leaving",leavingClass:j=="forward"?"leaving":"entering",enterDurationClass:j=="forward"?"enter-fx-duration":"leave-fx-duration",leaveDurationClass:j=="forward"?"leave-fx-duration":"enter-fx-duration",transitionTimeout:800,transitionEndCallback:function(){J=this.replaceContentCallback(b,
d,f,a,E,B,F,J,c,k,n,o,p,q);q||gx.html.processCode(B.head.innerHTML+B.body.innerHTML,false,this.processCodeCallback.closure(this,[b,d,f,a,E,B,F,J,c,k,n,o,p,q]),null,null,false,true);g=false;this.notify("ontransitionend",[m,n,o,p,q]);this.recoverScrollPosition(c);return J}.closure(this),beforeTransitionStart:function(j){g=true;if(q){gx.html.processCode(a,false,function(){j&&j();this.processCodeCallback(b,d,f,a,E,B,F,J,c,k,n,o,p,q)}.closure(this),null,null,false);return true}}.closure(this)})}else this.setLocation(d)}else this.setLocation(d)}catch(M){gx.dbg.logEx(M,
"gxspa.js","processResponse");this.setLocation(d)}},replaceContentCallback:function(a,b,c,d,g,j,k,l,m,n,o,p,q,E){if(E){if(k.parentNode){this.dettachContent(k);k.parentNode.removeChild(k)}}else{if(gx.util.browser.isWebkit()){this.dettachContent(document.body);document.body.parentNode.removeChild(document.body);var B=document.createElement("body"),a=f(l).prop("attributes");f.each(a,function(){f(B).attr(this.name,this.value)});document.documentElement.appendChild(B);B.innerHTML=l.innerHTML;l=B}else{document.body=
l;l=document.body}document.head=j.head}return l},processCodeCallback:function(a,b,c,d,f,g,j,l,m,n,o,p,q,E){a=this.createEvent(a,b);try{this.notify("oncontentreplace",[a,d,g,n,o,p,q,E])}catch(B){gx.dbg.logEx(B,"gxspa.js","processCodeCallback");this.setLocation(b)}d=true;if(m.scrollTo){window.scrollTo(0,0);d=false}m.push&&window._gaq&&_gaq.push(["_trackPageview"]);m.push&&window.ga&&window.ga("send","pageview",location.pathname);if(c!==""){g=this.parseUrl(b);g.hash=c;window.history.replaceState(this.state,
"",g.href);if(c=gx.dom.el(g.hash)){c.scrollIntoView(true);d=false}}k=false;this.notify("onnavigate",[b]);d&&this.recoverScrollPosition(m)},timeoutHandler:function(a,b){var c=this.createEvent(a,b);c.cancel=true;this.notify("ontimeout",[c]);if(c.cancel){a.abort();gx.dbg.logMsg("Request cancelled - timeout expired: "+a.readyState);this.setLocation(b)}},getContentPlaceholder:function(){return gx.dom.byClass("gx-content-placeholder")[0]},extractContents:function(a,d){var g=document.createElement("div"),
k={},l,m,n;if(d){g=document.createElement("iframe");g.src="about:blank";g.style.display="none";document.body.appendChild(g);var o=a.responseText.match(c);o.length>1&&(l=o[1]);o=a.responseText.match(j);o.length>0&&(m=o[0]);o=a.responseText.match(b);if(o.length>1)k.title=o[1];g.contentDocument&&g.contentDocument.body==null&&g.contentDocument.write("<body></body>");g.contentDocument.body.outerHTML=m;n=g.contentDocument.head;n.innerHTML=l;f("head script").each(function(a,b){f(n).find("script").each(function(a,
c){b.src==c.src&&n.removeChild(c)})});k.body=g.contentDocument.body;k.head=n}else{gx.html.setInnerHtml(g,a.responseText,false,false,false);l=gx.dom.byClass("gx-content-placeholder","div",g);if(l.length===0)return k;k.body=l[0].firstChild;l=gx.dom.byTag("title",g);if(l.length>0)k.title=l[0].innerText||l[0].textContent}return k},handlePopState:function(a){var a=a.state,b=this.getContentPlaceholder();if(a&&a.source=="gx-spa"&&!(l&&o==a.url)){this.navigate({id:a.id,url:a.url,push:false,scrollPosition:a.scrollPosition,
direction:this.state.id<a.id?"forward":"back"});b&&void 0}},parseUrl:function(a){var b=document.createElement("a");b.href=a;return b},createEvent:function(a,b){return{req:a,url:b,cancel:false}},addIgnoredSelector:function(a){m[a]=true},removeIgnoredSelector:function(a){delete m[a]},recoverScrollPosition:function(a){var b=a.scrollPosition;this.canNavigate()&&(!a.scrollTo&&b)&&window.scrollTo(b.x,b.y)},dettachContent:function(a){var b=gx.dom.getActiveElement();b&&f.contains(a,b)&&gx.dom.purgeElement(b)},
updateState:function(){var a=this.state;a.scrollPosition={x:window.scrollX,y:window.scrollY};window.history.replaceState(a,"",a.url)},createState:function(a){a=a||{};return{id:a.id||(new Date).getTime(),source:"gx-spa",url:a.url}},getTarget:function(a){return a.target&&a.target.tagName=="A"?a.target:gx.dom.findParentByTagName(a.target,"A")},applyConfig:function(a){if(a&&a.listeners)for(var b in a.listeners){var c=a.listeners[b];typeof c=="function"&&this.addObserver(b,a.listeners.scope||this,c)}},
setBodyClass:function(){var a="Form",b=document.body;b.className&&(a=b.className.split(" ")[0]);gx.dom.hasClass(b,a+"-fx")||gx.dom.addClass(b,a+"-fx")},isSupported:function(){return gx.pO.fullAjax&&Modernizr.history&&!(gx.util.browser.isChrome()&&window.parent!=window)},start:function(a){if(this.isSupported()&&!this.started){this.applyConfig(a);n=this.handleClick.closure(this);p=this.handlePopState.closure(this);document.addEventListener("click",n,false);window.addEventListener("popstate",p,false);
this.state=this.createState({url:location.href});window.history.replaceState(this.state,document.title);this.setBodyClass();this.started=true;this.addObserver("onnavigate",this,q);this.addObserver("ontransitionend",this,q)}},stop:function(){if(this.started){document.removeEventListener("click",n,false);window.removeEventListener("popstate",p,false);this.started=false}}}}(gx.$);gx.lang.apply(gx.spa,new gx.util.Observable);
gx.livePrev=function(){gx.ajax.getPostInfo("",false);postInfo=gx.ajax.getPostInfo("",false);return{}}(gx.$);
gx.livePrevWS={FIRST_PORT:30100,LAST_PORT:30120,MAX_RETRY:3,retry_count:0,onError:function(){if(gx.livePrevWS.IPNamesIdx<gx.livePrevWS.IPNames.length-1){gx.livePrevWS.IPNamesIdx=gx.livePrevWS.IPNamesIdx+1;gx.livePrevWS.host=gx.livePrevWS.IPNames[gx.livePrevWS.IPNamesIdx];gx.livePrev.port=gx.livePrevWS.FIRST_PORT;gx.livePrevWS.Connect()}else if(gx.livePrev.port<gx.livePrevWS.LAST_PORT){gx.livePrevWS.IPNamesIdx=0;gx.livePrev.port=gx.livePrev.port+1;gx.livePrevWS.Connect()}else gx.util.alert.showMessage("Can not Connect to LivePreview",
{dismissmitAt:5E3})},onMessage:function(f){var c=function(a){var b=$.map(document.styleSheets,function(b){return b.href==a?b:null});return b.length>0?b[0]:void 0},j=function(a,b){return(a||"").replace(/(\r\n|\r|\n| )/gm,"").toLowerCase()==(b||"").replace(/(\r\n|\r|\n| )/gm,"").toLowerCase()},b=function(a,b,c){var f=a.cssRules,l=f.length;$.each(f,function(c,f){if(f&&f.selectorText&&j(f.selectorText,b.replace(":","::"))){a.deleteRule(c);l=c}});a.insertRule(c,l)},a=function(a){var f=gx.getThemeElement();
if(f=c(f.href))for(var g=a.indexOf("@media",0)==0,o=a.split(/{|}/),l=0;l<o.length-1;l=l+2){var m=o[l].replace(/(\r\n|\r|\n| )/gm,"");gx.lang.emptyObject(m)||(g?$.each(f.cssRules,function(a,c){if(g&&!c.selectorText){var d=c.cssText.split(/{/)[0];if(j(d.replace(/ all and/gm,""),m)){m=o[l+1].replace(/(\r\n|\r|\n| )/gm,"");b(c,m,m+" {"+o[l+2]+"}")}}}):b(f,m,m+" {"+o[l+1]+"}"))}},f=gx.json.evalJSON(f);if(f.Type==="KBOK")gx.util.alert.showMessage("Connected to LivePreview at "+gx.livePrevWS.host+" on port "+
gx.livePrev.port,{dismissmitAt:2E3});else if(f.Type==="KBDoesNotMatchGUID")gx.livePrevWS.onError();else f.Type==="ThemeStyleChanged"&&a(f.Data)},onOpen:function(){gx.livePrevWS.timeOutHdlr&&clearTimeout(gx.livePrevWS.timeOutHdlr);gx.livePrevWS.retry_count=0;gx.livePrevWS.SocketConnect()},onTimeout:function(){gx.livePrevWS.webSocket.close();gx.livePrevWS.onError()},SocketConnect:function(){objData={KBUUID:gx.livePrevWS.KBUUID,Language:gx.languageCode,KBName:"TestWS",DeviceName:"Web Simulator",DeviceId:gx.livePrevWS.clientGUID,
DeviceType:0,DeviceOSName:"Web",Theme:gx.theme,Type:"Connect",Data:{Name:gx.livePrevWS.KBName,UUID:gx.livePrevWS.KBUUID}};gx.livePrevWS.webSocket.send(gx.json.serializeJson(objData))},Connect:function(){var f={};gx.livePrev.port=gx.livePrev.port||gx.livePrevWS.FIRST_PORT;f.port=gx.livePrev.port;f.wsProtocol=location.protocol==="https:"?"wss://":"ws://";f.host=gx.livePrevWS.host+":"+f.port;f.resourceUrl="/live/";f.namespace="livepreview";f.maxRetries=10;f.retryDelay=50;gx.livePrevWS.webSocket&&gx.livePrevWS.webSocket.close();
gx.livePrevWS.webSocket=new gx.webSocket(f);gx.livePrevWS.timeOutHdlr=setTimeout(gx.livePrevWS.onTimeout,3E3)},_init:function(){if(!gx.lang.emptyObject(gx.livePreviewUri)){gx.fx.obs.addObserver("gx.ws.onOpen.livepreview",gx.livePrevWS,gx.livePrevWS.onOpen,{single:false});gx.fx.obs.addObserver("gx.ws.onMessage.livepreview",gx.livePrevWS,gx.livePrevWS.onMessage,{single:false});gx.fx.obs.addObserver("gx.ws.onError.livepreview",gx.livePrevWS,gx.livePrevWS.onError,{single:false});gx.fx.obs.addObserver("gx.ws.onCtxError.livepreview",
gx.livePrevWS,gx.livePrevWS.onError,{single:false});if(!gx.livePrevWS.clientGUID){var f=gx.livePrevWS,c=gx.http.getCookie("GXClientID"),c=c||gx.guid.generate();gx.http.setCookie("GXClientID",c,1);f.clientGUID=c}var f="",c=[],j=gx.livePreviewUri.split("?");if(j.length>0){j=j[1];j=j.split(":");if(j.length>2){f=j[1];c=j[2].substring(1,j[2].length-1).split(",");j=j[0]}}gx.livePrevWS.IPNamesIdx=0;gx.livePrevWS.IPNames=c;gx.livePrevWS.KBName=f;gx.livePrevWS.KBUUID=j;gx.livePrevWS.host=gx.livePrevWS.IPNames[0];
gx.http.loadScript(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"html2canvas.js?"+gx.gxBuild,false),gx.livePrevWS.Connect)}}};
gx.nav=function(){var f=function(){var a={top:true,right:true,bottom:true,left:true};return function(b){return!!a[b.toLowerCase()]}}(),c=function(a){var b=a;gx.gen.isDotNet()&&(b=a.replace(/\.aspx$/,""));gx.gen.isJava()&&(gx.pO.PackageName&&gx.text.startsWith(a,gx.pO.PackageName))&&(b=a.substring(gx.pO.PackageName.length+1));return b},j=function(a){var a=a.split("?"),b,c,f;if(a.length>0){b=a.length==2?a[1].split(","):[];c=0;for(f=b.length;c<f;c++)b[c]=decodeURIComponent(b[c]);return{obj:a[0],args:b}}return false},
b={};return{setCallTarget:function(a,c){b[a.toLowerCase()]=c.toLowerCase()},willRedirect:function(a){return gx.pO&&!gx.pO.fullAjax?true:!f(b[c(a).toLowerCase()]||"")},willRedirectByUrl:function(a){a=j(a);return this.willRedirect(a.obj,a.args)},call:function(a,d,j){var g=c(a),o=gx.pO.MasterPage,j=j||b[g.toLowerCase()]||"";delete b[g.toLowerCase()];gx.pO&&!gx.pO.fullAjax?gx.http.redirect(gx.http.formatLink(a,d),false,false,gx.pO):f(j)?o&&o.createObjectInTarget(j,g,d):gx.http.redirect(gx.http.formatLink(a,
d),false,false,gx.pO)},callUrl:function(a,b){var c=j(a);c&&this.call(c.obj,c.args,b)},callFromServerRedirect:function(a,b){this.callUrl(a,b)}}}(gx.$);
gx.ui.controls={datePicker:function(f){this.$input=$("#"+f.inputId);this.$trigger=$("#"+f.triggerId);this.showInLine=f.inline;this.inputType=f.inputType;this.format=f.format;this.datePartLength=f.datePartLength;this.timePartLength=f.timePartLength;this.nativeSupport=gx.HTML5&&(gx.util.browser.isIPhone()||gx.util.browser.isIPad()||gx.util.browser.isAndroid()&&gx.util.browser.isChrome());this.afterChange=f.afterChange;this.opts=f;this.getInputType=function(){return this.timePartLength>0&&this.datePartLength===
0?"time":this.datePartLength>0&&this.timePartLength===0?"date":"datetime-local"};this.getTimeStep=function(){return this.timePartLength>6?1:60};this.resolveValue=function(c,f){var b;gx.date.isNullDate(f)&&c!=="time"&&(f=new Date);if(c=="date")b=f.toISOString().slice(0,10);else{f.setMinutes(f.getMinutes()-f.getTimezoneOffset());b=0;var a=19;if(c=="time"){b=11;a=this.getTimeStep()==60?16:19}b=(new gx.date.gxdate(f)).Value.toISOString().slice(b,a)}return b};this.render=function(){if(this.nativeSupport){var c=
this.$input,f=this.getInputType(),b=$("<input>");b.attr("type",f);(f==="time"||f==="datetime-local")&&b.attr("step",this.getTimeStep());b.css("position","absolute");b.css("top","0");b.css("left","0");b.css("opacity","0");b.attr("id",c.attr("id")+"-picker");this.dtPicker=b;c.parent().append(b);var a=this,d=function(b){var b=b.val(),d=new gx.date.gxdate(b,"Y4MD"),b=b!==""?d.Value:gx.date.nullDate();a.afterChange&&a.afterChange(null,b,c[0])};this.$trigger.on("click",function(){var k=gx.date.dateObject(c.val());
if(!gx.date.isNullDate(k)){k=a.resolveValue(f,k);b.val(k);d(b)}b.click().focus()});gx.evt.attach(b[0],"change",function(){var a=$(this);d(a)})}else gx.html.onTypeAvailable("Calendar",this.installCalendar,[this.opts.inputId,this.opts.inline,this.opts.inputType!=="date",this.opts.weeksNumbers,this.opts.mondayFirst,this.opts.format])};this.installCalendar=function(c,f,b,a,d,k){var g=gx.dom.el(c),o=$(g);if(gx.lang.emptyObject(g)||g.nodeName!="SELECT")if(f===0){f=c+"_dp_trigger";if((g=gx.dom.el(f))&&o.css("display")!==
"none"&&o.css("visibility")!=="hidden"&&o.css("display")==="none"||o.css("visibility")==="hidden"||!g)f=c;o=o.parent().closest(".dp_container")[0];Calendar.setup({inputField:c,parentNode:o,showsTime:b,weekNumbers:a,mondayFirst:d,ifFormat:k,button:f,onSelect:gx.fn.datePickerChanged,align:"Bl",singleClick:true,displayRight:false})}else{gx.lang.emptyObject(g)||o.css("display","none");Calendar.setup({inputField:c,showsTime:b,weekNumbers:a,mondayFirst:d,ifFormat:k,flat:c+"_dp_container",flatCallback:gx.fn.datePickerChanged,
align:"Bl",singleClick:true})}}},actionGroup:{dynamicItems:function(){return function(f){this.preProcessItems=function(c){var f,b;f=0;for(b=c.length;f<b;f++)c[f].Children?this.preProcessItems(c[f].Children):c[f].Children=[]};this.getItems=function(){return this.items};this.setItems=function(c){this.preProcessItems(c);this.items=c||[]};this.getType=function(c){var j;return function(){j||(j=f(c.getContainerControl()).closest("[data-gx-actiongroup-type]").attr("data-gx-actiongroup-type"));return j}}(this);
this.renderMenu=function(c){var j="";this.IsPostBack?f('li[data-gx-dynitem-source="'+this.ContainerName+'"]').remove():f(this.getContainerControl()).after('<li data-gx-dynitem-hook="'+this.ContainerName+'"></li>').css("display","none").appendTo(gx.dom.form());if(c.length){j=Mustache.render("{{#Children}}{{> navbarItemTemplate}}{{/Children}}",{containerName:this.ContainerName,Children:c},{navbarItemTemplate:'<li data-gx-dynitem-source="{{containerName}}">{{#Link}}<a href="{{Link}}" class="gx-navbar-textblock {{Class}}" data-gx-tpl-applied-navbar-textblock-link title="{{TooltipText}}">{{Caption}}</a>{{/Link}}{{^Link}}{{#Children.length}}{{> navbarDropDowntemplate}}{{/Children.length}}{{^Children.length}}<span class="gx-navbar-textblock {{Class}} navbar-text" data-gx-tpl-applied-navbar-textblock-text title="{{TooltipText}}">{{Caption}}</a>{{/Children.length}}{{/Link}}</li>',
navbarDropDowntemplate:'<li class="dropdown" data-gx-dynitem-source="{{containerName}}"><a href="#" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle" title="{{TooltipText}}">{{Caption}}<span class="caret"></span></a><ul class="gx-dropdown-menu dropdown-menu {{Class}}">{{#Children}}{{> navbarItemTemplate}}{{/Children}}</ul></li>'});f('li[data-gx-dynitem-hook="'+this.ContainerName+'"]').after(j)}};this.renderToolbar=function(c){var j="";c.length&&
(j=Mustache.render('{{#Children}}{{#Link}}<span class="{{Class}}" title="{{TooltipText}}"><a href="{{Link}}">{{Caption}}</a></span>{{/Link}}{{^Link}}{{#Children.length}}<div class="btn-group">{{> toolbarItemTemplate}}</div>{{/Children.length}}{{^Children.length}}<span class="{{Class}}" title="{{TooltipText}}">{{Caption}}</span>{{/Children.length}}{{/Link}}{{/Children}}',{containerName:this.ContainerName,Children:c},{toolbarItemTemplate:'{{#Children}}{{#Link}}<span class="{{Class}}" title="{{TooltipText}}"><a href="{{Link}}">{{Caption}}</a></span>{{/Link}}{{^Link}}{{#Children.length}}<div class="btn-group">{{> toolbarItemTemplate}}</div>{{/Children.length}}{{^Children.length}}<span class="{{Class}}" title="{{TooltipText}}">{{Caption}}</span>{{/Children.length}}{{/Link}}{{/Children}}'}));
f(this.getContainerControl()).attr("data-gx-dynitem-container","").html(j)};this.show=function(){var c=this.getType(),f=gx.lang.isArray(this.items)?this.items:[this.items];c=="menu"?this.renderMenu(f):c=="toolbar"&&this.renderToolbar(f)};this.destroy=function(){var c=this.getType();if(c=="menu"){f('li[data-gx-dynitem-source="'+this.ContainerName+'"]').remove();f('li[data-gx-dynitem-hook="'+this.ContainerName+'"]').after(this.getContainerControl()).remove()}else c=="toolbar"&&f(this.getContainerControl()).html("")}}}()}};
(function(f){typeof define==="function"&&define.amd?define(["jquery"],f):f(jQuery)})(function(f){(function(){function c(a,b,c){return[parseFloat(a[0])*(q.test(a[0])?b/100:1),parseFloat(a[1])*(q.test(a[1])?c/100:1)]}function j(a,b){return parseInt(f.css(a,b),10)||0}function b(a){var b=a[0];return b.nodeType===9?{width:a.width(),height:a.height(),offset:{top:0,left:0}}:f.isWindow(b)?{width:a.width(),height:a.height(),offset:{top:a.scrollTop(),left:a.scrollLeft()}}:b.preventDefault?{width:0,height:0,
offset:{top:b.pageY,left:b.pageX}}:{width:a.outerWidth(),height:a.outerHeight(),offset:a.offset()}}f.ui=f.ui||{};var a,d,k=Math.max,g=Math.abs,o=Math.round,l=/left|center|right/,m=/top|center|bottom/,n=/[\+\-]\d+(\.[\d]+)?%?/,p=/^\w+/,q=/%$/,u=f.fn.position;f.position={scrollbarWidth:function(){if(a!==void 0)return a;var b,c,d=f("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");c=d.children()[0];f("body").append(d);
b=c.offsetWidth;d.css("overflow","scroll");c=c.offsetWidth;if(b===c)c=d[0].clientWidth;d.remove();return a=b-c},getScrollInfo:function(a){var b=a.isWindow||a.isDocument?"":a.element.css("overflow-x"),c=a.isWindow||a.isDocument?"":a.element.css("overflow-y"),b=b==="scroll"||b==="auto"&&a.width<a.element[0].scrollWidth;return{width:c==="scroll"||c==="auto"&&a.height<a.element[0].scrollHeight?f.position.scrollbarWidth():0,height:b?f.position.scrollbarWidth():0}},getWithinInfo:function(a){var a=f(a||
window),b=f.isWindow(a[0]),c=!!a[0]&&a[0].nodeType===9;return{element:a,isWindow:b,isDocument:c,offset:a.offset()||{left:0,top:0},scrollLeft:a.scrollLeft(),scrollTop:a.scrollTop(),width:b||c?a.width():a.outerWidth(),height:b||c?a.height():a.outerHeight()}}};f.fn.position=function(a){if(!a||!a.of)return u.apply(this,arguments);var a=f.extend({},a),r,q,v,y,z,C,D=f(a.of),x=f.position.getWithinInfo(a.within),H=f.position.getScrollInfo(x),w=(a.collision||"flip").split(" "),A={};C=b(D);if(D[0].preventDefault)a.at=
"left top";q=C.width;v=C.height;y=C.offset;z=f.extend({},y);f.each(["my","at"],function(){var b=(a[this]||"").split(" "),c,d;b.length===1&&(b=l.test(b[0])?b.concat(["center"]):m.test(b[0])?["center"].concat(b):["center","center"]);b[0]=l.test(b[0])?b[0]:"center";b[1]=m.test(b[1])?b[1]:"center";c=n.exec(b[0]);d=n.exec(b[1]);A[this]=[c?c[0]:0,d?d[0]:0];a[this]=[p.exec(b[0])[0],p.exec(b[1])[0]]});w.length===1&&(w[1]=w[0]);if(a.at[0]==="right")z.left=z.left+q;else if(a.at[0]==="center")z.left=z.left+
q/2;if(a.at[1]==="bottom")z.top=z.top+v;else if(a.at[1]==="center")z.top=z.top+v/2;r=c(A.at,q,v);z.left=z.left+r[0];z.top=z.top+r[1];return this.each(function(){var b,l,m=f(this),n=m.outerWidth(),p=m.outerHeight(),u=j(this,"marginLeft"),C=j(this,"marginTop"),V=n+u+j(this,"marginRight")+H.width,U=p+C+j(this,"marginBottom")+H.height,K=f.extend({},z),T=c(A.my,m.outerWidth(),m.outerHeight());if(a.my[0]==="right")K.left=K.left-n;else if(a.my[0]==="center")K.left=K.left-n/2;if(a.my[1]==="bottom")K.top=
K.top-p;else if(a.my[1]==="center")K.top=K.top-p/2;K.left=K.left+T[0];K.top=K.top+T[1];if(!d){K.left=o(K.left);K.top=o(K.top)}b={marginLeft:u,marginTop:C};f.each(["left","top"],function(c,d){if(f.ui.position[w[c]])f.ui.position[w[c]][d](K,{targetWidth:q,targetHeight:v,elemWidth:n,elemHeight:p,collisionPosition:b,collisionWidth:V,collisionHeight:U,offset:[r[0]+T[0],r[1]+T[1]],my:a.my,at:a.at,within:x,elem:m})});a.using&&(l=function(b){var c=y.left-K.left,d=c+q-n,f=y.top-K.top,j=f+v-p,l={target:{element:D,
left:y.left,top:y.top,width:q,height:v},element:{element:m,left:K.left,top:K.top,width:n,height:p},horizontal:d<0?"left":c>0?"right":"center",vertical:j<0?"top":f>0?"bottom":"middle"};if(q<n&&g(c+d)<q)l.horizontal="center";if(v<p&&g(f+j)<v)l.vertical="middle";l.important=k(g(c),g(d))>k(g(f),g(j))?"horizontal":"vertical";a.using.call(this,b,l)});m.offset(f.extend(K,{using:l}))})};f.ui.position={fit:{left:function(a,b){var c=b.within,d=c.isWindow?c.scrollLeft:c.offset.left,f=c.width,g=a.left-b.collisionPosition.marginLeft,
c=d-g,j=g+b.collisionWidth-f-d;if(b.collisionWidth>f)if(c>0&&j<=0){d=a.left+c+b.collisionWidth-f-d;a.left=a.left+(c-d)}else a.left=j>0&&c<=0?d:c>j?d+f-b.collisionWidth:d;else a.left=c>0?a.left+c:j>0?a.left-j:k(a.left-g,a.left)},top:function(a,b){var c=b.within,d=c.isWindow?c.scrollTop:c.offset.top,f=b.within.height,g=a.top-b.collisionPosition.marginTop,c=d-g,j=g+b.collisionHeight-f-d;if(b.collisionHeight>f)if(c>0&&j<=0){d=a.top+c+b.collisionHeight-f-d;a.top=a.top+(c-d)}else a.top=j>0&&c<=0?d:c>j?
d+f-b.collisionHeight:d;else a.top=c>0?a.top+c:j>0?a.top-j:k(a.top-g,a.top)}},flip:{left:function(a,b){var c=b.within,d=c.offset.left+c.scrollLeft,f=c.width,j=c.isWindow?c.scrollLeft:c.offset.left,k=a.left-b.collisionPosition.marginLeft,c=k-j,l=k+b.collisionWidth-f-j,k=b.my[0]==="left"?-b.elemWidth:b.my[0]==="right"?b.elemWidth:0,m=b.at[0]==="left"?b.targetWidth:b.at[0]==="right"?-b.targetWidth:0,n=-2*b.offset[0];if(c<0){d=a.left+k+m+n+b.collisionWidth-f-d;if(d<0||d<g(c))a.left=a.left+(k+m+n)}else if(l>
0){d=a.left-b.collisionPosition.marginLeft+k+m+n-j;if(d>0||g(d)<l)a.left=a.left+(k+m+n)}},top:function(a,b){var c=b.within,d=c.offset.top+c.scrollTop,f=c.height,j=c.isWindow?c.scrollTop:c.offset.top,k=a.top-b.collisionPosition.marginTop,c=k-j,l=k+b.collisionHeight-f-j,k=b.my[1]==="top"?-b.elemHeight:b.my[1]==="bottom"?b.elemHeight:0,m=b.at[1]==="top"?b.targetHeight:b.at[1]==="bottom"?-b.targetHeight:0,n=-2*b.offset[1];if(c<0){d=a.top+k+m+n+b.collisionHeight-f-d;if(d<0||d<g(c))a.top=a.top+(k+m+n)}else if(l>
0){d=a.top-b.collisionPosition.marginTop+k+m+n-j;if(d>0||g(d)<l)a.top=a.top+(k+m+n)}}},flipfit:{left:function(){f.ui.position.flip.left.apply(this,arguments);f.ui.position.fit.left.apply(this,arguments)},top:function(){f.ui.position.flip.top.apply(this,arguments);f.ui.position.fit.top.apply(this,arguments)}}};(function(){var a,b,c,g,j=document.getElementsByTagName("body")[0];c=document.createElement("div");a=document.createElement(j?"div":"body");b={visibility:"hidden",width:0,height:0,border:0,margin:0,
background:"none"};j&&f.extend(b,{position:"absolute",left:"-1000px",top:"-1000px"});for(g in b)a.style[g]=b[g];a.appendChild(c);b=j||document.documentElement;b.insertBefore(a,b.firstChild);c.style.cssText="position: absolute; left: 10.7432222px;";c=f(c).offset().left;d=c>10&&c<11;a.innerHTML="";b.removeChild(a)})()})()});gx.core={};
gx.core.analytics=function(){return{supported:function(){if(typeof window.ga==="undefined"){console.log("Google Analytics not enabled on this webpage");return false}return true},trackView:function(f){this.supported()&&window.ga("send","pageview",f)},trackEvent:function(f,c,j,b){this.supported()&&window.ga("send",{hitType:"event",eventCategory:f,eventAction:c,eventLabel:j,eventValue:b})},trackPurchase:function(){console.log("Google Analytics Track Purchase Event not implemented")},setUserId:function(f){this.supported()&&
window.ga("set","userId",f)}}}(gx.$);
